(this.webpackJsonp=this.webpackJsonp||[]).push([[27],{534:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t(0),r=t(1),o=t(137),a=t(316),c=t(82);function s(n){var e=n.title,t=n.subtitle;return i.createElement(c.b,{style:l.empty},i.createElement(o.a,null,e),i.createElement(a.a,{style:{textAlign:"center"}},t))}var l=r.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}})},714:function(n,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return C}));var i,r=t(11),o=t.n(r),a=t(57),c=t.n(a),s=t(50),l=t(49),u=t(0),d=t(182),f=t(1),p=t(326),m=t(58),b=t(19),g=t(181),y=t(3),O=t.n(y),h=t(276);function v(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function j(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?v(Object(t),!0).forEach((function(e){O()(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var E=Object(m.a)(i||(i=c()(["\n  query QueryNotifications($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n\n      currentUser {\n        id\n        \n        notifications {\n          edges {\n            node {\n              id\n              message\n              notificationType\n              createdAt\n\n              resource {\n                ...on Load {\n                  id\n                  loadNumber\n                  dispatchAt\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var w,I,S=t(534),A=t(39),N=t.n(A),P=t(56),T=t(199),$=t(318),k=t(713),z=Object(m.a)(w||(w=c()(["\n  mutation MarkAsSeen(\n    $id: Int,\n  ){\n    updateNotification(input: {\n      id: $id\n      attributes: {\n        isSeen: true,\n      }\n    }) {\n      notification {\n        id\n        isSeen\n        message\n        notificationType\n        receivedBy {\n          notifications {\n            edges {\n              node {\n                id\n                message\n                isSeen\n                notificationType\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function M(n){var e=n.notification,t=Object(l.useMutation)(z),i=o()(t,2);i[0],i[1];return u.createElement(u.Fragment,null,u.createElement(P.b.Item,{title:"Manifest",description:e.message,style:{width:"100%"},left:function(n){return u.createElement(P.b.Icon,N()({},n,{icon:"airplane"}))},right:function(){return u.createElement(T.a,null,Object(k.a)(1e3*e.createdAt))}}),u.createElement($.a,{style:{width:"100%"}}))}var x,D=Object(m.a)(I||(I=c()(["\n  mutation MarkAsSeen(\n    $id: Int,\n  ){\n    updateNotification(input: {\n      id: $id\n      attributes: {\n        isSeen: true,\n      }\n    }) {\n      notification {\n        id\n        isSeen\n        message\n        notificationType\n        receivedBy {\n          notifications {\n            edges {\n              node {\n                id\n                message\n                isSeen\n                notificationType\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function B(n){var e=n.notification,t=Object(l.useMutation)(D),i=o()(t,2);i[0],i[1];return u.createElement(u.Fragment,null,u.createElement(P.b.Item,{title:"Load #"+e.resource.loadNumber+" boarding call",description:e.message,style:{width:"100%"},left:function(n){return u.createElement(P.b.Icon,N()({},n,{icon:"airplane-takeoff"}))},right:function(){return u.createElement(T.a,null,Object(k.a)(1e3*e.createdAt))}}),u.createElement($.a,{style:{width:"100%"}}))}var F=Object(m.a)(x||(x=c()(["\n  mutation MarkAsSeen(\n    $id: Int,\n  ){\n    updateNotification(input: {\n      id: $id\n      attributes: {\n        isSeen: true,\n      }\n    }) {\n      notification {\n        id\n        isSeen\n        message\n        notificationType\n        receivedBy {\n          notifications {\n            edges {\n              node {\n                id\n                message\n                isSeen\n                notificationType\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function C(){var n,e,t=Object(b.c)((function(n){return n.global})),i=function(){var n,e,t=Object(b.c)((function(n){return n.global.currentDropzoneId})),i=(Object(h.a)(),Object(l.useQuery)(E,{variables:{dropzoneId:t},pollInterval:3e4}));return j(j({},i),{},{notifications:null==i||null==(n=i.data)||null==(e=n.dropzone)?void 0:e.currentUser.notifications})}(),r=i.notifications,a=i.loading,c=i.refetch,f=Object(s.useIsFocused)();u.useEffect((function(){f&&c()}),[f]);var m=Object(l.useMutation)(F),y=o()(m,2);y[0],y[1];return u.createElement(u.Fragment,null,a&&u.createElement(p.a,{color:t.theme.colors.accent,indeterminate:!0,visible:a}),u.createElement(g.a,{contentContainerStyle:J.content,refreshControl:u.createElement(d.a,{refreshing:a,onRefresh:function(){return c()}})},null!=r&&null!=(n=r.edges)&&n.length?null==r||null==(e=r.edges)?void 0:e.map((function(n){switch(n.node.notificationType){case"boarding_call":return u.createElement(B,{notification:n.node});case"user_manifested":return u.createElement(M,{notification:n.node});default:return null}})):u.createElement(S.a,{title:"No notifications",subtitle:"Notifications will show up here"})))}var J=f.a.create({container:{flex:1},content:{flexGrow:1,paddingBottom:56,paddingHorizontal:0},divider:{height:1,width:"100%"}})}}]);
//# sourceMappingURL=27.1089dbd4.chunk.js.map