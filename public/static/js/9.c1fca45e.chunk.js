(this.webpackJsonp=this.webpackJsonp||[]).push([[9],{423:function(e,t,n){"use strict";var r=n(10),a=n.n(r),o=n(0),i=n(1),l=n(2),c=n(36),s=n(48);function u(){return(u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var d=function(e){var t=e.children,n=e.style,r=e.numeric,i=a()(e,["children","style","numeric"]);return o.createElement(s.a,u({},i,{style:[m.container,r&&m.right,n]}),o.createElement(c.a,{numberOfLines:1},t))};d.displayName="DataTable.Cell";var m=i.a.create({container:{flex:1,flexDirection:"row",alignItems:"center"},right:{justifyContent:"flex-end"}}),f=d,p=n(16),b=n.n(p),h=n(23),g=n(14);function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var v=function(e){var t=e.children,n=e.style,r=e.theme,i=a()(e,["children","style","theme"]),c=b()(r.dark?h.h:h.a).alpha(.12).rgb().string();return o.createElement(l.a,y({},i,{style:[E.header,{borderBottomColor:c},n]}),t)};v.displayName="DataTable.Header";var E=i.a.create({header:{flexDirection:"row",height:48,paddingHorizontal:16,borderBottomWidth:2*i.a.hairlineWidth}}),x=Object(g.c)(v),O=n(5),j=n(62),w=n(25),k=n(67);function I(){return(I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var P=function(e){var t=e.numeric,n=e.children,r=e.onPress,i=e.sortDirection,s=e.theme,u=e.style,d=e.numberOfLines,m=void 0===d?1:d,f=a()(e,["numeric","children","onPress","sortDirection","theme","style","numberOfLines"]),p=o.useRef(new O.a.Value("ascending"===i?0:1)).current;o.useEffect((function(){O.a.timing(p,{toValue:"ascending"===i?0:1,duration:150,useNativeDriver:!0}).start()}),[i,p]);var h=b()(s.colors.text).alpha(.6).rgb().string(),g=p.interpolate({inputRange:[0,1],outputRange:["0deg","180deg"]}),y=i?o.createElement(O.a.View,{style:[C.icon,{transform:[{rotate:g}]}]},o.createElement(k.b,{name:"arrow-up",size:16,color:s.colors.text,direction:w.a.isRTL?"rtl":"ltr"})):null;return o.createElement(j.a,I({disabled:!r,onPress:r},f),o.createElement(l.a,{style:[C.container,t&&C.right,u]},y,o.createElement(c.a,{style:[C.cell,i?C.sorted:{color:h}],numberOfLines:m},n)))};P.displayName="DataTable.Title";var C=i.a.create({container:{flex:1,flexDirection:"row",alignContent:"center",paddingVertical:12},right:{justifyContent:"flex-end"},cell:{height:24,lineHeight:24,fontSize:12,fontWeight:"500",alignItems:"center"},sorted:{marginLeft:8},icon:{height:24,justifyContent:"center"}}),T=Object(g.c)(P),z=n(135);function $(){return($=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var N=function(e){var t=e.label,n=e.page,r=e.numberOfPages,i=e.onPageChange,s=e.style,u=e.theme,d=a()(e,["label","page","numberOfPages","onPageChange","style","theme"]),m=b()(u.colors.text).alpha(.6).rgb().string();return o.createElement(l.a,$({},d,{style:[S.container,s]}),o.createElement(c.a,{style:[S.label,{color:m}],numberOfLines:1},t),o.createElement(z.a,{icon:function(e){var t=e.size,n=e.color;return o.createElement(k.b,{name:"chevron-left",color:n,size:t,direction:w.a.isRTL?"rtl":"ltr"})},color:u.colors.text,disabled:0===n,onPress:function(){return i(n-1)}}),o.createElement(z.a,{icon:function(e){var t=e.size,n=e.color;return o.createElement(k.b,{name:"chevron-right",color:n,size:t,direction:w.a.isRTL?"rtl":"ltr"})},color:u.colors.text,disabled:0===r||n===r-1,onPress:function(){return i(n+1)}}))};N.displayName="DataTable.Pagination";var S=i.a.create({container:{justifyContent:"flex-end",flexDirection:"row",alignItems:"center",paddingLeft:16},label:{fontSize:12,marginRight:44}}),D=Object(g.c)(N);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var L=i.a.create({container:{borderStyle:"solid",borderBottomWidth:i.a.hairlineWidth,minHeight:48,paddingHorizontal:16},content:{flex:1,flexDirection:"row"}}),F=Object(g.c)((function(e){var t=e.onPress,n=e.style,r=e.theme,i=e.children,c=e.pointerEvents,u=a()(e,["onPress","style","theme","children","pointerEvents"]),d=b()(r.dark?h.h:h.a).alpha(.12).rgb().string();return o.createElement(s.a,R({},u,{onPress:t,style:[L.container,{borderBottomColor:d},n]}),o.createElement(l.a,{style:L.content,pointerEvents:c},i))}));function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var B=function(e){var t=e.children,n=e.style,r=a()(e,["children","style"]);return o.createElement(l.a,H({},r,{style:[W.container,n]}),t)};B.Header=x,B.Title=T,B.Row=F,B.Cell=f,B.Pagination=D;var W=i.a.create({container:{width:"100%"}});t.a=B},577:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r=n(0),a=n(1),o=n(144),i=n(339),l=n(134);function c(e){var t=e.title,n=e.subtitle;return r.createElement(l.b,{style:s.empty},r.createElement(o.a,null,t),r.createElement(i.a,{style:{textAlign:"center"}},n))}var s=a.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}})},578:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var r=n(0),a=n(1),o=n(126),i=n(221),l=n(359),c=n(352),s=n(173),u=n(6);function d(e){var t=e.buttonLabel,n=e.buttonAction,a=e.title,d=e.loading,m=e.children,f=Object(u.c)((function(e){return e.global}));return r.createElement(i.a,null,r.createElement(l.a,{visible:!!e.open,dismissable:!1,style:{maxWidth:500,alignSelf:"center"}},r.createElement(c.a,{indeterminate:!0,visible:d,color:f.theme.colors.accent}),r.createElement(l.a.Title,null,a),r.createElement(l.a.Content,{pointerEvents:"box-none"},r.createElement(l.a.ScrollArea,null,r.createElement(o.b,null,m))),r.createElement(l.a.Actions,{style:{justifyContent:"flex-end"}},r.createElement(s.a,{onPress:function(){e.onClose()}},"Cancel"),r.createElement(s.a,{onPress:n},t))))}a.a.create({button:{width:"100%",borderRadius:16,padding:5},contentContainer:{paddingHorizontal:16,paddingBottom:32},sheet:{elevation:3,backgroundColor:"white",flexGrow:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},sheetHeader:{elevation:2,borderTopLeftRadius:20,borderTopRightRadius:20,height:40,shadowColor:"#000",shadowOffset:{width:0,height:-4},backgroundColor:"white",shadowOpacity:.22,shadowRadius:2.22}})},589:function(e,t,n){"use strict";n.d(t,"a",(function(){return v}));var r,a=n(31),o=n.n(a),i=n(38),l=n(32),c=n(0),s=n(1),u=n(2),d=n(251),m=n(249),f=n(21),p=n(252),b=n(84),h=n(6),g=n(290),y=Object(l.a)(r||(r=o()(["\n  query QueryTicketType(\n    $dropzoneId: Int!\n  ) {\n    ticketTypes(dropzoneId: $dropzoneId) {\n      id\n      cost\n      currency\n      name\n      allowManifestingSelf\n\n      extras {\n        id\n        name\n      }\n    }\n  }\n"])));function v(){var e,t,n,r=Object(h.c)((function(e){return e.forms.extra})),a=Object(h.b)(),o=Object(g.a)(),l=Object(i.useQuery)(y,{variables:{dropzoneId:Number(null==o||null==(e=o.dropzone)?void 0:e.id)}}).data;return c.createElement(c.Fragment,null,c.createElement(d.a,{style:E.field,mode:"outlined",label:"Name",error:!!r.fields.name.error,value:r.fields.name.value,onChangeText:function(e){return a(h.a.forms.extra.setField(["name",e]))}}),c.createElement(m.a,{type:r.fields.name.error?"error":"info"},r.fields.name.error||""),c.createElement(d.a,{style:E.field,mode:"outlined",label:"Price",error:!!r.fields.cost.error,value:null==(t=r.fields.cost)||null==(n=t.value)?void 0:n.toString(),onChangeText:function(e){return a(h.a.forms.extra.setField(["cost",Number(e)]))}}),c.createElement(m.a,{type:r.fields.cost.error?"error":"info"},r.fields.cost.error||""),c.createElement(u.a,{style:{width:"100%"}},c.createElement(f.b.Subheader,null,"Compatible tickets"),null==l?void 0:l.ticketTypes.map((function(e){return c.createElement(p.a.Item,{label:e.name,status:r.fields.ticketTypeIds.value.includes(Number(e.id))?"checked":"unchecked",onPress:function(){return a(h.a.forms.extra.setField(["ticketTypeIds",Object(b.xor)(r.fields.ticketTypeIds.value,[Number(e.id)])]))}})}))))}var E=s.a.create({fields:{width:"100%",flex:1},field:{marginBottom:8,width:"100%"}})},746:function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return R}));var r,a,o=n(31),i=n.n(o),l=n(38),c=n(32),s=n(0),u=n(1),d=n(352),m=n(423),f=n(360),p=n(134),b=n(81),h=n(6),g=n(577),y=n(3),v=n.n(y),E=n(9),x=n.n(E),O=n(4),j=n.n(O),w=n(589),k=n(578),I=n(290);function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){v()(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var T=Object(l.gql)(r||(r=i()(["\n  mutation UpdateExtra(\n    $id: Int!,\n    $name: String,\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ){\n    updateExtra(input: {\n      id: $id\n      attributes: {\n        name: $name,\n        ticketTypeIds: $ticketTypeIds\n        cost: $cost\n        dropzoneId: $dropzoneId\n      }\n    }) {\n      extra {\n        ...extra\n\n        dropzone {\n          id\n          extras {\n            ...extra\n          }\n        }\n      }\n    }\n  }\n\n  fragment extra on Extra {\n    id\n    name\n    cost\n\n    ticketTypes {\n      id\n      name\n      cost\n      altitude\n      allowManifestingSelf\n    }\n  }\n"]))),z=Object(l.gql)(a||(a=i()(["\n  mutation CreateExtra(\n    $name: String,\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ){\n    createExtra(input: {\n      attributes: {\n        name: $name,\n        ticketTypeIds: $ticketTypeIds\n        cost: $cost\n        dropzoneId: $dropzoneId\n      }\n    }) {\n      extra {\n        ...extra\n\n        dropzone {\n          id\n          extras {\n            ...extra\n          }\n        }\n      }\n    }\n  }\n\n  fragment extra on Extra {\n    id\n    name\n    cost\n\n    ticketTypes {\n      id\n      name\n      cost\n      altitude\n      allowManifestingSelf\n    }\n  }\n"])));function $(e){var t,n=e.open,r=e.onClose,a=Object(I.a)(),o=Object(h.c)((function(e){return e.forms.extra})),i=Object(h.b)(),c=Object(l.useMutation)(z),u=x()(c,2),d=u[0],m=u[1],f=Object(l.useMutation)(T),p=x()(f,2),b=p[0],g=p[1],y=s.useCallback((function(){var e=!1;return o.fields.name.value.length<3&&(e=!0,i(h.a.forms.extra.setFieldError(["name","Name is too short"]))),Number(o.fields.cost.value)<0&&(e=!0,i(h.a.forms.extra.setFieldError(["cost","Price must be a number"]))),!e}),[JSON.stringify(o.fields),i]),v=s.useCallback((function(){var e,t,n,l,c,s,u,m,f,p,g,v,E,x,O,w;return j.a.async((function(k){for(;;)switch(k.prev=k.next){case 0:if(e=o.fields,t=e.name,n=e.cost,l=e.ticketTypeIds,!y()){k.next=18;break}return s=null!=o&&null!=(c=o.original)&&c.id?b:d,k.prev=3,k.next=6,j.a.awrap(s({variables:C(C({},null!=(u=o.original)&&u.id?{id:Number(o.original.id)}:{}),{},{dropzoneId:Number(null==a||null==(m=a.dropzone)?void 0:m.id),name:t.value,cost:n.value,ticketTypeIds:l.value})}));case 6:if(x=k.sent,null==(O=null!=(f=o.original)&&f.id?null==(p=x.data)?void 0:p.updateExtra:null==(g=x.data)?void 0:g.createExtra)||null==(v=O.errors)||!v.length){k.next=12;break}return k.abrupt("return",i(h.a.notifications.showSnackbar({message:O.errors[0],variant:"error"})));case 12:null!=O&&null!=(E=O.fieldErrors)&&E.length?null==(w=O.fieldErrors)||w.forEach((function(e){var t=e.field,n=e.message;switch(t){case"name":return i(h.a.forms.extra.setFieldError(["name",n]));case"cost":return i(h.a.forms.extra.setFieldError(["cost",n]));case"ticket_type_ids":return i(h.a.forms.extra.setFieldError(["ticketTypeIds",n]))}})):null!=O&&O.extra&&(i(h.a.notifications.showSnackbar({message:"Saved "+O.extra.name,variant:"success"})),r(),i(h.a.forms.extra.reset()));case 13:k.next=18;break;case 15:k.prev=15,k.t0=k.catch(3),i(h.a.notifications.showSnackbar({message:k.t0.message,variant:"error"}));case 18:case"end":return k.stop()}}),null,null,[[3,15]],Promise)}),[JSON.stringify(o.fields),i,d]);return s.createElement(k.a,{title:null!=(t=o.original)&&t.id?"Edit ticket addon":"New ticket addon",open:n,onClose:r,loading:m.loading||g.loading,buttonAction:v,buttonLabel:"Save",snapPoints:[0,"50%","80%"]},s.createElement(w.a,null))}var N,S=n(97),D=Object(c.a)(N||(N=i()(["\n  query QueryExtra(\n    $dropzoneId: Int!\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      extras {\n        id\n        cost\n        name\n        ticketTypes {\n          id\n          altitude\n          name\n        }\n      }\n    }\n  }\n"])));function R(){var e,t,n,r,a,o=Object(I.a)(),i=Object(h.c)((function(e){return e.global})),c=Object(h.c)((function(e){return e.forms.extra})),u=Object(l.useQuery)(D,{variables:{dropzoneId:Number(null==o||null==(e=o.dropzone)?void 0:e.id)}}),y=u.data,v=u.loading,E=(u.refetch,Object(h.b)()),x=Object(S.a)(b.a.CreateExtra);return s.createElement(s.Fragment,null,s.createElement(d.a,{visible:v,indeterminate:!0,color:i.theme.colors.accent}),s.createElement(p.b,{style:L.container},s.createElement(m.a,null,s.createElement(m.a.Header,null,s.createElement(m.a.Title,null,"Name"),s.createElement(m.a.Title,{numeric:!0},"Cost")),null==y||null==(t=y.dropzone)||null==(n=t.extras)?void 0:n.map((function(e){return s.createElement(m.a.Row,{onPress:function(){E(h.a.forms.extra.setOpen(e))},pointerEvents:"none"},s.createElement(m.a.Cell,null,e.name),s.createElement(m.a.Cell,{numeric:!0},"$",e.cost))}))),!v&&!(null!=y&&null!=(r=y.dropzone)&&null!=(a=r.extras)&&a.length)&&s.createElement(g.a,{title:"No ticket addons",subtitle:"You can add multiple addons to assign to tickets, e.g outside camera, or coach"}),s.createElement(f.a,{style:L.fab,visible:x,small:!0,icon:"plus",onPress:function(){return E(h.a.forms.extra.setOpen(!0))},label:"New ticket addon"})),s.createElement($,{open:c.open,onClose:function(){return E(h.a.forms.extra.setOpen(!1))}}))}var L=u.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}})}}]);
//# sourceMappingURL=9.c1fca45e.chunk.js.map