(this.webpackJsonp=this.webpackJsonp||[]).push([[2],{532:function(e,n,r){"use strict";var t=r(533),a=r(0),i=r(2),l=r(317);n.a=function(e){var n=e.items,r=e.selected,o=e.isSelected,s=e.isDisabled,u=e.icon,c=e.renderItemLabel,d=e.onChangeSelected,m=e.autoSelectFirst;return a.useEffect((function(){(!r||!r.length&&n.length&&m)&&d([n[0]])}),[JSON.stringify(r),JSON.stringify(n),m]),a.createElement(i.a,{style:{flexDirection:"row",flexWrap:"wrap"}},n.map((function(e){return a.createElement(l.a,{key:JSON.stringify(e),mode:"outlined",icon:!r.some((function(n){return Object(t.isEqual)(e,n)}))&&u?u:void 0,style:{margin:1},disabled:s(e),selected:o?o(e):r.some((function(n){return Object(t.isEqual)(e,n)})),onPress:function(){return d(1===r.length?[e]:Object(t.xorBy)(r,[e],JSON.stringify))}},c(e))})))}},535:function(e,n,r){"use strict";r.d(n,"a",(function(){return d}));var t=r(0),a=r(1),i=r(389),l=r(167),o=r(155),s=r(326),u=r(125),c=r(19);function d(e){var n=e.buttonLabel,r=e.buttonAction,a=e.title,d=e.loading,m=e.children,f=Object(c.c)((function(e){return e.global}));return t.createElement(l.a,null,t.createElement(o.a,{visible:!!e.open,dismissable:!1,style:{maxWidth:500,alignSelf:"center"}},t.createElement(s.a,{indeterminate:!0,visible:d,color:f.theme.colors.accent}),t.createElement(o.a.Title,null,a),t.createElement(o.a.Content,{pointerEvents:"box-none"},t.createElement(o.a.ScrollArea,null,t.createElement(i.b,null,m))),t.createElement(o.a.Actions,{style:{justifyContent:"flex-end"}},t.createElement(u.a,{onPress:function(){e.onClose()}},"Cancel"),t.createElement(u.a,{onPress:r},n))))}a.a.create({button:{width:"100%",borderRadius:16,padding:5},contentContainer:{paddingHorizontal:16,paddingBottom:32},sheet:{elevation:3,backgroundColor:"white",flexGrow:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},sheetHeader:{elevation:2,borderTopLeftRadius:20,borderTopRightRadius:20,height:40,shadowColor:"#000",shadowOffset:{width:0,height:-4},backgroundColor:"white",shadowOpacity:.22,shadowRadius:2.22}})},538:function(e,n,r){"use strict";r.d(n,"a",(function(){return d}));var t=r(11),a=r.n(t),i=r(0),l=r(176),o=r(56),s=r(545),u=r.n(s),c=(r(546),r(543));function d(e){var n=i.useState(!1),r=a()(n,2),t=r[0],s=r[1];i.useCallback((function(){s(!1)}),[s]),i.useCallback((function(n){var r=n.date;s(!1),e.onChange(r.getTime()/1e3)}),[s,e.onChange]);return i.createElement(i.Fragment,null,i.createElement(l.a,{onDismiss:function(){return s(!1)},visible:t,anchor:i.createElement(o.b.Item,{onPress:function(){return s(!0)},disabled:!!e.disabled,title:e.label,description:e.timestamp?Object(c.a)(1e3*e.timestamp,"yyyy/MM/dd"):"No date selected",left:function(){return i.createElement(o.b.Icon,{icon:"calendar"})}})},i.createElement(u.a,{selectedDays:e.timestamp?[new Date(1e3*e.timestamp)]:[],onDayClick:function(n){e.onChange(n.getTime()/1e3),s(!1)}})))}},576:function(e,n,r){"use strict";r.d(n,"a",(function(){return z}));var t,a=r(0),i=r(1),l=r(2),o=r(266),s=r(238),u=r(318),c=r(19),d=r(11),m=r.n(d),f=r(57),p=r.n(f),g=r(49),v=r(58),b=r(56),E=r(532),y=Object(v.a)(t||(t=p()(["\n  query Licenses($federationId: Int) {\n    licenses(federationId: $federationId) {\n      id\n      name\n\n      federation {\n        id\n        name\n      }\n\n    }\n  }\n"])));function h(e){var n=Object(g.useQuery)(y,{variables:{federationId:e.federationId}}).data;return a.createElement(a.Fragment,null,a.createElement(b.b.Subheader,null,"License"),a.createElement(E.a,{autoSelectFirst:!0,icon:"ticket-account",items:(null==n?void 0:n.licenses)||[],selected:[e.value].filter(Boolean),isSelected:function(n){var r;return n.id===(null==(r=e.value)?void 0:r.id)},renderItemLabel:function(e){return null==e?void 0:e.name},isDisabled:function(){return!1},onChangeSelected:function(n){var r=m()(n,1)[0];return r?e.onSelect(r):null}}))}var O,S=r(176),x=Object(v.a)(O||(O=p()(["\n  query Federations {\n    federations {\n      id\n      name\n    }\n  }\n"])));function k(e){var n,r,t=a.useState(!1),i=m()(t,2),l=i[0],o=i[1],s=Object(g.useQuery)(x).data;return a.useEffect((function(){var n;1!==(null==s||null==(n=s.federations)?void 0:n.length)||e.value||e.onSelect(s.federations[0])}),[JSON.stringify(null==s?void 0:s.federations)]),a.createElement(a.Fragment,null,a.createElement(b.b.Subheader,null,"Federation"),a.createElement(S.a,{onDismiss:function(){return o(!1)},visible:l,anchor:a.createElement(b.b.Item,{onPress:function(){o(!0)},title:(null==(n=e.value)?void 0:n.name)||"Please select federation",description:e.required?null:"Optional"})},null==s||null==(r=s.federations)?void 0:r.map((function(n){return a.createElement(S.a.Item,{onPress:function(){o(!1),e.onSelect(n)},title:n.name||"-",key:"federation-select-"+n.id})}))))}function z(){var e,n,r,t,i,d,m,f,p,g,v,b,E,y,O,S,x,z,I,j,C,A,P,F,$=Object(c.c)((function(e){return e.forms.user})),T=Object(c.b)();return a.useEffect((function(){var e;$.original&&($.fields.exitWeight.value||T(c.a.forms.user.setField(["exitWeight",$.original.exitWeight||"60"])),!$.fields.rigs.value&&null!=(e=$.original)&&e.id&&T(c.a.forms.user.setField(["rigs",$.original.rigs])))}),[null==(e=$.original)?void 0:e.id]),a.createElement(a.Fragment,null,a.createElement(o.a,{style:w.field,mode:"outlined",label:"Name",error:!!$.fields.name.error,value:(null==(n=$.fields.name)||null==(r=n.value)?void 0:r.toString())||"",onChangeText:function(e){return T(c.a.forms.user.setField(["name",e]))}}),a.createElement(s.a,{type:$.fields.name.error?"error":"info"},$.fields.name.error||" "),a.createElement(o.a,{style:w.field,mode:"outlined",label:"Email",error:!!$.fields.email.error,value:(null==(t=$.fields.email)||null==(i=t.value)?void 0:i.toString())||"",onChangeText:function(e){return T(c.a.forms.user.setField(["email",e]))}}),a.createElement(s.a,{type:$.fields.email.error?"error":"info"},$.fields.email.error||" "),a.createElement(o.a,{style:w.field,mode:"outlined",label:"Phone",error:!!$.fields.phone.error,value:(null==(d=$.fields.phone)||null==(m=d.value)?void 0:m.toString())||"",onChangeText:function(e){return T(c.a.forms.user.setField(["phone",e]))}}),a.createElement(s.a,{type:$.fields.phone.error?"error":"info"},$.fields.phone.error||""),a.createElement(o.a,{style:w.field,mode:"outlined",label:"Exit weight",error:!!$.fields.exitWeight.error,value:(null==(f=$.fields.exitWeight)||null==(p=f.value)?void 0:p.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return a.createElement(o.a.Affix,{text:"kg"})},onChangeText:function(e){return T(c.a.forms.user.setField(["exitWeight",e]))}}),a.createElement(s.a,{type:$.fields.exitWeight.error?"error":"info"},$.fields.exitWeight.error||""),a.createElement(u.a,null),a.createElement(l.a,{style:{width:"100%"}},a.createElement(k,{value:(null==$||null==(g=$.fields)||null==(v=g.license)||null==(b=v.value)?void 0:b.federation)||$.federation.value,onSelect:function(e){return T(c.a.forms.user.setFederation(e))},required:!0}),a.createElement(s.a,{type:$.federation.error?"error":"info"},$.federation.error||""),((null==$||null==(E=$.fields)||null==(y=E.license)||null==(O=y.value)||null==(S=O.federation)?void 0:S.id)||(null==$||null==(x=$.federation)||null==(z=x.value)?void 0:z.id))&&a.createElement(a.Fragment,null,a.createElement(h,{value:$.fields.license.value,federationId:Number((null==$||null==(I=$.fields)||null==(j=I.license)||null==(C=j.value)||null==(A=C.federation)?void 0:A.id)||(null==(P=$.federation)||null==(F=P.value)?void 0:F.id)),onSelect:function(e){return T(c.a.forms.user.setField(["license",e]))},required:!0}),a.createElement(s.a,{type:$.fields.license.error?"error":"info"},$.fields.license.error||""))))}var w=i.a.create({fields:{flex:1,width:"100%",paddingTop:32},field:{marginBottom:8,width:"100%"},ticketAddons:{marginBottom:8}})},577:function(e,n,r){"use strict";r.d(n,"a",(function(){return P}));var t=r(3),a=r.n(t),i=r(11),l=r.n(i),o=r(57),s=r.n(o),u=r(6),c=r.n(u),d=r(49),m=r(0),f=r(19),p=r(1),g=r(2),v=r(266),b=r(238),E=r(538),y=r(532),h=r(97),O=r(98);function S(e){var n,r,t=Object(f.c)((function(e){return e.forms.rig})),a=Object(f.b)(),i=Object(h.a)(O.a.CreateRig);return m.createElement(g.a,null,m.createElement(v.a,{style:z.field,mode:"outlined",label:"Make",error:!!t.fields.make.error,value:t.fields.make.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["make",e]))}}),m.createElement(b.a,{type:t.fields.make.error?"error":"info"},t.fields.make.error||"e.g Javelin, Mirage"),m.createElement(v.a,{style:z.field,mode:"outlined",label:"Model",error:!!t.fields.model.error,value:t.fields.model.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["model",e]))}}),m.createElement(b.a,{type:t.fields.model.error?"error":"info"},t.fields.model.error||"e.g G4.1"),m.createElement(v.a,{style:z.field,mode:"outlined",label:"Serial",error:!!t.fields.serial.error,value:t.fields.serial.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["serial",e]))}}),m.createElement(b.a,{type:t.fields.serial.error?"error":"info"},t.fields.serial.error||""),m.createElement(v.a,{style:z.field,mode:"outlined",label:"Current canopy size",error:!!t.fields.canopySize.error,value:(null==(n=t.fields.canopySize.value)?void 0:n.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return a(f.a.forms.rig.setField(["canopySize",Number(e)]))}}),m.createElement(b.a,{type:t.fields.canopySize.error?"error":"info"},t.fields.canopySize.error||"Size of canopy in container"),e.showTypeSelect?m.createElement(y.a,{items:["student","sport","tandem"],renderItemLabel:function(e){return e},isDisabled:function(e){return!i&&"sport"!==e},selected:[(null==(r=t.fields.rigType)?void 0:r.value)||"sport"],onChangeSelected:function(e){var n=l()(e,1)[0];return a(f.a.forms.rig.setField(["rigType",n]))}}):null,m.createElement(E.a,{timestamp:t.fields.repackExpiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return a(f.a.forms.rig.setField(["repackExpiresAt",e]))},label:"Reserve repack expiry date"}),m.createElement(b.a,{type:t.fields.repackExpiresAt.error?"error":"info"},t.fields.repackExpiresAt.error||""))}var x,k,z=p.a.create({fields:{flex:1},field:{marginBottom:8}}),w=r(535);function I(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function j(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?I(Object(r),!0).forEach((function(n){a()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var C=Object(d.gql)(x||(x=s()(["\n  mutation CreateRig(\n    $make: String,\n    $model: String,\n    $serial: String,\n    $rigType: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),A=Object(d.gql)(k||(k=s()(["\n  mutation UpdateRig(\n    $id: Int!\n    $make: String,\n    $model: String,\n    $serial: String,\n    $rigType: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id,\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"])));function P(e){var n,r=e.open,t=(e.onClose,e.userId,e.dropzoneId,Object(f.b)()),a=Object(f.c)((function(e){return e.forms.rig})),i=Object(d.useMutation)(C),o=l()(i,2),s=o[0],u=o[1],p=Object(d.useMutation)(A),g=l()(p,2),v=g[0],b=g[1],E=u.loading||b.loading,y=m.useCallback((function(){var e=!1;return a.fields.make.value||(e=!0,t(f.a.forms.rig.setFieldError(["make","Required"]))),a.fields.model.value||(e=!0,t(f.a.forms.rig.setFieldError(["model","Required"]))),a.fields.serial.value||(e=!0,t(f.a.forms.rig.setFieldError(["serial","Required"]))),a.fields.canopySize.value||(e=!0,t(f.a.forms.rig.setFieldError(["canopySize","Required"]))),a.fields.repackExpiresAt.value||(e=!0,t(f.a.forms.rig.setFieldError(["repackExpiresAt","You must select a repack date in the future"]))),!e}),[JSON.stringify(a.fields)]),h=m.useCallback((function(){var n,r,i,l,o,u,d,m,p,g,b,E;return c.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(y()){h.next=2;break}return h.abrupt("return");case 2:return h.prev=2,g=null!=(n=a.original)&&n.id?v:s,h.next=6,c.a.awrap(g({variables:j(j({},null!=(r=a.original)&&r.id?{id:Number(null==(i=a.original)?void 0:i.id)}:{}),{},{make:a.fields.make.value,model:a.fields.model.value,serial:a.fields.serial.value,canopySize:a.fields.canopySize.value,rigType:a.fields.rigType.value,repackExpiresAt:a.fields.repackExpiresAt.value,userId:e.userId?Number(e.userId):null,dropzoneId:e.dropzoneId?Number(e.dropzoneId):null})}));case 6:if(b=h.sent,null==(E=null!=(l=a.original)&&l.id?null==(o=b.data)?void 0:o.updateRig:null==(u=b.data)?void 0:u.createRig)||null==(d=E.fieldErrors)||d.map((function(e){var n=e.field,r=e.message;switch(n){case"make":return t(f.a.forms.rig.setFieldError(["make",r]));case"model":return t(f.a.forms.rig.setFieldError(["model",r]));case"serial":return t(f.a.forms.rig.setFieldError(["serial",r]));case"canopy_size":return t(f.a.forms.rig.setFieldError(["canopySize",r]));case"repack_expires_at":return t(f.a.forms.rig.setFieldError(["repackExpiresAt",r]));case"rig_type":return t(f.a.forms.rig.setFieldError(["rigType",r]))}})),null==E||null==(m=E.errors)||!m.length){h.next=11;break}return h.abrupt("return",t(f.a.notifications.showSnackbar({message:null==E?void 0:E.errors[0],variant:"error"})));case 11:null!=E&&null!=(p=E.fieldErrors)&&p.length||e.onSuccess(),h.next=17;break;case 14:h.prev=14,h.t0=h.catch(2),t(f.a.notifications.showSnackbar({message:h.t0.message,variant:"error"}));case 17:case"end":return h.stop()}}),null,null,[[2,14]],Promise)}),[JSON.stringify(a.fields),s,v,e.onSuccess]);return m.createElement(w.a,{title:null!=(n=a.original)&&n.id?"Edit rig":"New rig",open:r,snapPoints:[0,580],onClose:function(){e.onClose(),t(f.a.forms.rig.reset())},buttonAction:h,buttonLabel:"Save",loading:E},m.createElement(S,{showTypeSelect:!!e.dropzoneId}))}},712:function(e,n,r){"use strict";r.r(n),r.d(n,"default",(function(){return $e}));var t,a=r(11),i=r.n(a),l=r(57),o=r.n(l),s=r(6),u=r.n(s),c=r(366),d=r(50),m=r(49),f=r(0),p=r(10),g=r(182),v=r(1),b=r(41),E=r(326),y=r(317),h=r(318),O=r(391),S=r(129),x=r(543),k=r(58),z=r(389),w=r(694),I=r(555),j=r(107),C=r(19),A=r(98),P=r(181),F=r(3),$=r.n(F),T=r(167),U=r(155),N=r(125),R=r(238),D=r(56),W=r(538),M=r(176),q=r(276),L=Object(k.a)(t||(t=o()(["\n  query RolesQuery($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles {\n        id\n        name\n      }\n    }\n  }\n"])));function J(e){var n,r,t,a,l=f.useState(!1),o=i()(l,2),s=o[0],u=o[1],c=Object(q.a)(),d=Object(m.useQuery)(L,{variables:{dropzoneId:Number(null==c||null==(n=c.dropzone)?void 0:n.id)}}),p=d.data;d.loading,d.refetch;return f.createElement(f.Fragment,null,f.createElement(D.b.Subheader,{style:{paddingLeft:0}},"Access level"),f.createElement(M.a,{onDismiss:function(){return u(!1)},visible:!e.disabled&&s,anchor:f.createElement(D.b.Item,{left:function(){return f.createElement(D.b.Icon,{icon:"lock"})},onPress:e.disabled?void 0:function(){u(!0)},title:(null==(r=e.value)?void 0:r.name)||"Access level",description:e.required?null:"Optional"})},null==p||null==(t=p.dropzone)||null==(a=t.roles)?void 0:a.map((function(n){return f.createElement(M.a.Item,{onPress:function(){u(!1),e.onSelect(n)},title:n.name||"-"})}))))}var B=r(97);function G(){var e=Object(C.c)((function(e){return e.forms.dropzoneUser})),n=Object(C.b)(),r=Object(B.a)(A.a.GrantPermission);return f.createElement(f.Fragment,null,f.createElement(J,{value:e.fields.role.value,onSelect:function(e){return n(C.a.forms.dropzoneUser.setField(["role",e]))},disabled:!r,required:!0}),f.createElement(R.a,{type:e.fields.role.error?"error":"info"},e.fields.role.error),f.createElement(D.b.Subheader,{style:{paddingLeft:0}},"Financial"),f.createElement(W.a,{timestamp:e.fields.expiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return n(C.a.forms.dropzoneUser.setField(["expiresAt",e]))},label:"Membership expires"}),f.createElement(R.a,{type:e.fields.expiresAt.error?"error":"info"},e.fields.expiresAt.error))}var H;v.a.create({fields:{flex:1},field:{marginBottom:8}});function V(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Q(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?V(Object(r),!0).forEach((function(n){$()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):V(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var _=Object(m.gql)(H||(H=o()(["\n  mutation UpdateDropzoneUser(\n    $userRoleId: Int,\n    $expiresAt: Int,\n    $dropzoneUserId: Int\n  ) {\n    updateDropzoneUser(\n      input: {\n        id: $dropzoneUserId,\n        attributes: {\n          userRoleId: $userRoleId,\n          expiresAt: $expiresAt,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      dropzoneUser {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n\n        user {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function Z(e){var n,r=Object(C.b)(),t=Object(C.c)((function(e){return e.forms.dropzoneUser})),a=Object(C.c)((function(e){return e.global})),l=Object(m.useMutation)(_),o=i()(l,2),s=o[0],c=o[1],d=f.useCallback((function(){var e=!1;return t.fields.role.value||(e=!0,r(C.a.forms.dropzoneUser.setFieldError(["role","User must have an access level"]))),t.fields.expiresAt.value||(e=!0,r(C.a.forms.dropzoneUser.setFieldError(["expiresAt","Membership expiry must be set"]))),!e}),[JSON.stringify(t.fields)]),p=f.useCallback((function(){var n,a,i,l,o,c,m,f,p,g;return u.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(d()){v.next=2;break}return v.abrupt("return");case 2:return v.prev=2,v.next=5,u.a.awrap(s({variables:Q(Q({},null!=(n=t.original)&&n.id?{id:null==(a=t.original)?void 0:a.id}:{}),{},{userRoleId:Number(null==(i=t.fields.role.value)?void 0:i.id),expiresAt:t.fields.expiresAt.value,dropzoneUserId:Number(null==(l=t.original)?void 0:l.id)})}));case 5:if(p=v.sent,null==(g=null==(o=p.data)?void 0:o.updateDropzoneUser)||null==(c=g.fieldErrors)||c.map((function(e){var n=e.field,t=e.message;switch(n){case"user_role":return r(C.a.forms.dropzoneUser.setFieldError(["role",t]));case"expires_at":return r(C.a.forms.dropzoneUser.setFieldError(["expiresAt",t]))}})),null==g||null==(m=g.errors)||!m.length){v.next=10;break}return v.abrupt("return",r(C.a.notifications.showSnackbar({message:null==g?void 0:g.errors[0],variant:"error"})));case 10:null!=g&&null!=(f=g.fieldErrors)&&f.length?console.error(g.fieldErrors):e.onSuccess(g.dropzoneUser),v.next=16;break;case 13:v.prev=13,v.t0=v.catch(2),r(C.a.notifications.showSnackbar({message:v.t0.message,variant:"error"}));case 16:case"end":return v.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(t.fields),s,e.onSuccess]);return f.createElement(T.a,null,f.createElement(U.a,{visible:!!e.open},f.createElement(E.a,{indeterminate:!0,visible:c.loading,color:a.theme.colors.accent}),f.createElement(U.a.Title,null,(null!=t&&null!=(n=t.original)&&n.id?"Edit":"New")+" dropzone user"),f.createElement(U.a.Content,null,f.createElement(G,null)),f.createElement(U.a.Actions,{style:{justifyContent:"flex-end"}},f.createElement(N.a,{onPress:function(){r(C.a.forms.dropzoneUser.reset()),e.onClose()}},"Cancel"),f.createElement(N.a,{onPress:p},"Save"))))}var Y=r(2),K=r(266),X=r(552);function ee(){var e,n,r,t,a,i,l=Object(C.c)((function(e){return e.forms.credits})),o=Object(C.b)(),s=(null==(e=l.original)?void 0:e.credits)||0,u=l.fields.amount.value||0,c="deposit"===l.fields.status.value?u+s:u-s;return f.createElement(f.Fragment,null,f.createElement(X.b,{defaultIndex:0,onChangeIndex:function(e){o(C.a.forms.credits.setField(["status",1===e?"withdrawal":"deposit"]))},mode:"fixed"},f.createElement(X.a,{label:"Deposit",icon:"arrow-up"},f.createElement(Y.a,null)),f.createElement(X.a,{label:"Withdraw",icon:"arrow-down"},f.createElement(Y.a,null))),f.createElement(U.a.Content,{style:{paddingTop:16}},f.createElement(K.a,{style:re.field,mode:"outlined",label:"Message",error:!!l.fields.message.error,value:(null==(n=l.fields.message.value)?void 0:n.toString())||"",onChangeText:function(e){return o(C.a.forms.credits.setField(["message",e]))}}),f.createElement(R.a,{type:l.fields.message.error?"error":"info"},l.fields.message.error||""),"deposit"===l.fields.status.value?f.createElement(Y.a,null,f.createElement(K.a,{style:re.field,mode:"outlined",label:"Add amount",error:!!l.fields.amount.error,value:(null==(r=l.fields.amount.value)?void 0:r.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(C.a.forms.credits.setField(["amount",Number(e)]))}}),f.createElement(R.a,{type:l.fields.amount.error?"error":"info"},l.fields.amount.error||""),f.createElement(h.a,null),f.createElement(O.a,null,f.createElement(O.a.Row,null,f.createElement(O.a.Title,null,"Current balance"),f.createElement(O.a.Cell,{numeric:!0},"$"+((null==(t=l.original)?void 0:t.credits)||0))),f.createElement(O.a.Row,null,f.createElement(O.a.Title,null,"Deposit"),f.createElement(O.a.Cell,{numeric:!0},"+$"+(l.fields.amount.value||0))),f.createElement(O.a.Row,null,f.createElement(O.a.Title,null,f.createElement(b.a,{style:{fontWeight:"bold"}},"New total")),f.createElement(O.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c))))):f.createElement(Y.a,null,f.createElement(K.a,{style:re.field,mode:"outlined",label:"Withdraw amount",error:!!l.fields.amount.error,value:(null==(a=l.fields.amount.value)?void 0:a.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(C.a.forms.credits.setField(["amount",Number(e)]))}}),f.createElement(R.a,{type:l.fields.amount.error?"error":"info"},l.fields.amount.error||""),f.createElement(h.a,null),f.createElement(O.a,null,f.createElement(O.a.Row,null,f.createElement(O.a.Title,null,"Current balance"),f.createElement(O.a.Cell,{numeric:!0},"$"+((null==(i=l.original)?void 0:i.credits)||0))),f.createElement(O.a.Row,null,f.createElement(O.a.Title,null,"Withdraw"),f.createElement(O.a.Cell,{numeric:!0},"-$"+(l.fields.amount.value||0))),f.createElement(O.a.Row,null,f.createElement(O.a.Title,null,f.createElement(b.a,{style:{fontWeight:"bold"}},"New total")),f.createElement(O.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c)))))))}var ne,re=v.a.create({fields:{flex:1},field:{marginBottom:8}}),te=Object(m.gql)(ne||(ne=o()(["\n  mutation CreatrTransaction(\n    $message: String,\n    $status: String,\n    $amount: Float,\n    $dropzoneUserId: Int,\n  ) {\n    createTransaction(\n      input: {\n        attributes: {\n          amount: $amount,\n          dropzoneUserId: $dropzoneUserId,\n          message: $message,\n          status: $status,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      transaction {\n        id\n        amount\n        message\n\n        dropzoneUser {\n          id\n          credits\n\n          transactions {\n            edges {\n              node {\n                id\n                status\n                amount\n                createdAt\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function ae(e){var n=Object(C.b)(),r=Object(C.c)((function(e){return e.forms.credits})),t=Object(C.c)((function(e){return e.global})),a=Object(m.useMutation)(te),l=i()(a,2),o=l[0],s=l[1],c=f.useCallback((function(){var e=!1;return r.fields.amount.value||(e=!0,n(C.a.forms.credits.setFieldError(["amount","You must specify an amount"]))),!e}),[JSON.stringify(r.fields)]),d=f.useCallback((function(){var t,a,i,l,s,d,m,f,p;return u.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(c()){g.next=2;break}return g.abrupt("return");case 2:return g.prev=2,g.next=5,u.a.awrap(o({variables:{amount:r.fields.amount.value,message:r.fields.message.value,status:r.fields.status.value,dropzoneUserId:Number(null==(t=r.original)?void 0:t.id)}}));case 5:if(f=g.sent,null==(p=null!=(a=r.original)&&a.id?null==(i=f.data)?void 0:i.updateRig:null==(l=f.data)?void 0:l.createRig)||null==(s=p.fieldErrors)||s.map((function(e){var r=e.field,t=e.message;switch(r){case"amount":return n(C.a.forms.credits.setFieldError(["amount",t]));case"message":return n(C.a.forms.credits.setFieldError(["message",t]));case"status":return n(C.a.forms.credits.setFieldError(["status",t]))}})),null==p||null==(d=p.errors)||!d.length){g.next=10;break}return g.abrupt("return",n(C.a.notifications.showSnackbar({message:null==p?void 0:p.errors[0],variant:"error"})));case 10:null!=p&&null!=(m=p.fieldErrors)&&m.length||(n(C.a.forms.credits.reset()),e.onSuccess()),g.next=16;break;case 13:g.prev=13,g.t0=g.catch(2),n(C.a.notifications.showSnackbar({message:g.t0.message,variant:"error"}));case 16:case"end":return g.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(r.fields),o,e.onSuccess]);return f.createElement(T.a,null,f.createElement(U.a,{visible:!!e.open},f.createElement(E.a,{indeterminate:!0,visible:s.loading,color:t.theme.colors.accent}),f.createElement(ee,null),f.createElement(U.a.Actions,{style:{justifyContent:"flex-end"}},f.createElement(N.a,{onPress:function(){n(C.a.forms.credits.reset()),e.onClose()}},"Cancel"),f.createElement(N.a,{onPress:d},"Save"))))}var ie=r(577),le=r(576),oe=r(535),se=r(321);function ue(e){var n=e.open,r=e.onSuccess,t=Object(C.c)((function(e){return e.forms.user})),a=Object(C.b)(),i=Object(se.a)({onSuccess:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){a(C.a.notifications.showSnackbar({message:"Profile has been updated",variant:"success"})),a(C.a.forms.user.reset()),r()})),onFieldError:function(e,n){return a(C.a.forms.user.setFieldError([e,n]))},onError:function(e){return a(C.a.notifications.showSnackbar({message:e,variant:"error"}))}}),l=f.useCallback((function(){var e,n,r,i,l,o,s,u,c,d=!1,m=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return((null==(e=t.fields.name)||null==(n=e.value)?void 0:n.length)||0)<3&&(d=!0,a(C.a.forms.user.setFieldError(["name","Name is too short"]))),((null==(r=t.fields.email)||null==(i=r.value)?void 0:i.length)||0)<3&&(d=!0,a(C.a.forms.user.setFieldError(["email","Email is too short"]))),((null==(l=t.fields.phone)||null==(o=l.value)?void 0:o.length)||0)<3&&(d=!0,a(C.a.forms.user.setFieldError(["phone","Phone number is too short"]))),m.test((null==(s=t.fields)||null==(u=s.email)?void 0:u.value)||"")||(d=!0,a(C.a.forms.user.setFieldError(["email","Please enter a valid email"]))),((null==(c=t.fields.exitWeight)?void 0:c.value)||0)<30&&(d=!0,a(C.a.forms.user.setFieldError(["exitWeight","Exit weight seems too low?"]))),!d}),[JSON.stringify(t.fields),a]),o=f.useCallback((function(){var e,n,r,o,s,c,d;return u.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(e=t.fields,n=e.name,r=e.license,o=e.phone,s=e.email,c=e.exitWeight,!l()){m.next=11;break}return m.prev=2,m.next=5,u.a.awrap(i.mutate({id:Number(t.original.id),name:n.value,licenseId:null!=(d=r.value)&&d.id?Number(r.value.id):null,phone:o.value,exitWeight:parseFloat(c.value),email:s.value}));case 5:m.sent,m.next=11;break;case 8:m.prev=8,m.t0=m.catch(2),a(C.a.notifications.showSnackbar({message:m.t0.message,variant:"error"}));case 11:case"end":return m.stop()}}),null,null,[[2,8]],Promise)}),[JSON.stringify(t.fields),a,i]);return f.createElement(oe.a,{title:"Update information",open:n,snapPoints:[0,740],loading:i.loading,onClose:function(){e.onClose(),a(C.a.forms.user.reset())},buttonAction:o,buttonLabel:"Save"},f.createElement(le.a,null))}function ce(e){var n=Object(C.c)((function(e){return e.global})),r=e.title,t=e.children,a=e.buttonIcon,i=e.onPressButton;return f.createElement(Y.a,{style:de.card},f.createElement(Y.a,{style:de.container},f.createElement(D.b.Subheader,{style:de.title},r),a&&f.createElement(S.a,{icon:a,onPress:function(){return i?i():null},color:n.theme.colors.primary})),t)}var de=v.a.create({container:{flexDirection:"row",justifyContent:"space-between"},title:{flexGrow:1},card:{marginVertical:8,width:"100%"}}),me=r(40),fe=r(137),pe=r(316);function ge(e){var n,r,t,a=e.dropzoneUser,i=e.onEdit,l=e.canEdit,o=e.children,s=e.onPressAvatar,u=Object(C.c)((function(e){return e.global})).theme;return f.createElement(Y.a,{style:[ve.container,{backgroundColor:u.colors.primary}]},f.createElement(Y.a,{style:ve.actions},l?f.createElement(S.a,{icon:"pencil",size:20,color:u.colors.surface,onPress:function(){return i?i():null}}):null),f.createElement(Y.a,{style:ve.avatarContainer},f.createElement(Y.a,{style:{flex:1/3}},f.createElement(me.a,{onPress:s},null!=a&&null!=(n=a.user)&&n.image?f.createElement(D.a.Image,{size:80,source:{uri:null==a?void 0:a.user.image},color:u.colors.primary,style:{backgroundColor:u.colors.surface}}):f.createElement(D.a.Icon,{size:80,icon:"account",color:u.colors.primary,style:{backgroundColor:u.colors.surface}}))),f.createElement(Y.a,{style:ve.titleContainer},f.createElement(fe.a,{style:ve.title},null==a||null==(r=a.user)?void 0:r.name),f.createElement(pe.a,{style:ve.paragraph},null==a||null==(t=a.role)?void 0:t.name))),o)}var ve=v.a.create({container:{width:"100%",paddingTop:16},actions:{flexDirection:"row",justifyContent:"flex-end"},avatarContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:16,marginBottom:16},titleContainer:{paddingLeft:48,flex:2/3,alignItems:"flex-start",justifyContent:"center"},title:{color:"white"},paragraph:{color:"white"}});function be(e){var n=e.items,r=1/n.length;return f.createElement(f.Fragment,null,f.createElement(h.a,{style:ye.divider}),f.createElement(Y.a,{style:ye.container},n.map((function(e,t){return f.createElement(f.Fragment,null,f.createElement(Y.a,{style:{flex:r},key:"info-grid-"+t},f.createElement(D.b.Item,{titleStyle:[ye.title,{fontWeight:!1!==e.bold?"bold":void 0}],title:e.value,descriptionStyle:ye.description,description:e.title,onPress:e.onPress})),t===n.length-1?null:f.createElement(h.a,{key:"info-grid-divider-"+t,style:ye.verticalDivider}))}))))}var Ee,ye=v.a.create({container:{width:"100%",flexDirection:"row"},divider:{height:v.a.hairlineWidth,width:"100%",backgroundColor:"white"},verticalDivider:{width:v.a.hairlineWidth,height:"100%",backgroundColor:"white"},title:{textAlign:"center",color:"white"},description:{textAlign:"center",color:"white"}});function he(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Oe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?he(Object(r),!0).forEach((function(n){$()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Se=Object(k.a)(Ee||(Ee=o()(["\n  query QueryDropzoneUser($dropzoneId: Int!, $dropzoneUserId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n        credits\n        expiresAt\n        permissions\n\n        role {\n          id\n          name\n        }\n        rigInspections {\n          id\n          isOk\n          rig {\n            id\n          }\n        }\n\n        notifications {\n          edges {\n            node {\n              id\n              message\n              notificationType\n              createdAt\n            }\n          }\n        }\n\n\n        transactions {\n          edges {\n            node {\n              id\n              status\n              message\n              amount\n              createdAt\n            }\n          }\n        }\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          image\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n            federation {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var xe,ke,ze,we=function(e){e.type;var n=e.selected,r=e.disabled,t=e.onPress,a={actAsDZSO:"shield-cross",actAsGCA:"radio-handheld",actAsLoadMaster:"shield-account",actAsPilot:"shield-airplane",actAsRigInspector:"shield-search"}[e.type],i={actAsDZSO:"DZSO",actAsGCA:"GCA",actAsLoadMaster:"Load Master",actAsPilot:"Pilot",actAsRigInspector:"Rig Inspector"}[e.type];return f.createElement(y.a,{mode:n?"outlined":"flat",icon:a,style:[{marginHorizontal:2},n?void 0:{backgroundColor:"transparent",borderColor:"white"}].filter(Boolean),disabled:r,onPress:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){return t()}))},i)},Ie=r(91),je=Object(k.a)(xe||(xe=o()(["\nmutation RevokePermission(\n  $dropzoneUserId: Int!,\n  $permissionName: Permission!,\n){\n  revokePermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n    dropzoneUser {\n      id\n      permissions\n    }\n    fieldErrors {\n      field\n      message\n    }\n    errors\n  }\n}\n"]))),Ce=Object(Ie.a)(je,{getPayload:function(e){return e.revokePermission},validates:{permissionName:[Object(Ie.c)("Permission name is required")]}}),Ae=Object(k.a)(ke||(ke=o()(["\nmutation GrantPermission(\n  $dropzoneUserId: Int!,\n  $permissionName: Permission!,\n){\n  grantPermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n    dropzoneUser {\n      id\n      permissions\n    }\n    fieldErrors {\n      field\n      message\n    }\n    errors\n  }\n}\n"]))),Pe=Object(Ie.a)(Ae,{getPayload:function(e){return e.grantPermission},validates:{permissionName:[Object(Ie.c)("Permission name is required")]}}),Fe=Object(k.a)(ze||(ze=o()(["\n  mutation UpdateUserImage(\n    $id: Int,\n    $image: String\n  ){\n    updateUser(input: {\n      id: $id\n      attributes: {\n        image: $image,\n      }\n    }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        image\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function $e(){var e,n,r,t,a,l,o,s,v,k,F,$=Object(C.c)((function(e){return e.global})),T=Object(C.c)((function(e){return e.forms})),U=Object(C.b)(),N=Object(d.useNavigation)(),R=Object(q.a)().currentUser,D=Object(d.useRoute)(),W=(null==R?void 0:R.id)===D.params.userId,M=function(e){var n,r,t,a,i,l,o,s,u,c,d=Object(C.c)((function(e){return e.global.currentDropzoneId})),f=Object(q.a)(),p=Object(m.useQuery)(Se,{variables:{dropzoneId:d,dropzoneUserId:e||(null==f||null==(n=f.data)||null==(r=n.dropzone)||null==(t=r.currentUser)?void 0:t.id)}});return Oe(Oe({},p),{},{dropzoneUser:e&&e!==Number(null==f||null==(a=f.data)||null==(i=a.dropzone)||null==(l=i.currentUser)?void 0:l.id)?null==p||null==(u=p.data)||null==(c=u.dropzone)?void 0:c.dropzoneUser:null==f||null==(o=f.data)||null==(s=o.dropzone)?void 0:s.currentUser})}(Number(D.params.userId)),L=M.dropzoneUser,J=M.loading,G=M.refetch,H=Object(B.a)(A.a.GrantPermission),V=Object(d.useIsFocused)();f.useEffect((function(){V&&G()}),[V]);var Q=Object(m.useMutation)(Fe),_=i()(Q,2),Y=_[0],K=(_[1],Ce({onSuccess:function(e){G(),U(C.a.notifications.showSnackbar({message:"Permission revoked"}))},onError:function(e){U(C.a.notifications.showSnackbar({message:e,variant:"error"}))}})),X=Pe({onSuccess:function(e){G(),U(C.a.notifications.showSnackbar({message:"Permission granted"}))},onError:function(e){U(C.a.notifications.showSnackbar({message:e,variant:"error"}))}});f.useEffect((function(){!function(){var e;u.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("web"===p.a.OS){n.next=6;break}return n.next=3,u.a.awrap(w.b());case 3:e=n.sent,"granted"!==e.status&&alert("Sorry, we need camera roll permissions to make this work!");case 6:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]);var ee=f.useCallback((function(){var e,n;return u.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,u.a.awrap(w.a({mediaTypes:I.a.Images,allowsEditing:!0,aspect:[4,3],quality:.1,base64:!0}));case 3:return n=r.sent,r.next=6,u.a.awrap(Y({variables:{id:Number(null==L||null==(e=L.user)?void 0:e.id),image:"data:image/jpeg;base64,"+n.base64}}));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0);case 11:case"end":return r.stop()}}),null,null,[[0,8]],Promise)}),[U]),ne=(null==L||null==(e=L.permissions)?void 0:e.filter((function(e){return/^actAs/.test(e)})))||[];return f.createElement(f.Fragment,null,J&&f.createElement(E.a,{color:$.theme.colors.accent,indeterminate:!0,visible:J}),f.createElement(P.a,{contentContainerStyle:Te.content,refreshControl:f.createElement(g.a,{refreshing:J,onRefresh:function(){return G()}})},f.createElement(z.b,{horizontal:!0,contentContainerStyle:{padding:8,justifyContent:"space-evenly",backgroundColor:$.theme.colors.primary}},[A.a.ActAsPilot,A.a.ActAsDzso,A.a.ActAsGca,A.a.ActAsRigInspector,A.a.ActAsLoadMaster].map((function(e){return function(e){return H||ne.includes(e)}(e)?f.createElement(we,{type:e,selected:ne.includes(e),onPress:function(){return H?ne.includes(e)?K.mutate({permissionName:e,dropzoneUserId:Number(L.id)}):X.mutate({permissionName:e,dropzoneUserId:Number(L.id)}):null}}):null}))),f.createElement(ge,{dropzoneUser:L,canEdit:W,onEdit:function(){null!=L&&L.user&&U(C.a.forms.user.setOpen(null==L?void 0:L.user))},onPressAvatar:ee},f.createElement(z.b,{horizontal:!0,style:{marginVertical:8}},f.createElement(y.a,{icon:function(e){var n=e.size;return f.createElement(c.a,{name:"email",size:n,color:"#FFFFFF"})},mode:"outlined",style:Te.chip,textStyle:Te.chipTitle},(null==L||null==(n=L.user)?void 0:n.email)||"-"),f.createElement(y.a,{icon:function(e){var n=e.size;return f.createElement(c.a,{name:"phone",size:n,color:"#FFFFFF"})},mode:"outlined",style:Te.chip,textStyle:Te.chipTitle},(null==L||null==(r=L.user)?void 0:r.phone)||"-"),f.createElement(y.a,{icon:function(e){var n=e.size;return f.createElement(c.a,{name:"card-account-details-star-outline",size:n,color:"#FFFFFF"})},mode:"outlined",style:Te.chip,textStyle:Te.chipTitle,onPress:function(){U(C.a.forms.dropzoneUser.setOpen(L))}},null!=L&&L.expiresAt?Object(x.a)(1e3*((null==L?void 0:L.expiresAt)||0),"yyyy/MM/dd"):"Not a member")),f.createElement(h.a,{style:Te.divider}),f.createElement(be,{items:[{title:"Funds",value:"$"+((null==L?void 0:L.credits)||0),onPress:function(){L&&U(C.a.forms.credits.setOpen(L))}},{title:"License",value:""+((null==L||null==(t=L.user)||null==(a=t.license)?void 0:a.name)||"-")},{title:"Exit weight",value:Math.round(Number(null==L||null==(l=L.user)?void 0:l.exitWeight)).toString()||"-"}]}),f.createElement(h.a,{style:[Te.divider,{backgroundColor:"white"}]})),f.createElement(ce,{title:"Rigs",buttonIcon:"plus",onPressButton:function(){return U(C.a.forms.rig.setOpen(!0))}},f.createElement(O.a,null,f.createElement(O.a.Header,null,f.createElement(O.a.Title,null,"Container"),f.createElement(O.a.Title,{numeric:!0},"Repack due"),f.createElement(O.a.Title,{numeric:!0},"Canopy size"),f.createElement(O.a.Title,{numeric:!0},"Inspected")),null==L||null==(o=L.user)||null==(s=o.rigs)?void 0:s.map((function(e){var n,r;return f.createElement(O.a.Row,{key:"rig-"+e.id,onPress:function(){U(C.a.forms.rig.setOpen(e))},onLongPress:function(){return N.navigate("RigInspectionScreen",{dropzoneUserId:Number(D.params.userId),rig:e})},pointerEvents:"none"},f.createElement(O.a.Cell,null,[null==e?void 0:e.make,null==e?void 0:e.model,"#"+(null==e?void 0:e.serial)].join(" ")),f.createElement(O.a.Cell,{numeric:!0},null!=e&&e.repackExpiresAt?Object(x.a)(1e3*e.repackExpiresAt,"yyyy/MM/dd"):"-"),f.createElement(O.a.Cell,{numeric:!0},""+(null==e?void 0:e.canopySize)),f.createElement(O.a.Cell,{numeric:!0},f.createElement(S.a,{icon:null!=L&&null!=(n=L.rigInspections)&&n.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?"eye-check":"eye-minus",color:null!=L&&null!=(r=L.rigInspections)&&r.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?j.c:j.d,onPress:function(){return N.navigate("RigInspectionScreen",{dropzoneUserId:Number(D.params.userId),rig:e})}})))})))),f.createElement(ce,{title:"Transactions",buttonIcon:"plus",onPressButton:function(){L&&U(C.a.forms.credits.setOpen(L))}},f.createElement(O.a,null,f.createElement(O.a.Header,null,f.createElement(O.a.Title,null,"Time"),f.createElement(O.a.Title,null,"Type"),f.createElement(O.a.Title,null,"Message"),f.createElement(O.a.Title,{numeric:!0},"Amount")),null==L||null==(v=L.transactions)||null==(k=v.edges)?void 0:k.map((function(e){var n,r,t,a,i,l;return f.createElement(O.a.Row,{key:"transaction-"+(null==e||null==(n=e.node)?void 0:n.id)},f.createElement(O.a.Cell,null,f.createElement(b.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null!=e&&null!=(r=e.node)&&r.createdAt?Object(x.a)(1e3*(null==e||null==(t=e.node)?void 0:t.createdAt),"yyyy/MM/dd hh:mm"):null)),f.createElement(O.a.Cell,null,f.createElement(b.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null==e||null==(a=e.node)?void 0:a.status)),f.createElement(O.a.Cell,null,null==e||null==(i=e.node)?void 0:i.message),f.createElement(O.a.Cell,{numeric:!0},null==e||null==(l=e.node)?void 0:l.amount))}))))),f.createElement(ie.a,{onClose:function(){return U(C.a.forms.rig.setOpen(!1))},onSuccess:function(){return U(C.a.forms.rig.setOpen(!1))},open:T.rig.open,userId:Number(null==L||null==(F=L.user)?void 0:F.id)}),f.createElement(Z,{onClose:function(){return U(C.a.forms.dropzoneUser.setOpen(!1))},onSuccess:function(e){U(C.a.forms.dropzoneUser.setOpen(!1)),(null==R?void 0:R.id)===(null==L?void 0:L.id)&&U(C.a.global.setUser(e.user))},open:T.dropzoneUser.open}),f.createElement(ae,{onClose:function(){return U(C.a.forms.credits.setOpen(!1))},onSuccess:function(){return U(C.a.forms.credits.setOpen(!1))},open:T.credits.open,dropzoneUser:L||void 0}),f.createElement(ue,{onClose:function(){return U(C.a.forms.user.setOpen(!1))},onSuccess:function(){return U(C.a.forms.user.setOpen(!1))},open:T.user.open}))}var Te=v.a.create({container:{flex:1},content:{flexGrow:1,paddingBottom:56,paddingHorizontal:0},divider:{height:1,width:"100%"},chip:{margin:1,backgroundColor:"transparent",minHeight:23,borderWidth:0,justifyContent:"center",alignItems:"center",display:"flex"},chipTitle:{color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:12,lineHeight:24,textAlignVertical:"center"}})}}]);
//# sourceMappingURL=2.75d8320a.chunk.js.map