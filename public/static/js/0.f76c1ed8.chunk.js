(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{629:function(e,n,r){"use strict";r.d(n,"a",(function(){return d}));var t=r(0),a=r(1),i=r(121),l=r(255),o=r(404),s=r(397),u=r(207),c=r(5);function d(e){var n=e.buttonLabel,r=e.buttonAction,a=e.title,d=e.loading,m=e.children,f=Object(c.c)((function(e){return e.global}));return t.createElement(l.a,null,t.createElement(o.a,{visible:!!e.open,dismissable:!1,style:{maxWidth:500,alignSelf:"center"}},t.createElement(s.a,{indeterminate:!0,visible:d,color:f.theme.colors.accent}),t.createElement(o.a.Title,null,a),t.createElement(o.a.Content,{pointerEvents:"box-none"},t.createElement(o.a.ScrollArea,null,t.createElement(i.b,null,m))),t.createElement(o.a.Actions,{style:{justifyContent:"flex-end"}},t.createElement(u.a,{onPress:function(){e.onClose()}},"Cancel"),t.createElement(u.a,{onPress:r},n))))}a.a.create({button:{width:"100%",borderRadius:16,padding:5},contentContainer:{paddingHorizontal:16,paddingBottom:32},sheet:{elevation:3,backgroundColor:"white",flexGrow:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},sheetHeader:{elevation:2,borderTopLeftRadius:20,borderTopRightRadius:20,height:40,shadowColor:"#000",shadowOffset:{width:0,height:-4},backgroundColor:"white",shadowOpacity:.22,shadowRadius:2.22}})},649:function(e,n,r){"use strict";r.d(n,"a",(function(){return m}));var t=r(0),a=r(1),i=r(2),l=r(287),o=r(285),s=r(373),u=r(5),c=r(339),d=r(167);function m(){var e,n,r,a,m,p,g,b,v,E,y,h,O,z,x,w,S,k,j,I,C,P,A,F,$=Object(u.c)((function(e){return e.forms.user})),U=Object(u.b)();return t.useEffect((function(){var e;$.original&&($.fields.exitWeight.value||U(u.a.forms.user.setField(["exitWeight",$.original.exitWeight||"60"])),!$.fields.rigs.value&&null!=(e=$.original)&&e.id&&U(u.a.forms.user.setField(["rigs",$.original.rigs])))}),[null==(e=$.original)?void 0:e.id]),t.createElement(t.Fragment,null,t.createElement(l.a,{style:f.field,mode:"outlined",label:"Name",error:!!$.fields.name.error,value:(null==(n=$.fields.name)||null==(r=n.value)?void 0:r.toString())||"",onChangeText:function(e){return U(u.a.forms.user.setField(["name",e]))}}),t.createElement(o.a,{type:$.fields.name.error?"error":"info"},$.fields.name.error||" "),t.createElement(l.a,{style:f.field,mode:"outlined",label:"Email",error:!!$.fields.email.error,value:(null==(a=$.fields.email)||null==(m=a.value)?void 0:m.toString())||"",onChangeText:function(e){return U(u.a.forms.user.setField(["email",e]))}}),t.createElement(o.a,{type:$.fields.email.error?"error":"info"},$.fields.email.error||" "),t.createElement(l.a,{style:f.field,mode:"outlined",label:"Phone",error:!!$.fields.phone.error,value:(null==(p=$.fields.phone)||null==(g=p.value)?void 0:g.toString())||"",onChangeText:function(e){return U(u.a.forms.user.setField(["phone",e]))}}),t.createElement(o.a,{type:$.fields.phone.error?"error":"info"},$.fields.phone.error||""),t.createElement(l.a,{style:f.field,mode:"outlined",label:"Exit weight",error:!!$.fields.exitWeight.error,value:(null==(b=$.fields.exitWeight)||null==(v=b.value)?void 0:v.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return t.createElement(l.a.Affix,{text:"kg"})},onChangeText:function(e){return U(u.a.forms.user.setField(["exitWeight",e]))}}),t.createElement(o.a,{type:$.fields.exitWeight.error?"error":"info"},$.fields.exitWeight.error||""),t.createElement(s.a,null),t.createElement(i.a,{style:{width:"100%"}},t.createElement(d.a,{value:(null==$||null==(E=$.fields)||null==(y=E.license)||null==(h=y.value)?void 0:h.federation)||$.federation.value,onSelect:function(e){return U(u.a.forms.user.setFederation(e))},required:!0}),t.createElement(o.a,{type:$.federation.error?"error":"info"},$.federation.error||""),((null==$||null==(O=$.fields)||null==(z=O.license)||null==(x=z.value)||null==(w=x.federation)?void 0:w.id)||(null==$||null==(S=$.federation)||null==(k=S.value)?void 0:k.id))&&t.createElement(t.Fragment,null,t.createElement(c.a,{value:$.fields.license.value,federationId:Number((null==$||null==(j=$.fields)||null==(I=j.license)||null==(C=I.value)||null==(P=C.federation)?void 0:P.id)||(null==(A=$.federation)||null==(F=A.value)?void 0:F.id)),onSelect:function(e){return U(u.a.forms.user.setField(["license",e]))},required:!0}),t.createElement(o.a,{type:$.fields.license.error?"error":"info"},$.fields.license.error||""))))}var f=a.a.create({fields:{flex:1,width:"100%",paddingTop:32},field:{marginBottom:8,width:"100%"},ticketAddons:{marginBottom:8}})},650:function(e,n,r){"use strict";r.d(n,"a",(function(){return p})),r.d(n,"b",(function(){return g}));var t,a=r(4),i=r.n(a),l=r(28),o=r.n(l),s=r(36),u=r(37),c=r(5),d=r(161);function m(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function f(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?m(Object(r),!0).forEach((function(n){i()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var p=Object(u.a)(t||(t=o()(["\n  query QueryDropzoneUser($dropzoneId: Int!, $dropzoneUserId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n        credits\n        expiresAt\n        permissions\n\n        role {\n          id\n          name\n        }\n        rigInspections {\n          id\n          isOk\n          rig {\n            id\n          }\n        }\n\n        notifications {\n          edges {\n            node {\n              id\n              message\n              notificationType\n              createdAt\n            }\n          }\n        }\n\n\n        transactions {\n          edges {\n            node {\n              id\n              status\n              message\n              amount\n              createdAt\n            }\n          }\n        }\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          image\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n            federation {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function g(e){var n,r,t,a,i,l,o,u,m,g,b=Object(c.c)((function(e){return e.global.currentDropzoneId})),v=Object(d.b)(),E=Object(s.useQuery)(p,{variables:{dropzoneId:b,dropzoneUserId:e||Number(null==v||null==(n=v.data)||null==(r=n.dropzone)||null==(t=r.currentUser)?void 0:t.id)}});return f(f({},E),{},{dropzoneUser:e&&e!==Number(null==v||null==(a=v.data)||null==(i=a.dropzone)||null==(l=i.currentUser)?void 0:l.id)?null==E||null==(m=E.data)||null==(g=m.dropzone)?void 0:g.dropzoneUser:null==v||null==(o=v.data)||null==(u=o.dropzone)?void 0:u.currentUser})}},662:function(e,n,r){"use strict";r.d(n,"a",(function(){return A}));var t=r(4),a=r.n(t),i=r(11),l=r.n(i),o=r(28),s=r.n(o),u=r(6),c=r.n(u),d=r(36),m=r(0),f=r(5),p=r(1),g=r(2),b=r(287),v=r(285),E=r(333),y=r(329),h=r(46),O=r(33);function z(e){var n,r,t=Object(f.c)((function(e){return e.forms.rig})),a=Object(f.b)(),i=Object(h.a)(O.b.CreateRig);return m.createElement(g.a,null,m.createElement(b.a,{style:S.field,mode:"outlined",label:"Make",error:!!t.fields.make.error,value:t.fields.make.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["make",e]))}}),m.createElement(v.a,{type:t.fields.make.error?"error":"info"},t.fields.make.error||"e.g Javelin, Mirage"),m.createElement(b.a,{style:S.field,mode:"outlined",label:"Model",error:!!t.fields.model.error,value:t.fields.model.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["model",e]))}}),m.createElement(v.a,{type:t.fields.model.error?"error":"info"},t.fields.model.error||"e.g G4.1"),m.createElement(b.a,{style:S.field,mode:"outlined",label:"Serial",error:!!t.fields.serial.error,value:t.fields.serial.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["serial",e]))}}),m.createElement(v.a,{type:t.fields.serial.error?"error":"info"},t.fields.serial.error||""),m.createElement(b.a,{style:S.field,mode:"outlined",label:"Current canopy size",error:!!t.fields.canopySize.error,value:(null==(n=t.fields.canopySize.value)?void 0:n.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return a(f.a.forms.rig.setField(["canopySize",Number(e)]))}}),m.createElement(v.a,{type:t.fields.canopySize.error?"error":"info"},t.fields.canopySize.error||"Size of canopy in container"),e.showTypeSelect?m.createElement(y.a,{items:["student","sport","tandem"],renderItemLabel:function(e){return e},isDisabled:function(e){return!i&&"sport"!==e},selected:[(null==(r=t.fields.rigType)?void 0:r.value)||"sport"],onChangeSelected:function(e){var n=l()(e,1)[0];return a(f.a.forms.rig.setField(["rigType",n]))}}):null,m.createElement(E.a,{timestamp:t.fields.repackExpiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return a(f.a.forms.rig.setField(["repackExpiresAt",e]))},label:"Reserve repack expiry date"}),m.createElement(v.a,{type:t.fields.repackExpiresAt.error?"error":"info"},t.fields.repackExpiresAt.error||""))}var x,w,S=p.a.create({fields:{flex:1},field:{marginBottom:8}}),k=r(629);function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){a()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var C=Object(d.gql)(x||(x=s()(["\n  mutation CreateRig(\n    $make: String,\n    $model: String,\n    $serial: String,\n    $rigType: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),P=Object(d.gql)(w||(w=s()(["\n  mutation UpdateRig(\n    $id: Int!\n    $make: String,\n    $model: String,\n    $serial: String,\n    $rigType: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id,\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"])));function A(e){var n,r=e.open,t=(e.onClose,e.userId,e.dropzoneId,Object(f.b)()),a=Object(f.c)((function(e){return e.forms.rig})),i=Object(d.useMutation)(C),o=l()(i,2),s=o[0],u=o[1],p=Object(d.useMutation)(P),g=l()(p,2),b=g[0],v=g[1],E=u.loading||v.loading,y=m.useCallback((function(){var e=!1;return a.fields.make.value||(e=!0,t(f.a.forms.rig.setFieldError(["make","Required"]))),a.fields.model.value||(e=!0,t(f.a.forms.rig.setFieldError(["model","Required"]))),a.fields.serial.value||(e=!0,t(f.a.forms.rig.setFieldError(["serial","Required"]))),a.fields.canopySize.value||(e=!0,t(f.a.forms.rig.setFieldError(["canopySize","Required"]))),a.fields.repackExpiresAt.value||(e=!0,t(f.a.forms.rig.setFieldError(["repackExpiresAt","You must select a repack date in the future"]))),!e}),[JSON.stringify(a.fields)]),h=m.useCallback((function(){var n,r,i,l,o,u,d,m,p,g,v,E;return c.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(y()){h.next=2;break}return h.abrupt("return");case 2:return h.prev=2,g=null!=(n=a.original)&&n.id?b:s,h.next=6,c.a.awrap(g({variables:I(I({},null!=(r=a.original)&&r.id?{id:Number(null==(i=a.original)?void 0:i.id)}:{}),{},{make:a.fields.make.value,model:a.fields.model.value,serial:a.fields.serial.value,canopySize:a.fields.canopySize.value,rigType:a.fields.rigType.value,repackExpiresAt:a.fields.repackExpiresAt.value,userId:e.userId?Number(e.userId):null,dropzoneId:e.dropzoneId?Number(e.dropzoneId):null})}));case 6:if(v=h.sent,null==(E=null!=(l=a.original)&&l.id?null==(o=v.data)?void 0:o.updateRig:null==(u=v.data)?void 0:u.createRig)||null==(d=E.fieldErrors)||d.map((function(e){var n=e.field,r=e.message;switch(n){case"make":return t(f.a.forms.rig.setFieldError(["make",r]));case"model":return t(f.a.forms.rig.setFieldError(["model",r]));case"serial":return t(f.a.forms.rig.setFieldError(["serial",r]));case"canopy_size":return t(f.a.forms.rig.setFieldError(["canopySize",r]));case"repack_expires_at":return t(f.a.forms.rig.setFieldError(["repackExpiresAt",r]));case"rig_type":return t(f.a.forms.rig.setFieldError(["rigType",r]))}})),null==E||null==(m=E.errors)||!m.length){h.next=11;break}return h.abrupt("return",t(f.a.notifications.showSnackbar({message:null==E?void 0:E.errors[0],variant:"error"})));case 11:null!=E&&null!=(p=E.fieldErrors)&&p.length||e.onSuccess(),h.next=17;break;case 14:h.prev=14,h.t0=h.catch(2),t(f.a.notifications.showSnackbar({message:h.t0.message,variant:"error"}));case 17:case"end":return h.stop()}}),null,null,[[2,14]],Promise)}),[JSON.stringify(a.fields),s,b,e.onSuccess]);return m.createElement(k.a,{title:null!=(n=a.original)&&n.id?"Edit rig":"New rig",open:r,snapPoints:[0,580],onClose:function(){e.onClose(),t(f.a.forms.rig.reset())},buttonAction:h,buttonLabel:"Save",loading:E},m.createElement(z,{showTypeSelect:!!e.dropzoneId}))}},796:function(e,n,r){"use strict";r.r(n),r.d(n,"default",(function(){return Re}));var t,a=r(31),i=r.n(a),l=r(23),o=r.n(l),s=r(4),u=r.n(s),c=r(11),d=r.n(c),m=r(28),f=r.n(m),p=r(6),g=r.n(p),b=r(441),v=r(51),E=r(36),y=r(0),h=r(10),O=r(164),z=r(1),x=r(34),w=r(397),S=r(120),k=r(373),j=r(473),I=r(163),C=r(399),P=r(37),A=r(121),F=r(777),$=r(643),U=r(336),T=r(89),N=r(5),R=r(33),D=r(162),W=r(255),M=r(404),q=r(207),L=r(285),B=r(22),G=r(333),J=r(108),H=Object(P.a)(t||(t=f()(["\n  query RolesQuery($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles {\n        id\n        name\n      }\n    }\n  }\n"])));function Q(e){var n,r,t,a=y.useState(!1),i=d()(a,2),l=i[0],o=i[1],s=Object(N.c)((function(e){return e.global})).currentDropzoneId,u=Object(E.useQuery)(H,{variables:{dropzoneId:Number(s)}}),c=u.data;u.loading,u.refetch;return y.createElement(y.Fragment,null,y.createElement(B.b.Subheader,{style:{paddingLeft:0}},"Access level"),y.createElement(J.a,{onDismiss:function(){return o(!1)},visible:!e.disabled&&l,anchor:y.createElement(B.b.Item,{left:function(){return y.createElement(B.b.Icon,{icon:"lock"})},onPress:e.disabled?void 0:function(){o(!0)},title:(null==(n=e.value)?void 0:n.name)||"Access level",description:e.required?null:"Optional"})},null==c||null==(r=c.dropzone)||null==(t=r.roles)?void 0:t.map((function(n){return y.createElement(J.a.Item,{onPress:function(){o(!1),e.onSelect(n)},title:n.name||"-"})}))))}var V=r(46);function _(){var e=Object(N.c)((function(e){return e.forms.dropzoneUser})),n=Object(N.b)(),r=Object(V.a)(R.b.GrantPermission);return y.createElement(y.Fragment,null,y.createElement(Q,{value:e.fields.role.value,onSelect:function(e){return n(N.a.forms.dropzoneUser.setField(["role",e]))},disabled:!r,required:!0}),y.createElement(L.a,{type:e.fields.role.error?"error":"info"},e.fields.role.error),y.createElement(B.b.Subheader,{style:{paddingLeft:0}},"Financial"),y.createElement(G.a,{timestamp:e.fields.expiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return n(N.a.forms.dropzoneUser.setField(["expiresAt",e]))},label:"Membership expires"}),y.createElement(L.a,{type:e.fields.expiresAt.error?"error":"info"},e.fields.expiresAt.error))}var Z;z.a.create({fields:{flex:1},field:{marginBottom:8}});function Y(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function K(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(r),!0).forEach((function(n){u()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var X=Object(E.gql)(Z||(Z=f()(["\n  mutation UpdateDropzoneUser(\n    $userRoleId: Int,\n    $expiresAt: Int,\n    $dropzoneUserId: Int\n  ) {\n    updateDropzoneUser(\n      input: {\n        id: $dropzoneUserId,\n        attributes: {\n          userRoleId: $userRoleId,\n          expiresAt: $expiresAt,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      dropzoneUser {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n\n        user {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function ee(e){var n,r=Object(N.b)(),t=Object(N.c)((function(e){return e.forms.dropzoneUser})),a=Object(N.c)((function(e){return e.global})),i=Object(E.useMutation)(X),l=d()(i,2),o=l[0],s=l[1],u=y.useCallback((function(){var e=!1;return t.fields.role.value||(e=!0,r(N.a.forms.dropzoneUser.setFieldError(["role","User must have an access level"]))),t.fields.expiresAt.value||(e=!0,r(N.a.forms.dropzoneUser.setFieldError(["expiresAt","Membership expiry must be set"]))),!e}),[JSON.stringify(t.fields)]),c=y.useCallback((function(){var n,a,i,l,s,c,d,m,f,p;return g.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(u()){b.next=2;break}return b.abrupt("return");case 2:return b.prev=2,b.next=5,g.a.awrap(o({variables:K(K({},null!=(n=t.original)&&n.id?{id:null==(a=t.original)?void 0:a.id}:{}),{},{userRoleId:Number(null==(i=t.fields.role.value)?void 0:i.id),expiresAt:t.fields.expiresAt.value,dropzoneUserId:Number(null==(l=t.original)?void 0:l.id)})}));case 5:if(f=b.sent,null==(p=null==(s=f.data)?void 0:s.updateDropzoneUser)||null==(c=p.fieldErrors)||c.map((function(e){var n=e.field,t=e.message;switch(n){case"user_role":return r(N.a.forms.dropzoneUser.setFieldError(["role",t]));case"expires_at":return r(N.a.forms.dropzoneUser.setFieldError(["expiresAt",t]))}})),null==p||null==(d=p.errors)||!d.length){b.next=10;break}return b.abrupt("return",r(N.a.notifications.showSnackbar({message:null==p?void 0:p.errors[0],variant:"error"})));case 10:null!=p&&null!=(m=p.fieldErrors)&&m.length?console.error(p.fieldErrors):e.onSuccess(p.dropzoneUser),b.next=16;break;case 13:b.prev=13,b.t0=b.catch(2),r(N.a.notifications.showSnackbar({message:b.t0.message,variant:"error"}));case 16:case"end":return b.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(t.fields),o,e.onSuccess]);return y.createElement(W.a,null,y.createElement(M.a,{visible:!!e.open},y.createElement(w.a,{indeterminate:!0,visible:s.loading,color:a.theme.colors.accent}),y.createElement(M.a.Title,null,(null!=t&&null!=(n=t.original)&&n.id?"Edit":"New")+" dropzone user"),y.createElement(M.a.Content,null,y.createElement(_,null)),y.createElement(M.a.Actions,{style:{justifyContent:"flex-end"}},y.createElement(q.a,{onPress:function(){r(N.a.forms.dropzoneUser.reset()),e.onClose()}},"Cancel"),y.createElement(q.a,{onPress:c},"Save"))))}var ne=r(2),re=r(287),te=r(641);function ae(){var e,n,r,t,a,i,l=Object(N.c)((function(e){return e.forms.credits})),o=Object(N.b)(),s=(null==(e=l.original)?void 0:e.credits)||0,u=l.fields.amount.value||0,c="deposit"===l.fields.status.value?u+s:u-s;return y.createElement(y.Fragment,null,y.createElement(te.b,{defaultIndex:0,onChangeIndex:function(e){o(N.a.forms.credits.setField(["status",1===e?"withdrawal":"deposit"]))},mode:"fixed"},y.createElement(te.a,{label:"Deposit",icon:"arrow-up"},y.createElement(ne.a,null)),y.createElement(te.a,{label:"Withdraw",icon:"arrow-down"},y.createElement(ne.a,null))),y.createElement(M.a.Content,{style:{paddingTop:16}},y.createElement(re.a,{style:le.field,mode:"outlined",label:"Message",error:!!l.fields.message.error,value:(null==(n=l.fields.message.value)?void 0:n.toString())||"",onChangeText:function(e){return o(N.a.forms.credits.setField(["message",e]))}}),y.createElement(L.a,{type:l.fields.message.error?"error":"info"},l.fields.message.error||""),"deposit"===l.fields.status.value?y.createElement(ne.a,null,y.createElement(re.a,{style:le.field,mode:"outlined",label:"Add amount",error:!!l.fields.amount.error,value:(null==(r=l.fields.amount.value)?void 0:r.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(N.a.forms.credits.setField(["amount",Number(e)]))}}),y.createElement(L.a,{type:l.fields.amount.error?"error":"info"},l.fields.amount.error||""),y.createElement(k.a,null),y.createElement(j.a,null,y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,"Current balance"),y.createElement(j.a.Cell,{numeric:!0},"$"+((null==(t=l.original)?void 0:t.credits)||0))),y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,"Deposit"),y.createElement(j.a.Cell,{numeric:!0},"+$"+(l.fields.amount.value||0))),y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,y.createElement(x.a,{style:{fontWeight:"bold"}},"New total")),y.createElement(j.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c))))):y.createElement(ne.a,null,y.createElement(re.a,{style:le.field,mode:"outlined",label:"Withdraw amount",error:!!l.fields.amount.error,value:(null==(a=l.fields.amount.value)?void 0:a.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(N.a.forms.credits.setField(["amount",Number(e)]))}}),y.createElement(L.a,{type:l.fields.amount.error?"error":"info"},l.fields.amount.error||""),y.createElement(k.a,null),y.createElement(j.a,null,y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,"Current balance"),y.createElement(j.a.Cell,{numeric:!0},"$"+((null==(i=l.original)?void 0:i.credits)||0))),y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,"Withdraw"),y.createElement(j.a.Cell,{numeric:!0},"-$"+(l.fields.amount.value||0))),y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,y.createElement(x.a,{style:{fontWeight:"bold"}},"New total")),y.createElement(j.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c)))))))}var ie,le=z.a.create({fields:{flex:1},field:{marginBottom:8}}),oe=Object(E.gql)(ie||(ie=f()(["\n  mutation CreatrTransaction(\n    $message: String,\n    $status: String,\n    $amount: Float,\n    $dropzoneUserId: Int,\n  ) {\n    createTransaction(\n      input: {\n        attributes: {\n          amount: $amount,\n          dropzoneUserId: $dropzoneUserId,\n          message: $message,\n          status: $status,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      transaction {\n        id\n        amount\n        message\n\n        dropzoneUser {\n          id\n          credits\n\n          transactions {\n            edges {\n              node {\n                id\n                status\n                amount\n                createdAt\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function se(e){var n=Object(N.b)(),r=Object(N.c)((function(e){return e.forms.credits})),t=Object(N.c)((function(e){return e.global})),a=Object(E.useMutation)(oe),i=d()(a,2),l=i[0],o=i[1],s=y.useCallback((function(){var e=!1;return r.fields.amount.value||(e=!0,n(N.a.forms.credits.setFieldError(["amount","You must specify an amount"]))),!e}),[JSON.stringify(r.fields)]),u=y.useCallback((function(){var t,a,i,o,u,c,d,m,f;return g.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(s()){p.next=2;break}return p.abrupt("return");case 2:return p.prev=2,p.next=5,g.a.awrap(l({variables:{amount:r.fields.amount.value,message:r.fields.message.value,status:r.fields.status.value,dropzoneUserId:Number(null==(t=r.original)?void 0:t.id)}}));case 5:if(m=p.sent,null==(f=null!=(a=r.original)&&a.id?null==(i=m.data)?void 0:i.updateRig:null==(o=m.data)?void 0:o.createRig)||null==(u=f.fieldErrors)||u.map((function(e){var r=e.field,t=e.message;switch(r){case"amount":return n(N.a.forms.credits.setFieldError(["amount",t]));case"message":return n(N.a.forms.credits.setFieldError(["message",t]));case"status":return n(N.a.forms.credits.setFieldError(["status",t]))}})),null==f||null==(c=f.errors)||!c.length){p.next=10;break}return p.abrupt("return",n(N.a.notifications.showSnackbar({message:null==f?void 0:f.errors[0],variant:"error"})));case 10:null!=f&&null!=(d=f.fieldErrors)&&d.length||(n(N.a.forms.credits.reset()),e.onSuccess()),p.next=16;break;case 13:p.prev=13,p.t0=p.catch(2),n(N.a.notifications.showSnackbar({message:p.t0.message,variant:"error"}));case 16:case"end":return p.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(r.fields),l,e.onSuccess]);return y.createElement(W.a,null,y.createElement(M.a,{visible:!!e.open},y.createElement(w.a,{indeterminate:!0,visible:o.loading,color:t.theme.colors.accent}),y.createElement(ae,null),y.createElement(M.a.Actions,{style:{justifyContent:"flex-end"}},y.createElement(q.a,{onPress:function(){n(N.a.forms.credits.reset()),e.onClose()}},"Cancel"),y.createElement(q.a,{onPress:u},"Save"))))}var ue=r(662),ce=r(649),de=r(629),me=r(239);function fe(e){var n=e.open,r=e.onSuccess,t=Object(N.c)((function(e){return e.forms.user})),a=Object(N.b)(),i=Object(me.a)({onSuccess:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){a(N.a.notifications.showSnackbar({message:"Profile has been updated",variant:"success"})),a(N.a.forms.user.reset()),r()})),onFieldError:function(e,n){return a(N.a.forms.user.setFieldError([e,n]))},onError:function(e){return a(N.a.notifications.showSnackbar({message:e,variant:"error"}))}}),l=y.useCallback((function(){var e,n,r,i,l,o,s,u,c,d=!1,m=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return((null==(e=t.fields.name)||null==(n=e.value)?void 0:n.length)||0)<3&&(d=!0,a(N.a.forms.user.setFieldError(["name","Name is too short"]))),((null==(r=t.fields.email)||null==(i=r.value)?void 0:i.length)||0)<3&&(d=!0,a(N.a.forms.user.setFieldError(["email","Email is too short"]))),((null==(l=t.fields.phone)||null==(o=l.value)?void 0:o.length)||0)<3&&(d=!0,a(N.a.forms.user.setFieldError(["phone","Phone number is too short"]))),m.test((null==(s=t.fields)||null==(u=s.email)?void 0:u.value)||"")||(d=!0,a(N.a.forms.user.setFieldError(["email","Please enter a valid email"]))),((null==(c=t.fields.exitWeight)?void 0:c.value)||0)<30&&(d=!0,a(N.a.forms.user.setFieldError(["exitWeight","Exit weight seems too low?"]))),!d}),[JSON.stringify(t.fields),a]),o=y.useCallback((function(){var e,n,r,o,s,u,c;return g.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e=t.fields,n=e.name,r=e.license,o=e.phone,s=e.email,u=e.exitWeight,!l()){d.next=11;break}return d.prev=2,d.next=5,g.a.awrap(i.mutate({id:Number(t.original.id),name:n.value,licenseId:null!=(c=r.value)&&c.id?Number(r.value.id):null,phone:o.value,exitWeight:parseFloat(u.value),email:s.value}));case 5:d.sent,d.next=11;break;case 8:d.prev=8,d.t0=d.catch(2),a(N.a.notifications.showSnackbar({message:d.t0.message,variant:"error"}));case 11:case"end":return d.stop()}}),null,null,[[2,8]],Promise)}),[JSON.stringify(t.fields),a,i]);return y.createElement(de.a,{title:"Update information",open:n,snapPoints:[0,740],loading:i.loading,onClose:function(){e.onClose(),a(N.a.forms.user.reset())},buttonAction:o,buttonLabel:"Save"},y.createElement(ce.a,null))}function pe(e){var n=Object(N.c)((function(e){return e.global})),r=e.title,t=e.children,a=e.buttonIcon,i=e.onPressButton;return y.createElement(ne.a,{style:ge.card},y.createElement(ne.a,{style:ge.container},y.createElement(B.b.Subheader,{style:ge.title},r),a&&y.createElement(I.a,{icon:a,onPress:function(){return i?i():null},color:n.theme.colors.primary})),t)}var ge=z.a.create({container:{flexDirection:"row",justifyContent:"space-between"},title:{flexGrow:1},card:{marginVertical:8,width:"100%"}}),be=r(63),ve=r(155),Ee=r(318);function ye(e){var n,r,t,a=e.dropzoneUser,i=e.onEdit,l=e.canEdit,o=e.children,s=e.onPressAvatar,u=Object(N.c)((function(e){return e.global})).theme;return y.createElement(ne.a,{style:[he.container,{backgroundColor:u.colors.primary}]},y.createElement(ne.a,{style:he.actions},l?y.createElement(I.a,{icon:"pencil",size:20,color:u.colors.surface,onPress:function(){return i?i():null}}):null),y.createElement(ne.a,{style:he.avatarContainer},y.createElement(ne.a,{style:{flex:1/3}},y.createElement(be.a,{onPress:s},null!=a&&null!=(n=a.user)&&n.image?y.createElement(B.a.Image,{size:80,source:{uri:null==a?void 0:a.user.image},style:{backgroundColor:u.colors.surface}}):y.createElement(B.a.Icon,{size:80,icon:"account",color:u.colors.primary,style:{backgroundColor:u.colors.surface}}))),y.createElement(ne.a,{style:he.titleContainer},y.createElement(ve.a,{style:he.title},null==a||null==(r=a.user)?void 0:r.name),y.createElement(Ee.a,{style:he.paragraph},null==a||null==(t=a.role)?void 0:t.name))),o)}var he=z.a.create({container:{width:"100%",paddingTop:16},actions:{flexDirection:"row",justifyContent:"flex-end"},avatarContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:16,marginBottom:16},titleContainer:{paddingLeft:48,flex:2/3,alignItems:"flex-start",justifyContent:"center"},title:{color:"white"},paragraph:{color:"white"}});function Oe(e){var n=e.items,r=1/n.length;return y.createElement(y.Fragment,null,y.createElement(k.a,{style:ze.divider}),y.createElement(ne.a,{style:ze.container},n.map((function(e,t){return y.createElement(y.Fragment,null,y.createElement(ne.a,{style:{flex:r},key:"info-grid-"+t},y.createElement(B.b.Item,{titleStyle:[ze.title,{fontWeight:!1!==e.bold?"bold":void 0}],title:e.value,descriptionStyle:ze.description,description:e.title,onPress:e.onPress})),t===n.length-1?null:y.createElement(k.a,{key:"info-grid-divider-"+t,style:ze.verticalDivider}))}))))}var ze=z.a.create({container:{width:"100%",flexDirection:"row"},divider:{height:z.a.hairlineWidth,width:"100%",backgroundColor:"white"},verticalDivider:{width:z.a.hairlineWidth,height:"100%",backgroundColor:"white"},title:{textAlign:"center",color:"white"},description:{textAlign:"center",color:"white"}}),xe=r(161),we=r(650);var Se,ke,je,Ie=function(e){e.type;var n=e.selected,r=e.disabled,t=e.onPress,a={actAsDZSO:"shield-cross",actAsGCA:"radio-handheld",actAsLoadMaster:"shield-account",actAsPilot:"shield-airplane",actAsRigInspector:"shield-search"}[e.type],i={actAsDZSO:"DZSO",actAsGCA:"GCA",actAsLoadMaster:"Load Master",actAsPilot:"Pilot",actAsRigInspector:"Rig Inspector"}[e.type];return y.createElement(S.a,{mode:n?"outlined":"flat",icon:a,textStyle:n?{}:{color:"white"},style:[{marginHorizontal:2,maxHeight:35},n?void 0:{backgroundColor:"transparent",borderColor:"white"}].filter(Boolean),disabled:r,onPress:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){return t()}))},i)},Ce=r(55),Pe=Object(P.a)(Se||(Se=f()(["\nmutation RevokePermission(\n  $dropzoneUserId: Int!,\n  $permissionName: Permission!,\n){\n  revokePermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n    dropzoneUser {\n      id\n      permissions\n    }\n    fieldErrors {\n      field\n      message\n    }\n    errors\n  }\n}\n"]))),Ae=Object(Ce.a)(Pe,{getPayload:function(e){return e.revokePermission},validates:{permissionName:[Object(Ce.c)("Permission name is required")]}}),Fe=Object(P.a)(ke||(ke=f()(["\nmutation GrantPermission(\n  $dropzoneUserId: Int!,\n  $permissionName: Permission!,\n){\n  grantPermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n    dropzoneUser {\n      id\n      permissions\n    }\n    fieldErrors {\n      field\n      message\n    }\n    errors\n  }\n}\n"]))),$e=Object(Ce.a)(Fe,{getPayload:function(e){return e.grantPermission},validates:{permissionName:[Object(Ce.c)("Permission name is required")]}});function Ue(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Te(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ue(Object(r),!0).forEach((function(n){u()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ue(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Ne=Object(P.a)(je||(je=f()(["\n  mutation UpdateUserImage(\n    $id: Int,\n    $image: String\n  ){\n    updateUser(input: {\n      id: $id\n      attributes: {\n        image: $image,\n      }\n    }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        image\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function Re(){var e,n,r,t,a,l,s,u,c,m,f,p=Object(N.c)((function(e){return e.global})),z=Object(N.c)((function(e){return e.forms})),P=Object(N.b)(),W=Object(v.useNavigation)(),M=Object(xe.b)().currentUser,q=Object(v.useRoute)(),L=(null==M?void 0:M.id)===q.params.userId,B=Object(we.b)(Number(q.params.userId)),G=B.dropzoneUser,J=B.loading,H=B.refetch,Q=Object(V.a)(R.b.GrantPermission),_=Object(v.useIsFocused)();y.useEffect((function(){_&&H()}),[_]);var Z=Object(E.useMutation)(Ne),Y=d()(Z,2),K=Y[0],X=(Y[1],Ae({onSuccess:function(e){H(),P(N.a.notifications.showSnackbar({message:"Permission revoked"}))},onError:function(e){P(N.a.notifications.showSnackbar({message:e,variant:"error"}))}})),ne=$e({onSuccess:function(e){H(),P(N.a.notifications.showSnackbar({message:"Permission granted"}))},onError:function(e){P(N.a.notifications.showSnackbar({message:e,variant:"error"}))}});y.useEffect((function(){!function(){var e;g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("web"===h.a.OS){n.next=6;break}return n.next=3,g.a.awrap(F.b());case 3:e=n.sent,"granted"!==e.status&&alert("Sorry, we need camera roll permissions to make this work!");case 6:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]);var re=y.useCallback((function(){var e,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,g.a.awrap(F.a({mediaTypes:$.a.Images,allowsEditing:!0,aspect:[4,3],quality:.1,base64:!0}));case 3:return n=r.sent,r.next=6,g.a.awrap(K({variables:{id:Number(null==G||null==(e=G.user)?void 0:e.id),image:"data:image/jpeg;base64,"+n.base64}}));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0);case 11:case"end":return r.stop()}}),null,null,[[0,8]],Promise)}),[P]),te=(null==G||null==(e=G.permissions)?void 0:e.filter((function(e){return/^actAs/.test(e)})))||[],ae=Object(V.a)(R.b.CreateUserTransaction),ie=Object(V.a)(R.b.UpdateUser);return y.createElement(y.Fragment,null,J&&y.createElement(w.a,{color:p.theme.colors.accent,indeterminate:!0,visible:J}),y.createElement(D.a,{contentContainerStyle:De.content,refreshControl:y.createElement(O.a,{refreshing:J,onRefresh:function(){return H()}})},y.createElement(A.b,{horizontal:!0,style:{width:"100%"},contentContainerStyle:{flexGrow:1,padding:8,justifyContent:"space-evenly",backgroundColor:p.theme.colors.primary}},[R.b.ActAsPilot,R.b.ActAsDzso,R.b.ActAsGca,R.b.ActAsRigInspector,R.b.ActAsLoadMaster].map((function(e){return function(e){return Q||te.includes(e)}(e)?y.createElement(Ie,{type:e,selected:te.includes(e),onPress:function(){return Q?te.includes(e)?X.mutate({permissionName:e,dropzoneUserId:Number(G.id)},{update:function(n,r){var t,a,i,l;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r.data,i=n.readQuery({query:U.a,variables:{permissions:[e],dropzoneId:Number(p.currentDropzoneId)}}),l=((null==i||null==(t=i.dropzone)||null==(a=t.dropzoneUsers)?void 0:a.edges)||[]).filter((function(e){return e.node.id!==G.id})),n.writeQuery({query:U.a,variables:{permissions:[e],dropzoneId:Number(p.currentDropzoneId)},data:Te(Te({},i),{},{dropzone:Te(Te({},null==i?void 0:i.dropzone),{},{dropzoneUsers:l})})}),o.abrupt("return",{data:Te(Te({},i),{},{dropzone:Te(Te({},null==i?void 0:i.dropzone),{},{dropzoneUsers:l})})});case 5:case"end":return o.stop()}}),null,null,null,Promise)}}):ne.mutate({permissionName:e,dropzoneUserId:Number(G.id)},{update:function(n,r){var t,a,i,l,s,u,c,d,m,f,b,v,E;return g.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return d=r.data,m=n.readQuery({query:U.a,variables:{permissions:[e],dropzoneId:Number(p.currentDropzoneId)}}),f=(null==m||null==(t=m.dropzone)||null==(a=t.dropzoneUsers)?void 0:a.edges)||[],b=!!f.find((function(e){return e.node.id===G.id})),v=b?o()(((null==m||null==(i=m.dropzone)||null==(l=i.dropzoneUsers)?void 0:l.edges)||[]).map((function(e){var n;return e.node.id!==G.id?e:Te(Te({},e),{},{node:Te(Te({},e.node),null==(n=d.grantPermission)?void 0:n.dropzoneUser)})}))):[].concat(o()((null==m||null==(s=m.dropzone)||null==(u=s.dropzoneUsers)?void 0:u.edges)||[]),[{edge:{node:null==(c=d.grantPermission)?void 0:c.dropzoneUser}}]),E=Te(Te({},m),{},{dropzone:Te(Te({},null==m?void 0:m.dropzone),{},{dropzoneUsers:v})}),n.writeQuery({query:U.a,variables:{dropzoneId:Number(p.currentDropzoneId),permissions:[e]},data:E}),g.abrupt("return",{data:E});case 8:case"end":return g.stop()}}),null,null,null,Promise)}}):null}}):null}))),y.createElement(ye,{dropzoneUser:G,canEdit:L,onEdit:function(){null!=G&&G.user&&P(N.a.forms.user.setOpen(null==G?void 0:G.user))},onPressAvatar:re},y.createElement(A.b,{horizontal:!0,style:{marginVertical:8}},y.createElement(S.a,{icon:function(e){var n=e.size;return y.createElement(b.a,{name:"email",size:n,color:"#FFFFFF"})},mode:"outlined",style:De.chip,textStyle:De.chipTitle},(null==G||null==(n=G.user)?void 0:n.email)||"-"),y.createElement(S.a,{icon:function(e){var n=e.size;return y.createElement(b.a,{name:"phone",size:n,color:"#FFFFFF"})},mode:"outlined",style:De.chip,textStyle:De.chipTitle},(null==G||null==(r=G.user)?void 0:r.phone)||"-"),y.createElement(S.a,{icon:function(e){var n=e.size;return y.createElement(b.a,{name:"card-account-details-star-outline",size:n,color:"#FFFFFF"})},mode:"outlined",style:De.chip,textStyle:De.chipTitle,onPress:function(){ie&&P(N.a.forms.dropzoneUser.setOpen(G))}},null!=G&&G.expiresAt?Object(C.a)(1e3*((null==G?void 0:G.expiresAt)||0),"yyyy/MM/dd"):"Not a member")),y.createElement(k.a,{style:De.divider}),y.createElement(Oe,{items:[{title:"Funds",value:"$"+((null==G?void 0:G.credits)||0),onPress:function(){G&&ae&&P(N.a.forms.credits.setOpen(G))}},{title:"License",value:""+((null==G||null==(t=G.user)||null==(a=t.license)?void 0:a.name)||"-")},{title:"Exit weight",value:Math.round(Number(null==G||null==(l=G.user)?void 0:l.exitWeight)).toString()||"-"}]}),y.createElement(k.a,{style:[De.divider,{backgroundColor:"white"}]})),y.createElement(pe,{title:"Rigs",buttonIcon:"plus",onPressButton:function(){return P(N.a.forms.rig.setOpen(!0))}},y.createElement(j.a,null,y.createElement(j.a.Header,null,y.createElement(j.a.Title,null,"Container"),y.createElement(j.a.Title,{numeric:!0},"Repack due"),y.createElement(j.a.Title,{numeric:!0},"Canopy size"),y.createElement(j.a.Title,{numeric:!0},"Inspected")),null==G||null==(s=G.user)||null==(u=s.rigs)?void 0:u.map((function(e){var n,r;return y.createElement(j.a.Row,{key:"rig-"+e.id,onPress:function(){P(N.a.forms.rig.setOpen(e))},onLongPress:function(){return W.navigate("RigInspectionScreen",{dropzoneUserId:Number(q.params.userId),rig:e})},pointerEvents:"none"},y.createElement(j.a.Cell,null,[null==e?void 0:e.make,null==e?void 0:e.model,"#"+(null==e?void 0:e.serial)].join(" ")),y.createElement(j.a.Cell,{numeric:!0},null!=e&&e.repackExpiresAt?Object(C.a)(1e3*e.repackExpiresAt,"yyyy/MM/dd"):"-"),y.createElement(j.a.Cell,{numeric:!0},""+(null==e?void 0:e.canopySize)),y.createElement(j.a.Cell,{numeric:!0},y.createElement(I.a,{icon:null!=G&&null!=(n=G.rigInspections)&&n.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?"eye-check":"eye-minus",color:null!=G&&null!=(r=G.rigInspections)&&r.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?T.d:T.e,onPress:function(){return W.navigate("RigInspectionScreen",{dropzoneUserId:Number(q.params.userId),rig:e})}})))})))),y.createElement(pe,i()({title:"Transactions"},ae?{buttonIcon:"plus",onPressButton:function(){G&&P(N.a.forms.credits.setOpen(G))}}:{}),y.createElement(j.a,null,y.createElement(j.a.Header,null,y.createElement(j.a.Title,null,"Time"),y.createElement(j.a.Title,null,"Type"),y.createElement(j.a.Title,null,"Message"),y.createElement(j.a.Title,{numeric:!0},"Amount")),null==G||null==(c=G.transactions)||null==(m=c.edges)?void 0:m.map((function(e){var n,r,t,a,i,l;return y.createElement(j.a.Row,{key:"transaction-"+(null==e||null==(n=e.node)?void 0:n.id)},y.createElement(j.a.Cell,null,y.createElement(x.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null!=e&&null!=(r=e.node)&&r.createdAt?Object(C.a)(1e3*(null==e||null==(t=e.node)?void 0:t.createdAt),"yyyy/MM/dd hh:mm"):null)),y.createElement(j.a.Cell,null,y.createElement(x.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null==e||null==(a=e.node)?void 0:a.status)),y.createElement(j.a.Cell,null,null==e||null==(i=e.node)?void 0:i.message),y.createElement(j.a.Cell,{numeric:!0},null==e||null==(l=e.node)?void 0:l.amount))}))))),y.createElement(ue.a,{onClose:function(){return P(N.a.forms.rig.setOpen(!1))},onSuccess:function(){return P(N.a.forms.rig.setOpen(!1))},open:z.rig.open,userId:Number(null==G||null==(f=G.user)?void 0:f.id)}),y.createElement(ee,{onClose:function(){return P(N.a.forms.dropzoneUser.setOpen(!1))},onSuccess:function(e){P(N.a.forms.dropzoneUser.setOpen(!1)),(null==M?void 0:M.id)===(null==G?void 0:G.id)&&P(N.a.global.setUser(e.user))},open:z.dropzoneUser.open}),y.createElement(se,{onClose:function(){return P(N.a.forms.credits.setOpen(!1))},onSuccess:function(){return P(N.a.forms.credits.setOpen(!1))},open:z.credits.open,dropzoneUser:G||void 0}),y.createElement(fe,{onClose:function(){return P(N.a.forms.user.setOpen(!1))},onSuccess:function(){return P(N.a.forms.user.setOpen(!1))},open:z.user.open}))}var De=z.a.create({container:{flex:1},content:{flexGrow:1,paddingBottom:56,paddingHorizontal:0},divider:{height:1,width:"100%"},chip:{margin:1,backgroundColor:"transparent",minHeight:23,borderWidth:0,justifyContent:"center",alignItems:"center",display:"flex"},chipTitle:{color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:12,lineHeight:24,textAlignVertical:"center"}})}}]);
//# sourceMappingURL=0.f76c1ed8.chunk.js.map