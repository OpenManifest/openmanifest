{"version":3,"sources":["components/input/date_picker/DatePicker.web.tsx","components/forms/rig_inspection_template/RigInspectionItem.tsx","components/forms/rig_inspection_template/RigInspectionTemplateForm.tsx","screens/authenticated/settings/RigInspectionTemplateScreen.tsx"],"names":["DatePicker","props","React","open","setOpen","date","onChange","getTime","onDismiss","visible","anchor","Item","onPress","disabled","title","label","description","timestamp","format","left","Icon","icon","selectedDays","Date","onDayClick","RigInspectionItem","canInspect","useRestriction","Permission","ActAsRigInspector","config","valueType","style","flex","mode","marginVertical","value","onChangeText","text","type","right","Android","status","keyboardType","Number","time","toString","RigInspectionTemplateForm","state","useAppSelector","forms","rigInspectionTemplate","newItem","setNewItem","fabOpen","setFabOpen","dispatch","useAppDispatch","fields","map","item","index","View","display","flexDirection","alignItems","flexGrow","onTouchEnd","IconButton","actions","setFields","filter","_","i","Divider","Portal","Dialog","Title","Content","TextInput","placeholder","Checkbox","isRequired","Actions","Button","undefined","field","idx","FAB","Group","onStateChange","StyleSheet","create","marginBottom","QUERY_RIG_INSPECTION","gql","MUTATION_UPDATE_FORM","RigInspectionTemplateScreen","currentDropzone","useCurrentDropzone","useQuery","variables","dropzoneId","dropzone","id","data","canEdit","loading","UpdateFormTemplate","useMutation","mutationUpdateForm","mutation","JSON","stringify","updateForm","a","async","formId","definition","notifications","showSnackbar","message","variant","original","ScrollableScreen","Card","width"],"mappings":"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","file":"static/js/23.7f5fd128.chunk.js","sourcesContent":["import * as React from 'react';\nimport { List, Menu } from 'react-native-paper';\nimport DayPicker from 'react-day-picker';\nimport 'react-day-picker/lib/style.css';\nimport format from \"date-fns/format\";\n\ninterface IDatepicker {\n  label: string;\n  timestamp: number;\n  disabled?: boolean;\n  onChange(timestamp: number): void;\n}\nexport default function DatePicker(props: IDatepicker) {\n  const [open, setOpen] = React.useState(false);\n\n  const onDismissSingle = React.useCallback(() => {\n    setOpen(false);\n  }, [setOpen]);\n\n  const onConfirmSingle = React.useCallback(\n    ({ date }: { date: Date }) => {\n      setOpen(false);\n      props.onChange(date.getTime() / 1000);\n    },\n    [setOpen, props.onChange]\n  );\n\n  return (\n    <>\n    <Menu\n      onDismiss={() => setOpen(false)}\n      visible={open}\n      anchor={\n        <List.Item\n          onPress={() => setOpen(true)}\n          disabled={!!props.disabled}\n          title={props.label}\n          description={\n            props.timestamp ? \n              format(props.timestamp * 1000, \"yyyy/MM/dd\") :\n              \"No date selected\"\n          }\n          left={() => <List.Icon icon=\"calendar\" />}\n        />\n      }>\n      <DayPicker\n        selectedDays={props.timestamp ? [new Date(props.timestamp * 1000)] : []}\n        \n        onDayClick={(date) => {\n          props.onChange(date.getTime() / 1000);\n          setOpen(false);\n        }}\n\n      />\n    </Menu>\n    </>\n  );\n}","import * as React from \"react\";\nimport { View } from \"react-native\";\nimport { Checkbox, HelperText, List, TextInput } from \"react-native-paper\";\nimport { Permission } from \"../../../graphql/schema.d\";\nimport useRestriction from \"../../../hooks/useRestriction\";\nimport DatePicker from '../../input/date_picker/DatePicker';\nimport { FieldItem } from \"./slice\";\n\ninterface IFormItemItem {\n  value: string | number | boolean;\n  onChange(value: FieldItem): void;\n  config: FieldItem;\n}\n\nexport default function RigInspectionItem(props: IFormItemItem) {\n  const canInspect = useRestriction(Permission.ActAsRigInspector);\n\n  if (props.config?.valueType && props.config?.valueType === \"string\") {\n    return (\n      <View style={{ flex: 1 }}>\n        <TextInput\n          mode=\"outlined\"\n          disabled={!canInspect}\n          style={{ marginVertical: 8 }}\n          value={props.value as string}\n          onChangeText={(text) => props.onChange({ ...props.config, value: text})}\n          label={props.config.label || \"\"}\n        />\n        <HelperText type=\"info\">{props.config.description || \"No description\"}</HelperText>\n      </View>\n    )\n  } else if (props.config?.valueType && props.config?.valueType === \"boolean\") {\n    return (\n      <List.Item\n        title={props.config.label || \"\"}\n        disabled={!canInspect}\n        description={props.config.description}\n        style={{ marginVertical: 8 }}\n        right={() =>\n          <Checkbox.Android\n            status={\n              !!props.value\n                ? \"checked\"\n                : \"unchecked\"\n            }\n          />\n        }\n        onPress={\n          () => props.onChange({ ...props.config, value: !props.value as boolean})\n        }\n      />\n    )\n  } else if (props.config?.valueType && props.config?.valueType === \"integer\") {\n    return (\n      <View style={{ flex: 1 }}>\n        <TextInput\n          disabled={!canInspect}\n          value={props.value as string}\n          mode=\"outlined\"\n          onChangeText={(text) => props.onChange({ ...props.config, value: text as string })}\n          label={props.config.label || \"\"}\n          keyboardType=\"number-pad\"\n          style={{ marginVertical: 8 }}\n\n        />\n        <HelperText type=\"info\">{props.config.description || \"No description\"}</HelperText>\n      </View>\n    )\n  } else if (props.config?.valueType && props.config?.valueType === \"date\") {\n    return (\n      <View style={{ flex: 1 }}>\n        <DatePicker\n          disabled={!canInspect}\n          timestamp={Number(props.value)}\n          onChange={(time) => props.onChange({ ...props.config, value: time.toString() as string })}\n          label={props.config.label || \"\"}\n        />\n        <HelperText type=\"info\">{props.config.description || \"No description\"}</HelperText>\n      </View>\n    )\n  }\n  \n  return null;\n}","import * as React from 'react';\nimport { StyleSheet, View } from 'react-native';\n\nimport { actions, useAppSelector, useAppDispatch } from '../../../redux';\n\nimport { FieldItem } from \"./slice\";\nimport RigInspectionItem from './RigInspectionItem';\nimport { Button, Checkbox, Dialog, Divider, FAB, IconButton, Portal, TextInput } from 'react-native-paper';\n\n\n\n\nexport default function RigInspectionTemplateForm() {\n  const state = useAppSelector(state => state.forms.rigInspectionTemplate);\n  const [newItem, setNewItem] = React.useState<Partial<FieldItem> & { index?: number } | null>(null);\n  const [fabOpen, setFabOpen] = React.useState(false);\n\n  const dispatch = useAppDispatch();\n  \n\n  return ( \n    <>\n      {\n        state.fields?.map((item, index) => {\n          return (\n            <>\n              <View style={{ display: \"flex\", flexDirection: \"row\", alignItems: \"center\"}}>\n                <View style={{ flexGrow: 1 }} onTouchEnd={() => setNewItem({ ...item, index })}>\n                  <RigInspectionItem\n                    config={item}\n                    value={item?.value || \"\"}\n                    onChange={() =>\n                      null\n                    }\n                  />\n                </View>\n                <IconButton icon=\"delete\" onPress={() => dispatch(actions.forms.rigInspectionTemplate.setFields(state.fields.filter((_, i) => i !== index)))} />\n              </View>\n              <Divider />\n            </>\n          )\n        })\n      }\n      <Portal>\n        <Dialog visible={!!newItem}>\n          <Dialog.Title>New field</Dialog.Title>\n          <Dialog.Content>\n            <TextInput\n              label=\"Name\"\n              mode=\"outlined\"\n              value={newItem?.label}\n              onChangeText={(text) => setNewItem({ ...newItem, label: text })}\n            />\n\n            <TextInput\n              label=\"Description\"\n              placeholder=\"optional\"\n              mode=\"outlined\"\n              value={newItem?.description}\n              onChangeText={(text) => setNewItem({ ...newItem, description: text })}\n            />\n\n            <Checkbox.Item\n              label=\"This is a required field\"\n              mode=\"android\"\n              onPress={() => setNewItem({ ...newItem, isRequired: !newItem?.isRequired })}\n              status={newItem?.isRequired ? \"checked\" : \"unchecked\"}\n            />\n          </Dialog.Content>\n          <Dialog.Actions>\n            <Button onPress={() => setNewItem(null)}>\n              Cancel\n            </Button>\n            <Button\n              onPress={() => {\n                if (newItem?.index !== undefined) {\n                  // If index was provided, replace existing field at that index\n                  dispatch(actions.forms.rigInspectionTemplate.setFields(state.fields.map((field, idx) => idx === newItem.index ? newItem : field) as FieldItem[]));\n                } else {\n                  dispatch(actions.forms.rigInspectionTemplate.setFields([...state.fields, newItem as FieldItem]));\n                }\n                setNewItem(null);\n              }}\n            >\n              Save\n            </Button>\n          </Dialog.Actions>\n        </Dialog>\n        <FAB.Group\n          open={fabOpen}\n          visible\n          icon={fabOpen ? 'close' : 'plus'}\n          actions={[\n            { icon: 'pencil', label: \"Text\", onPress: () => setNewItem({ valueType: \"string\" }), },\n            {\n              icon: 'calendar',\n              label: 'Date',\n              onPress: () => setNewItem({ valueType: \"date\" }),\n            },\n            {\n              icon: 'counter',\n              label: 'Number',\n              onPress: () => setNewItem({ valueType: \"integer\" }),\n            },\n            {\n              icon: 'checkbox-marked-circle-outline',\n              label: 'Checkbox',\n              onPress: () => setNewItem({ valueType: \"boolean\" }),\n            },\n          ]}\n          onStateChange={({ open }) => setFabOpen(open)}\n        />\n      </Portal>\n    </>\n  );\n}\n\nconst styles = StyleSheet.create({\n  fields: {\n    flex: 1,\n  },\n  field: {\n    marginBottom: 8,\n  }\n});\n","import { useMutation, useQuery } from '@apollo/client';\nimport gql from 'graphql-tag';\nimport * as React from 'react';\nimport { Button, Card } from 'react-native-paper';\nimport RigInspectionTemplateForm from \"../../../components/forms/rig_inspection_template/RigInspectionTemplateForm\";\nimport ScrollableScreen from '../../../components/layout/ScrollableScreen';\nimport useCurrentDropzone from '../../../graphql/hooks/useCurrentDropzone';\nimport { Mutation, Permission, Query } from '../../../graphql/schema.d';\nimport useRestriction from '../../../hooks/useRestriction';\nimport { actions, useAppDispatch, useAppSelector } from '../../../redux';\n\nconst QUERY_RIG_INSPECTION = gql`\n  query RigInspection($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      rigInspectionTemplate {\n        id\n        name\n        definition\n      }\n    }\n  }\n`;\n\nconst MUTATION_UPDATE_FORM = gql`\n  mutation UpdateRigInspectionTemplate(\n    $dropzoneId: Int,\n    $formId: Int,\n    $definition: String\n  ) {\n    updateFormTemplate(input: {\n      id: $formId\n      attributes: {\n        dropzoneId: $dropzoneId,\n        definition: $definition\n      }\n    }) {\n      formTemplate {\n        id\n        name\n        definition\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n`;\n\n\n\nexport default function RigInspectionTemplateScreen() {\n  const state = useAppSelector(state => state.forms.rigInspectionTemplate);\n  const currentDropzone = useCurrentDropzone();\n  const dispatch = useAppDispatch();\n  const { data, loading } = useQuery<Query>(QUERY_RIG_INSPECTION, {\n    variables: {\n      dropzoneId: Number(currentDropzone?.dropzone?.id),\n    }\n  });\n\n  const canEdit = useRestriction(Permission.UpdateFormTemplate);\n  const [mutationUpdateForm, mutation] = useMutation<Mutation>(MUTATION_UPDATE_FORM);\n\n  React.useEffect(() => {\n    if (data?.dropzone?.rigInspectionTemplate) {\n      \n      dispatch(\n        actions.forms.rigInspectionTemplate.setOpen(\n          data.dropzone.rigInspectionTemplate\n        )\n      )\n    }\n  }, [JSON.stringify(data?.dropzone?.rigInspectionTemplate)]);\n\n  const updateForm = React.useCallback(async () => {\n    try {\n      await mutationUpdateForm({\n          variables: {\n            formId: Number(data?.dropzone.rigInspectionTemplate!.id),\n            dropzoneId: Number(data?.dropzone?.id),\n            definition: JSON.stringify(state.fields),\n        }\n      });\n      dispatch(actions.notifications.showSnackbar({ message: \"Template saved\", variant: \"success\" }));\n    } catch(error) {\n      dispatch(actions.notifications.showSnackbar({ message: error.message, variant: \"error\" }));\n    }\n  }, [JSON.stringify(state.fields), state?.original?.id, currentDropzone?.dropzone?.id]);\n\n  return (\n    <ScrollableScreen>\n\n      <Card style={{ width: \"100%\"}}>\n        <Card.Title title=\"Rig Inspection Form Template\" />\n\n        <Card.Content>\n          <RigInspectionTemplateForm />\n        </Card.Content>\n\n        <Card.Actions>\n          <Button\n            disabled={!canEdit}\n            mode=\"contained\"\n            loading={mutation.loading}\n            onPress={() => updateForm()}\n            style={{ width: \"100%\"}}\n          >\n            Save template\n          </Button>\n        </Card.Actions>\n      </Card>\n    </ScrollableScreen>\n  );\n}\n\n"],"sourceRoot":""}