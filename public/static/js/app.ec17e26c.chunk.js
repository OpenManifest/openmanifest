(this.webpackJsonp=this.webpackJsonp||[]).push([[1],{323:function(e,n,t){e.exports=t.p+"static/media/logo.6fa2ed95.png"},482:function(e,n,t){e.exports=t.p+"static/media/weather.0908eb6b.png"},528:function(e,n,t){e.exports=t(650)},580:function(e,n,t){e.exports=t.p+"./fonts/SpaceMono-Regular.ttf"},593:function(e,n){},650:function(e,n,t){"use strict";t.r(n);var r=t(3),l=t.n(r),a=t(38),o=t(495),i=t(79),s=t(691),u=t(692),c=t(687),d=t(683),m=t(684),f=t(693),p=t(0),g=t(502),v=t(256),b=t(452),h=t(415),y=t(423),E=t(196),w=t(238),x=t(9),S=t(2),k=t(432),C=t(690),z=t(453),I=t.n(z),O=t(1);function j(e){var n=e.children;return p.createElement(S.a,{style:O.a.absoluteFill},n)}var T=t(4),P=t.n(T),F=t(22),D=t(570),$=t(460),N=t(459),A=t(118),R=t(45),U=t(454),L=t.n(U),B=t(356),M=t(5),W=t.n(M),V={original:null,open:!1,fields:{amount:{value:null,error:null},status:{value:"deposit",error:null},message:{value:"",error:null}}},H=Object(R.b)({name:"forms/credits",initialState:V,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];r in e.fields&&"error"in e.fields[r]&&(e.fields[r].error=l)},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=V.fields):(e.original=n.payload,e.open=!0)},reset:function(e){e.fields=V.fields,e.original=null}}}),G={original:null,open:!1,fields:{federation:{value:null,error:null},lat:{value:null,error:null},lng:{value:null,error:null},name:{value:"",error:null},secondaryColor:{value:"",error:null},primaryColor:{value:"",error:null},banner:{value:"",error:null},isCreditSystemEnabled:{value:!1,error:null},isPublic:{value:!1,error:null}}},q=Object(R.b)({name:"forms/dropzone",initialState:G,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];r in e.fields&&"error"in e.fields[r]&&(e.fields[r].error=l)},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=G.fields):(e.original=n.payload,e.open=!0,Object.keys(n.payload).forEach((function(t){var r=t;if(r in e.fields){var l=r;e.fields[l].value=n.payload[l]}})))},reset:function(e){e.fields=G.fields,e.original=null}}}),Q={original:null,open:!1,fields:{role:{value:null,error:null},expiresAt:{value:null,error:null}}},Y=Object(R.b)({name:"forms/dropzoneUser",initialState:Q,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=Q.fields):(e.original=n.payload,e.open=!0,Object.keys(n.payload).forEach((function(t){var r=t;if(r in e.fields){var l=r;e.fields[l].value=n.payload[l]}})))},reset:function(e){e.fields=Q.fields,e.original=null}}}),_={original:null,open:!1,fields:{name:{value:"",error:null},cost:{value:null,error:null},ticketTypeIds:{value:[],error:null}}},J=Object(R.b)({name:"forms/extra",initialState:_,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields.name.error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=_.fields):(e.original=n.payload,e.open=!0,e.fields.ticketTypeIds.value=n.payload.ticketTypes.map((function(e){var n=e.id;return Number(n)})),e.fields.cost.value=n.payload.cost,e.fields.name.value=n.payload.name||"")},reset:function(e){e.fields=_.fields,e.original=null}}}),Z={original:null,open:!1,fields:{name:{value:"",error:null},gca:{value:null,error:null},dispatchAt:{value:null,error:null},isOpen:{value:!0,error:null},loadMaster:{value:null,error:null},pilot:{value:null,error:null},plane:{value:null,error:null},maxSlots:{value:4,error:null}}},X=Object(R.b)({name:"forms/load",initialState:Z,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=Z.fields):(e.original=n.payload,e.open=!0,Object.keys(n.payload).forEach((function(t){var r=t;if(r in e.fields){var l=r;e.fields[l].value=n.payload[l]}})))},reset:function(e){e.fields=Z.fields,e.original=null}}}),K={original:null,open:!1,federation:{value:null,error:null},fields:{exitWeight:{value:null,error:null},email:{value:"",error:null},phone:{value:"",error:null},name:{value:null,error:null},role:{value:null,error:null},license:{value:null,error:null}}},ee=Object(R.b)({name:"forms/ghost",initialState:K,reducers:{setFederation:function(e,n){e.federation.value=n.payload},setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];r in e.fields&&(e.fields[r].value=l,e.fields[r].error=null)},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];r in e?e.fields[r].error=l:console.error("Cannot set error on ",r)},setOpen:function(e,n){var t;(console.log("Setting open"),console.log(n.payload),"boolean"===typeof n.payload)?(e.open=n.payload,e.original=null,e.fields=K.fields):(e.original=n.payload,e.open=!0,e.federation.value=(null==(t=n.payload.license)?void 0:t.federation)||null,Object.keys(n.payload).forEach((function(t){var r=t;if(r in e.fields){var l=r;e.fields[l].value=n.payload[l]}})))},reset:function(e){e.fields=K.fields,e.original=null}}}),ne={original:null,open:!1,fields:{name:{value:"",error:null},registration:{value:"",error:null},minSlots:{value:0,error:null},maxSlots:{value:4,error:null},hours:{value:null,error:null},nextMaintenanceHours:{value:null,error:null}}},te=Object(R.b)({name:"Plane",initialState:ne,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields.name.error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=ne.fields):(e.original=n.payload,e.open=!0,e.fields.hours.value=n.payload.hours||0,e.fields.minSlots.value=n.payload.minSlots||0,e.fields.maxSlots.value=n.payload.maxSlots||3,e.fields.name.value=n.payload.name||"",e.fields.registration.value=n.payload.registration||"",e.fields.nextMaintenanceHours.value=n.payload.nextMaintenanceHours||0)},reset:function(e){e.fields=ne.fields,e.original=null}}}),re={original:null,open:!1,fields:{make:{value:"",error:null},model:{value:"",error:null},serial:{value:"",error:null},repackExpiresAt:{value:null,error:null},canopySize:{value:null,error:null},rigType:{value:"sport",error:null}}},le=Object(R.b)({name:"forms/rig",initialState:re,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=re.fields):(e.original=n.payload,e.open=!0,Object.keys(n.payload).forEach((function(t){var r=t;if(r in e.fields){var l=r;e.fields[l].value=n.payload[l]}})))},reset:function(e){e.fields=re.fields,e.original=null}}}),ae={fields:[],open:!1,ok:!1},oe=Object(R.b)({name:"forms/rigInspection",initialState:ae,reducers:{setOk:function(e,n){e.ok=n.payload},setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields=e.fields.map((function(e,n){return n===r?l:e}))},setFields:function(e,n){try{e.fields=JSON.parse(n.payload)}catch(t){console.log(n.payload),console.error("Failed to read rig inspection template",t.message,n.payload)}},reset:function(e){e.fields=ae.fields,e.ok=ae.ok}}}),ie={original:null,fields:[]},se=Object(R.b)({name:"forms/rigInspectionTemplate",initialState:ie,reducers:{setFields:function(e,n){e.fields=n.payload},setOpen:function(e,n){e.original=n.payload;try{e.fields=JSON.parse(n.payload.definition||"[]")}catch(t){console.log("Invalid json: ",n.payload.definition)}},reset:function(e){e.fields=ie.fields,e.original=null}}}),ue={original:null,open:!1,fields:{jumpType:{value:null,error:null},extras:{value:[],error:null},load:{value:null,error:null},rig:{value:null,error:null},ticketType:{value:null,error:null},dropzoneUser:{value:null,error:null},exitWeight:{value:null,error:null},passengerName:{value:null,error:null},passengerExitWeight:{value:null,error:null}}},ce=Object(R.b)({name:"forms/manifest",initialState:ue,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=ue.fields):(e.original=n.payload,e.open=!0,Object.keys(n.payload).forEach((function(t){var r=t;if(r in e.fields){var l=r;e.fields[l].value=n.payload[l]}})))},reset:function(e){e.fields=ue.fields,e.original=null}}}),de={original:null,open:!1,fields:{jumpType:{value:null,error:null},extras:{value:[],error:null},load:{value:null,error:null},ticketType:{value:null,error:null},users:{value:[],error:null}}},me=Object(R.b)({name:"forms/manifestGroup",initialState:de,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setFromSlots:function(e,n){var t,r,l;e.fields.users.value=n.payload.map((function(e){var n,t;return{id:Number(null==(n=e.dropzoneUser)?void 0:n.id),rigId:Number(null==(t=e.rig)?void 0:t.id),exitWeight:Number(e.exitWeight)}})),e.fields.jumpType.value=null==(t=n.payload.find((function(e){return e})))?void 0:t.jumpType,e.fields.load.value=(null==(r=n.payload.find((function(e){return e})))?void 0:r.load)||null,e.fields.extras.value=null==(l=n.payload.find((function(e){return e})))?void 0:l.extras},setDropzoneUsers:function(e,n){e.fields.users.value=n.payload.map((function(e){var n,t,r;return{id:Number(e.id),rigId:Number(null==e||null==(n=e.availableRigs)||null==(t=n.find((function(e){return e.id})))?void 0:t.id),exitWeight:Number(null==e||null==(r=e.user)?void 0:r.exitWeight)}}))},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=de.fields):(e.original=n.payload,e.open=!0,Object.keys(n.payload).forEach((function(t){var r=t;if(r in e.fields){var l=r;e.fields[l].value=n.payload[l]}})))},reset:function(e){e.fields=de.fields,e.original=null}}}),fe={original:null,open:!1,fields:{name:{value:"",error:null},cost:{value:null,error:null},altitude:{value:14e3,error:null},allowManifestingSelf:{value:!1,error:null},isTandem:{value:!1,error:null},extras:{value:[],error:null}}},pe=Object(R.b)({name:"forms/ticketType",initialState:fe,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=fe.fields):(e.original=n.payload,e.open=!0,e.fields.altitude.value=n.payload.altitude||0,e.fields.cost.value=n.payload.cost||0,e.fields.allowManifestingSelf.value=n.payload.allowManifestingSelf||!1,e.fields.name.value=n.payload.name||"")},reset:function(e){e.fields=fe.fields,e.original=null}}}),ge={original:null,open:!1,federation:{value:null,error:null},fields:{exitWeight:{value:"",error:null},email:{value:"",error:null},phone:{value:"",error:null},name:{value:null,error:null},rigs:{value:[],error:null},license:{value:null,error:null}}},ve=Object(R.b)({name:"forms/user",initialState:ge,reducers:{setFederation:function(e,n){e.federation.value=n.payload},setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){var t;"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=ge.fields):(e.original=n.payload,e.open=!0,e.federation.value=(null==(t=n.payload.license)?void 0:t.federation)||null,Object.keys(n.payload).forEach((function(t){var r=t;if(r in e.fields){var l=r;e.fields[l].value=n.payload[l]}})))},reset:function(e){e.fields=ge.fields,e.original=null}}}),be={original:null,open:!1,fields:{jumpRun:{value:null,error:null},temperature:{value:null,error:null},exitSpotMiles:{value:null,error:null},offsetDirection:{value:null,error:null},winds:{value:[],error:null}}},he=Object(R.b)({name:"forms/weather",initialState:be,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];r in e.fields&&(e.fields[r].value=l,e.fields[r].error=null)},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];r in e&&"error"in e.fields[r]?e.fields[r].error=l:console.error("Cannot set error on ",r)},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.original=null,e.fields=be.fields):(e.original=n.payload,e.open=!0,Object.keys(n.payload).forEach((function(t){var r=t;if(r in e.fields){var l=r;e.fields[l].value=n.payload[l]}})))},reset:function(e){e.fields=be.fields,e.original=null}}}),ye={open:!1,fields:{user:{value:null,error:null},rig:{value:null,error:null}}},Ee=Object(R.b)({name:"forms/userWizard",initialState:ye,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.fields=ye.fields):(e.fields.user.value=n.payload,e.open=!0)},reset:function(e){e.fields=ye.fields}}}),we={open:!1,complete:!1,fields:{dropzone:{value:null,error:null}}},xe=Object(R.b)({name:"forms/dropzoneWizard",initialState:we,reducers:{setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},setOpen:function(e,n){"boolean"===typeof n.payload?(e.open=n.payload,e.fields=we.fields):(e.fields.dropzone.value=n.payload,e.open=!0)},complete:function(e,n){e.complete=void 0===n.payload||n.payload},reset:function(e){e.fields=we.fields}}}),Se={credits:H,dropzone:q,dropzoneUser:Y,extra:J,ghost:ee,load:X,plane:te,rig:le,rigInspection:oe,rigInspectionTemplate:se,manifest:ce,manifestGroup:me,ticketType:pe,user:ve,userWizard:Ee,dropzoneWizard:xe,weather:he},ke={isSearchVisible:!1,searchText:""},Ce=Object(R.b)({name:"screens/user",initialState:ke,reducers:{setSearchText:function(e,n){e.searchText=n.payload},setSearchVisible:function(e,n){e.isSearchVisible=n.payload},reset:function(e){e.isSearchVisible=ke.isSearchVisible,e.searchText=ke.searchText}}}),ze={fields:{email:{value:"",error:null},password:{value:"",error:null}}},Ie=Object(R.b)({name:"login",initialState:ze,reducers:{setEmail:function(e,n){e.fields.email.value=n.payload},setPassword:function(e,n){e.fields.password.value=n.payload},setEmailError:function(e,n){e.fields.email.error=n.payload},setPasswordError:function(e,n){e.fields.password.error=n.payload},reset:function(e){e.fields=ze.fields}}}),Oe={isSearchVisible:!1,selectedUsers:[],searchText:"",display:"cards"},je=Object(R.b)({name:"manifestScreen",initialState:Oe,reducers:{setSelected:function(e,n){e.selectedUsers=n.payload},setSearchText:function(e,n){e.searchText=n.payload},setSearchVisible:function(e,n){e.isSearchVisible=n.payload},setDisplayStyle:function(e,n){e.display=n.payload},reset:function(e){e.isSearchVisible=Oe.isSearchVisible,e.searchText=Oe.searchText}}}),Te={federation:null,fields:{email:{value:"",error:null},password:{value:"",error:null},passwordConfirmation:{value:"",error:null},exitWeight:{value:50,error:null},name:{value:"",error:null},phone:{value:"",error:null},license:{value:null,error:null}}},Pe=Object(R.b)({name:"login",initialState:Te,reducers:{setFederation:function(e,n){e.federation=n.payload},setField:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].value=l,e.fields[r].error=null},setFieldError:function(e,n){var t=W()(n.payload,2),r=t[0],l=t[1];e.fields[r].error=l},reset:function(e){e.fields=Te.fields}}}),Fe={manifest:je,users:Ce,login:Ie,signup:Pe},De=t(193),$e=t(376),Ne=t(153),Ae=t(194);function Re(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ue(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Re(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Re(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Le=Ue(Ue(Ue({},Ne.a),De.a),{},{roundness:16,colors:Ue(Ue(Ue({},Ne.a.colors),De.a.colors),{},{primary:"#333333"})}),Be=Ue(Ue(Ue({},Ae.a),$e.a),{},{roundness:16,colors:Ue(Ue(Ue({},Ae.a.colors),$e.a.colors),{},{primary:"#333333"})}),Me={currentUser:null,currentDropzone:null,currentDropzoneId:null,permissions:[],credentials:null,expoPushToken:null,theme:Le,isDarkMode:!1},We=Object(R.b)({name:"global",initialState:Me,reducers:{setCredentials:function(e,n){e.credentials=n.payload},setUser:function(e,n){e.currentUser=n.payload},setExpoPushToken:function(e,n){e.expoPushToken=n.payload},setPermissions:function(e,n){e.permissions=n.payload},setPrimaryColor:function(e,n){e.theme.colors.primary=n.payload},setAccentColor:function(e,n){e.theme.colors.accent=n.payload},setDropzone:function(e,n){var t,r,l,a,o,i;(e.currentDropzone=n.payload,e.currentDropzoneId=null!=(t=n.payload)&&t.id?Number(null==(r=n.payload)?void 0:r.id):null,null!=(l=e.currentDropzone)&&l.primaryColor)&&(e.theme.colors.primary=null==(o=e.currentDropzone)?void 0:o.primaryColor);null!=(a=e.currentDropzone)&&a.secondaryColor&&(e.theme.colors.accent=null==(i=e.currentDropzone)?void 0:i.secondaryColor)},toggleDarkMode:function(e){var n,t,r,l;(e.isDarkMode=!e.isDarkMode,e.theme=e.isDarkMode?Be:Le,null!=(n=e.currentDropzone)&&n.primaryColor)&&(e.theme.colors.primary=null==(r=e.currentDropzone)?void 0:r.primaryColor);null!=(t=e.currentDropzone)&&t.secondaryColor&&(e.theme.colors.accent=null==(l=e.currentDropzone)?void 0:l.secondaryColor)},logout:function(e){Object.keys(Me).forEach((function(n){if(n in e){var t=n;e[n]=Me[t]}}))}}}),Ve={queue:[]},He=Object(R.b)({name:"notifications",initialState:Ve,reducers:{hideSnackbar:function(e){e.queue=e.queue.slice(1)},showSnackbar:function(e,n){e.queue.push(n.payload)}}});function Ge(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function qe(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ge(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ge(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Qe={key:"open-manifest.0.9.1",storage:"web"===x.a.OS?t(563).default:L.a,whitelist:["global","notifications"]},Ye=Object.keys(Fe).reduce((function(e,n){return Fe&&n in Fe?qe(qe({},e),{},P()({},n,Fe[n].reducer)):e}),{}),_e=Object.keys(Se).reduce((function(e,n){return Se&&n in Se?qe(qe({},e),{},P()({},n,Se[n].reducer)):e}),{}),Je=Object.keys(Fe).reduce((function(e,n){return n in Fe?qe(qe({},e),{},P()({},n,Fe[n].actions)):e}),{}),Ze={forms:Object.keys(Se).reduce((function(e,n){return n in Se?qe(qe({},e),{},P()({},n,Se[n].actions)):e}),{}),screens:Je,global:We.actions,notifications:He.actions},Xe=Object(A.b)({global:We.reducer,notifications:He.reducer,screens:Object(A.b)(Ye),forms:Object(A.b)(_e)}),Ke=Object(B.a)(Qe,Xe),en=Object(R.a)({reducer:Ke,middleware:Object(R.c)({serializableCheck:{ignoredActions:["persist/PERSIST"]}})}),nn=Object(B.b)(en),tn=function(){return Object(v.b)()},rn=v.c;function ln(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function an(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ln(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ln(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var on=Object(F.createHttpLink)({uri:i.a.manifest.extra.url});function sn(e){var n=e.children,t=rn((function(e){return e.global.credentials})),r=tn(),l=p.useMemo((function(){return Object(N.a)((function(e){var n=e.graphQLErrors,t=e.networkError;e.operation,e.response;if(null!=n&&n.some((function(e){var n;return"AUTHENTICATION_ERROR"===(null==(n=e.extensions)?void 0:n.code)})))return r(Ze.notifications.showSnackbar({message:"Session expired",variant:"error"})),void r(Ze.global.logout());t&&r(Ze.notifications.showSnackbar({message:"[Network error]: "+t,variant:"error"}))}))}),[r]),a=p.useMemo((function(){return Object($.a)((function(e,n){return{headers:an(an({},n.headers),null!=t&&t.accessToken?an({Authorization:"Bearer "+t.accessToken,"access-token":t.accessToken,"token-type":t.tokenType},t):{})}}))}),[t]),o=p.useMemo((function(){return new F.ApolloClient({link:l.concat(a).concat(on),cache:new F.InMemoryCache})}),[a,l]);return p.createElement(D.a,{client:o},n)}var un=t(676),cn=t(675),dn=t(497),mn=t(359),fn=t(332);function pn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function gn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pn(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var vn=t(387);var bn={light:{text:"#000",background:"#fff",tint:"#2f95dc",tabIconDefault:"#ccc",tabIconSelected:"#2f95dc",success:"#00C851",error:"#ff4444",warning:"#FF8800",info:"#0099CC"},dark:{text:"#fff",background:"#000",tint:"#fff",tabIconDefault:"#ccc",tabIconSelected:"#fff",success:"#00C851",error:"#ff4444",warning:"#FF8800",info:"#0099CC"}};var hn=function(){return bn.light},yn=He.actions,En=function(){var e=rn((function(e){return e.notifications})),n=tn(),t=hn(),r=e.queue.length?e.queue[0]:null,l={info:{backgroundColor:t.info},success:{backgroundColor:t.success},error:{backgroundColor:t.error},warning:{backgroundColor:t.warning}};return p.createElement(vn.a,{testID:"snackbar-message",visible:!!r,onDismiss:function(){return n(yn.hideSnackbar())},duration:3e3,action:null==r?void 0:r.action,style:!(null==r||!r.variant)&&l[r.variant]},null==r?void 0:r.message)},wn={prefixes:[t(496).a("/"),"https://openmanifest.org","openmanifest://","http://localhost:19006"],config:{screens:{confirm:{path:"/confirm",params:{account_confirmation_success:void 0}},Authenticated:{screens:{HomeScreen:"/home",LoadScreen:"/load/:load_id",PackingScreen:"/packing",ProfileScreen:"/user/:id",SetupScreen:"/dropzone/setup"}},Limbo:{screens:{DropzonesScreen:"/dropzones",CreateDropzoneScreen:"/dropzone/create"}},Unauthenticated:{screens:{LoginScreen:"/login",SignUpScreen:"/signup"}}}}},xn=t(686),Sn=t(685),kn=t(29),Cn=t(71);function zn(e){var n=e.navigation;return p.createElement(S.a,{style:On.container},p.createElement(kn.a,{style:On.title},"This screen doesn't exist."),p.createElement(Cn.a,{onPress:function(){return n.replace("Root")},style:On.link},p.createElement(kn.a,{style:On.linkText},"Go to home screen!")))}var In,On=O.a.create({container:{flex:1,backgroundColor:"#fff",alignItems:"center",justifyContent:"center",padding:20},title:{fontSize:20,fontWeight:"bold"},link:{marginTop:15,paddingVertical:15},linkText:{fontSize:14,color:"#2e78b7"}}),jn=t(24),Tn=t(688),Pn=t(467),Fn=t(37),Dn=t(90),$n=t(126),Nn=t(288),An=t(34),Rn=t(78),Un=t.n(Rn),Ln=t(20),Bn=t.n(Ln),Mn=t(479),Wn=t(25),Vn=t(478),Hn=t.n(Vn);function Gn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function qn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Gn(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Gn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Qn(e){return{message:e,pattern:/.{1,}/}}function Yn(e){return{message:e,pattern:new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)}}function _n(e,n){return{message:e,callback:n}}function Jn(e,n){var t=n.getPayload,r=n.fieldErrorMap,a=n.validates;return function(o){var i=o.onFieldError,s=o.onSuccess,u=o.onError,c=Object(F.useMutation)(e),d=W()(c,2),m=d[0];return{loading:d[1].loading,mutate:p.useCallback((function(e,c){var d,f,p,g,v,b;return l.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(function(){var t=!1;return a&&Object.keys(e).forEach((function(r){var l,o=r;o in(n.validates||{})&&(null==(l=a[o])||l.forEach((function(n){n.pattern?n.pattern.test(""+e[o])||(t=!0,i&&i(o,n.message)):n.callback&&!n.callback(e)&&(t=!0,i&&i(o,n.message))})))})),!t}()){h.next=3;break}return h.abrupt("return");case 3:return h.prev=3,h.next=6,l.a.awrap(m(qn({variables:e},c)));case 6:if(g=h.sent,null==(v=t(g.data))||null==(d=v.fieldErrors)||d.forEach((function(e){var n=e.field,t=e.message,l=Hn()(n),a=r&&l in(r||{})?r[n]:n;o.onFieldError&&o.onFieldError(""+a,t)})),null==v||null==(f=v.errors)||!f.length||!u){h.next=12;break}return null==(b=v.errors)||b.map((function(e){return u(e)})),h.abrupt("return");case 12:null!=v&&null!=(p=v.fieldErrors)&&p.length||!v||s(v),h.next=18;break;case 15:h.prev=15,h.t0=h.catch(3),u&&u(h.t0.message);case 18:case"end":return h.stop()}}),null,null,[[3,15]],Promise)}),[i,u,s,m,o])}}}var Zn,Xn=Jn(Object(Wn.a)(In||(In=Bn()(["\n  mutation UpdateUser(\n    $id: Int\n    $name: String\n    $phone: String\n    $email: String\n    $pushToken: String\n    $nickname: String\n    $licenseId: Int\n    $exitWeight: Float\n  ) {\n    updateUser(\n      input: {\n        id: $id\n        attributes: {\n          pushToken: $pushToken\n          name: $name\n          phone: $phone\n          email: $email\n          nickname: $nickname\n          licenseId: $licenseId\n          exitWeight: $exitWeight\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      user {\n        id\n        name\n        exitWeight\n        email\n        pushToken\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.updateUser},fieldErrorMap:{license:"licenseId",exit_weight:"exitWeight"}});function Kn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function et(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Kn(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Kn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var nt=Object(Wn.a)(Zn||(Zn=Bn()(["\n  query QueryDropzone($dropzoneId: Int!, $earliestTimestamp: Int) {\n    dropzone(id: $dropzoneId) {\n      id\n      lat\n      lng\n      name\n      primaryColor\n      secondaryColor\n      planes {\n        id\n        name\n        registration\n      }\n      ticketTypes {\n        id\n        name\n      }\n\n      currentConditions {\n        id\n        jumpRun\n        temperature\n        offsetDirection\n        offsetMiles\n        winds {\n          altitude\n          speed\n          direction\n        }\n      }\n\n      currentUser {\n        id\n        credits\n        hasCredits\n        hasExitWeight\n        hasMembership\n        hasReserveInDate\n        hasRigInspection\n        hasLicense\n        permissions\n        expiresAt\n\n        role {\n          id\n          name\n        }\n\n        rigInspections {\n          id\n          isOk\n          rig {\n            id\n          }\n        }\n\n        transactions {\n          edges {\n            node {\n              id\n              status\n              amount\n            }\n          }\n        }\n        availableRigs {\n          id\n          make\n          model\n          canopySize\n          serial\n\n          user {\n            id\n          }\n        }\n\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          pushToken\n\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n\n      loads(earliestTimestamp: $earliestTimestamp) {\n        edges {\n          node {\n            id\n            name\n            loadNumber\n            isOpen\n            maxSlots\n            state\n          }\n        }\n      }\n    }\n  }\n"])));function tt(){var e,n,t,r,l,a,o,i,s,u,c,d=rn((function(e){return e.global.currentDropzoneId})),m=rn((function(e){return e.global.expoPushToken})),f=Object(F.useQuery)(nt,{variables:{dropzoneId:d,earliestTimestamp:Object(Mn.a)(new Date).getTime()/1e3},fetchPolicy:"cache-first"}),g=Xn({onSuccess:function(){return null},onError:function(){return null}});return p.useEffect((function(){var e,n,t,r,l,a,o,i,s=null==f||null==(e=f.data)||null==(n=e.dropzone)||null==(t=n.currentUser)||null==(r=t.user)?void 0:r.id,u=null==f||null==(l=f.data)||null==(a=l.dropzone)||null==(o=a.currentUser)||null==(i=o.user)?void 0:i.pushToken,c=m;!f.loading&&f.called&&c&&c!==u&&g.mutate({id:Number(s),pushToken:c})}),[m,null==f||null==(e=f.data)||null==(n=e.dropzone)||null==(t=n.currentUser)||null==(r=t.user)?void 0:r.pushToken,null==f||null==(l=f.data)||null==(a=l.dropzone)||null==(o=a.currentUser)||null==(i=o.user)?void 0:i.id,f.loading,f.called,g]),et(et({},f),{},{dropzone:null==f||null==(s=f.data)?void 0:s.dropzone,currentUser:null==f||null==(u=f.data)||null==(c=u.dropzone)?void 0:c.currentUser})}var rt,lt,at,ot=t(406),it=t(407);!function(e){e.Open="open",e.BoardingCall="boarding_call",e.InFlight="in_flight",e.Landed="landed",e.Cancelled="cancelled"}(rt||(rt={})),function(e){e.UpdateDropzone="updateDropzone",e.DeleteDropzone="deleteDropzone",e.UpdateWeatherConditions="updateWeatherConditions",e.CreateLoad="createLoad",e.UpdateLoad="updateLoad",e.DeleteLoad="deleteLoad",e.ReadLoad="readLoad",e.CreateSlot="createSlot",e.UpdateSlot="updateSlot",e.DeleteSlot="deleteSlot",e.CreateUserSlot="createUserSlot",e.CreateUserSlotWithSelf="createUserSlotWithSelf",e.UpdateUserSlot="updateUserSlot",e.DeleteUserSlot="deleteUserSlot",e.CreateStudentSlot="createStudentSlot",e.UpdateStudentSlot="updateStudentSlot",e.DeleteStudentSlot="deleteStudentSlot",e.CreateTicketType="createTicketType",e.UpdateTicketType="updateTicketType",e.DeleteTicketType="deleteTicketType",e.CreateExtra="createExtra",e.UpdateExtra="updateExtra",e.DeleteExtra="deleteExtra",e.ReadExtra="readExtra",e.CreatePlane="createPlane",e.UpdatePlane="updatePlane",e.DeletePlane="deletePlane",e.CreateRig="createRig",e.UpdateRig="updateRig",e.DeleteRig="deleteRig",e.ReadRig="readRig",e.CreateDropzoneRig="createDropzoneRig",e.UpdateDropzoneRig="updateDropzoneRig",e.DeleteDropzoneRig="deleteDropzoneRig",e.ReadDropzoneRig="readDropzoneRig",e.ReadPermissions="readPermissions",e.UpdatePermissions="updatePermissions",e.CreatePackjob="createPackjob",e.UpdatePackjob="updatePackjob",e.DeletePackjob="deletePackjob",e.ReadPackjob="readPackjob",e.CreateFormTemplate="createFormTemplate",e.UpdateFormTemplate="updateFormTemplate",e.DeleteFormTemplate="deleteFormTemplate",e.ReadFormTemplate="readFormTemplate",e.ReadUser="readUser",e.UpdateUser="updateUser",e.DeleteUser="deleteUser",e.CreateUser="createUser",e.ActAsPilot="actAsPilot",e.ActAsLoadMaster="actAsLoadMaster",e.ActAsGca="actAsGCA",e.ActAsDzso="actAsDZSO",e.ActAsRigInspector="actAsRigInspector",e.CreateUserTransaction="createUserTransaction",e.ReadUserTransactions="readUserTransactions",e.GrantPermission="grantPermission",e.RevokePermission="revokePermission"}(lt||(lt={}));var st,ut=Object(Wn.a)(at||(at=Bn()(["\n  query QueryPermissions($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      primaryColor\n      secondaryColor\n\n      currentUser {\n        id\n        role {\n          id\n          name\n        }\n        permissions\n      }\n    }\n  }\n"])));function ct(e){var n,t,r=rn((function(e){return e.global})).currentDropzoneId,l=Object(F.useQuery)(ut,{variables:{dropzoneId:Number(r)}}).data,a=(null==l||null==(n=l.dropzone)||null==(t=n.currentUser)?void 0:t.permissions)||[];return(null==a?void 0:a.includes(e))||!1}var dt,mt=Object(Wn.a)(st||(st=Bn()(["\n  query QueryGCAUsers($dropzoneId: Int!, $permissions: [Permission!]) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function ft(e){var n,t,r,l,a,o=e.small,i=e.color,s=e.backgroundColor,u=e.onSelect,c=e.value,d=p.useState(!1),m=W()(d,2),f=m[0],g=m[1],v=rn((function(e){return e.global})).currentDropzoneId,b=Object(F.useQuery)(mt,{variables:{dropzoneId:Number(v),permissions:["actAsGCA"]}}).data;return ct(lt.UpdateLoad)?p.createElement(it.a,{onDismiss:function(){return g(!1)},visible:f,anchor:p.createElement(ot.a,{mode:"outlined",icon:"radio-handheld",selectedColor:i,onPress:function(){return g(!0)},style:{marginHorizontal:4,backgroundColor:s,height:o?25:void 0,alignItems:"center",borderColor:i||void 0},textStyle:{color:i,fontSize:o?12:void 0}},null!=c&&c.id?null==c||null==(t=c.user)?void 0:t.name:"No gca")},null==b||null==(r=b.dropzone)||null==(l=r.dropzoneUsers)||null==(a=l.edges)?void 0:a.map((function(e){var n,t,r;return p.createElement(it.a.Item,{key:"gca-chip-"+(null==e||null==(n=e.node)?void 0:n.id),onPress:function(){g(!1),null!=e&&e.node&&u(null==e?void 0:e.node)},title:null==e||null==(t=e.node)||null==(r=t.user)?void 0:r.name})}))):p.createElement(ot.a,{mode:"outlined",icon:"radio-handheld",selectedColor:i,style:{marginHorizontal:4,backgroundColor:s,height:o?25:void 0,alignItems:"center",borderColor:i||void 0},textStyle:{color:i,fontSize:o?12:void 0}},(null==c||null==(n=c.user)?void 0:n.name)||"No gca")}function pt(e){var n,t,r=e.small,l=e.color,a=e.backgroundColor,o=e.value,i=e.onSelect,s=e.slots,u=p.useState(!1),c=W()(u,2),d=c[0],m=c[1],f=ct(lt.UpdateLoad);return f?p.createElement(it.a,{onDismiss:function(){return m(!1)},visible:d,anchor:p.createElement(ot.a,{mode:"outlined",icon:"shield-account",selectedColor:l,style:{marginHorizontal:4,backgroundColor:a,height:r?25:void 0,alignItems:"center",borderColor:l||void 0},textStyle:{color:l,fontSize:r?12:void 0},onPress:function(){return f&&m(!0)}},null!=o&&o.id?null==o||null==(t=o.user)?void 0:t.name:"No loadmaster")},null==s?void 0:s.map((function(e){var n,t;return p.createElement(it.a.Item,{key:"lm-chip-"+e.id,onPress:function(){m(!1),null!=e&&e.dropzoneUser&&i(e.dropzoneUser)},title:null==e||null==(n=e.dropzoneUser)||null==(t=n.user)?void 0:t.name})}))):p.createElement(ot.a,{mode:"outlined",icon:"shield-account",selectedColor:l,style:{marginHorizontal:4,backgroundColor:a,height:r?25:void 0,alignItems:"center",borderColor:l||void 0},textStyle:{color:l,fontSize:r?12:void 0}},(null==o||null==(n=o.user)?void 0:n.name)||"No loadmaster")}var gt,vt=Object(Wn.a)(dt||(dt=Bn()(["\n  query QueryPilotUsers($dropzoneId: Int!, $permissions: [Permission!]) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function bt(e){var n,t,r,l,a,o=e.small,i=e.color,s=e.backgroundColor,u=e.onSelect,c=e.value,d=p.useState(!1),m=W()(d,2),f=m[0],g=m[1],v=rn((function(e){return e.global})).currentDropzoneId,b=Object(F.useQuery)(vt,{variables:{dropzoneId:v,permissions:["actAsPilot"]}}).data;return ct(lt.UpdateLoad)?p.createElement(it.a,{onDismiss:function(){return g(!1)},visible:f,anchor:p.createElement(ot.a,{mode:"outlined",icon:"shield-airplane",selectedColor:i,style:{marginHorizontal:4,backgroundColor:s,height:o?25:void 0,alignItems:"center",borderColor:i||void 0},textStyle:{color:i,fontSize:o?12:void 0},onPress:function(){return g(!0)}},null!=c&&c.id?null==c||null==(t=c.user)?void 0:t.name:"No pilot")},null==b||null==(r=b.dropzone)||null==(l=r.dropzoneUsers)||null==(a=l.edges)?void 0:a.map((function(e){var n,t,r;return p.createElement(it.a.Item,{key:"pilot-select-"+(null==e||null==(n=e.node)?void 0:n.id),onPress:function(){g(!1),null!=e&&e.node&&u(e.node)},title:null==e||null==(t=e.node)||null==(r=t.user)?void 0:r.name})}))):p.createElement(ot.a,{mode:"outlined",icon:"radio-handheld",selectedColor:i,style:{marginHorizontal:4,backgroundColor:s,height:o?25:void 0,alignItems:"center",borderColor:i||void 0},textStyle:{color:i,fontSize:o?12:void 0}},(null==c||null==(n=c.user)?void 0:n.name)||"No pilot")}var ht=Object(Wn.a)(gt||(gt=Bn()(["\n  query QueryChipPlanes($dropzoneId: Int!) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n"])));function yt(e){var n,t=e.small,r=e.color,l=e.backgroundColor,a=e.value,o=e.onSelect,i=p.useState(!1),s=W()(i,2),u=s[0],c=s[1],d=rn((function(e){return e.global})).currentDropzoneId,m=Object(F.useQuery)(ht,{variables:{dropzoneId:Number(d)}}).data,f=ct(lt.UpdateLoad);return f?p.createElement(it.a,{onDismiss:function(){return c(!1)},visible:u,anchor:p.createElement(ot.a,{mode:"outlined",icon:"airplane",selectedColor:r,style:{marginHorizontal:4,backgroundColor:l,height:t?25:void 0,alignItems:"center",borderColor:r||void 0},textStyle:{color:r,fontSize:t?12:void 0},onPress:function(){return f&&c(!0)}},(null==a?void 0:a.name)||"No plane")},null==m||null==(n=m.planes)?void 0:n.map((function(e){return p.createElement(it.a.Item,{key:"lm-plane-chip-"+e.id,onPress:function(){c(!1),o(e)},title:e.name})}))):p.createElement(ot.a,{mode:"outlined",icon:"airplane-takeoff",selectedColor:r,style:{marginHorizontal:4,backgroundColor:l,height:t?25:void 0,alignItems:"center"},textStyle:{color:r,fontSize:t?12:void 0}},(null==a?void 0:a.name)||"No plane")}var Et=t(31),wt=t.n(Et),xt=t(16),St=t.n(xt);function kt(e,n){var t=e.light;return t||bn.light[n]}function Ct(e){var n=e.style,t=e.lightColor,r=e.darkColor,l=St()(e,["style","lightColor","darkColor"]),a=kt({light:t,dark:r},"text");return p.createElement(kn.a,wt()({style:[{color:a},n]},l))}function zt(e){var n=e.style,t=e.lightColor,r=e.darkColor,l=St()(e,["style","lightColor","darkColor"]),a=kt({light:t,dark:r},"background");return p.createElement(S.a,wt()({style:[{backgroundColor:a},n]},l))}var It=t(12),Ot=t(408);function jt(e){var n,t,r,l,a,o,i,s,u=e.slot,c=e.onPress,d=e.onDelete,m=e.style;return p.createElement(Nn.a,{onPress:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){return null==c?void 0:c(u)})),elevation:3,style:O.a.flatten([{margin:12,height:150,width:"100%"},m])},p.createElement(Nn.a.Title,{title:null==u||null==(n=u.dropzoneUser)?void 0:n.user.name,left:function(){var e,n,t;return null!=u&&null!=(e=u.dropzoneUser)&&null!=(n=e.user)&&n.image?p.createElement(It.a.Image,{source:{uri:null==u||null==(t=u.dropzoneUser)?void 0:t.user.image},size:24}):p.createElement(It.a.Icon,{icon:"account",size:24})},right:function(){return d?p.createElement(Ot.a,{style:{marginTop:-45,marginRight:-5},onPress:function(e){e.preventDefault(),null==d||d(u)}},"-"):null}}),p.createElement(Nn.a.Content,{style:{flexDirection:"row",flexWrap:"wrap"}},p.createElement(ot.a,{style:{margin:2,height:25,padding:0,alignItems:"center"},textStyle:{fontSize:12},icon:"lock",mode:"outlined",disabled:!0},null==u||null==(t=u.dropzoneUser)||null==(r=t.role)?void 0:r.name),p.createElement(ot.a,{style:{margin:2,height:25,padding:0,alignItems:"center"},textStyle:{fontSize:12},icon:"ticket-account",mode:"outlined",disabled:!0},null==u||null==(l=u.dropzoneUser)||null==(a=l.user)||null==(o=a.license)?void 0:o.name),p.createElement(ot.a,{style:{margin:2,height:25,padding:0,alignItems:"center"},textStyle:{fontSize:12},icon:"human-handsup",mode:"outlined",disabled:!0},null==u||null==(i=u.jumpType)?void 0:i.name),p.createElement(ot.a,{style:{margin:2,height:25,padding:0,alignItems:"center"},textStyle:{fontSize:12},icon:"arrow-up-bold",mode:"outlined",disabled:!0},null==u||null==(s=u.ticketType)?void 0:s.name),u.wingLoading?p.createElement(ot.a,{style:{margin:2,height:25,padding:0,alignItems:"center"},textStyle:{fontSize:12},icon:"escalator-down",mode:"outlined",disabled:!0},u.wingLoading.toFixed(2)):null))}var Tt,Pt=t(21),Ft=t.n(Pt),Dt=t(293),$t=t(431),Nt=t(317),At=Jn(Object(Wn.a)(Tt||(Tt=Bn()(["\n  mutation UpdateLoad(\n    $id: Int!\n    $pilotId: Int\n    $gcaId: Int\n    $planeId: Int\n    $isOpen: Boolean\n    $loadMasterId: Int\n    $dispatchAt: Int\n    $hasLanded: Boolean\n  ) {\n    updateLoad(\n      input: {\n        id: $id\n        attributes: {\n          pilotId: $pilotId\n          gcaId: $gcaId\n          planeId: $planeId\n          isOpen: $isOpen\n          loadMasterId: $loadMasterId\n          dispatchAt: $dispatchAt\n          hasLanded: $hasLanded\n        }\n      }\n    ) {\n      load {\n        id\n        name\n        createdAt\n        loadNumber\n        dispatchAt\n        hasLanded\n        maxSlots\n        isFull\n        isOpen\n        plane {\n          id\n          name\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        loadMaster {\n          id\n          user {\n            id\n            name\n          }\n        }\n        slots {\n          id\n          createdAt\n          exitWeight\n\n          passengerName\n          passengerExitWeight\n\n          user {\n            id\n            name\n          }\n          ticketType {\n            id\n            name\n            altitude\n            isTandem\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.updateLoad},fieldErrorMap:{pilotId:"pilot",gcaId:"gca",planeId:"plane",loadMasterId:"loadMaster"}});function Rt(e){var n,t,r,a=tn(),o=p.useState(!1),i=W()(o,2),s=i[0],u=i[1],c=e.load,d=tt().currentUser,m=At({onSuccess:function(){return null},onError:function(e){return a(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),f=p.useCallback((function(e){var n;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e?Object(Nt.a)(new Date,e).getTime()/1e3:null,t.next=3,l.a.awrap(m.mutate({id:Number(c.id),dispatchAt:n?Math.ceil(n):null,state:n?rt.BoardingCall:rt.Open}));case 3:case"end":return t.stop()}}),null,null,null,Promise)}),[m,c]),g=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(m.mutate({id:Number(c.id),state:e,dispatchAt:null}));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[m,c]),v=p.useCallback((function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,l.a.awrap(m.mutate({id:Number(c.id),hasLanded:!0,state:rt.Landed}));case 2:case"end":return e.stop()}}),null,null,null,Promise)}),[m,c]),b=p.useCallback((function(){return null!=d&&d.hasLicense?null!=d&&d.hasMembership?null!=d&&d.hasRigInspection?null!=d&&d.hasReserveInDate?null!=d&&d.hasExitWeight?null!=d&&d.hasCredits?(a(Ze.forms.manifest.setOpen(!0)),a(Ze.forms.manifest.setField(["dropzoneUser",d])),a(Ze.forms.manifest.setField(["load",c])),null):a(Ze.notifications.showSnackbar({message:"You have no credits on your account",variant:"warning"})):a(Ze.notifications.showSnackbar({message:"Update your exit weight on your profile before manifesting",variant:"warning"})):a(Ze.notifications.showSnackbar({message:"Your rig needs a reserve repack",variant:"warning"})):a(Ze.notifications.showSnackbar({message:"Your rig needs to be inspected before manifesting",variant:"warning"})):a(Ze.notifications.showSnackbar({message:"Your membership is out of date",variant:"warning"})):a(Ze.notifications.showSnackbar({message:"You need to select a license on your user profile",variant:"warning"}))}),[d,a,c]),h=ct(lt.UpdateLoad),y=ct(lt.CreateSlot),E=ct(lt.CreateUserSlot),w=ct(lt.CreateUserSlotWithSelf),x=[rt.Open,rt.BoardingCall].includes(c.state),S=((null==c||null==(n=c.slots)?void 0:n.length)||0)>=((null==c?void 0:c.maxSlots)||(null==c||null==(t=c.plane)?void 0:t.maxSlots)||0),k=x&&!S&&y&&!(null!=c&&null!=(r=c.slots)&&r.some((function(e){var n;return(null==(n=e.dropzoneUser)?void 0:n.id)===(null==d?void 0:d.id)}))),C=(E||w)&&(null==c?void 0:c.state)!==rt.Landed&&(!(null!=c&&c.dispatchAt)||c.dispatchAt>(new Date).getTime()/1e3),z=p.useCallback((function(e){return function(){u(!1),f(e)}}),[f]),I=[{label:"20 minute call",onPress:z(20),icon:"airplane-takeoff"},{label:"15 minute call",onPress:z(15),icon:"airplane-takeoff"},{label:"10 minute call",onPress:z(10),icon:"airplane-takeoff"}],O=[k?{label:"Manifest me",icon:"account",onPress:function(){return b()}}:null,C?{label:"Manifest group",icon:"account-group",onPress:function(){a(Ze.forms.manifestGroup.reset()),a(Ze.forms.manifestGroup.setField(["load",c])),w&&!E&&d&&(a(Ze.screens.manifest.setSelected([d])),a(Ze.forms.manifestGroup.setDropzoneUsers([d]))),a(Ze.forms.manifestGroup.setOpen(!0)),a(Ze.forms.manifestGroup.setField(["load",c]))}}:null].filter(Boolean),j=[[rt.BoardingCall].includes(c.state)?{label:"Cancel boarding call",icon:"airplane-off",onPress:z(null)}:null,[rt.Open].includes(c.state)?{label:"Cancel load",icon:"delete-sweep",onPress:function(){return g(rt.Cancelled)}}:null,[rt.Cancelled].includes(c.state)?{label:"Re-open load",icon:"undo",onPress:function(){return g(rt.Open)}}:null,[rt.BoardingCall,rt.InFlight].includes(c.state)?{label:"Mark as Landed",icon:"airplane-landing",onPress:function(){return v()}}:null].filter(Boolean),T=[].concat(Ft()(x?O:[]),Ft()([rt.Open].includes(null==c?void 0:c.state)?I:[]),Ft()(h?j:[]));return p.createElement(Dt.a,null,p.createElement($t.a.Group,{visible:!!T.length,open:s,icon:s?"close":"plus",fabStyle:{marginLeft:16,marginBottom:32},actions:T,onStateChange:function(e){var n=e.open;return u(n)}}))}var Ut=t(129),Lt=t(200),Bt=t(409),Mt=t(677),Wt=t(10),Vt=t(320),Ht=t(505),Gt=x.a.select({ios:p.lazy((function(){return t.e(0).then(t.t.bind(null,699,7)).then((function(e){return{default:e.CountdownCircleTimer}}))})),android:p.lazy((function(){return t.e(0).then(t.t.bind(null,699,7)).then((function(e){return{default:e.CountdownCircleTimer}}))})),web:p.lazy((function(){return t.e(4).then(t.t.bind(null,700,7)).then((function(e){return{default:e.CountdownCircleTimer}}))}))});function qt(e){var n=e.end,t=e.size,r=Object(Vt.a)(n,new Date),l=5/r,a=10/r,o=10/r;return p.createElement(Gt,{duration:r>1?r:0,colors:r>0?[["#004777",o],["#F7B801",a],["#A30000",l]]:[["#A30000",1]],size:t||50,strokeWidth:2},(function(e){var n=e.remainingTime,t=e.animatedColor,r=Math.round(n%60),l=Object(Ht.a)(n),a=r<10?"0"+r:r,o=l<10?"0"+l:l;return p.createElement(Wt.a.Text,{style:{color:t,fontSize:16}},o,":",a)}))}function Qt(e){var n=e.load,t=e.onEdit,r=e.canEdit,l=e.children,a=rn((function(e){return e.global})).theme;return p.createElement(S.a,{style:[Yt.container,{backgroundColor:a.colors.primary}]},p.createElement(S.a,{style:Yt.actions},r?p.createElement(Ut.a,{icon:"pencil",size:20,color:a.colors.surface,onPress:function(){return t?t():null}}):null),p.createElement(S.a,{style:Yt.avatarContainer},p.createElement(S.a,{style:{flex:1/3}},null!=n&&n.dispatchAt&&Object(Mt.a)(1e3*n.dispatchAt,new Date)?p.createElement(qt,{end:new Date(1e3*n.dispatchAt),size:80}):p.createElement(It.a.Icon,{size:80,icon:"shield-airplane",color:a.colors.primary,style:{backgroundColor:a.colors.surface}})),p.createElement(S.a,{style:Yt.titleContainer},p.createElement(Lt.a,{style:Yt.title},"Load #",null==n?void 0:n.loadNumber),p.createElement(Bt.a,{style:Yt.paragraph},null==n?void 0:n.name))),l)}var Yt=O.a.create({container:{width:"100%",paddingTop:16},actions:{flexDirection:"row",justifyContent:"flex-end"},avatarContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:16,marginBottom:16},titleContainer:{paddingLeft:48,flex:2/3,alignItems:"flex-start",justifyContent:"center"},title:{color:"white"},paragraph:{color:"white"}}),_t=t(410);function Jt(e){var n=e.items,t=1/n.length;return p.createElement(p.Fragment,null,p.createElement(_t.a,{style:Xt.divider}),p.createElement(S.a,{style:Xt.container},n.map((function(e,r){return p.createElement(p.Fragment,null,p.createElement(S.a,{style:{flex:t},key:"info-grid-"+r},p.createElement(It.b.Item,{titleStyle:[Xt.title,{fontWeight:!1!==e.bold?"bold":void 0}],title:e.value,descriptionStyle:Xt.description,description:e.title,onPress:e.onPress})),r===n.length-1?null:p.createElement(_t.a,{key:"info-grid-divider-"+r,style:Xt.verticalDivider}))}))))}var Zt,Xt=O.a.create({container:{width:"100%",flexDirection:"row"},divider:{height:O.a.hairlineWidth,width:"100%",backgroundColor:"white"},verticalDivider:{width:O.a.hairlineWidth,height:"100%",backgroundColor:"white"},title:{textAlign:"center",color:"white"},description:{textAlign:"center",color:"white"}});function Kt(e,n){var t=n.getPayload;return function(n){var r=n.variables,l=n.pollInterval,a=n.onError,o=tn(),i=Object(F.useQuery)(e,{variables:r,pollInterval:l}),s=i.data,u=i.loading,c=i.refetch,d=i.error,m=p.useMemo((function(){return t(s)}),[s]);return p.useEffect((function(){null!=d&&d.message&&(!1!==n.showSnackbarErrors&&o(Ze.notifications.showSnackbar({message:d.message,variant:"error"})),null==a||a(d.message))}),[n.onError,null==d?void 0:d.message,n.showSnackbarErrors,a,o]),{loading:u,data:m,refetch:c}}}var er,nr=Kt(Object(Wn.a)(Zt||(Zt=Bn()(["\n  query QueryLoad($id: Int!) {\n    load(id: $id) {\n      id\n      name\n      createdAt\n      dispatchAt\n      hasLanded\n      maxSlots\n      loadNumber\n      isFull\n      state\n      isOpen\n      plane {\n        id\n        maxSlots\n        name\n      }\n      gca {\n        id\n        user {\n          id\n          name\n        }\n      }\n      pilot {\n        id\n        user {\n          id\n          name\n        }\n      }\n      loadMaster {\n        id\n        user {\n          id\n          name\n        }\n      }\n      slots {\n        id\n        createdAt\n        exitWeight\n        passengerName\n        passengerExitWeight\n        wingLoading\n        dropzoneUser {\n          id\n          role {\n            id\n            name\n          }\n          user {\n            id\n            name\n            exitWeight\n            license {\n              id\n              name\n            }\n          }\n        }\n        ticketType {\n          id\n          name\n          altitude\n          isTandem\n\n          extras {\n            id\n            name\n            cost\n          }\n        }\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return null==e?void 0:e.load}}),tr=Jn(Object(Wn.a)(er||(er=Bn()(["\n  mutation DeleteSlot($id: Int!) {\n    deleteSlot(input: { id: $id }) {\n      slot {\n        id\n\n        dropzoneUser {\n          id\n          user {\n            id\n            name\n          }\n        }\n        load {\n          id\n          slots {\n            id\n            createdAt\n            exitWeight\n\n            passengerName\n            passengerExitWeight\n\n            user {\n              id\n              name\n            }\n            ticketType {\n              id\n              name\n              altitude\n              isTandem\n            }\n            jumpType {\n              id\n              name\n            }\n            extras {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.deleteSlot}});function rr(e){var n=e.width;return p.createElement(Nn.a,{style:{height:150,opacity:.5,margin:12,width:n,alignItems:"center",justifyContent:"center"},elevation:3},p.createElement(Nn.a.Title,{title:"Available",style:{alignSelf:"center",justifyContent:"center"},titleStyle:{textAlign:"center"}}))}function lr(e){var n=e.width;return p.createElement(Un.a,{isLoading:!0,containerStyle:{height:150,width:n,margin:12},layout:[{key:"user-card-container",height:150,width:n}]})}function ar(){var e,n,t,r,o=tn(),i=p.useState(!1),s=W()(i,2),u=s[0],c=s[1],d=Object(An.useRoute)(),m=nr({variables:{id:Number(d.params.load.id)},pollInterval:3e4}),f=m.data,g=m.loading,v=m.refetch,b=f||d.params.load,h=tt().currentUser,y=At({onSuccess:function(){return o(Ze.notifications.showSnackbar({message:"Load #"+b.loadNumber+" updated",variant:"success"}))},onError:function(e){return o(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),E=tr({onSuccess:function(e){var n,t,r;return o(Ze.notifications.showSnackbar({message:((null==(n=e.slot)||null==(t=n.dropzoneUser)||null==(r=t.user)?void 0:r.name)||"User")+" has been taken off load #"+b.loadNumber,variant:"success"}))},onError:function(e){return o(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),w=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(E.mutate({id:Number(e.id)}));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[E]),x=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(y.mutate({id:Number(b.id),pilotId:Number(e.id)}));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[y,b.id]),S=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(y.mutate({id:Number(b.id),gcaId:Number(e.id)}));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[y,b.id]),k=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(y.mutate({id:Number(b.id),planeId:Number(e.id)}));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[y,b.id]),C=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(y.mutate({id:Number(b.id),loadMasterId:Number(e.id)}));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[y,b.id]),z=ct(lt.UpdateSlot),I=ct(lt.UpdateUserSlot),O=ct(lt.DeleteSlot),j=ct(lt.DeleteUserSlot);p.useEffect((function(){null!=b&&b.maxSlots&&(null==b?void 0:b.maxSlots)<5&&!u&&c(!0)}),[u,null==b?void 0:b.maxSlots]);var T=Object(An.useNavigation)(),F=Array.from({length:(null==b?void 0:b.maxSlots)||0}).map((function(e,n){var t;return((null==b||null==(t=b.slots)?void 0:t.length)||0)>n?b.slots[n]:2})),D=(null==b?void 0:b.maxSlots)||(null==b||null==(e=b.plane)?void 0:e.maxSlots)||0,$=(null==b||null==(n=b.slots)?void 0:n.length)||0,N=Object($n.a)().width,A=Math.floor(N/404)||1,R=404*A+24,U=!(null!=f&&null!=(t=f.slots)&&t.length)&&g;return p.createElement(zt,{style:{flexGrow:1}},p.createElement(Qt,{load:b},p.createElement(a.c,{horizontal:!0,showsHorizontalScrollIndicator:!1,style:{marginVertical:8}},p.createElement(yt,{value:null==b?void 0:b.plane,onSelect:function(e){var n,t,r;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(((null==b||null==(n=b.slots)?void 0:n.length)||0)>(e.maxSlots||0))){a.next=5;break}r=((null==b||null==(t=b.slots)?void 0:t.length)||0)-(e.maxSlots||0),o(Ze.notifications.showSnackbar({message:"You need to take "+r+" people off the load to fit on this plane",variant:"warning"})),a.next=8;break;case 5:return a.next=7,l.a.awrap(k(e));case 7:v();case 8:case"end":return a.stop()}}),null,null,null,Promise)},small:!0,backgroundColor:"transparent",color:"white"}),p.createElement(ft,{value:null==b?void 0:b.gca,onSelect:S,small:!0,backgroundColor:"transparent",color:"white"}),p.createElement(bt,{value:null==b?void 0:b.pilot,onSelect:x,small:!0,backgroundColor:"transparent",color:"white"}),p.createElement(pt,{value:null==b?void 0:b.loadMaster,slots:b.slots||[],onSelect:C,small:!0,backgroundColor:"transparent",color:"white"})),p.createElement(Jt,{items:[{title:"Status",value:(r={},P()(r,rt.Open,"Open"),P()(r,rt.BoardingCall,"On call"),P()(r,rt.Cancelled,"Cancelled"),P()(r,rt.InFlight,"In air"),P()(r,rt.Landed,"Landed"),r)[null==b?void 0:b.state]},{title:"Slots",value:$+"/"+D},{title:"Weight",value:((null==b?void 0:b.weight)||0)+"kg"}]})),p.createElement(a.a,{testID:"slots",keyExtractor:function(e,n){return"slot-"+((null==e?void 0:e.id)||n)},style:{flex:1,height:Fn.a.get("window").height},contentContainerStyle:{width:R,alignSelf:"center",justifyContent:"space-evenly",paddingBottom:100},numColumns:A,horizontal:!1,data:U?[1,1,1,1,1,1,1,1]:F,refreshing:g,onRefresh:v,refreshControl:p.createElement(Dn.a,{refreshing:g,onRefresh:function(){return v()}}),renderItem:function(e){var n=e.item,t=e.index;return 1===n?p.createElement(lr,{width:380}):2===n?p.createElement(rr,{key:"empty-slot-"+t,width:380}):p.createElement(jt,{style:{width:380},key:"slot-"+n.id,slot:n,onDelete:(null==h?void 0:h.id)===n.dropzoneUser.id&&O||j?w:void 0,onPress:function(e){var n,t,r=null==b||null==(n=b.slots)?void 0:n.filter((function(n){var t=n.groupNumber;return t&&t===e.groupNumber})),l=function(){r&&(o(Ze.forms.manifestGroup.reset()),o(Ze.forms.manifestGroup.setFromSlots(r)),o(Ze.forms.manifestGroup.setField(["load",b])),T.navigate("ManifestGroupScreen"))},a=function(){o(Ze.forms.manifest.setOpen(e)),o(Ze.forms.manifest.setField(["load",b]))};(null==(t=e.user)?void 0:t.id)===(null==h?void 0:h.id)?z&&(null!=r&&r.length?l():a()):I&&(null!=r&&r.length?l():a())}})}}),p.createElement(Rt,{load:b}))}var or=t(39),ir=t(501);function sr(e){var n=e.size,t=e.paginationIndex,r=e.icons,l=Fn.a.get("window").width,a=((l>500?500:l)-96-30*n)/n;return p.createElement(S.a,{style:ur.pagination},Array.from({length:n}).map((function(e,l){var o=r&&r.length>l,i=l<(t||0)?"check":"";return i=l===t?"pencil":i,p.createElement(p.Fragment,{key:l},p.createElement(It.a.Icon,{icon:o&&r?r[l]:i,size:30,style:[ur.icon,(t||0)>l?ur.iconDone:void 0]}),n-1>l?p.createElement(S.a,{style:[ur.bridge,{width:a},(t||0)>l?ur.bridgeDone:void 0]}):null)})))}var ur=O.a.create({pagination:{flexDirection:"row",position:"absolute",top:100,alignSelf:"center"},bridge:{height:10,marginTop:10,marginLeft:-2,width:50,backgroundColor:"white"},bridgeDone:{backgroundColor:"#00C851"},icon:{backgroundColor:"white",marginLeft:-1},iconDone:{backgroundColor:"#00C851",marginLeft:-1}}),cr=p.createContext({index:0,count:0,setIndex:function(){return null}});var dr=Fn.a.get("window").width,mr=O.a.create({container:{width:dr,flex:1,paddingBottom:0}}),fr=function(e){var n=e.children,t=e.icons,r=p.useState(0),l=W()(r,2),a=l[0],o=l[1],i=p.useRef(null),s=p.Children.count(n);return p.createElement(cr.Provider,{value:{index:a,count:s,setIndex:function(e){var n;null==(n=i.current)||n.scrollToIndex({index:e,animated:!0})}}},p.createElement(S.a,{style:[mr.container]},p.createElement(ir.a,{showPagination:!0,index:a,PaginationComponent:function(e){return p.createElement(sr,wt()({},e,{icons:t}))},numColumns:1,scrollEnabled:!1,autoplay:!1,ref:i,onChangeIndex:function(e){var n=e.index;e.prevIndex;o(n||0)}},n)))},pr=t(274),gr=t(57),vr=p.forwardRef((function(e,n){var t=Object($n.a)().height,r=rn((function(e){return e.global})).theme,l=e.style,a=e.children,o=e.contentContainerStyle,i=St()(e,["style","children","contentContainerStyle"]);return p.createElement(gr.a,wt()({},i,{ref:n,keyboardDismissMode:"on-drag",keyboardShouldPersistTaps:"handled",contentInsetAdjustmentBehavior:"always",style:[br.container,{backgroundColor:r.colors.surface,height:t-112},l],contentContainerStyle:[br.content,o]}),a)})),br=O.a.create({container:{flex:1},content:{paddingHorizontal:16,alignItems:"flex-start",flexGrow:1,paddingBottom:50}});var hr=O.a.create({wizardScreen:{justifyContent:"center"},container:{backgroundColor:"#FF1414",paddingHorizontal:32,alignSelf:"center"},content:{paddingTop:200,flexGrow:1,paddingBottom:0},title:{position:"absolute",top:140,marginBottom:50,color:"white",fontSize:24,fontWeight:"bold",textAlign:"center",alignSelf:"center"},button:{alignSelf:"center",width:"100%"},buttonBack:{alignSelf:"center",width:"100%",marginHorizontal:48},buttons:{alignSelf:"center",alignItems:"flex-end",flexGrow:1,justifyContent:"flex-end",width:"100%",maxWidth:404,marginBottom:100}}),yr=function(e){var n=e.children,t=e.title,r=e.loading,a=e.onBack,o=e.backButtonLabel,i=e.nextButtonLabel,s=e.onNext,u=e.contentStyle,c=e.containerStyle,d=e.style,m=e.disableScroll,f=Fn.a.get("window"),g=f.width,v=f.height,b=p.useContext(cr),h=b.index,y=b.setIndex,E=p.useRef();return p.useEffect((function(){E.current?(E.current.scrollTo({y:0,animated:!1}),console.log("Scrolling ",t," to 0")):console.log("No ref")}),[h,t]),p.createElement(S.a,{style:O.a.flatten([hr.wizardScreen,{width:g},d])},p.createElement(vr,{style:[hr.container,c||{},{width:g}],contentContainerStyle:O.a.flatten([hr.content,{minHeight:v},u]),scrollEnabled:!m,pointerEvents:"box-none",ref:E},p.createElement(Lt.a,{style:hr.title},t),n,p.createElement(S.a,{style:hr.buttons,pointerEvents:"box-none"},p.createElement(pr.a,{key:"button-next-"+h,loading:r,mode:"contained",color:"#FFFFFF",disabled:r,style:hr.button,onPress:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("onNext with index",h),s(h,y);case 2:case"end":return e.stop()}}),null,null,null,Promise)}},i),a?p.createElement(pr.a,{key:"button-"+h,mode:"text",disabled:r,color:"#FFFFFF",style:hr.buttonBack,onPress:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:a(h,y);case 1:case"end":return e.stop()}}),null,null,null,Promise)}},o):null)))};var Er,wr=O.a.create({subtitle:{color:"white",textAlign:"center"},title:{fontSize:26,color:"white",textAlign:"center",fontWeight:"bold"},content:{alignItems:"center",justifyContent:"center",flexGrow:1,alignSelf:"center"},icon:{marginVertical:32,backgroundColor:"#00C851"},container:{paddingHorizontal:48,alignItems:"center",backgroundColor:"transparent"}}),xr=function(e){var n=e.title,t=e.subtitle,r=St()(e,["title","subtitle"]);return p.createElement(yr,wt()({style:wr.container},r),p.createElement(S.a,{style:wr.content},p.createElement(It.a.Icon,{icon:"check",size:150,style:wr.icon}),p.createElement(kn.a,{style:wr.title},n),p.createElement(Bt.a,{style:wr.subtitle},t)))},Sr=Jn(Object(Wn.a)(Er||(Er=Bn()(["\n  mutation CreateWeatherConditions(\n    $id: Int!\n    $dropzoneId: Int!\n    $winds: String\n    $temperature: Int\n    $jumpRun: Int\n    $exitSpotMiles: Int\n    $offsetMiles: Int\n    $offsetDirection: String\n  ) {\n    createWeatherCondition(\n      input: {\n        id: $id\n        attributes: {\n          dropzoneId: $dropzoneId\n          winds: $winds\n          temperature: $temperature\n          jumpRun: $jumpRun\n          exitSpotMiles: $exitSpotMiles\n          offsetMiles: $offsetMiles\n          offsetDirection: $offsetDirection\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      weatherCondition {\n        id\n        temperature\n        winds {\n          speed\n          altitude\n          direction\n        }\n        jumpRun\n        exitSpotMiles\n        offsetMiles\n        offsetDirection\n        createdAt\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.createWeatherCondition},validates:{},fieldErrorMap:{}}),kr=t(146),Cr=t(73),zr=t(76),Ir=t(425);function Or(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function jr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Or(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Or(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Tr(e){var n=e.speed,t=e.direction,r=e.altitude,l=e.onChange,o=p.useState(!1),i=W()(o,2),s=i[0],u=i[1],c=p.useState(n),d=W()(c,2),m=d[0],f=d[1],g=p.useState(t),v=W()(g,2),b=v[0],h=v[1];return p.createElement(Nn.a,{style:Fr.card,elevation:3},p.createElement(Nn.a.Content,{style:Fr.row},p.createElement(S.a,{style:Fr.altitudeCard},p.createElement(it.a,{onDismiss:function(){return u(!1)},visible:s,style:{minWidth:130},anchor:p.createElement(a.f,{style:{flexGrow:1,height:60,flexDirection:"row",alignItems:"center",justifyContent:"center"},onPress:function(){return u(!0)}},p.createElement(It.b.Icon,{icon:"arrow-up",style:Fr.icon}),p.createElement(kn.a,{style:Fr.altitudeOption},null==r?void 0:r.toString()))},[14e3,12e3,1e4,7e3,5e3,2e3,1e3].map((function(e){return p.createElement(It.b.Item,{key:e,onPress:function(){e&&l("altitude",e),u(!1)},title:e.toString(),left:function(){return p.createElement(It.b.Icon,{style:Fr.icon,icon:"arrow-up"})}})})))),p.createElement(S.a,{style:Fr.strengthCard},p.createElement(It.b.Icon,{icon:"weather-windy",style:Fr.icon}),p.createElement(Ir.a,{value:null==m?void 0:m.toString(),onBlur:function(){return l("speed",Number(m))},onChangeText:function(e){if(/\d/.test(e)){var n=e.match(/\d+/)||[m],t=W()(n,1)[0];f(t)}else e||f("")},style:Fr.textField,keyboardType:"numeric"})),p.createElement(S.a,{style:Fr.directionCard},p.createElement(It.b.Icon,{icon:"compass",style:Fr.icon}),p.createElement(Ir.a,{value:null==b?void 0:b.toString(),onBlur:function(){return l("direction",Number(b))},onChangeText:function(e){if(/\d/.test(e)){var n=e.match(/\d+/)||[b],t=W()(n,1)[0];h(t)}else e||h("")},style:Fr.textField,keyboardType:"numeric"}))))}var Pr={height:60,flexDirection:"row",width:350/3},Fr=O.a.create({altitudeOption:{minWidth:50,flexGrow:1,alignItems:"center",justifyContent:"center",textAlignVertical:"center",lineHeight:20,fontSize:20,alignSelf:"center"},card:{marginVertical:8,marginHorizontal:18,width:350,alignSelf:"center",borderRadius:10},icon:{width:20},altitudeCard:jr(jr({},Pr),{},{borderTopLeftRadius:10,borderBottomLeftRadius:10,overflow:"hidden"}),strengthCard:jr({},Pr),directionCard:jr(jr({},Pr),{},{borderTopRightRadius:10,borderBottomRightRadius:10,overflow:"hidden"}),textField:{flex:1,flexGrow:1,borderTopLeftRadius:0,borderTopRightRadius:0,width:"100%",minWidth:80},row:{flexGrow:1,display:"flex",flexWrap:"nowrap",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",paddingHorizontal:0,paddingVertical:0,marginVertical:16,marginTop:0,marginBottom:0}});function Dr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function $r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Dr(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Dr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Nr(e){var n,t,r,l,o=e.variant,i=e.onPressJumpRun,s=rn((function(e){return e.forms.weather})),u=tn(),c=s.fields.winds.value,d=p.useState((null==(n=s.fields)||null==(t=n.temperature)?void 0:t.value)||0),m=W()(d,2),f=m[0],g=m[1],v=p.useState((null==(r=s.fields)||null==(l=r.jumpRun)?void 0:l.value)||0),b=W()(v,2),h=b[0],y=b[1];return p.useEffect((function(){s.fields.jumpRun.value!==h&&y(s.fields.jumpRun.value)}),[h,s.fields.jumpRun.value]),p.useEffect((function(){s.fields.temperature.value!==f&&y(s.fields.temperature.value)}),[s.fields.jumpRun.value,s.fields.temperature.value,f]),p.createElement(kr.a,{behavior:"position",style:Ar.content},p.createElement(S.a,{style:Ar.row},p.createElement(kn.a,{style:[Ar.headerTemperature,{color:"light"===o?"white":"black"}]},"Temperature"),p.createElement(kn.a,{style:[Ar.headerJumprun,{color:"light"===o?"white":"black"}]},"Jump run")),p.createElement(S.a,{style:Ar.altitudeTempRow},p.createElement(Nn.a,{style:Ar.temperatureCard,elevation:3},p.createElement(Nn.a.Content,{style:Ar.cardContent},p.createElement(It.b.Icon,{icon:"thermometer",style:{width:20}}),p.createElement(Cr.a,{value:null==f?void 0:f.toString(),onBlur:function(){return u(Ze.forms.weather.setField(["temperature",Number(f)]))},onChangeText:function(e){if(/\d/.test(e)){var n=e.match(/^\-\d+/)||[f],t=W()(n,1)[0];g(Number(t))}},style:Ar.textField,keyboardType:"numeric"}))),p.createElement(Nn.a,{style:Ar.jumpRunCard,elevation:3},p.createElement(Nn.a.Content,{style:Ar.cardContent},p.createElement(It.b.Icon,{icon:"compass",style:{width:20}}),p.createElement(Cr.a,{value:null==h?void 0:h.toString(),onBlur:function(){return u(Ze.forms.weather.setField(["jumpRun",Number(h)]))},onChangeText:function(e){if(/\d/.test(e)){var n=e.match(/\d+/)||[h],t=W()(n,1)[0];y(Number(t))}},keyboardType:"numeric",style:Ar.textField}),p.createElement(a.f,{onPress:function(){return null==i?void 0:i()}},p.createElement(It.b.Icon,{icon:"earth",color:"#40AA40",style:{width:40}}))))),p.createElement(S.a,{style:Ar.row},p.createElement(kn.a,{style:[Ar.headerAltitude,{color:"light"===o?"white":"black"}]},"Altitude"),p.createElement(kn.a,{style:[Ar.headerSpeed,{color:"light"===o?"white":"black"}]},"Speed"),p.createElement(kn.a,{style:[Ar.headerDirection,{color:"light"===o?"white":"black"}]},"Direction")),p.createElement(_t.a,null),p.createElement(a.a,{data:c,keyExtractor:function(e,n){e.item;return"wind."+n},renderItem:function(e){var n=e.item,t=e.index;return p.createElement(Tr,wt()({},n,{key:"wind-input-"+t,onChange:function(e,r){var l=Object(zr.set)(Ft()(c),t,$r($r({},n),{},P()({},e,r)));u(Ze.forms.weather.setField(["winds",l]))}}))}}),(null==c?void 0:c.length)<5?p.createElement(a.f,{onPress:function(){return u(Ze.forms.weather.setField(["winds",[].concat(Ft()(c||[]),[{altitude:"0",direction:"0",speed:"0"}])]))}},p.createElement(S.a,{style:{width:"100%",opacity:.5},pointerEvents:"box-only"},p.createElement(Tr,{altitude:"Add",direction:"0",speed:"0",onChange:function(){return null}}))):null)}var Ar=O.a.create({container:{paddingHorizontal:0,alignItems:"center",paddingLeft:0,paddingRight:0},content:{width:"100%",flexDirection:"column",backgroundColor:"transparent"},altitudeTempRow:{paddingHorizontal:32,width:400,alignSelf:"center",backgroundColor:"transparent",flexGrow:1,display:"flex",flexWrap:"nowrap",flexDirection:"row",alignItems:"flex-start",paddingVertical:0,marginVertical:16,marginTop:0,marginBottom:0,justifyContent:"space-between"},textField:$r($r({},x.a.select({web:{width:"100%"},ios:{flexGrow:1}})),{},{paddingBottom:4,height:60,fontWeight:"bold",fontSize:20}),cardContent:{borderRadius:5,flexGrow:1,display:"flex",flexWrap:"nowrap",flexDirection:"row",alignItems:"flex-start",justifyContent:"flex-start",paddingHorizontal:0,paddingVertical:0,marginVertical:16,marginTop:0,marginBottom:0},row:{width:400,alignSelf:"center",flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:0,marginVertical:16},headerTemperature:{width:120,color:"white",textAlign:"center",fontWeight:"bold"},headerJumprun:{width:120,color:"white",textAlign:"center",fontWeight:"bold"},jumpRunCard:{width:120,height:60,flexDirection:"row",backgroundColor:"white",borderRadius:8},temperatureCard:{height:60,width:120,flexDirection:"row",backgroundColor:"white",borderRadius:8},headerAltitude:{width:120,color:"white",textAlign:"center",fontWeight:"bold"},headerSpeed:{width:120,color:"white",textAlign:"center",fontWeight:"bold"},headerDirection:{width:120,color:"white",textAlign:"center",fontWeight:"bold"},card:{marginVertical:8,width:360,alignSelf:"center",backgroundColor:"transparent",shadowColor:"transparent"},cardTitle:{flexDirection:"row",justifyContent:"space-between"},cardValue:{fontWeight:"bold",marginRight:8,fontSize:16,alignSelf:"center"},title:{color:"white",marginBottom:50,fontWeight:"bold",fontSize:25,textAlign:"center"},field:{marginBottom:8},slider:{flexDirection:"column"},sliderControl:{width:"100%",height:40},wingLoading:{alignSelf:"center"},wingLoadingCardLeft:{width:"30%"},wingLoadingCardRight:{paddingLeft:16,width:"70%"}});var Rr=O.a.create({container:{paddingHorizontal:0,alignItems:"center",paddingLeft:0,paddingRight:0}}),Ur=function(e){return p.createElement(yr,wt()({style:Rr.container},e,{title:"Winds Aloft"}),p.createElement(Nr,null))},Lr=t(114);function Br(e,n){var t=function(e,n){var t=e.x,r=e.y,l=n.x,a=n.y-r,o=l-t,i=Math.atan2(a,o);return i*=180/Math.PI}({x:e.x,y:e.y},{x:n.x,y:n.y});return t<0&&(t=360+t),t}var Mr=["N","NNE","NE","ENE","E","ESE","SE","SSE","S","SSW","SW","WSW","W","WNW","NW","NNW","N"];function Wr(e){var n=e.x,t=e.y,r=e.degrees,l=e.radius,a=e.offsetX,o=e.offsetY;return{x:n+l+a+l*Math.sin((r+180)*Math.PI/180),y:t+l+o+l*-Math.cos((r+180)*Math.PI/180)}}var Vr=t(358);function Hr(e){return e*(Math.PI/180)}function Gr(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,t=69.172,r=Math.cos(Hr(e))*t;return n/r}function qr(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Qr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qr(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qr(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Yr(e){var n=e.width,t=e.height,r=e.position,a=e.children,o=e.center,i=e.coords,s=e.shape,u=e.interactive,c=e.onDragEnd,d=Object(Vr.b)({googleMapsApiKey:"AIzaSyCnUA_xPCYIoMO8G9xTxcxRKgjSlmY1Wt0",id:"google-maps-script"}).isLoaded,m=e.containerStyle,f=e.mapStyle,g=p.useRef(null),v=p.useCallback((function(e){var n,t,r,a;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return g.current=e,o.prev=1,o.next=4,l.a.awrap(Lr.b());case 4:if(n=o.sent,"granted"===n.status){o.next=8;break}return o.abrupt("return");case 8:return o.next=10,l.a.awrap(Lr.a({}));case 10:t=o.sent,(null==i?void 0:i.lat)||t.coords.latitude,(null==i?void 0:i.lng)||t.coords.longitude,o.next=19;break;case 15:o.prev=15,o.t0=o.catch(1),a=new window.google.maps.LatLngBounds,null==(r=g.current)||r.fitBounds(a);case 19:case"end":return o.stop()}}),null,null,[[1,15]],Promise)}),[null==i?void 0:i.lat,null==i?void 0:i.lng]),b=p.useCallback((function(){g.current=null}),[]),h=p.useRef(),y=p.useCallback((function(e,n){h&&(clearTimeout(h.current),h.current=null)}),[]);p.useEffect((function(){o&&(console.log({center:o,coords:i}),y(o.lat,o.lng))}),[o,i,y]);var E=p.useState(),w=W()(E,2),x=w[0],k=w[1];return d?p.createElement(S.a,{onLayout:function(e){var n=e.nativeEvent;return k(n.layout)},style:Qr({width:n,height:t,borderRadius:"round"===s&&null!=x&&x.width?x.width/2:void 0,overflow:"hidden",position:"absolute",top:r.y,left:r.x},m),pointerEvents:u?void 0:"none"},p.createElement(Vr.a,{onLoad:function(e){g.current=e,v(e)},center:i,onDragEnd:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){null==c||c({lat:g.current.center.lat(),lng:g.current.center.lng()})})),onUnmount:b,mapContainerStyle:Qr({width:"100%",height:"100%"},f),options:{zoom:15,fullscreenControl:!1,streetViewControl:!1,mapTypeControl:!1,zoomControl:!1,mapTypeId:"satellite"}},a)):null}function _r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Jr(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?_r(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):_r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Zr=Fn.a.get("window").width;function Xr(e){var n=p.useState({x:0,y:0,height:0,width:0}),t=W()(n,2),r=t[0],l=t[1],o=1*r.width;o=o>475?475:o;var i=e.latitude,s=e.longitude,u=e.value,c=e.title,d=e.onChange,m=p.useState(!1),f=W()(m,2),g=f[0],v=f[1],b=p.useState(u||0),h=W()(b,2),y=h[0],E=h[1],w=p.useState({x:0,y:0,height:0,width:0,originX:0,originY:0}),x=W()(w,2),k=x[0],C=x[1],z=p.useRef(new Wt.a.Value(y)),I=p.useRef(new Wt.a.Value(0));p.useEffect((function(){g||E(u)}),[g,u]);var O,j=p.useRef(new Wt.a.Value(0)),T=p.useRef(Wt.a.loop(Wt.a.timing(j.current,{duration:3e3,toValue:-400,useNativeDriver:!0}),{resetBeforeIteration:!0})),P=p.useCallback((function(e){j.current.setValue(0),T.current.stop(),T.current.reset();var n=e.nativeEvent,t={x:n.x,y:n.y},r=Br({x:k.originX,y:k.originY},t);requestAnimationFrame((function(){return E(r)})),z.current.setValue(r)}),[E,k]),F=p.useCallback((function(e){var n=e.nativeEvent.layout;C(Jr(Jr({},n),{},{originX:n.x+r.width/2,originY:n.y+r.height/2}))}),[r.height,r.width]),D=Wr({x:k.originX,y:k.originY,degrees:y,offsetX:-20,offsetY:-20,radius:o/2});return p.createElement(a.b,{onBegan:function(){v(!0),Wt.a.timing(I.current,{duration:350,toValue:1,useNativeDriver:!0}).start()},onEnded:function(){v(!1),Wt.a.timing(I.current,{duration:350,toValue:0,useNativeDriver:!0}).start(),T.current.start(),requestAnimationFrame((function(){return null==d?void 0:d(y)}))},onGestureEvent:P},p.createElement(S.a,{style:{width:"100%",height:"100%",alignItems:"center",marginTop:50},onLayout:function(e){return l(e.nativeEvent.layout)}},c&&p.createElement(Wt.a.Text,{style:[Kr.title,{marginBottom:4,opacity:I.current.interpolate({inputRange:[0,1],outputRange:[1,0]})}]},c),p.createElement(Yr,{position:{y:0,x:0},coords:{lat:i,lng:s},containerStyle:{position:"relative",top:void 0,left:void 0,maxWidth:500,maxHeight:500},interactive:!1,height:o,width:o,onChange:function(){return null},shape:"round"},p.createElement(Wt.a.View,{onLayout:F,style:[Kr.iconContainer,{width:o,height:o}]},p.createElement(Wt.a.View,{style:{height:o,width:I.current.interpolate({inputRange:[0,1],outputRange:[10,2]}),backgroundColor:"#FF1414",opacity:I.current.interpolate({inputRange:[0,1],outputRange:[.6,1]}),transform:[{rotate:z.current.interpolate({inputRange:[0,360],outputRange:["0deg","360deg"]})}]}})),null!=r&&r.width?p.createElement(Wt.a.View,{style:[{position:"absolute",width:40,height:40,top:D.y,left:D.x,zIndex:100,opacity:j.current.interpolate({inputRange:[-400,-200,400],outputRange:[0,1,0]}),transform:[{rotate:z.current.interpolate({inputRange:[0,360],outputRange:["0deg","360deg"]})},{translateY:j.current}]}]},p.createElement(Pn.a,{name:"airplane",size:40,color:"#ffffff"})):null,p.createElement(Wt.a.Text,{style:[Kr.degreeLabel,{opacity:I.current,top:o/2-60,left:o/2-100}]},Math.round(y))),p.createElement(Wt.a.Text,{style:[Kr.bottomDegreeLabel,{opacity:I.current.interpolate({inputRange:[0,1],outputRange:[1,0]})}]},Math.round(y),"\xb0 (",(O=y,Mr[Math.round(O/22.5)]),")")))}var Kr=O.a.create({container:{paddingHorizontal:0,alignItems:"center",paddingLeft:0,paddingRight:0},title:{fontSize:50,fontWeight:"bold",color:"white",left:0,width:"100%",paddingBottom:40,textAlign:"center",textShadowColor:"rgba(15, 15, 15, 0.5)",textShadowRadius:10,textShadowOffset:{width:2,height:2}},degreeLabel:{width:200,height:120,textAlign:"center",textShadowColor:"rgba(15, 15, 15, 0.5)",textShadowRadius:10,textShadowOffset:{width:2,height:2},fontSize:100,color:"white",position:"absolute"},bottomDegreeLabel:{fontSize:50,paddingBottom:16,fontWeight:"bold",color:"white",position:"absolute",bottom:50,left:0,top:48,width:"100%",textAlign:"center",textShadowColor:"rgba(15, 15, 15, 0.5)",textShadowRadius:10,textShadowOffset:{width:2,height:2}},content:{width:"100%",flexDirection:"column"},iconContainer:{borderWidth:10,borderRadius:Zr/2,borderStyle:"solid",borderColor:"#222222",alignSelf:"center",alignItems:"center",justifyContent:"center"}});var el=O.a.create({container:{paddingHorizontal:0,alignItems:"center",paddingLeft:0,backgroundColor:"blue",paddingRight:0},slider:{width:"100%",marginTop:32},textInput:{height:80,width:200,alignSelf:"center",backgroundColor:"transparent",color:"white",fontSize:60,textAlign:"center",marginBottom:60},content:{width:"100%",flexDirection:"column"},iconContainer:{width:250,height:250,borderRadius:125,borderWidth:15,borderColor:"white",alignSelf:"center",alignItems:"center",justifyContent:"center"},icon:{position:"absolute",top:-75},row:{flex:1,flexDirection:"row",justifyContent:"space-between",alignItems:"center",paddingHorizontal:0,marginVertical:16},headerAltitude:{flex:.35,color:"white",textAlign:"center",fontWeight:"bold"},headerSpeed:{flex:.3,color:"white",textAlign:"center",fontWeight:"bold"},headerDirection:{flex:.3,color:"white",textAlign:"center",fontWeight:"bold"},card:{padding:8,marginVertical:16},cardTitle:{flexDirection:"row",justifyContent:"space-between"},cardValue:{fontWeight:"bold",marginRight:8,fontSize:16,alignSelf:"center"},title:{color:"white",marginBottom:50,fontWeight:"bold",fontSize:25,textAlign:"center"},field:{marginBottom:8},sliderControl:{width:"100%",height:40},wingLoading:{alignSelf:"center"},wingLoadingCardLeft:{width:"30%"},wingLoadingCardRight:{paddingLeft:16,width:"70%"}}),nl=function(e){var n=rn((function(e){return e.forms.weather})),t=tn(),r=tt().dropzone,a=p.useState(),o=W()(a,2),i=o[0],s=o[1],u=p.useCallback((function(){var e,n;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(Lr.b());case 3:if(e=t.sent,"granted"===e.status){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,l.a.awrap(Lr.a({}));case 9:n=t.sent,s(n.coords),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),null,null,[[0,13]],Promise)}),[]);return p.useEffect((function(){null!=r&&r.lat&&null!=r&&r.lng||u()}),[null==r?void 0:r.lat,null==r?void 0:r.lng,u]),p.createElement(yr,wt()({style:el.container},e,{contentStyle:{paddingTop:130}}),p.createElement(S.a,{style:{width:"100%",height:"80%"}},p.createElement(Xr,{value:n.fields.jumpRun.value||0,latitude:(null==r?void 0:r.lat)||(null==i?void 0:i.latitude)||0,longitude:(null==r?void 0:r.lng)||(null==i?void 0:i.longitude)||0,onChange:function(e){return t(Ze.forms.weather.setField(["jumpRun",Math.round(e)]))}})))};var tl=function(){var e=rn((function(e){return e.forms.weather})),n=rn((function(e){return e.global.currentDropzoneId})),t=tn(),r=Object(or.useNavigation)(),a=Sr({onSuccess:function(){return null},onFieldError:function(e,n){return t(Ze.forms.weather.setFieldError([e,n]))},onError:function(e){t(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),o=p.useCallback((function(t,r){var o;return l.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,l.a.awrap(a.mutate({id:Number(null==(o=e.original)?void 0:o.id),dropzoneId:n,winds:JSON.stringify(e.fields.winds.value),jumpRun:e.fields.jumpRun.value,temperature:e.fields.temperature.value}));case 2:r(t+1);case 3:case"end":return i.stop()}}),null,null,null,Promise)}),[a,e,n]);return p.createElement(fr,null,p.createElement(Ur,{backButtonLabel:"Cancel",nextButtonLabel:"Next",onBack:function(){t(Ze.forms.weather.reset()),t(Ze.forms.weather.setOpen(!1)),r.goBack()},loading:a.loading,onNext:function(e,n){return n(e+1)}}),p.createElement(nl,{backButtonLabel:"Back",nextButtonLabel:"Next",loading:a.loading,onNext:function(e,n){o(e,n)},onBack:function(e,n){return n(e-1)}}),p.createElement(xr,{title:"Weather conditions saved",subtitle:"You can update these at any time",backButtonLabel:"Back",nextButtonLabel:"Done",onBack:function(e,n){n(e-1)},onNext:function(){t(Ze.forms.weather.reset()),t(Ze.forms.weather.setOpen(!1)),r.goBack()}}))};function rl(){var e,n=rn((function(e){return e.forms.weather})),t=rn((function(e){return e.global.currentDropzoneId})),r=tn(),a=Object(or.useNavigation)(),o=Sr({onSuccess:function(){return null},onFieldError:function(e,n){return r(Ze.forms.weather.setFieldError([e,n]))},onError:function(e){r(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),i=p.useCallback((function(){var e;return l.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,l.a.awrap(o.mutate({id:Number(null==(e=n.original)?void 0:e.id),dropzoneId:t,winds:JSON.stringify(n.fields.winds.value),jumpRun:n.fields.jumpRun.value,temperature:n.fields.temperature.value}));case 2:a.goBack(),r(Ze.notifications.showSnackbar({message:"Weather board updated",variant:"success"}));case 4:case"end":return i.stop()}}),null,null,null,Promise)}),[o,null==(e=n.original)?void 0:e.id,n.fields.winds.value,n.fields.jumpRun.value,n.fields.temperature.value,t,a,r]),s=tt().dropzone,u=p.useState(),c=W()(u,2),d=c[0],m=c[1],f=p.useCallback((function(){var e,n;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(Lr.b());case 3:if(e=t.sent,"granted"===e.status){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,l.a.awrap(Lr.a({}));case 9:n=t.sent,m(n.coords),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(0),console.log(t.t0);case 16:case"end":return t.stop()}}),null,null,[[0,13]],Promise)}),[]);return p.useEffect((function(){null!=s&&s.lat&&null!=s&&s.lng||f()}),[null==s?void 0:s.lat,null==s?void 0:s.lng,f]),p.createElement(S.a,{style:O.a.absoluteFill},p.createElement(Xr,{value:n.fields.jumpRun.value||0,latitude:(null==s?void 0:s.lat)||(null==d?void 0:d.latitude)||0,longitude:(null==s?void 0:s.lng)||(null==d?void 0:d.longitude)||0,onChange:function(e){return r(Ze.forms.weather.setField(["jumpRun",Math.round(e)]))}}),p.createElement($t.a,{style:ll.fab,small:!0,icon:"check",onPress:function(){return i()},label:"Save"}))}var ll=O.a.create({fab:{position:"absolute",margin:16,right:0,bottom:0}});function al(){var e=rn((function(e){return e.forms.weather})),n=rn((function(e){return e.global.currentDropzoneId})),t=tn(),r=Object(or.useNavigation)(),a=Sr({onSuccess:function(){return null},onFieldError:function(e,n){return t(Ze.forms.weather.setFieldError([e,n]))},onError:function(e){t(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),o=p.useCallback((function(){var o;return l.a.async((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,l.a.awrap(a.mutate({id:Number(null==(o=e.original)?void 0:o.id),dropzoneId:n,winds:JSON.stringify(e.fields.winds.value),jumpRun:e.fields.jumpRun.value,temperature:e.fields.temperature.value}));case 2:r.goBack(),t(Ze.notifications.showSnackbar({message:"Weather board updated",variant:"success"})),t(Ze.forms.weather.reset()),t(Ze.forms.weather.setOpen(!1));case 6:case"end":return i.stop()}}),null,null,null,Promise)}),[a,e,n,r,t]);return p.createElement(vr,{style:{backgroundColor:"#F4F5F5"}},p.createElement(Nr,{onPressJumpRun:function(){return r.navigate("JumpRunScreen")}}),p.createElement(S.a,{style:ol.buttons,pointerEvents:"box-none"},p.createElement(pr.a,{loading:a.loading,mode:"contained",disabled:a.loading,style:ol.button,onPress:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:o();case 1:case"end":return e.stop()}}),null,null,null,Promise)}},"Save")))}var ol=O.a.create({button:{alignSelf:"center",width:"100%"},buttonBack:{alignSelf:"center",width:"100%",marginHorizontal:48},buttons:{alignSelf:"center",alignItems:"flex-end",flexGrow:1,justifyContent:"flex-end",width:"100%",maxWidth:404,marginBottom:100}}),il=t(427);function sl(e){var n=e.action,t=e.title;return p.createElement(S.a,{style:dl.warning},p.createElement(Bt.a,{style:{color:"white",flex:.7,flexGrow:2}},t),n?p.createElement(pr.a,{onPress:n,style:{flex:.1,flexShrink:1}},"Fix"):null)}function ul(e){var n=e.credits,t=e.loading,r=e.isCreditSystemEnabled,l=e.isRigSetUp,a=e.isExitWeightDefined,o=e.isMembershipInDate,i=e.isReserveInDate,s=e.isRigInspectionComplete,u=e.onSetupWizard;if(t)return null;if(!a||!l){var c=[a?null:"exit weight",l?null:"equipment"].filter(Boolean);return p.createElement(sl,{title:"You need to define "+c.join(" and ")+" in your profile",action:function(){return null==u?void 0:u()}})}return o?s?i?!r||n||t?null:p.createElement(sl,{title:"You'll need to top up on credits before you can manifest"}):p.createElement(sl,{title:"Your reserve repack is due. You cannot manifest if your repack is out of date."}):p.createElement(sl,{title:"Your rig must be inspected before you can manifest at this dropzone"}):p.createElement(sl,{title:"Your membership seems to be out of date"})}var cl,dl=O.a.create({warning:{flexDirection:"row",alignItems:"center",height:56,width:"100%",backgroundColor:"black",justifyContent:"space-between",paddingHorizontal:32}}),ml=Object(F.gql)(cl||(cl=Bn()(["\n  query QueryDropzone($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      isCreditSystemEnabled\n\n      currentUser {\n        id\n        credits\n        expiresAt\n\n        rigInspections {\n          id\n          rig {\n            id\n            repackExpiresAt\n          }\n        }\n\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));var fl=function(e){var n,t,r,l,a,o,i,s,u,c,d,m,f,g,v,b,h,y,E,w,x,S,k,C=e.navigation,z=e.previous,I=e.scene,O=e.hideWarnings,j=p.useState(!1),T=W()(j,2),P=T[0],D=T[1],$=rn((function(e){return e.global})).currentDropzoneId,N=tn(),A=Object(F.useLazyQuery)(ml,{variables:{dropzoneId:Number($)}}),R=W()(A,2),U=R[0],L=R[1],B=L.data,M=L.loading;return p.useEffect((function(){$&&U()}),[U,$]),p.createElement(p.Fragment,null,p.createElement(il.a.Header,null,z?p.createElement(il.a.BackAction,{onPress:C.goBack}):null,p.createElement(il.a.Content,{title:I.descriptor.options.title,titleStyle:{fontWeight:"bold"}}),I.descriptor.options.headerRight?I.descriptor.options.headerRight({tintColor:"white"}):p.createElement(ot.a,{mode:"outlined"},"$"+((null==B||null==(n=B.dropzone)||null==(t=n.currentUser)?void 0:t.credits)||0)),p.createElement(it.a,{onDismiss:function(){return D(!1)},visible:P,anchor:p.createElement(Ut.a,{icon:"dots-vertical",color:"#FFFFFF",onPress:function(){return D(!0)}})},p.createElement(it.a.Item,{title:"Change dropzone",icon:"radar",onPress:function(){C.replace("DropzonesScreen"),D(!1)}}),p.createElement(_t.a,null),p.createElement(it.a.Item,{title:"Log out",icon:"logout",onPress:function(){N(Ze.global.logout()),D(!1)}}))),O?null:p.createElement(ul,{credits:(null==B||null==(r=B.dropzone)||null==(l=r.currentUser)?void 0:l.credits)||0,loading:M,isCreditSystemEnabled:!(null==B||null==(a=B.dropzone)||!a.isCreditSystemEnabled),isExitWeightDefined:!(null==B||null==(o=B.dropzone)||null==(i=o.currentUser)||null==(s=i.user)||!s.exitWeight),isMembershipInDate:!(null==B||null==(u=B.dropzone)||null==(c=u.currentUser)||!c.expiresAt)&&(null==B||null==(d=B.dropzone)||null==(m=d.currentUser)?void 0:m.expiresAt)>(new Date).getTime()/1e3,isReserveInDate:!(null==B||null==(f=B.dropzone)||null==(g=f.currentUser)||null==(v=g.user)||null==(b=v.rigs)||!b.some((function(e){var n,t,r,l=null==(n=B.dropzone)||null==(t=n.currentUser)||null==(r=t.rigInspections)?void 0:r.map((function(n){var t;return(null==n||null==(t=n.rig)?void 0:t.id)===e.id})),a=(e.repackExpiresAt||0)>(new Date).getTime()/1e3;return l&&a}))),isRigInspectionComplete:!(null==B||null==(h=B.dropzone)||null==(y=h.currentUser)||null==(E=y.rigInspections)||!E.length),isRigSetUp:!(null==B||null==(w=B.dropzone)||null==(x=w.currentUser)||null==(S=x.user)||null==(k=S.rigs)||!k.length),onSetupWizard:function(){var e,n,t,r=null==B||null==(e=B.dropzone)?void 0:e.currentUser;r&&(N(Ze.forms.user.setOpen(r.user)),null!=r&&null!=(n=r.user)&&null!=(t=n.rigs)&&t.length&&N(Ze.forms.rig.setOpen(r.user.rigs[0])),N(Ze.forms.userWizard.setOpen(r.user)))}}))},pl=t(429),gl=t(414);var vl,bl=function(e){var n=e.items,t=e.selected,r=e.isSelected,l=e.isDisabled,a=e.icon,o=e.renderItemLabel,i=e.onChangeSelected,s=e.autoSelectFirst;return p.useEffect((function(){(!t||!t.length&&n.length&&s)&&i([n[0]])}),[t,n,s,i]),p.createElement(S.a,{style:{flexDirection:"row",flexWrap:"wrap"}},n.map((function(e){return p.createElement(ot.a,{key:JSON.stringify(e),mode:"outlined",icon:!t.some((function(n){return Object(zr.isEqual)(e,n)}))&&a?a:void 0,style:{margin:1},disabled:l(e),selected:r?r(e):t.some((function(n){return Object(zr.isEqual)(e,n)})),onPress:function(){return i(1===t.length?[e]:Object(zr.xorBy)(t,[e],JSON.stringify))}},o(e))})))};function hl(e){var n=e.rows;return p.createElement(Un.a,{isLoading:!0,containerStyle:{height:41+32*(n||1),width:"100%",justifyContent:"center",marginBottom:16},layout:[{key:"header",width:70,height:15,borderRadius:8,marginVertical:13,marginHorizontal:8},{key:"chips",flexDirection:"row",children:[{key:"chip1",width:96,height:32,borderRadius:16,marginRight:4},{key:"chip2",width:96,height:32,borderRadius:16,marginRight:4},{key:"chip3",width:96,height:32,borderRadius:16}]}]})}var yl,El=Kt(Object(Wn.a)(vl||(vl=Bn()(["\n  query DropzoneUsersAllowedJumpTypes($dropzoneId: Int!, $userIds: [Int!]!) {\n    dropzone(id: $dropzoneId) {\n      id\n\n      allowedJumpTypes(userId: $userIds) {\n        id\n        name\n      }\n    }\n    jumpTypes {\n      id\n      name\n    }\n  }\n"]))),{getPayload:function(e){var n,t;return{allowedJumpTypes:(null==e||null==(n=e.dropzone)?void 0:n.allowedJumpTypes)||[],ticketTypes:(null==e||null==(t=e.dropzone)?void 0:t.ticketTypes)||[],jumpTypes:(null==e?void 0:e.jumpTypes)||[]}}});function wl(e){var n=e.onLoadingStateChanged,t=e.userId,r=e.value,l=e.onSelect,a=rn((function(e){return e.global})).currentDropzoneId,o=El({variables:{userIds:[Number(t)||null].filter(Boolean),dropzoneId:Number(a)},onError:console.error}),i=o.data,s=o.loading;return p.useEffect((function(){null==n||n(s)}),[s,n]),s?p.createElement(hl,null):p.createElement(p.Fragment,null,p.createElement(It.b.Subheader,null,"Jump type"),p.createElement(bl,{autoSelectFirst:!0,items:Object(zr.uniqBy)([].concat(Ft()((null==i?void 0:i.allowedJumpTypes)||[]),Ft()((null==i?void 0:i.jumpTypes)||[])),(function(e){return e.id}))||[],selected:[r].filter(Boolean),renderItemLabel:function(e){return(null==e?void 0:e.name)||"Unknown"},isDisabled:function(e){var n;return!(null!=i&&null!=(n=i.allowedJumpTypes)&&n.map((function(e){return e.id})).includes(null==e?void 0:e.id))},onChangeSelected:function(e){var n=W()(e,1)[0];return n?l(n):null}}))}var xl,Sl=Kt(Object(Wn.a)(yl||(yl=Bn()(["\n  query DropzoneUsersAllowedTicketTypes($dropzoneId: Int!, $onlyPublicTickets: Boolean) {\n    dropzone(id: $dropzoneId) {\n      id\n\n      ticketTypes(isPublic: $onlyPublicTickets) {\n        id\n        name\n        cost\n        isTandem\n\n        extras {\n          id\n          cost\n          name\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){var n;return{ticketTypes:(null==e||null==(n=e.dropzone)?void 0:n.ticketTypes)||[]}}});function kl(e){var n=e.value,t=e.onLoadingStateChanged,r=e.onSelect,l=e.onlyPublicTickets,a=rn((function(e){return e.global})).currentDropzoneId,o=Sl({variables:{dropzoneId:Number(a),onlyPublicTickets:l||null},onError:console.error}),i=o.data,s=o.loading;return p.useEffect((function(){null==t||t(s)}),[s,t]),s?p.createElement(hl,null):p.createElement(p.Fragment,null,p.createElement(It.b.Subheader,null,"Ticket"),p.createElement(bl,{autoSelectFirst:!0,items:(null==i?void 0:i.ticketTypes)||[],selected:[n].filter(Boolean),renderItemLabel:function(e){return null==e?void 0:e.name},isDisabled:function(){return!1},onChangeSelected:function(e){var n=W()(e,1)[0];return n?r(n):null}}))}var Cl=Object(Wn.a)(xl||(xl=Bn()(["\n  query QueryAvailableRigs($dropzoneId: Int!, $userId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      dropzoneUser(userId: $userId) {\n        id\n        availableRigs {\n          id\n          make\n          model\n          canopySize\n          serial\n\n          user {\n            id\n          }\n        }\n      }\n    }\n  }\n"])));function zl(e){var n,t,r,l,a=e.userId,o=e.value,i=e.required,s=e.autoSelectFirst,u=e.onSelect,c=e.dropzoneId,d=p.useState(!1),m=W()(d,2),f=m[0],g=m[1],v=rn((function(e){return e.global})).currentDropzoneId,b=Object(F.useLazyQuery)(Cl),h=W()(b,2),y=h[0],E=h[1].data;return p.useEffect((function(){a&&c&&y({variables:{dropzoneId:v,userId:Number(a)}})}),[a,c,y,v]),p.useEffect((function(){var e,n,t;!o&&s&&null!=E&&null!=(e=E.dropzone)&&null!=(n=e.dropzoneUser)&&null!=(t=n.availableRigs)&&t.length&&u(E.dropzone.dropzoneUser.availableRigs[0])}),[s,null==E||null==(n=E.dropzone.dropzoneUser)?void 0:n.availableRigs,u,o]),p.createElement(it.a,{onDismiss:function(){return g(!1)},visible:f,anchor:p.createElement(It.b.Item,{onPress:function(){g(!0)},title:o?(null==o?void 0:o.make)+" "+(null==o?void 0:o.model)+" ("+((null==o?void 0:o.canopySize)||"?")+"sqft)":"Select rig",description:i?null:"Optional",left:function(){return p.createElement(It.b.Icon,{icon:"parachute"})}})},null==E||null==(t=E.dropzone)||null==(r=t.dropzoneUser)||null==(l=r.availableRigs)?void 0:l.map((function(e){return p.createElement(it.a.Item,{key:"rig-select-"+e.id,onPress:function(){g(!1),u(e)},style:{width:"100%"},title:(null==e?void 0:e.make)+" "+(null==e?void 0:e.model)+" ("+(null==e?void 0:e.canopySize)+" sqft) "+(e.user?"":"[DROPZONE RIG]")})})))}function Il(){var e,n,t,r,l,a,o,i,s,u,c,d,m,f,g,v,b,h,y,E,w,x,S,k,C=tn(),z=tt(),I=rn((function(e){return e.forms.manifest}));p.useEffect((function(){var e;if(null!=(e=I.fields.dropzoneUser)&&e.value){var n,t,r,l,a,o,i;if(!I.fields.exitWeight.value)C(Ze.forms.manifest.setField(["exitWeight",Number((null==(r=I.fields.dropzoneUser)||null==(l=r.value)||null==(a=l.user)?void 0:a.exitWeight)||60)]));if(!I.fields.rig.value&&null!=(n=I.fields.dropzoneUser.value.user)&&null!=(t=n.rigs)&&t.length)C(Ze.forms.manifest.setField(["rig",null==(o=I.fields.dropzoneUser)||null==(i=o.value)?void 0:i.user.rigs[0]]))}}),[C,I.fields.dropzoneUser.value,null==(e=I.fields.dropzoneUser.value)?void 0:e.id,I.fields.exitWeight.value,I.fields.rig.value]);var O=ct((null==I||null==(n=I.original)?void 0:n.id)?lt.UpdateUserSlot:lt.CreateUserSlot);return p.createElement(p.Fragment,null,p.createElement(wl,{value:I.fields.jumpType.value,userId:Number(null==I||null==(t=I.fields)||null==(r=t.dropzoneUser)||null==(l=r.value)||null==(a=l.user)?void 0:a.id)||null,onSelect:function(e){return C(Ze.forms.manifest.setField(["jumpType",e]))}}),p.createElement(gl.a,{type:I.fields.jumpType.error?"error":"info"},I.fields.jumpType.error||""),p.createElement(kl,{value:I.fields.ticketType.value,onlyPublicTickets:!O,onSelect:function(e){return C(Ze.forms.manifest.setField(["ticketType",e]))}}),p.createElement(gl.a,{type:I.fields.ticketType.error?"error":"info"},I.fields.ticketType.error||""),null!=I&&null!=(o=I.fields)&&null!=(i=o.ticketType)&&null!=(s=i.value)&&null!=(u=s.extras)&&u.length?p.createElement(It.b.Subheader,null,"Ticket addons"):null,p.createElement(gr.a,{horizontal:!0,style:jl.ticketAddons},null==I||null==(c=I.fields)||null==(d=c.ticketType)||null==(m=d.value)||null==(f=m.extras)?void 0:f.map((function(e){var n,t,r,l;return p.createElement(ot.a,{selected:null==I||null==(n=I.fields)||null==(t=n.extras.value)?void 0:t.some((function(n){return n.id===e.id})),onPress:null!=I&&null!=(r=I.fields)&&null!=(l=r.extras.value)&&l.some((function(n){return n.id===e.id}))?function(){var n,t;return C(Ze.forms.manifest.setField(["extras",null==I||null==(n=I.fields)||null==(t=n.extras.value)?void 0:t.filter((function(n){return n.id!==e.id}))]))}:function(){var n,t;return C(Ze.forms.manifest.setField(["extras",[].concat(Ft()((null==I||null==(n=I.fields)||null==(t=n.extras)?void 0:t.value)||[]),[e])]))}},e.name+" ($"+e.cost+")")}))),p.createElement(gl.a,{type:I.fields.extras.error?"error":"info"},I.fields.extras.error||""),p.createElement(_t.a,null),I.fields.dropzoneUser?p.createElement(zl,{value:I.fields.rig.value,userId:Number(null==(g=I.fields.dropzoneUser)||null==(v=g.value)||null==(b=v.user)?void 0:b.id),dropzoneId:Number(null==z||null==(h=z.dropzone)?void 0:h.id),onSelect:function(e){return C(Ze.forms.manifest.setField(["rig",e]))}}):null,p.createElement(gl.a,{type:I.fields.rig.error?"error":"info"},I.fields.rig.error||""),p.createElement(Ir.a,{style:jl.field,mode:"outlined",label:"Exit weight",error:!!I.fields.exitWeight.error,value:(null==(y=I.fields.exitWeight)||null==(E=y.value)?void 0:E.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return p.createElement(Ir.a.Affix,{text:"kg"})},onChangeText:function(e){return C(Ze.forms.manifest.setField(["exitWeight",Number(e)]))}}),p.createElement(gl.a,{type:I.fields.exitWeight.error?"error":"info"},I.fields.exitWeight.error||""),null!=(w=I.fields.ticketType.value)&&w.isTandem?p.createElement(p.Fragment,null,p.createElement(It.b.Subheader,null,"Passenger"),p.createElement(Ir.a,{style:jl.field,mode:"outlined",label:"Passenger name",error:!!I.fields.passengerName.error,value:(null==(x=I.fields.passengerName)||null==(S=x.value)?void 0:S.toString())||"",onChangeText:function(e){return C(Ze.forms.manifest.setField(["passengerName",e]))}}),p.createElement(Ir.a,{style:jl.field,mode:"outlined",label:"Passenger exit weight",error:!!I.fields.passengerExitWeight.error,value:(null==(k=I.fields.passengerExitWeight.value)?void 0:k.toString())||"",onChangeText:function(e){return C(Ze.forms.manifest.setField(["passengerExitWeight",Number(e)]))}})):null)}var Ol,jl=O.a.create({fields:{flex:1},field:{marginBottom:8},ticketAddons:{marginBottom:8}});function Tl(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Pl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Tl(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Tl(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Fl=Object(F.gql)(Ol||(Ol=Bn()(["\n  mutation CreateSlot(\n    $jumpTypeId: Int\n    $extraIds: [Int!]\n    $loadId: Int\n    $rigId: Int\n    $ticketTypeId: Int\n    $dropzoneUserId: Int\n    $exitWeight: Float\n    $passengerName: String\n    $passengerExitWeight: Float\n  ) {\n    createSlot(\n      input: {\n        attributes: {\n          jumpTypeId: $jumpTypeId\n          extraIds: $extraIds\n          loadId: $loadId\n          rigId: $rigId\n          ticketTypeId: $ticketTypeId\n          dropzoneUserId: $dropzoneUserId\n          exitWeight: $exitWeight\n          passengerExitWeight: $passengerExitWeight\n          passengerName: $passengerName\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      slot {\n        id\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n        exitWeight\n        load {\n          id\n          name\n          createdAt\n          dispatchAt\n          hasLanded\n          maxSlots\n          isFull\n          isOpen\n          plane {\n            id\n            name\n          }\n          gca {\n            id\n            user {\n              id\n              name\n            }\n          }\n          pilot {\n            id\n            user {\n              id\n              name\n            }\n          }\n          loadMaster {\n            id\n            user {\n              id\n              name\n            }\n          }\n          slots {\n            id\n            createdAt\n            user {\n              id\n              name\n            }\n            passengerName\n            passengerExitWeight\n            ticketType {\n              id\n              name\n              isTandem\n              altitude\n            }\n            jumpType {\n              id\n              name\n            }\n            extras {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Dl(e){var n,t,r,a,o,i,s,u,c,d,m,f,g,v,b,y,E,w,x=e.onSuccess,S=e.open,k=tn(),C=rn((function(e){return e.forms.manifest})),z=rn((function(e){return e.global})),I=Object(F.useMutation)(Fl),O=W()(I,2),j=O[0],T=O[1],P=p.useCallback((function(){var e,n,t=!1;return null!=(e=C.fields.jumpType.value)&&e.id||(t=!0,k(Ze.forms.manifest.setFieldError(["jumpType","You must specify the type of jump"]))),null!=(n=C.fields.ticketType.value)&&n.id||(t=!0,k(Ze.forms.manifest.setFieldError(["ticketType","You must select a ticket type to manifest"]))),!t}),[k,null==(n=C.fields.jumpType.value)?void 0:n.id,null==(t=C.fields.ticketType.value)?void 0:t.id]),D=p.useCallback((function(){var e,n,t,r,a,o,i,s,u,c,d,m,f,p,g,v,b,h,y,E,w,S,z,I,O;return l.a.async((function(T){for(;;)switch(T.prev=T.next){case 0:if(P()){T.next=2;break}return T.abrupt("return");case 2:return T.prev=2,T.next=5,l.a.awrap(j({variables:Pl({jumpTypeId:Number(null==(e=C.fields.jumpType.value)?void 0:e.id),extraIds:null==(n=C.fields.extras)||null==(t=n.value)?void 0:t.map((function(e){var n=e.id;return Number(n)})),loadId:Number(null==(r=C.fields.load.value)?void 0:r.id),rigId:null!=(a=C.fields.rig.value)&&a.id?Number(null==(o=C.fields.rig.value)?void 0:o.id):null,ticketTypeId:Number(null==(i=C.fields.ticketType)||null==(s=i.value)?void 0:s.id),dropzoneUserId:Number(null==(u=C.fields.dropzoneUser)||null==(c=u.value)?void 0:c.id),exitWeight:C.fields.exitWeight.value},null!=(d=C.fields.ticketType.value)&&d.isTandem?{passengerName:null==(m=C.fields.passengerName)?void 0:m.value,passengerExitWeight:null==(f=C.fields.passengerExitWeight)?void 0:f.value}:{})}));case 5:if(z=T.sent,null==(p=z.data)||null==(g=p.createSlot)||null==(v=g.fieldErrors)||v.map((function(e){var n=e.field,t=e.message;switch(n){case"jump_type":return k(Ze.forms.manifest.setFieldError(["jumpType",t]));case"load":return k(Ze.forms.manifest.setFieldError(["load",t]));case"credits":case"extras":case"extra_ids":return k(Ze.forms.manifest.setFieldError(["extras",t]));case"ticket_type":return k(Ze.forms.manifest.setFieldError(["ticketType",t]));case"rig":return k(Ze.forms.manifest.setFieldError(["rig",t]));case"dropzone_user":return k(Ze.forms.manifest.setFieldError(["dropzoneUser",t]));case"exit_weight":return k(Ze.forms.manifest.setFieldError(["exitWeight",t]));default:return null}})),null==z||null==(b=z.data)||null==(h=b.createSlot)||null==(y=h.errors)||!y.length){T.next=10;break}return k(Ze.notifications.showSnackbar({message:null==z||null==(I=z.data)||null==(O=I.createSlot)?void 0:O.errors[0],variant:"error"})),T.abrupt("return");case 10:null!=(E=z.data)&&null!=(w=E.createSlot)&&null!=(S=w.fieldErrors)&&S.length||x(),T.next=16;break;case 13:T.prev=13,T.t0=T.catch(2),k(Ze.notifications.showSnackbar({message:T.t0.message,variant:"error"}));case 16:case"end":return T.stop()}}),null,null,[[2,13]],Promise)}),[k,j,x,null==(r=C.fields.dropzoneUser)||null==(a=r.value)?void 0:a.id,C.fields.exitWeight.value,null==(o=C.fields.extras)?void 0:o.value,null==(i=C.fields.jumpType.value)?void 0:i.id,null==(s=C.fields.load.value)?void 0:s.id,null==(u=C.fields.passengerExitWeight)?void 0:u.value,null==(c=C.fields.passengerName)?void 0:c.value,null==(d=C.fields.rig.value)?void 0:d.id,null==(m=C.fields.ticketType.value)?void 0:m.id,null==(f=C.fields.ticketType.value)?void 0:f.isTandem,P]);return p.createElement(Dt.a,null,p.createElement(pl.a,{visible:!!S,style:{maxHeight:500}},p.createElement(h.a,{indeterminate:!0,visible:T.loading,color:z.theme.colors.accent}),p.createElement(pl.a.Title,null,"Manifest "+(null==C||null==(g=C.fields)||null==(v=g.dropzoneUser)||null==(b=v.value)||null==(y=b.user)?void 0:y.name)+" on "+(null==(E=C.fields.load)||null==(w=E.value)?void 0:w.name)),p.createElement(pl.a.ScrollArea,null,p.createElement(gr.a,null,p.createElement(Il,null))),p.createElement(pl.a.Actions,{style:{justifyContent:"flex-end"}},p.createElement(pr.a,{onPress:function(){k(Ze.forms.manifest.reset()),e.onClose()}},"Cancel"),p.createElement(pr.a,{onPress:D},"Manifest"))))}var $l,Nl=t(141);var Al,Rl=Kt(Object(Wn.a)($l||($l=Bn()(["\n  query QueryDropzoneUsersManifestDetails($dropzoneId: Int!, $dropzoneUserId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n\n        user {\n          id\n          name\n          exitWeight\n          license {\n            id\n            name\n          }\n          rigs {\n            id\n            make\n            model\n            canopySize\n          }\n        }\n        role {\n          id\n          name\n        }\n        user {\n          id\n          name\n          image\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){var n;return null==e||null==(n=e.dropzone)?void 0:n.dropzoneUser}});function Ul(e){var n,t,r,l,a,o,i,s=e.dropzoneId,u=e.dropzoneUserId,c=e.onChangeRig,d=e.exitWeight,m=e.rigId,f=e.onChangeExitWeight,g=rn((function(e){return e})).global,v=Rl({variables:{dropzoneUserId:u,dropzoneId:s},onError:console.error}),b=v.data,y=v.loading,E=null==b||null==(n=b.user)||null==(t=n.rigs)?void 0:t.find((function(e){var n=e.id;return Number(n)===m}));return p.useEffect((function(){var e;!d&&null!=b&&null!=(e=b.user)&&e.exitWeight&&f(Number(b.user.exitWeight))}),[null==b?void 0:b.user.exitWeight,d,f]),p.createElement(Nn.a,{style:{width:"100%"},elevation:3},p.createElement(h.a,{indeterminate:!0,color:g.theme.colors.accent,visible:y}),p.createElement(Nn.a.Title,{title:null==b?void 0:b.user.name,left:function(){var e;return null!=b&&null!=(e=b.user)&&e.image?p.createElement(It.a.Image,{source:{uri:b.user.image},size:24}):p.createElement(It.a.Icon,{icon:"account",size:24})}}),p.createElement(Nn.a.Content,null,p.createElement(_t.a,{style:{marginBottom:8}}),p.createElement(gr.a,{horizontal:!0},p.createElement(ot.a,{style:{marginHorizontal:1},icon:"lock",mode:"outlined",disabled:!0},null==b||null==(r=b.role)?void 0:r.name),p.createElement(ot.a,{style:{marginHorizontal:1},icon:"ticket-account",mode:"outlined",disabled:!0},null==b||null==(l=b.user)||null==(a=l.license)?void 0:a.name),E&&d&&E.canopySize?p.createElement(ot.a,{style:{marginHorizontal:1},icon:"escalator-down",mode:"outlined",disabled:!0},(o=d,i=E.canopySize,Object(zr.round)(2.20462*o/i,2).toFixed(2))):null),p.createElement(zl,{userId:u,dropzoneId:s,onSelect:c,value:E,autoSelectFirst:!0}),p.createElement(Ir.a,{value:d?""+d:"",onChangeText:function(e){return f(Number(e))},keyboardType:"number-pad",label:"Exit weight",mode:"outlined"})))}function Ll(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Bl(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ll(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ll(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Ml=Kt(Object(Wn.a)(Al||(Al=Bn()(["\n  query DropzoneUsersAllowedJumpTypes($dropzoneId: Int!, $userIds: [Int!]!) {\n    dropzone(id: $dropzoneId) {\n      id\n\n      allowedJumpTypes(userId: $userIds) {\n        id\n        name\n      }\n\n      ticketTypes(isPublic: true) {\n        id\n        name\n        cost\n\n        extras {\n          id\n          cost\n          name\n        }\n      }\n    }\n    jumpTypes {\n      id\n      name\n    }\n  }\n"]))),{getPayload:function(e){var n,t;return{allowedJumpTypes:(null==e||null==(n=e.dropzone)?void 0:n.allowedJumpTypes)||[],ticketTypes:(null==e||null==(t=e.dropzone)?void 0:t.ticketTypes)||[],jumpTypes:(null==e?void 0:e.jumpTypes)||[]}}});function Wl(){var e,n,t,r,l,a,o,i,s,u,c,d,m,f=rn((function(e){return e.forms.manifestGroup})),g=rn((function(e){return e.global})),v=tn(),b=Ml({variables:{userIds:null==(e=f.fields.users)||null==(n=e.value)?void 0:n.map((function(e){return e.id})),dropzoneId:g.currentDropzoneId},onError:console.error}).data;return p.createElement(p.Fragment,null,p.createElement(It.b.Subheader,null,"Jump type"),p.createElement(Nn.a,{elevation:2,style:{marginBottom:16,flexShrink:1}},p.createElement(Nn.a.Content,null,p.createElement(bl,{autoSelectFirst:!0,items:Object(zr.uniqBy)([].concat(Ft()((null==b?void 0:b.allowedJumpTypes)||[]),Ft()((null==b?void 0:b.jumpTypes)||[])),(function(e){return e.id}))||[],selected:f.fields.jumpType.value?[f.fields.jumpType.value]:[],renderItemLabel:function(e){return e.name},isDisabled:function(e){var n;return!(null!=b&&null!=(n=b.allowedJumpTypes)&&n.map((function(e){return e.id})).includes(e.id))},onChangeSelected:function(e){var n=W()(e,1)[0];return v(Ze.forms.manifestGroup.setField(["jumpType",n]))}}),p.createElement(gl.a,{type:f.fields.jumpType.error?"error":"info"},f.fields.jumpType.error||""))),p.createElement(It.b.Subheader,null,"Ticket"),p.createElement(Nn.a,{elevation:2,style:{width:"100%"}},p.createElement(Nn.a.Content,null,p.createElement(bl,{autoSelectFirst:!0,items:(null==b?void 0:b.ticketTypes)||[],selected:f.fields.ticketType.value?[f.fields.ticketType.value]:[],renderItemLabel:function(e){return e.name},isDisabled:function(){return!1},onChangeSelected:function(e){var n=W()(e,1)[0];return v(Ze.forms.manifestGroup.setField(["ticketType",n]))}}),p.createElement(gl.a,{type:f.fields.ticketType.error?"error":"info"},f.fields.ticketType.error||""),null!=f&&null!=(t=f.fields)&&null!=(r=t.ticketType)&&null!=(l=r.value)&&null!=(a=l.extras)&&a.length?p.createElement(It.b.Subheader,null,"Ticket addons"):null,p.createElement(gr.a,{horizontal:!0,style:Vl.ticketAddons},null==f||null==(o=f.fields)||null==(i=o.ticketType)||null==(s=i.value)||null==(u=s.extras)?void 0:u.map((function(e){var n,t,r,l;return p.createElement(ot.a,{selected:null==f||null==(n=f.fields)||null==(t=n.extras.value)?void 0:t.some((function(n){return n.id===e.id})),onPress:null!=f&&null!=(r=f.fields)&&null!=(l=r.extras.value)&&l.some((function(n){return n.id===e.id}))?function(){var n,t;return v(Ze.forms.manifestGroup.setField(["extras",null==f||null==(n=f.fields)||null==(t=n.extras.value)?void 0:t.filter((function(n){return n.id!==e.id}))]))}:function(){var n,t;return v(Ze.forms.manifestGroup.setField(["extras",[].concat(Ft()((null==f||null==(n=f.fields)||null==(t=n.extras)?void 0:t.value)||[]),[e])]))}},e.name+" ($"+e.cost+")")}))),p.createElement(gl.a,{type:f.fields.extras.error?"error":"info"},f.fields.extras.error||""))),p.createElement(_t.a,null),p.createElement(It.b.Subheader,null,"Group"),null==(c=f.fields)||null==(d=c.users)||null==(m=d.value)?void 0:m.map((function(e){return p.createElement(Ul,{dropzoneId:g.currentDropzoneId,dropzoneUserId:Number(e.id),rigId:Number(e.rigId)||void 0,exitWeight:e.exitWeight,onChangeExitWeight:function(n){var t;return v(Ze.forms.manifestGroup.setField(["users",null==(t=f.fields.users.value)?void 0:t.map((function(t){return t.id===e.id?Bl(Bl({},e),{},{exitWeight:n}):t}))]))},onChangeRig:function(n){var t;return v(Ze.forms.manifestGroup.setField(["users",null==(t=f.fields.users.value)?void 0:t.map((function(t){return t.id===e.id?Bl(Bl({},e),{},{rigId:Number(n.id)}):t}))]))}})})))}var Vl=O.a.create({fields:{flex:1},field:{marginBottom:8},ticketAddons:{marginBottom:8}}),Hl=t(416),Gl=t(430);function ql(e){var n=e.title,t=e.color,r=e.subtitle;return p.createElement(zt,{style:Yl.empty},p.createElement(Lt.a,{style:{color:t}},n),p.createElement(Bt.a,{style:{color:t,textAlign:"center"}},r))}var Ql,Yl=O.a.create({container:{flex:1,padding:8,display:"flex",backgroundColor:"transparent"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",backgroundColor:"transparent",height:"100%"}}),_l=Object(Wn.a)(Ql||(Ql=Bn()(["\n  query QueryDropzoneUsersSearch($dropzoneId: Int!, $search: String) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(search: $search, licensed: true) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              image\n              name\n              exitWeight\n            }\n\n            availableRigs {\n              id\n              make\n              model\n              canopySize\n              serial\n\n              user {\n                id\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Jl(e){var n,t,r,l,o,i,s=rn((function(e){return e})).screens,u=tn(),c=p.useState(""),d=W()(c,2),m=d[0],f=d[1],g=rn((function(e){return e.global})).currentDropzoneId,v=Object(F.useQuery)(_l,{variables:{dropzoneId:Number(g),search:m}}).data,b=tt().currentUser,h=ct(lt.CreateUserSlot),y=ct(lt.CreateUserSlotWithSelf);return p.createElement(p.Fragment,null,p.createElement(Hl.a,{value:m,onChangeText:f,placeholder:"Search skydivers"}),p.createElement(S.a,{style:{height:380}},p.createElement(a.c,{contentContainerStyle:{paddingTop:16}},!(null!=v&&null!=(n=v.dropzone)&&null!=(t=n.dropzoneUsers)&&null!=(r=t.edges)&&r.length)&&p.createElement(ql,{title:"No users",subtitle:""}),null==v||null==(l=v.dropzone)||null==(o=l.dropzoneUsers)||null==(i=o.edges)?void 0:i.map((function(e){var n,t,r,l,a,o;return p.createElement(p.Fragment,null,p.createElement(It.b.Item,{style:{width:"100%"},key:"user-"+(null==e||null==(n=e.node)?void 0:n.id),title:null==e||null==(t=e.node)?void 0:t.user.name,description:null==e||null==(r=e.node)||null==(l=r.role)?void 0:l.name,left:function(){var n,t,r;return null!=e&&null!=(n=e.node)&&null!=(t=n.user)&&t.image?p.createElement(It.a.Image,{source:{uri:null==e||null==(r=e.node)?void 0:r.user.image},style:{alignSelf:"center",marginHorizontal:12},size:32}):p.createElement(It.b.Icon,{icon:"account"})},right:function(){var n,t;return p.createElement(Gl.a,{status:null!=(n=s.manifest.selectedUsers)&&n.map((function(e){return e.id})).includes(null==e||null==(t=e.node)?void 0:t.id)?"checked":"unchecked"})},disabled:(null==e||null==(a=e.node)?void 0:a.user.id)===(null==b?void 0:b.id)&&y&&!h,onPress:function(){var n,t;u(Ze.screens.manifest.setSelected(null!=(n=s.manifest.selectedUsers)&&n.find((function(n){var t;return n.id===""+(null==e||null==(t=e.node)?void 0:t.id)}))?null==(t=s.manifest.selectedUsers)?void 0:t.filter((function(n){var t;return n.id!==""+(null==e||null==(t=e.node)?void 0:t.id)})):[].concat(Ft()(s.manifest.selectedUsers),[null==e?void 0:e.node])))}}),p.createElement(_t.a,{style:{width:"100%"},key:"divider-"+(null==e||null==(o=e.node)?void 0:o.id)}))})))),p.createElement(pr.a,{onPress:function(){u(Ze.forms.manifestGroup.setDropzoneUsers(s.manifest.selectedUsers)),e.onNext()},style:Xl.button,mode:"contained"},"Next"))}var Zl,Xl=O.a.create({button:{width:"100%",borderRadius:16,padding:5},scrollView:{height:100}}),Kl=Object(F.gql)(Zl||(Zl=Bn()(["\n  mutation CreateSlot(\n    $jumpTypeId: Int\n    $extraIds: [Int!]\n    $loadId: Int\n    $ticketTypeId: Int\n    $userGroup: [SlotUser!]!\n  ) {\n    createSlots(\n      input: {\n        attributes: {\n          jumpTypeId: $jumpTypeId\n          extraIds: $extraIds\n          loadId: $loadId\n          ticketTypeId: $ticketTypeId\n          userGroup: $userGroup\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n\n      load {\n        id\n        name\n        loadNumber\n        createdAt\n        dispatchAt\n        hasLanded\n        maxSlots\n        isFull\n        isOpen\n        plane {\n          id\n          name\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        loadMaster {\n          id\n          user {\n            id\n            name\n          }\n        }\n        slots {\n          id\n          createdAt\n          user {\n            id\n            name\n          }\n          passengerName\n          passengerExitWeight\n          ticketType {\n            id\n            name\n            isTandem\n            altitude\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function ea(e){var n,t,r,o,i,s,u,c,d=e.open,m=e.onClose,f=tn(),g=rn((function(e){return e.forms.manifestGroup})),v=Object(F.useMutation)(Kl),b=W()(v,2),h=b[0],y=b[1],E=p.useState(0),w=W()(E,2),x=w[0],k=w[1],C=p.useCallback((function(){var e,n,t=!1;return null!=(e=g.fields.jumpType.value)&&e.id||(t=!0,f(Ze.forms.manifestGroup.setFieldError(["jumpType","You must specify the type of jump"]))),null!=(n=g.fields.ticketType.value)&&n.id||(t=!0,f(Ze.forms.manifestGroup.setFieldError(["ticketType","You must select a ticket type to manifest"]))),!t}),[f,null==(n=g.fields.jumpType.value)?void 0:n.id,null==(t=g.fields.ticketType.value)?void 0:t.id]),z=p.useCallback((function(){var n,t,r,a,o,i,s,u,c,d,m,p,v,b,y,E,w;return l.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:if(C()){x.next=2;break}return x.abrupt("return");case 2:return x.prev=2,x.next=5,l.a.awrap(h({variables:{jumpTypeId:Number(null==(n=g.fields.jumpType.value)?void 0:n.id),ticketTypeId:Number(null==(t=g.fields.ticketType.value)?void 0:t.id),extraIds:null==(r=g.fields.extras)||null==(a=r.value)?void 0:a.map((function(e){var n=e.id;return Number(n)})),loadId:Number(null==(o=g.fields.load.value)?void 0:o.id),userGroup:g.fields.users.value}}));case 5:if(y=x.sent,null==(i=y.data)||null==(s=i.createSlots)||null==(u=s.fieldErrors)||u.map((function(e){var n=e.field,t=e.message;switch(n){case"jump_type":return f(Ze.forms.manifestGroup.setFieldError(["jumpType",t]));case"load":return f(Ze.forms.manifestGroup.setFieldError(["load",t]));case"credits":case"extras":case"extra_ids":return f(Ze.forms.manifestGroup.setFieldError(["extras",t]));case"ticket_type":return f(Ze.forms.manifestGroup.setFieldError(["ticketType",t]));default:return null}})),null==y||null==(c=y.data)||null==(d=c.createSlots)||null==(m=d.errors)||!m.length){x.next=10;break}return f(Ze.notifications.showSnackbar({message:null==y||null==(E=y.data)||null==(w=E.createSlots)?void 0:w.errors[0],variant:"error"})),x.abrupt("return");case 10:null!=(p=y.data)&&null!=(v=p.createSlots)&&null!=(b=v.fieldErrors)&&b.length||e.onClose(),x.next=16;break;case 13:x.prev=13,x.t0=x.catch(2),f(Ze.notifications.showSnackbar({message:x.t0.message,variant:"error"}));case 16:case"end":return x.stop()}}),null,null,[[2,13]],Promise)}),[f,h,e,null==(r=g.fields.extras)?void 0:r.value,null==(o=g.fields.jumpType.value)?void 0:o.id,null==(i=g.fields.load.value)?void 0:i.id,null==(s=g.fields.ticketType.value)?void 0:s.id,g.fields.users.value,C]);return p.createElement(Dt.a,null,p.createElement(pl.a,{visible:!!d,onDismiss:m},p.createElement(S.a,{style:{backgroundColor:"white"},testID:"manifest-group-sheet"},p.createElement(S.a,{pointerEvents:((null==(u=g.fields.users)||null==(c=u.value)?void 0:c.length)||0)>0?void 0:"none"},p.createElement(Nl.b,{defaultIndex:x,mode:"fixed",onChangeIndex:k},p.createElement(Nl.a,{label:"Create group"},p.createElement(S.a,null)),p.createElement(Nl.a,{label:"Configure jump"},p.createElement(S.a,null)))),0===x?p.createElement(S.a,{style:na.userListContainer},p.createElement(Jl,{onNext:function(){return k(1)}})):p.createElement(a.c,{contentContainerStyle:{paddingBottom:200,flexGrow:1}},p.createElement(Wl,null),p.createElement(S.a,{style:na.buttonContainer},p.createElement(pr.a,{onPress:z,loading:y.loading,mode:"contained",style:na.button},"Save"))))))}var na=O.a.create({button:{width:"100%",borderRadius:16,padding:5},buttonContainer:{paddingHorizontal:16,backgroundColor:"white"},contentContainer:{paddingHorizontal:16,paddingBottom:32},userListContainer:{height:"100%",backgroundColor:"white",width:"100%",padding:16},sheet:{elevation:3,backgroundColor:"white",flexGrow:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",paddingBottom:32},sheetHeader:{elevation:2,borderTopLeftRadius:15,borderTopRightRadius:15,height:30,shadowColor:"#000",shadowOffset:{width:0,height:-4},backgroundColor:"white",shadowOpacity:.22,shadowRadius:2.22}});function ta(e){var n=e.hasPlanes,t=e.hasTicketTypes,r=(e.isPublic,hn());return p.createElement(zt,{style:{width:"70%"}},p.createElement(Ct,{style:ra.title},"Set up dropzone"),p.createElement(zt,{style:ra.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),p.createElement(It.b.Item,{title:"Create dropzone",left:function(){return p.createElement(It.b.Icon,{color:r.success,icon:"check"})}}),p.createElement(It.b.Item,{title:"Add a plane",left:function(){return n?p.createElement(It.b.Icon,{color:r.success,icon:"check"}):p.createElement(It.b.Icon,{color:r.error,icon:"close"})}}),p.createElement(It.b.Item,{title:"Configure jump tickets",left:function(){return t?p.createElement(It.b.Icon,{color:r.success,icon:"check"}):p.createElement(It.b.Icon,{color:r.error,icon:"close"})}}))}var ra=O.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),la=t(678);function aa(){return p.createElement(Un.a,{containerStyle:{height:160,width:335,margin:16},isLoading:!0,layout:[{key:"header",width:"100%",height:"100%",borderRadius:8}]})}var oa={open:"#00C851",cancelled:"#ff4444",boarding_call:"#FF8800"};function ia(e){var n,t,r,a=e.load,o=e.onPress,i=tn(),s=nr({variables:{id:Number(a.id)},showSnackbarErrors:!0,pollInterval:3e4}),u=s.data,c=s.loading,d=s.refetch,m=At({onSuccess:function(){return i(Ze.notifications.showSnackbar({message:"Load #"+(null==u?void 0:u.loadNumber)+" updated",variant:"success"}))},onError:function(e){return i(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),f=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=u&&u.id){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l.a.awrap(m.mutate({id:Number(u.id),pilotId:Number(e.id)}));case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[m,null==u?void 0:u.id]),g=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=u&&u.id){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l.a.awrap(m.mutate({id:Number(u.id),planeId:Number(e.id)}));case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[null==u?void 0:u.id,m]);if(c)return p.createElement(aa,null);var v=(n={},P()(n,rt.Open,"Open"),P()(n,rt.BoardingCall,"On call"),P()(n,rt.Cancelled,"Cancelled"),P()(n,rt.InFlight,"In air"),P()(n,rt.Landed,"Landed"),n);return p.createElement(Nn.a,{testID:"load-card",style:{margin:16,borderRadius:8,opacity:["cancelled","landed"].includes((null==u?void 0:u.state)||"")?.5:1},elevation:3,onPress:o},p.createElement(Ot.a,{style:{backgroundColor:null!=u&&u.state?oa[u.state]:void 0,marginTop:-5,marginRight:-5}},null!=u&&u.state?v[null==u?void 0:u.state]:""),p.createElement(Nn.a.Title,{style:{justifyContent:"space-between"},title:"Load #"+(null==u?void 0:u.loadNumber),subtitle:null==u?void 0:u.name,right:function(){return null==u||!u.dispatchAt||Object(la.a)(new Date,null==u?void 0:u.dispatchAt)?null:p.createElement(zt,{style:{marginRight:16}},p.createElement(qt,{end:new Date(1e3*(null==u?void 0:u.dispatchAt))}))}}),p.createElement(Nn.a.Content,{style:sa.cardContent},p.createElement(zt,{style:{flexDirection:"row",flexWrap:"wrap"}},p.createElement(yt,{value:null==u?void 0:u.plane,small:!0,onSelect:function(e){var n,t,r;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(((null==u||null==(n=u.slots)?void 0:n.length)||0)>(e.maxSlots||0))){a.next=5;break}r=((null==u||null==(t=u.slots)?void 0:t.length)||0)-(e.maxSlots||0),i(Ze.notifications.showSnackbar({message:"You need to take "+r+" people off the load to fit on this plane",variant:"warning"})),a.next=8;break;case 5:return a.next=7,l.a.awrap(g(e));case 7:d();case 8:case"end":return a.stop()}}),null,null,null,Promise)}}),p.createElement(bt,{value:null==u?void 0:u.pilot,onSelect:f,small:!0}),p.createElement(ot.a,{mode:"outlined",icon:"parachute",style:sa.smallChip,textStyle:sa.smallChipText},null==u||null==(t=u.slots)?void 0:t.length," / ",null==u||null==(r=u.plane)?void 0:r.maxSlots))))}var sa=O.a.create({cardContent:{marginVertical:8,overflow:"hidden",flexDirection:"row"},smallChip:{height:25,margin:4,alignItems:"center"},smallChipText:{fontSize:12}}),ua=t(53),ca=t(428),da=t(481),ma=t(265);function fa(e){var n=e.children,t=e.rightAction,r=e.disabled,l=p.useRef();return p.createElement(ma.a,{ref:l,enabled:!r,renderRightActions:function(e,n){var r=n.interpolate({inputRange:[-100,0],outputRange:[1,0]}),o=n.interpolate({inputRange:[-150,0],outputRange:[0,10]});return p.createElement(a.f,{onPress:function(){var e;null==t||t.onPress(),null==l||null==(e=l.current)||e.close()}},p.createElement(Wt.a.View,{style:{flexGrow:1,backgroundColor:null==t?void 0:t.backgroundColor,justifyContent:"center",height:"100%",width:75,transform:[{translateX:o}]}},p.createElement(Wt.a.Text,{style:{color:"white",paddingHorizontal:10,fontWeight:"600",transform:[{scale:r}]}},null==t?void 0:t.label)))},useNativeAnimations:!0},n)}function pa(e){var n,t,r=e.load,a=e.onManifest,o=e.onManifestGroup,i=e.controlsVisible,s=e.onSlotGroupPress,u=e.onSlotPress,c=rn((function(e){return e.global})),d=tn(),m=p.useState(!1),f=W()(m,2),g=f[0],v=f[1],b=p.useState(!1),y=W()(b,2),E=y[0],w=y[1],x=nr({variables:{id:Number(r.id)},showSnackbarErrors:!0,pollInterval:3e4}),S=x.data,k=x.loading,C=x.refetch,z=tt().currentUser,I=At({onSuccess:function(){return d(Ze.notifications.showSnackbar({message:"Load #"+(null==S?void 0:S.loadNumber)+" updated",variant:"success"}))},onError:function(e){return d(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),O=tr({onSuccess:function(e){var n,t,r;return d(Ze.notifications.showSnackbar({message:((null==(n=e.slot)||null==(t=n.dropzoneUser)||null==(r=t.user)?void 0:r.name)||"User")+" has been taken off load #"+(null==S?void 0:S.loadNumber),variant:"success"}))},onError:function(e){return d(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),j=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,l.a.awrap(O.mutate({id:Number(e.id)}));case 2:case"end":return n.stop()}}),null,null,null,Promise)}),[O]),T=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=S&&S.id){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l.a.awrap(I.mutate({id:Number(S.id),pilotId:Number(e.id)}));case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[I,null==S?void 0:S.id]),P=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=S&&S.id){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l.a.awrap(I.mutate({id:Number(S.id),gcaId:Number(e.id)}));case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[I,null==S?void 0:S.id]),F=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=S&&S.id){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l.a.awrap(I.mutate({id:Number(S.id),planeId:Number(e.id)}));case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[null==S?void 0:S.id,I]),D=p.useCallback((function(e){return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(null!=S&&S.id){n.next=2;break}return n.abrupt("return");case 2:return n.next=4,l.a.awrap(I.mutate({id:Number(S.id),loadMasterId:Number(e.id)}));case 4:case"end":return n.stop()}}),null,null,null,Promise)}),[null==S?void 0:S.id,I]),$=p.useCallback((function(e){var n;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(null!=S&&S.id){t.next=2;break}return t.abrupt("return");case 2:return n=e?Object(Nt.a)(new Date,e).getTime()/1e3:null,t.next=5,l.a.awrap(I.mutate({id:Number(S.id),dispatchAt:n?Math.ceil(n):null}));case 5:case"end":return t.stop()}}),null,null,null,Promise)}),[null==S?void 0:S.id,I]),N=p.useCallback((function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!=S&&S.id){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,l.a.awrap(I.mutate({id:Number(S.id),hasLanded:!0}));case 4:case"end":return e.stop()}}),null,null,null,Promise)}),[null==S?void 0:S.id,I]),A=ct(lt.UpdateLoad),R=ct(lt.UpdateSlot),U=ct(lt.UpdateUserSlot),L=ct(lt.DeleteSlot),B=ct(lt.DeleteUserSlot),M=ct(lt.CreateSlot),V=ct(lt.CreateUserSlot),H=ct(lt.CreateUserSlotWithSelf),G=M&&(null==S?void 0:S.isOpen)&&!(null!=S&&S.isFull);p.useEffect((function(){null!=S&&S.maxSlots&&(null==S?void 0:S.maxSlots)<5&&v(!0)}),[null==S?void 0:S.maxSlots]);var q=i&&(V||H)&&!(null!=S&&S.hasLanded)&&(!(null!=S&&S.dispatchAt)||S.dispatchAt>(new Date).getTime()/1e3);return k?p.createElement(aa,null):p.createElement(Nn.a,{testID:"load-card",style:{margin:16,opacity:null!=S&&S.hasLanded?.5:1},elevation:3},p.createElement(Nn.a.Title,{style:{justifyContent:"space-between"},title:p.createElement(zt,{style:{width:"100%",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},p.createElement(ua.a,null,"Load "+((null==S?void 0:S.loadNumber)||0)),p.createElement(zt,{style:{flexGrow:1}}),q&&p.createElement(Ut.a,{icon:"account-group",testID:"manifest-group-button",onPress:function(){d(Ze.forms.manifestGroup.reset()),d(Ze.forms.manifestGroup.setField(["load",S])),H&&!V&&z&&(d(Ze.screens.manifest.setSelected([z])),d(Ze.forms.manifestGroup.setDropzoneUsers([z]))),o&&o()}})),subtitle:null==S?void 0:S.name}),p.createElement(h.a,{visible:k||I.loading||O.loading,color:c.theme.colors.accent}),p.createElement(Nn.a.Content,{style:{marginVertical:8,height:g||!i?void 0:300,overflow:"hidden"}},p.createElement(zt,{style:{flexDirection:"row"}},p.createElement(gr.a,{horizontal:!0,showsHorizontalScrollIndicator:!1},p.createElement(yt,{value:null==S?void 0:S.plane,onSelect:function(e){var n,t,r;return l.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(!(((null==S||null==(n=S.slots)?void 0:n.length)||0)>(e.maxSlots||0))){a.next=5;break}r=((null==S||null==(t=S.slots)?void 0:t.length)||0)-(e.maxSlots||0),d(Ze.notifications.showSnackbar({message:"You need to take "+r+" people off the load to fit on this plane",variant:"warning"})),a.next=8;break;case 5:return a.next=7,l.a.awrap(F(e));case 7:C();case 8:case"end":return a.stop()}}),null,null,null,Promise)}}),p.createElement(ft,{value:null==S?void 0:S.gca,onSelect:P}),p.createElement(bt,{value:null==S?void 0:S.pilot,onSelect:T}),p.createElement(pt,{value:null==S?void 0:S.loadMaster,slots:(null==S?void 0:S.slots)||[],onSelect:D}))),p.createElement(ca.a,null,p.createElement(ca.a.Header,{style:{width:"100%"}},p.createElement(ca.a.Title,null,"Name"),p.createElement(ca.a.Title,{numeric:!0},"Jump type"),p.createElement(ca.a.Title,{numeric:!0},"Altitude")),null==S||null==(n=S.slots)?void 0:n.map((function(e){var n,t,r,l,a,o,i=null==S||null==(n=S.slots)?void 0:n.filter((function(n){var t=n.groupNumber;return t&&t===e.groupNumber})),c=(null==e||null==(t=e.user)?void 0:t.id)===(null==z?void 0:z.id);return p.createElement(fa,{disabled:c&&!L||!c&&!B,key:"slot-"+e.id,rightAction:{label:"Delete",backgroundColor:"red",onPress:function(){return j(e)}}},p.createElement(ca.a.Row,{testID:"slot-row",disabled:!(null==S||!S.hasLanded),onPress:function(){var n;(null==(n=e.user)?void 0:n.id)===(null==z?void 0:z.id)?R&&(null!=i&&i.length?s(i):u(e)):U&&(null!=i&&i.length?s(i):u(e))},pointerEvents:"none"},p.createElement(ca.a.Cell,null,p.createElement(Bt.a,{style:ba.slotText},null==e||null==(r=e.dropzoneUser)||null==(l=r.user)?void 0:l.name)),p.createElement(ca.a.Cell,{numeric:!0},p.createElement(Bt.a,{style:ba.slotText},null==e||null==(a=e.jumpType)?void 0:a.name)),p.createElement(ca.a.Cell,{numeric:!0},p.createElement(Bt.a,{style:ba.slotText},((null==e||null==(o=e.ticketType)?void 0:o.altitude)||14e3)/1e3,"k"))))})),Array.from({length:((null==S?void 0:S.maxSlots)||0)-((null==S||null==(t=S.slots)?void 0:t.length)||0)},(function(e,n){return n})).map((function(e){return p.createElement(ca.a.Row,{key:(null==S?void 0:S.id)+"-empty-slot-"+e,testID:"slot-row"},p.createElement(ca.a.Cell,null,p.createElement(Bt.a,{style:ba.slotText},"- Available -")),p.createElement(ca.a.Cell,{numeric:!0},"-"),p.createElement(ca.a.Cell,{numeric:!0},"-"))})))),!(null==S||!S.dispatchAt)&&(null==S?void 0:S.dispatchAt)>(new Date).getTime()/1e3&&p.createElement(zt,{style:{flex:1,backgroundColor:"black",padding:8}},p.createElement(Bt.a,{style:{color:"#FFFFFF"}},"Take-off in "+Object(da.a)(new Date,1e3*(null==S?void 0:S.dispatchAt))+" min")),i?p.createElement(Nn.a.Actions,null,null!=S&&S.maxSlots&&(null==S?void 0:S.maxSlots)<5?null:p.createElement(pr.a,{onPress:function(){return v(!g)},testID:g?"show-less":"show-more"},g?"Show less":"Show more"),p.createElement(zt,{style:{flexGrow:1}}),!A||null!=S&&S.hasLanded?null:null!=S&&S.dispatchAt?p.createElement(pr.a,{mode:"outlined",onPress:function(){return $(null)},testID:"dispatch-cancel"},"Cancel"):p.createElement(it.a,{onDismiss:function(){return w(!1)},visible:E,anchor:p.createElement(pr.a,{mode:"outlined",onPress:function(){return w(!0)},testID:"dispatch-button"},"Dispatch")},p.createElement(it.a.Item,{testID:"dispatch-call",onPress:function(){w(!1),$(20)},title:"20 minute call"}),p.createElement(it.a.Item,{testID:"dispatch-call",onPress:function(){w(!1),$(15)},title:"15 minute call"}),p.createElement(it.a.Item,{testID:"dispatch-call",onPress:function(){w(!1),$(10)},title:"10 minute call"}),p.createElement(it.a.Item,{onPress:function(){w(!1),$(5)},title:"5 minute call"})),null!=S&&S.hasLanded?null:null!=S&&S.dispatchAt&&S.dispatchAt<(new Date).getTime()/1e3&&A?p.createElement(pr.a,{style:{marginLeft:8},mode:"contained",onPress:function(){var e,n;return null!=S&&null!=(e=S.loadMaster)&&e.id?null!=S&&null!=(n=S.pilot)&&n.id?N():d(Ze.notifications.showSnackbar({message:"You must select a pilot before this load can be finalized",variant:"warning"})):d(Ze.notifications.showSnackbar({message:"You must select a load master before this load can be finalized",variant:"warning"}))}},"Mark as landed"):p.createElement(pr.a,{style:{marginLeft:8},mode:"contained",testID:"manifest-button",onPress:function(){return a()},disabled:!G||Boolean((null==S?void 0:S.dispatchAt)&&S.dispatchAt<(new Date).getTime()/1e3)},"Manifest")):null)}var ga,va,ba=O.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",marginVertical:8},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},slotText:{fontSize:12},fab:{position:"absolute",margin:16,right:0,bottom:0}}),ha=He.actions,ya=Kt(Object(Wn.a)(ga||(ga=Bn()(["\n  query QueryDropzoneUsers($dropzoneId: Int!, $permissions: [Permission!]) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){var n;return null==e||null==(n=e.dropzone)?void 0:n.dropzoneUsers}});function Ea(e){var n,t=e.label,r=e.requiredPermissions,l=e.icon,a=e.value,o=e.onLoadingStateChanged,i=e.onSelect,s=rn((function(e){return e.global})).currentDropzoneId,u=tn(),c=ya({variables:{dropzoneId:Number(s),permissions:r},onError:function(e){return u(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),d=c.data,m=c.loading;return p.useEffect((function(){null==o||o(m)}),[m,o]),m?p.createElement(hl,null):p.createElement(p.Fragment,null,p.createElement(It.b.Subheader,null,t),p.createElement(bl,{autoSelectFirst:!0,icon:l||"account",items:(null==d||null==(n=d.edges)?void 0:n.map((function(e){return null==e?void 0:e.node})))||[],selected:[a].filter(Boolean),isSelected:function(e){return e.id===(null==a?void 0:a.id)},renderItemLabel:function(e){return null==e?void 0:e.user.name},isDisabled:function(){return!1},onChangeSelected:function(e){var n=W()(e,1)[0];return n?i(n):null}}))}var wa=Object(Wn.a)(va||(va=Bn()(["\n  query QuerySelectPlanes($dropzoneId: Int!) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n"])));function xa(e){var n=e.value,t=e.onSelect,r=e.onLoadingStateChanged,l=rn((function(e){return e.global})).currentDropzoneId,a=Object(F.useQuery)(wa,{variables:{dropzoneId:l}}),o=a.data,i=a.loading;return p.useEffect((function(){null==r||r(i)}),[i,r]),i?p.createElement(hl,null):p.createElement(p.Fragment,null,p.createElement(It.b.Subheader,null,"Aircraft"),p.createElement(bl,{autoSelectFirst:!0,items:Object(zr.uniqBy)(Ft()((null==o?void 0:o.planes)||[]),(function(e){return e.id}))||[],selected:[n].filter(Boolean),renderItemLabel:function(e){return(null==e?void 0:e.name)||""},isDisabled:function(e){return!1},onChangeSelected:function(e){var n=W()(e,1)[0];return n?t(n):null}}))}function Sa(){var e,n,t=rn((function(e){return e.forms.load})),r=tn();return p.createElement(p.Fragment,null,p.createElement(Ir.a,{style:Ca.field,mode:"outlined",label:"Name",error:!!t.fields.name.error,placeholder:"Optional",value:t.fields.name.value||"",onChangeText:function(e){return r(Ze.forms.load.setField(["name",e]))}}),p.createElement(gl.a,{type:t.fields.name.error?"error":"info"},t.fields.name.error||"e.g Starcrest load, Tandem load"),p.createElement(Ir.a,{style:Ca.field,mode:"outlined",label:"Slots",error:!!t.fields.maxSlots.error,value:null==(e=t.fields.maxSlots)||null==(n=e.value)?void 0:n.toString(),onChangeText:function(e){return r(Ze.forms.load.setField(["maxSlots",Number(e)]))}}),p.createElement(gl.a,{type:t.fields.maxSlots.error?"error":"info"},t.fields.maxSlots.error||""),p.createElement(S.a,{style:{width:"100%"}},p.createElement(xa,{value:t.fields.plane.value,onSelect:function(e){r(Ze.forms.load.setField(["plane",e])),r(Ze.forms.load.setField(["maxSlots",e.maxSlots]))}}),p.createElement(gl.a,{type:t.fields.plane.error?"error":"info"},t.fields.plane.error||""),p.createElement(Ea,{label:"GCA",onSelect:function(e){return r(Ze.forms.load.setField(["gca",e]))},value:t.fields.gca.value||null,requiredPermissions:["actAsGCA"]}),p.createElement(gl.a,{type:t.fields.gca.error?"error":"info"},t.fields.gca.error||""),p.createElement(Ea,{label:"Pilot",onSelect:function(e){return r(Ze.forms.load.setField(["pilot",e]))},value:t.fields.pilot.value||null,requiredPermissions:["actAsPilot"]}),p.createElement(gl.a,{type:t.fields.pilot.error?"error":"info"},t.fields.pilot.error||""),p.createElement(_t.a,{style:{marginVertical:8}}),p.createElement(Gl.a.Item,{label:"Allow public manifesting",status:t.fields.isOpen.value?"checked":"unchecked",onPress:function(){return r(Ze.forms.load.setField(["isOpen",!t.fields.isOpen.value]))}})))}var ka,Ca=O.a.create({fields:{flex:1,width:"100%"},field:{marginBottom:8,width:"100%"}});function za(e){var n=e.buttonLabel,t=e.buttonAction,r=e.title,l=e.loading,o=e.open,i=e.children,s=rn((function(e){return e.global}));return p.createElement(Dt.a,null,p.createElement(pl.a,{visible:!!o,dismissable:!1,style:{maxWidth:500,alignSelf:"center"}},p.createElement(h.a,{indeterminate:!0,visible:l,color:s.theme.colors.accent}),p.createElement(pl.a.Title,null,r),p.createElement(pl.a.Content,{pointerEvents:"box-none"},p.createElement(pl.a.ScrollArea,null,p.createElement(a.c,null,i))),p.createElement(pl.a.Actions,{style:{justifyContent:"flex-end"}},p.createElement(pr.a,{onPress:function(){e.onClose()}},"Cancel"),p.createElement(pr.a,{onPress:t},n))))}var Ia=Object(F.gql)(ka||(ka=Bn()(["\n  mutation CreateLoad(\n    $name: String\n    $pilotId: Int\n    $gcaId: Int\n    $maxSlots: Int!\n    $planeId: Int\n    $isOpen: Boolean\n  ) {\n    createLoad(\n      input: {\n        attributes: {\n          name: $name\n          pilotId: $pilotId\n          gcaId: $gcaId\n          maxSlots: $maxSlots\n          planeId: $planeId\n          isOpen: $isOpen\n        }\n      }\n    ) {\n      load {\n        id\n        name\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        maxSlots\n        isOpen\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n"])));function Oa(e){var n=e.open,t=e.onClose,r=e.onSuccess,a=rn((function(e){return e.forms.load})),o=rn((function(e){return e.global})).currentDropzoneId,i=tn(),s=Object(F.useMutation)(Ia),u=W()(s,2),c=u[0],d=u[1],m=p.useCallback((function(){var e=!1;return(a.fields.maxSlots.value||0)<1&&(e=!0,i(Ze.forms.load.setFieldError(["maxSlots","Please specify amount of allowed jumpers"]))),a.fields.plane.value||(e=!0,i(Ze.forms.load.setFieldError(["plane","What plane is flying this load?"]))),a.fields.gca.value||(e=!0,i(Ze.forms.load.setFieldError(["gca","You must have a GCA for this load"]))),!e}),[i,a.fields.gca.value,a.fields.maxSlots.value,a.fields.plane.value]),f=p.useCallback((function(){var e,n,t,s,u,d,f,p,g,v,b,h,y,E,w,x,S,k,C,z,I,O,j,T,P;return l.a.async((function(F){for(;;)switch(F.prev=F.next){case 0:if(e=a.fields,n=e.name,t=e.gca,s=e.plane,u=e.maxSlots,d=e.pilot,f=e.isOpen,!m()){F.next=15;break}return F.prev=2,F.next=5,l.a.awrap(c({variables:{dropzoneId:o,name:n.value,maxSlots:u.value,planeId:null!=(p=s.value)&&p.id?Number(null==(g=s.value)?void 0:g.id):null,pilotId:null!=(v=d.value)&&v.id?Number(null==(b=d.value)?void 0:b.id):null,gcaId:null!=(h=t.value)&&h.id?Number(null==(y=t.value)?void 0:y.id):null,isOpen:!!f.value}}));case 5:if(O=F.sent,null==(E=O.data)||null==(w=E.createLoad)||null==(x=w.fieldErrors)||x.map((function(e){var n=e.field,t=e.message;switch(n){case"name":return i(Ze.forms.load.setFieldError(["name",t]));case"maxSlots":return i(Ze.forms.load.setFieldError(["maxSlots",t]));case"plane":return i(Ze.forms.load.setFieldError(["plane",t]));case"gca":return i(Ze.forms.load.setFieldError(["gca",t]));case"is_open":return i(Ze.forms.load.setFieldError(["isOpen",t]));case"pilot":return i(Ze.forms.load.setFieldError(["pilot",t]));default:return null}})),null==O||null==(S=O.data)||null==(k=S.createLoad)||null==(C=k.errors)||!C.length){F.next=9;break}return F.abrupt("return",i(ha.showSnackbar({message:O.data.createLoad.errors[0],variant:"error"})));case 9:null!=(z=O.data)&&null!=(I=z.createLoad)&&I.load&&(P=O.data.createLoad.load,i(ha.showSnackbar({message:"Load "+P.name+" created",variant:"success"})),null!=(j=O.data)&&null!=(T=j.createLoad)&&T.fieldErrors||(r(O.data.createLoad.load),i(Ze.forms.load.reset()),requestAnimationFrame((function(){return i(Ze.forms.load.setOpen(!1))})))),F.next=15;break;case 12:F.prev=12,F.t0=F.catch(2),i(ha.showSnackbar({message:F.t0.message,variant:"error"}));case 15:return F.abrupt("return",null);case 16:case"end":return F.stop()}}),null,null,[[2,12]],Promise)}),[o,i,c,r,a.fields,m]);return p.createElement(za,{open:n,onClose:t,buttonAction:f,buttonLabel:"Create",snapPoints:["30%",650],loading:d.loading,title:"New Load"},p.createElement(Sa,null))}var ja=t(679),Ta=t(278),Pa=t(174),Fa=t(482),Da=t.n(Fa);function $a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Na(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?$a(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):$a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Aa=Fn.a.get("window").width;function Ra(e){var n=e.lat,t=e.lng,r=p.useState({x:0,y:0,height:0,width:0}),l=W()(r,2),a=l[0],o=l[1],i=1*a.width,s=a.height/2,u=a.width/2,c=e.jumpRun,d=p.useState({x:0,y:0,height:0,width:0,originX:0,originY:0}),m=W()(d,2),f=m[0],g=m[1],v=p.useRef(new Wt.a.Value(0)),b=p.useRef(new Wt.a.Value(0)),h=p.useRef(Wt.a.loop(Wt.a.timing(b.current,{duration:3e3,toValue:-400,useNativeDriver:!0}),{resetBeforeIteration:!0})),y=p.useCallback((function(e){var n=e.nativeEvent.layout;g(Na(Na({},n),{},{originX:n.x+a.width/2,originY:n.y+a.height/2}))}),[a.height,a.width]);p.useEffect((function(){h.current.start()}),[]),p.useEffect((function(){h.current.stop(),h.current.reset(),h.current.start()}),[c]);var E=Wr({x:f.originX,y:f.originY,degrees:c,offsetX:0,offsetY:0,radius:i/2});return p.createElement(S.a,{onLayout:function(e){var n=e.nativeEvent;return o(n.layout)},style:{width:"100%",height:"100%"}},p.createElement(S.a,{style:{width:i,height:i,borderRadius:i/2,overflow:"hidden",position:"absolute",top:0,left:0}},p.createElement(Yr,{coords:n&&t?{lat:n,lng:t}:void 0,center:n&&t?{lat:n,lng:t}:void 0,height:i,width:i,position:{x:0,y:0},interactive:!1})),p.createElement(Wt.a.View,{onLayout:y,style:[Ua.iconContainer,{width:i,height:i,position:"absolute",top:0,left:0,transform:[{rotate:c+"deg"}]}]},p.createElement(Wt.a.View,{style:{height:i-6,width:1,backgroundColor:"#FF1414",opacity:v.current.interpolate({inputRange:[0,1],outputRange:[.6,1]}),transform:[{scaleX:v.current.interpolate({inputRange:[0,1],outputRange:[3,1]})}]}})),null!=a&&a.width?p.createElement(Wt.a.View,{style:[{position:"absolute",width:20,height:20,top:E.y,left:E.x,opacity:b.current.interpolate({inputRange:[-i,-i/2,i],outputRange:[0,1,0]}),transform:[{rotate:c+"deg"},{translateY:b.current}]}]},p.createElement(Pn.a,{name:"airplane",size:20,color:"#ffffff"})):null,p.createElement(Wt.a.Text,{style:[Ua.degreeLabel,{opacity:v.current,top:s,left:u}]},Math.round(c)))}var Ua=O.a.create({container:{paddingHorizontal:0,alignItems:"center",paddingLeft:0,paddingRight:0},degreeLabel:{width:200,height:120,textAlign:"center",textShadowColor:"rgba(15, 15, 15, 0.5)",textShadowRadius:10,textShadowOffset:{width:2,height:2},fontSize:100,color:"white",position:"absolute"},content:{width:"100%",flexDirection:"column"},iconContainer:{borderWidth:2,borderRadius:Aa/2,borderStyle:"solid",borderColor:"white",alignSelf:"center",alignItems:"center",justifyContent:"center"}});function La(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ba(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?La(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):La(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ma(){var e,n,t,r,l,a,o=tt(),i=o.dropzone,s=o.loading,u=o.called,c=tn(),d=Object(or.useNavigation)(),m=null==i?void 0:i.currentConditions,f=null!=i&&null!=(e=i.currentConditions)&&e.createdAt?new Date(1e3*(null==i||null==(n=i.currentConditions)?void 0:n.createdAt)):new Date,g=(null==i||null==(t=i.currentConditions)?void 0:t.jumpRun)||0,v=(null==i||null==(r=i.currentConditions)?void 0:r.temperature)||0,b=ct(lt.UpdateWeatherConditions),h=(null==m?void 0:m.id)&&(null==m||null==(l=m.winds)?void 0:l.length)&&(null==m?void 0:m.jumpRun);return s||!u?p.createElement(Un.a,{containerStyle:Wa.card,isLoading:!0,layout:[{key:"root",height:200,width:"100%"}]}):p.createElement(Nn.a,{style:Wa.card,elevation:3,onPress:function(){b&&null!=i&&i.currentConditions&&(c(Ze.forms.weather.setOpen(null==i?void 0:i.currentConditions)),d.navigate("WindScreen"))}},p.createElement(Ta.a,{source:Da.a,style:Ba({},O.a.absoluteFillObject),resizeMode:"cover"},p.createElement(Nn.a.Content,{style:{alignItems:"center",justifyContent:"center",flexGrow:1}},h?p.createElement(p.Fragment,null,p.createElement(S.a,{style:Wa.top},p.createElement(S.a,{style:Wa.cell},p.createElement(ja.a,{name:"calendar",color:"#ffffff",size:20,style:{marginRight:8}}),p.createElement(kn.a,{style:Wa.date},Object(Pa.a)(f,"LLL do, yy"))),p.createElement(S.a,{style:[Wa.cell,{justifyContent:"flex-end",alignSelf:"flex-end"}]},p.createElement(ja.a,{name:"thermometer",color:"#ffffff",size:20,style:{marginRight:8}}),p.createElement(kn.a,{style:Wa.temperature},v||"?"),p.createElement(Pn.a,{name:"temperature-celsius",color:"#ffffff",size:20}))),p.createElement(S.a,{style:Wa.bottom},p.createElement(S.a,{style:Wa.windboard},p.createElement(S.a,{style:Wa.row},p.createElement(S.a,{style:Wa.cell},p.createElement(kn.a,{style:Wa.header},"Altitude")),p.createElement(S.a,{style:Wa.cell},p.createElement(kn.a,{style:Wa.header},"Wind")),p.createElement(S.a,{style:Wa.cell},p.createElement(kn.a,{style:Wa.header},"Direction"))),Object(zr.orderBy)((null==i||null==(a=i.currentConditions)?void 0:a.winds)||[],(function(e){return Number(e.altitude)}),"desc").map((function(e){var n=e.speed,t=e.direction,r=e.altitude;return p.createElement(p.Fragment,{key:"wind-at-"+r},p.createElement(_t.a,{style:{width:"100%",backgroundColor:"white"}}),p.createElement(S.a,{style:Wa.row},p.createElement(S.a,{style:Wa.cell},p.createElement(kn.a,{style:Wa.value},r)),p.createElement(S.a,{style:Wa.cell},p.createElement(kn.a,{style:Wa.value},n)),p.createElement(S.a,{style:[Wa.cell,{justifyContent:"center"}]},p.createElement(kn.a,{style:Wa.value},t),p.createElement(ja.a,{name:"long-arrow-down",size:14,style:t&&/\d+/.test(t)&&Number(t)<361?{transform:[{rotate:t+"deg"}],marginLeft:4}:{marginLeft:4}}))))}))),p.createElement(S.a,{style:Wa.jumpRun,pointerEvents:"box-none"},p.createElement(kn.a,{style:[Wa.header,{textAlign:"center"}]},"Jump run ",g,"\xb0"),p.createElement(Cn.a,{style:{width:"100%",height:"100%"},disabled:!b,onPress:function(){null!=i&&i.currentConditions&&b&&(c(Ze.forms.weather.setOpen(i.currentConditions)),d.navigate("JumpRunScreen"))}},p.createElement(Ra,{jumpRun:g,lat:null==i?void 0:i.lat,lng:null==i?void 0:i.lng}))))):p.createElement(S.a,{style:Wa.noData},p.createElement(kn.a,{style:Wa.noDataLabel},"No weather data")))))}var Wa=O.a.create({card:{flexGrow:1,borderRadius:10,marginBottom:30,marginHorizontal:16,height:200,overflow:"hidden"},date:{flex:1,fontSize:20,color:"white",textShadowOffset:{width:1,height:1},textShadowRadius:5,textShadowColor:"rgba(15, 15, 15, 0.5)"},temperature:{fontSize:24,lineHeight:24,color:"white",justifyContent:"flex-end",textShadowOffset:{width:1,height:1},textShadowRadius:5,textShadowColor:"rgba(15, 15, 15, 0.5)"},label:{color:"white",fontWeight:"bold"},value:{color:"#ffffff",textShadowOffset:{width:2,height:2},textShadowRadius:10,textShadowColor:"rgba(0, 0, 0, 0.75)"},row:{alignItems:"center",justifyContent:"space-evenly",height:20,width:"100%",flexDirection:"row"},cell:{flex:1,color:"white",flexDirection:"row"},header:{fontWeight:"bold",color:"#ffffff",textShadowOffset:{width:1,height:1},textShadowRadius:10,textShadowColor:"rgba(0, 0, 0, 0.5)"},noData:{alignItems:"center",justifyContent:"center",flexGrow:1,textAlign:"center",alignSelf:"center",height:"100%"},noDataLabel:{color:"#ffffff",textShadowOffset:{width:2,height:2},textShadowRadius:10,textShadowColor:"rgba(0, 0, 0, 0.75)",fontSize:22},top:{marginTop:16,justifyContent:"space-between",alignItems:"center",flexDirection:"row",width:"100%"},bottom:{flexDirection:"row",width:"100%",justifyContent:"space-between",alignItems:"flex-end",flexGrow:1,height:105,marginTop:32,paddingBottom:20},windboard:{width:200,height:105,flexDirection:"column"},jumpRun:{width:105,height:105,flexDirection:"column",alignItems:"flex-end"}});function Va(){return p.createElement(Un.a,{containerStyle:{height:300,maxWidth:535,paddingHorizontal:16},isLoading:!0,layout:[{key:"header",width:"100%",height:"100%",borderRadius:8}]})}function Ha(){var e,n,t,r,l,o,i,s=rn((function(e){return e.global})),u=rn((function(e){return e.forms})),c=rn((function(e){return e.screens.manifest})),d=tn(),m=p.useState(!1),f=W()(m,2),g=f[0],v=f[1],b=tt(),y=b.dropzone,E=b.currentUser,w=b.loading,x=b.refetch,S=b.fetchMore,k=Object(An.useNavigation)(),C=Object(An.useIsFocused)();p.useEffect((function(){C&&x()}),[C,x]);var z=!(null==y||null==(e=y.planes)||!e.length),I=!(null==y||null==(n=y.ticketTypes)||!n.length),O=!(null==y||!y.isPublic),j=z&&I;p.useEffect((function(){var e,n,t,r;null!=y&&y.primaryColor&&(null==y?void 0:y.primaryColor)!==(null==(e=s.theme)||null==(n=e.colors)?void 0:n.primary)&&d(Ze.global.setPrimaryColor(y.primaryColor)),null!=y&&y.secondaryColor&&(null==y?void 0:y.secondaryColor)!==(null==(t=s.theme)||null==(r=t.colors)?void 0:r.accent)&&d(Ze.global.setPrimaryColor(y.secondaryColor))}),[d,null==y?void 0:y.primaryColor,null==y?void 0:y.secondaryColor,null==(t=s.theme)||null==(r=t.colors)?void 0:r.accent,null==(l=s.theme)||null==(o=l.colors)?void 0:o.primary]);var T=ct(lt.CreateLoad),P=p.useCallback((function(e){return null!=E&&E.hasLicense?null!=E&&E.hasMembership?null!=E&&E.hasRigInspection?null!=E&&E.hasReserveInDate?null!=E&&E.hasExitWeight?null!=E&&E.hasCredits?(d(Ze.forms.manifest.setOpen(!0)),d(Ze.forms.manifest.setField(["dropzoneUser",E])),d(Ze.forms.manifest.setField(["load",e])),null):d(Ze.notifications.showSnackbar({message:"You have no credits on your account",variant:"warning"})):d(Ze.notifications.showSnackbar({message:"Update your exit weight on your profile before manifesting",variant:"warning"})):d(Ze.notifications.showSnackbar({message:"Your rig needs a reserve repack",variant:"warning"})):d(Ze.notifications.showSnackbar({message:"Your rig needs to be inspected before manifesting",variant:"warning"})):d(Ze.notifications.showSnackbar({message:"Your membership is out of date",variant:"warning"})):d(Ze.notifications.showSnackbar({message:"You need to select a license on your user profile",variant:"warning"}))}),[E,d]),F=Object($n.a)().width,D=32+("cards"===c.display?335:550),$=Math.floor(F/D)||1,N=D*$,A=(null==y||null==(i=y.loads)?void 0:i.edges)||[],R=!(null!=A&&A.length)&&w;return p.createElement(p.Fragment,null,p.createElement(h.a,{visible:w,indeterminate:!0,color:s.theme.colors.accent}),p.createElement(zt,{style:Qa.container},R||j?p.createElement(zt,{style:{width:"100%",flex:1,height:Fn.a.get("window").height}},p.createElement(a.a,{ListHeaderComponent:function(){return p.createElement(Ma,null)},ListEmptyComponent:function(){return p.createElement(ql,{title:"No loads so far today",subtitle:"How's the weather?"})},style:{flex:1,paddingTop:35,height:Fn.a.get("window").height},testID:"loads",keyExtractor:function(e,n){var t,r=e.item;return"load-small-"+((null==r||null==(t=r.node)?void 0:t.id)||n)},key:"loads-columns-"+$,contentContainerStyle:{width:N,alignSelf:"center",paddingBottom:100},numColumns:$,data:R?[1,1,1,1,1]:A,refreshControl:p.createElement(Dn.a,{refreshing:w,onRefresh:function(){return S({})}}),renderItem:function(e){var n=e.item,t=e.index;return 1===n?"list"===c.display?p.createElement(Va,{key:"loading-card-"+t}):p.createElement(aa,{key:"loading-card-"+t}):"list"===c.display?p.createElement(pa,{controlsVisible:!1,key:"load-"+n.node.id,load:n.node,onSlotPress:function(e){null!=n&&n.node&&(d(Ze.forms.manifest.setOpen(e)),d(Ze.forms.manifest.setField(["load",n.node])))},onSlotGroupPress:function(e){d(Ze.forms.manifestGroup.reset()),d(Ze.forms.manifestGroup.setFromSlots(e)),d(Ze.forms.manifestGroup.setField(["load",n.node])),k.navigate("ManifestGroupScreen")},onManifest:function(){P(n.node)},onManifestGroup:function(){d(Ze.forms.manifestGroup.reset()),d(Ze.forms.manifestGroup.setOpen(!0)),d(Ze.forms.manifestGroup.setField(["load",n.node]))}}):p.createElement(ia,{key:"load-"+n.node.id,load:n.node,onPress:function(){return k.navigate("LoadScreen",{load:n.node})}})}})):p.createElement(ta,{hasPlanes:z,hasTicketTypes:I,isPublic:O}),T&&j&&p.createElement($t.a,{style:Qa.fab,small:!0,icon:"plus",onPress:function(){return d(Ze.forms.load.setOpen(!0))},label:"New load"})),p.createElement(zt,{style:Qa.header},p.createElement(it.a,{anchor:p.createElement(Ut.a,{icon:"cog-outline",onPress:function(){return v(!0)}}),visible:g,onDismiss:function(){return v(!1)}},p.createElement(it.a.Item,{title:"Show expanded cards",titleStyle:{fontWeight:"cards"===c.display?"normal":"bold"},onPress:function(){d(Ze.screens.manifest.setDisplayStyle("list")),v(!1)}}),p.createElement(it.a.Item,{title:"Show compact cards",titleStyle:{fontWeight:"list"===c.display?"normal":"bold"},onPress:function(){d(Ze.screens.manifest.setDisplayStyle("cards")),v(!1)}}))),p.createElement(Dl,{open:u.manifest.open,onClose:function(){return d(Ze.forms.manifest.setOpen(!1))},onSuccess:function(){return d(Ze.forms.manifest.setOpen(!1))}}),p.createElement(ea,{open:u.manifestGroup.open,onClose:function(){return d(Ze.forms.manifestGroup.setOpen(!1))},onSuccess:function(){return d(Ze.forms.manifestGroup.setOpen(!1))}}),p.createElement(Oa,{onSuccess:function(){d(Ze.forms.load.setOpen(!1)),x()},open:u.load.open,onClose:function(){return d(Ze.forms.load.setOpen(!1))}}))}var Ga,qa,Qa=O.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fab:{position:"absolute",margin:16,right:0,bottom:0},header:{alignItems:"flex-start",justifyContent:"flex-end",flexDirection:"row",padding:0,width:"100%",position:"absolute",top:0,backgroundColor:"transparent"}}),Ya=Object(F.gql)(Ga||(Ga=Bn()(["\n  mutation CreateMultipleSlot(\n    $jumpTypeId: Int\n    $extraIds: [Int!]\n    $loadId: Int\n    $ticketTypeId: Int\n    $userGroup: [SlotUser!]!\n  ) {\n    createSlots(\n      input: {\n        attributes: {\n          jumpTypeId: $jumpTypeId\n          extraIds: $extraIds\n          loadId: $loadId\n          ticketTypeId: $ticketTypeId\n          userGroup: $userGroup\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n\n      load {\n        id\n        name\n        loadNumber\n        createdAt\n        dispatchAt\n        hasLanded\n        maxSlots\n        isFull\n        isOpen\n        plane {\n          id\n          name\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        loadMaster {\n          id\n          user {\n            id\n            name\n          }\n        }\n        slots {\n          id\n          createdAt\n          user {\n            id\n            name\n          }\n          passengerName\n          passengerExitWeight\n          ticketType {\n            id\n            name\n            isTandem\n            altitude\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function _a(e){var n,t,r,a,o,i,s,u,c,d,m,f=e.onSuccess,g=tn(),v=rn((function(e){return e.forms.manifestGroup})),b=rn((function(e){return e.global})),y=Object(F.useMutation)(Ya),E=W()(y,2),w=E[0],x=E[1],S=Object(An.useNavigation)(),k=p.useCallback((function(){var e,n,t=!1;return null!=(e=v.fields.jumpType.value)&&e.id||(t=!0,g(Ze.forms.manifestGroup.setFieldError(["jumpType","You must specify the type of jump"]))),null!=(n=v.fields.ticketType.value)&&n.id||(t=!0,g(Ze.forms.manifestGroup.setFieldError(["ticketType","You must select a ticket type to manifest"]))),!t}),[g,null==(n=v.fields.jumpType.value)?void 0:n.id,null==(t=v.fields.ticketType.value)?void 0:t.id]),C=p.useCallback((function(){var e,n,t,r,a,o,i,s,u,c,d,m,p,b,h,y,E;return l.a.async((function(x){for(;;)switch(x.prev=x.next){case 0:if(k()){x.next=2;break}return x.abrupt("return");case 2:return x.prev=2,x.next=5,l.a.awrap(w({variables:{jumpTypeId:Number(null==(e=v.fields.jumpType.value)?void 0:e.id),ticketTypeId:Number(null==(n=v.fields.ticketType.value)?void 0:n.id),extraIds:null==(t=v.fields.extras)||null==(r=t.value)?void 0:r.map((function(e){var n=e.id;return Number(n)})),loadId:Number(null==(a=v.fields.load.value)?void 0:a.id),userGroup:v.fields.users.value}}));case 5:if(h=x.sent,null==(o=h.data)||null==(i=o.createSlot)||null==(s=i.fieldErrors)||s.map((function(e){var n=e.field,t=e.message;switch(n){case"jump_type":return g(Ze.forms.manifestGroup.setFieldError(["jumpType",t]));case"load":return g(Ze.forms.manifestGroup.setFieldError(["load",t]));case"credits":case"extras":case"extra_ids":return g(Ze.forms.manifestGroup.setFieldError(["extras",t]));case"ticket_type":return g(Ze.forms.manifestGroup.setFieldError(["ticketType",t]));default:return null}})),null==h||null==(u=h.data)||null==(c=u.createSlots)||null==(d=c.errors)||!d.length){x.next=10;break}return g(Ze.notifications.showSnackbar({message:null==h||null==(y=h.data)||null==(E=y.createSlots)?void 0:E.errors[0],variant:"error"})),x.abrupt("return");case 10:null!=(m=h.data)&&null!=(p=m.createSlots)&&null!=(b=p.fieldErrors)&&b.length||(null==f||f(),S.navigate("Manifest",{screen:"DropzoneScreen"})),x.next=16;break;case 13:x.prev=13,x.t0=x.catch(2),g(Ze.notifications.showSnackbar({message:x.t0.message,variant:"error"}));case 16:case"end":return x.stop()}}),null,null,[[2,13]],Promise)}),[g,w,S,f,null==(r=v.fields.extras)?void 0:r.value,null==(a=v.fields.jumpType.value)?void 0:a.id,null==(o=v.fields.load.value)?void 0:o.id,null==(i=v.fields.ticketType.value)?void 0:i.id,v.fields.users.value,k]);return p.createElement(vr,null,p.createElement(h.a,{indeterminate:!0,visible:x.loading,color:b.theme.colors.accent}),p.createElement(Nn.a.Title,{title:"Manifest "+(null==v||null==(s=v.fields)||null==(u=s.users)||null==(c=u.value)?void 0:c.length)+" jumpers on Load #"+(null==(d=v.fields.load)||null==(m=d.value)?void 0:m.loadNumber)}),p.createElement(Wl,null),p.createElement(pr.a,{mode:"contained",style:{width:"100%",marginVertical:16},onPress:function(){return C()},loading:x.loading},"Save"))}var Ja=Object(Wn.a)(qa||(qa=Bn()(["\n  query QueryDropzoneUsersSearch($dropzoneId: Int!, $search: String) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(search: $search, licensed: true) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              image\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Za(){var e,n,t,r,l,a,o=rn((function(e){return e.global})),i=rn((function(e){return e.screens.manifest})),s=tn(),u=Object(F.useQuery)(Ja,{variables:{dropzoneId:Number(o.currentDropzoneId),search:i.searchText}}),c=u.data,d=u.loading,m=Object(An.useNavigation)(),f=Object(An.useIsFocused)();return p.useEffect((function(){i.isSearchVisible&&s(Ze.screens.manifest.setSearchVisible(!1))}),[s,f,i.isSearchVisible]),p.createElement(p.Fragment,null,p.createElement(h.a,{indeterminate:!0,color:o.theme.colors.accent,visible:d}),p.createElement(vr,{contentContainerStyle:{paddingHorizontal:0}},!(null!=c&&null!=(e=c.dropzone)&&null!=(n=e.dropzoneUsers)&&null!=(t=n.edges)&&t.length)&&p.createElement(ql,{title:"No users",subtitle:""}),null==c||null==(r=c.dropzone)||null==(l=r.dropzoneUsers)||null==(a=l.edges)?void 0:a.map((function(e){var n,t,r,l,a;return p.createElement(p.Fragment,null,p.createElement(It.b.Item,{style:{width:"100%"},key:"user-"+(null==e||null==(n=e.node)?void 0:n.id),title:null==e||null==(t=e.node)?void 0:t.user.name,description:null==e||null==(r=e.node)||null==(l=r.role)?void 0:l.name,left:function(){var n,t,r;return null!=e&&null!=(n=e.node)&&null!=(t=n.user)&&t.image?p.createElement(It.a.Image,{source:{uri:null==e||null==(r=e.node)?void 0:r.user.image},style:{alignSelf:"center",marginHorizontal:12},size:32}):p.createElement(It.b.Icon,{icon:"account"})},right:function(){var n,t;return p.createElement(Gl.a.Android,{status:null!=(n=i.selectedUsers)&&n.map((function(e){return e.id})).includes((null==e||null==(t=e.node)?void 0:t.id)||"")?"checked":"unchecked"})},onPress:function(){var n,t;return s(Ze.screens.manifest.setSelected(null!=(n=i.selectedUsers)&&n.find((function(n){var t;return n.id===""+(null==e||null==(t=e.node)?void 0:t.id)}))?null==(t=i.selectedUsers)?void 0:t.filter((function(n){var t;return n.id!==""+(null==e||null==(t=e.node)?void 0:t.id)})):[].concat(Ft()(i.selectedUsers),[null==e?void 0:e.node])))}}),p.createElement(_t.a,{style:{width:"100%"},key:"divider-"+(null==e||null==(a=e.node)?void 0:a.id)}))}))),p.createElement($t.a,{style:Ka.fab,small:!0,visible:i.selectedUsers.length>0,icon:"check",onPress:function(){s(Ze.forms.manifestGroup.setDropzoneUsers(i.selectedUsers)),m.setParams({select:!1}),s(Ze.screens.manifest.setSearchVisible(!1)),s(Ze.screens.manifest.setSelected([])),m.navigate("ManifestGroupScreen")},label:"Next"}))}var Xa,Ka=O.a.create({container:{flex:1},fab:{position:"absolute",margin:16,right:0,bottom:0},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),eo=Object(xn.a)();function no(){var e=rn((function(e){return e.global}));return p.createElement(eo.Navigator,{screenOptions:{headerShown:!(!e.credentials||!e.currentDropzone),header:function(e){return p.createElement(fl,e)},cardStyle:{flex:1}}},p.createElement(eo.Screen,{name:"DropzoneScreen",component:Ha,options:{title:"Manifest"}}),p.createElement(eo.Screen,{name:"WeatherConditionsScreen",component:tl,options:{headerShown:!1}}),p.createElement(eo.Screen,{name:"WindScreen",component:al,options:{title:"Winds Aloft"}}),p.createElement(eo.Screen,{name:"JumpRunScreen",component:rl,options:{title:"Jump Run"}}),p.createElement(eo.Screen,{name:"LoadScreen",component:ar,options:{title:"Load"}}),p.createElement(eo.Screen,{name:"ManifestGroupScreen",component:_a,options:{title:"Manifest group"}}),p.createElement(eo.Screen,{name:"ManifestGroupUserSelectScreen",component:Za,options:{title:"Select users"}}))}function to(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ro(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?to(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):to(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var lo=Object(Wn.a)(Xa||(Xa=Bn()(["\n  query QueryNotifications($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n\n      currentUser {\n        id\n\n        notifications {\n          edges {\n            node {\n              id\n              message\n              notificationType\n              createdAt\n\n              resource {\n                ... on Load {\n                  id\n                  loadNumber\n                  dispatchAt\n                }\n                ... on Transaction {\n                  id\n                  amount\n                  message\n                  status\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var ao=t(281),oo=t(689);function io(e){var n=e.notification;return p.createElement(Nn.a,{style:{margin:8,borderRadius:2,width:370}},p.createElement(It.b.Item,{title:"Manifest",description:n.message,style:{width:"100%"},left:function(e){return p.createElement(It.b.Icon,wt()({},e,{icon:"airplane"}))},right:function(){return p.createElement(ao.a,null,Object(oo.a)(1e3*n.createdAt))}}))}function so(e){var n=e.notification;return p.createElement(Nn.a,{elevation:2,style:{borderRadius:8,margin:2,width:370}},p.createElement(It.b.Item,{title:"Load #"+n.resource.loadNumber+" boarding call",description:n.message,style:{width:"100%"},left:function(e){return p.createElement(It.b.Icon,wt()({},e,{icon:"airplane-takeoff"}))},right:function(){return p.createElement(ao.a,null,Object(oo.a)(1e3*n.createdAt))}}))}function uo(){var e,n,t=rn((function(e){return e.global})),r=function(){var e,n,t=rn((function(e){return e.global.currentDropzoneId})),r=Object(F.useQuery)(lo,{variables:{dropzoneId:t},pollInterval:3e4});return ro(ro({},r),{},{notifications:null==r||null==(e=r.data)||null==(n=e.dropzone)?void 0:n.currentUser.notifications})}(),l=r.notifications,a=r.loading,o=r.refetch,i=Object(An.useIsFocused)();return p.useEffect((function(){i&&o()}),[i,o]),p.createElement(p.Fragment,null,a&&p.createElement(h.a,{color:t.theme.colors.accent,indeterminate:!0,visible:a}),p.createElement(vr,{style:{backgroundColor:"#F4F5F5"},contentContainerStyle:co.content,refreshControl:p.createElement(Dn.a,{refreshing:a,onRefresh:function(){return o()}})},null!=l&&null!=(e=l.edges)&&e.length?null==l||null==(n=l.edges)?void 0:n.map((function(e){var n;switch(null==e||null==(n=e.node)?void 0:n.notificationType){case"boarding_call":return p.createElement(so,{notification:e.node});case"user_manifested":return p.createElement(io,{notification:e.node});default:return null}})):p.createElement(ql,{title:"No notifications",subtitle:"Notifications will show up here"})))}var co=O.a.create({content:{flexGrow:1,paddingBottom:56,alignItems:"center",paddingHorizontal:16,marginHorizontal:16},divider:{height:1,width:"100%"}}),mo=Object(xn.a)();function fo(){return p.createElement(mo.Navigator,{screenOptions:{headerShown:!0,header:function(e){return p.createElement(fl,wt()({},e,{hideWarnings:!0}))},cardStyle:{flex:1}}},p.createElement(mo.Screen,{name:"NotificationsScreen",component:uo,options:{title:"Notifications"}}))}var po,go=t(357),vo=t(157),bo=t(485),ho=t.n(bo);t(637);function yo(e){var n=e.disabled,t=e.label,r=e.timestamp,l=e.onChange,a=p.useState(!1),o=W()(a,2),i=o[0],s=o[1];return p.createElement(p.Fragment,null,p.createElement(it.a,{onDismiss:function(){return s(!1)},visible:i,anchor:p.createElement(It.b.Item,{onPress:function(){return s(!0)},disabled:!!n,title:t,description:r?Object(Pa.a)(1e3*r,"yyyy/MM/dd"):"No date selected",left:function(){return p.createElement(It.b.Icon,{icon:"calendar"})}})},p.createElement(ho.a,{selectedDays:r?[new Date(1e3*r)]:[],onDayClick:function(e){l(e.getTime()/1e3),s(!1)}})))}var Eo,wo=Object(Wn.a)(po||(po=Bn()(["\n  query RolesQuery($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles(selectable: true) {\n        id\n        name\n      }\n    }\n  }\n"])));function xo(e){var n,t,r,l,a=e.onSelect,o=e.disabled,i=e.required,s=e.value,u=p.useState(!1),c=W()(u,2),d=c[0],m=c[1],f=rn((function(e){return e.global})).currentDropzoneId,g=Object(F.useQuery)(wo,{variables:{dropzoneId:Number(f)}}).data;return p.createElement(p.Fragment,null,p.createElement(It.b.Subheader,{style:{paddingLeft:0}},"Access level"),p.createElement(it.a,{onDismiss:function(){return m(!1)},visible:!o&&d,anchor:p.createElement(It.b.Item,{left:function(){return p.createElement(It.b.Icon,{icon:"lock"})},onPress:o?void 0:function(){m(!0)},title:(null==s||null==(n=s.name)||null==(t=n.replace("_"," "))?void 0:t.toUpperCase())||"Access level",description:i?null:"Optional"})},null==g||null==(r=g.dropzone)||null==(l=r.roles)?void 0:l.map((function(e){var n;return p.createElement(it.a.Item,{onPress:function(){m(!1),a(e)},title:(null==(n=e.name)?void 0:n.replace("_"," ").toUpperCase())||"-"})}))))}function So(){var e=rn((function(e){return e.forms.dropzoneUser})),n=tn(),t=ct(lt.GrantPermission);return p.createElement(p.Fragment,null,p.createElement(xo,{value:e.fields.role.value,onSelect:function(e){return n(Ze.forms.dropzoneUser.setField(["role",e]))},disabled:!t,required:!0}),p.createElement(gl.a,{type:e.fields.role.error?"error":"info"},e.fields.role.error),p.createElement(It.b.Subheader,{style:{paddingLeft:0}},"Financial"),p.createElement(yo,{timestamp:e.fields.expiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return n(Ze.forms.dropzoneUser.setField(["expiresAt",e]))},label:"Membership expires"}),p.createElement(gl.a,{type:e.fields.expiresAt.error?"error":"info"},e.fields.expiresAt.error))}function ko(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Co(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ko(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ko(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var zo=Object(F.gql)(Eo||(Eo=Bn()(["\n  mutation UpdateDropzoneUser($userRoleId: Int, $expiresAt: Int, $dropzoneUserId: Int) {\n    updateDropzoneUser(\n      input: { id: $dropzoneUserId, attributes: { userRoleId: $userRoleId, expiresAt: $expiresAt } }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      dropzoneUser {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n\n        user {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function Io(e){var n,t,r,a=e.open,o=tn(),i=rn((function(e){return e.forms.dropzoneUser})),s=rn((function(e){return e.global})),u=Object(F.useMutation)(zo),c=W()(u,2),d=c[0],m=c[1],f=p.useCallback((function(){var e=!1;return i.fields.role.value||(e=!0,o(Ze.forms.dropzoneUser.setFieldError(["role","User must have an access level"]))),i.fields.expiresAt.value||(e=!0,o(Ze.forms.dropzoneUser.setFieldError(["expiresAt","Membership expiry must be set"]))),!e}),[o,i.fields.expiresAt.value,i.fields.role.value]),g=p.useCallback((function(){var n,t,r,a,s,u,c,m,p,g;return l.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(f()){v.next=2;break}return v.abrupt("return");case 2:return v.prev=2,v.next=5,l.a.awrap(d({variables:Co(Co({},null!=(n=i.original)&&n.id?{id:null==(t=i.original)?void 0:t.id}:{}),{},{userRoleId:Number(null==(r=i.fields.role.value)?void 0:r.id),expiresAt:i.fields.expiresAt.value,dropzoneUserId:Number(null==(a=i.original)?void 0:a.id)})}));case 5:if(p=v.sent,null==(g=null==(s=p.data)?void 0:s.updateDropzoneUser)||null==(u=g.fieldErrors)||u.map((function(e){var n=e.field,t=e.message;switch(n){case"user_role":return o(Ze.forms.dropzoneUser.setFieldError(["role",t]));case"expires_at":return o(Ze.forms.dropzoneUser.setFieldError(["expiresAt",t]));default:return null}})),null==g||null==(c=g.errors)||!c.length){v.next=11;break}return o(Ze.notifications.showSnackbar({message:null==g?void 0:g.errors[0],variant:"error"})),v.abrupt("return");case 11:null!=g&&null!=(m=g.fieldErrors)&&m.length||null==g||!g.dropzoneUser?console.error(null==g?void 0:g.fieldErrors):e.onSuccess(g.dropzoneUser),v.next=17;break;case 14:v.prev=14,v.t0=v.catch(2),o(Ze.notifications.showSnackbar({message:v.t0.message,variant:"error"}));case 17:case"end":return v.stop()}}),null,null,[[2,14]],Promise)}),[o,d,e,i.fields.expiresAt.value,null==(n=i.fields.role.value)?void 0:n.id,null==(t=i.original)?void 0:t.id,f]);return p.createElement(Dt.a,null,p.createElement(pl.a,{visible:!!a},p.createElement(h.a,{indeterminate:!0,visible:m.loading,color:s.theme.colors.accent}),p.createElement(pl.a.Title,null,(null!=i&&null!=(r=i.original)&&r.id?"Edit":"New")+" dropzone user"),p.createElement(pl.a.Content,null,p.createElement(So,null)),p.createElement(pl.a.Actions,{style:{justifyContent:"flex-end"}},p.createElement(pr.a,{onPress:function(){o(Ze.forms.dropzoneUser.reset()),e.onClose()}},"Cancel"),p.createElement(pr.a,{onPress:g},"Save"))))}function Oo(){var e,n,t,r,l,a,o=rn((function(e){return e.forms.credits})),i=tn(),s=(null==(e=o.original)?void 0:e.credits)||0,u=o.fields.amount.value||0,c="deposit"===o.fields.status.value?u+s:u-s;return p.createElement(p.Fragment,null,p.createElement(Nl.b,{defaultIndex:0,onChangeIndex:function(e){i(Ze.forms.credits.setField(["status",1===e?"withdrawal":"deposit"]))},mode:"fixed"},p.createElement(Nl.a,{label:"Deposit",icon:"arrow-up"},p.createElement(S.a,null)),p.createElement(Nl.a,{label:"Withdraw",icon:"arrow-down"},p.createElement(S.a,null))),p.createElement(pl.a.Content,{style:{paddingTop:16}},p.createElement(Ir.a,{style:To.field,mode:"outlined",label:"Message",error:!!o.fields.message.error,value:(null==(n=o.fields.message.value)?void 0:n.toString())||"",onChangeText:function(e){return i(Ze.forms.credits.setField(["message",e]))}}),p.createElement(gl.a,{type:o.fields.message.error?"error":"info"},o.fields.message.error||""),"deposit"===o.fields.status.value?p.createElement(S.a,null,p.createElement(Ir.a,{style:To.field,mode:"outlined",label:"Add amount",error:!!o.fields.amount.error,value:(null==(t=o.fields.amount.value)?void 0:t.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return i(Ze.forms.credits.setField(["amount",Number(e)]))}}),p.createElement(gl.a,{type:o.fields.amount.error?"error":"info"},o.fields.amount.error||""),p.createElement(_t.a,null),p.createElement(ca.a,null,p.createElement(ca.a.Row,null,p.createElement(ca.a.Title,null,"Current balance"),p.createElement(ca.a.Cell,{numeric:!0},"$"+((null==(r=o.original)?void 0:r.credits)||0))),p.createElement(ca.a.Row,null,p.createElement(ca.a.Title,null,"Deposit"),p.createElement(ca.a.Cell,{numeric:!0},"+$"+(o.fields.amount.value||0))),p.createElement(ca.a.Row,null,p.createElement(ca.a.Title,null,p.createElement(kn.a,{style:{fontWeight:"bold"}},"New total")),p.createElement(ca.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c))))):p.createElement(S.a,null,p.createElement(Ir.a,{style:To.field,mode:"outlined",label:"Withdraw amount",error:!!o.fields.amount.error,value:(null==(l=o.fields.amount.value)?void 0:l.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return i(Ze.forms.credits.setField(["amount",Number(e)]))}}),p.createElement(gl.a,{type:o.fields.amount.error?"error":"info"},o.fields.amount.error||""),p.createElement(_t.a,null),p.createElement(ca.a,null,p.createElement(ca.a.Row,null,p.createElement(ca.a.Title,null,"Current balance"),p.createElement(ca.a.Cell,{numeric:!0},"$"+((null==(a=o.original)?void 0:a.credits)||0))),p.createElement(ca.a.Row,null,p.createElement(ca.a.Title,null,"Withdraw"),p.createElement(ca.a.Cell,{numeric:!0},"-$"+(o.fields.amount.value||0))),p.createElement(ca.a.Row,null,p.createElement(ca.a.Title,null,p.createElement(kn.a,{style:{fontWeight:"bold"}},"New total")),p.createElement(ca.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c)))))))}var jo,To=O.a.create({fields:{flex:1},field:{marginBottom:8}}),Po=Object(F.gql)(jo||(jo=Bn()(["\n  mutation CreatrTransaction(\n    $message: String\n    $status: String\n    $amount: Float\n    $dropzoneUserId: Int\n  ) {\n    createTransaction(\n      input: {\n        attributes: {\n          amount: $amount\n          dropzoneUserId: $dropzoneUserId\n          message: $message\n          status: $status\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      transaction {\n        id\n        amount\n        message\n\n        dropzoneUser {\n          id\n          credits\n\n          transactions {\n            edges {\n              node {\n                id\n                status\n                amount\n                createdAt\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Fo(e){var n,t=e.open,r=e.onClose,a=tn(),o=rn((function(e){return e.forms.credits})),i=rn((function(e){return e.global})),s=Object(F.useMutation)(Po),u=W()(s,2),c=u[0],d=u[1],m=p.useCallback((function(){var e=!1;return o.fields.amount.value||(e=!0,a(Ze.forms.credits.setFieldError(["amount","You must specify an amount"]))),!e}),[a,o.fields.amount.value]),f=p.useCallback((function(){var n,t,r,i,s,u,d,f,p;return l.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(m()){g.next=2;break}return g.abrupt("return");case 2:return g.prev=2,g.next=5,l.a.awrap(c({variables:{amount:o.fields.amount.value,message:o.fields.message.value,status:o.fields.status.value,dropzoneUserId:Number(null==(n=o.original)?void 0:n.id)}}));case 5:if(f=g.sent,null==(p=null!=(t=o.original)&&t.id?null==(r=f.data)?void 0:r.updateRig:null==(i=f.data)?void 0:i.createRig)||null==(s=p.fieldErrors)||s.map((function(e){var n=e.field,t=e.message;switch(n){case"amount":return a(Ze.forms.credits.setFieldError(["amount",t]));case"message":return a(Ze.forms.credits.setFieldError(["message",t]));case"status":return a(Ze.forms.credits.setFieldError(["status",t]));default:return null}})),null==p||null==(u=p.errors)||!u.length){g.next=11;break}return a(Ze.notifications.showSnackbar({message:null==p?void 0:p.errors[0],variant:"error"})),g.abrupt("return");case 11:null!=p&&null!=(d=p.fieldErrors)&&d.length||(a(Ze.forms.credits.reset()),e.onSuccess()),g.next=17;break;case 14:g.prev=14,g.t0=g.catch(2),a(Ze.notifications.showSnackbar({message:g.t0.message,variant:"error"}));case 17:case"end":return g.stop()}}),null,null,[[2,14]],Promise)}),[a,c,e,o.fields.amount.value,o.fields.message.value,o.fields.status.value,null==(n=o.original)?void 0:n.id,m]);return p.createElement(Dt.a,null,p.createElement(pl.a,{visible:!!t},p.createElement(h.a,{indeterminate:!0,visible:d.loading,color:i.theme.colors.accent}),p.createElement(Oo,null),p.createElement(pl.a.Actions,{style:{justifyContent:"flex-end"}},p.createElement(pr.a,{onPress:function(){a(Ze.forms.credits.reset()),r()}},"Cancel"),p.createElement(pr.a,{onPress:f},"Save"))))}function Do(e){var n,t,r=e.showTypeSelect,l=rn((function(e){return e.forms.rig})),a=tn(),o=ct(lt.CreateRig);return p.createElement(S.a,null,p.createElement(Ir.a,{style:Ao.field,mode:"outlined",label:"Make",error:!!l.fields.make.error,value:l.fields.make.value||"",onChangeText:function(e){return a(Ze.forms.rig.setField(["make",e]))}}),p.createElement(gl.a,{type:l.fields.make.error?"error":"info"},l.fields.make.error||"e.g Javelin, Mirage"),p.createElement(Ir.a,{style:Ao.field,mode:"outlined",label:"Model",error:!!l.fields.model.error,value:l.fields.model.value||"",onChangeText:function(e){return a(Ze.forms.rig.setField(["model",e]))}}),p.createElement(gl.a,{type:l.fields.model.error?"error":"info"},l.fields.model.error||"e.g G4.1"),p.createElement(Ir.a,{style:Ao.field,mode:"outlined",label:"Serial",error:!!l.fields.serial.error,value:l.fields.serial.value||"",onChangeText:function(e){return a(Ze.forms.rig.setField(["serial",e]))}}),p.createElement(gl.a,{type:l.fields.serial.error?"error":"info"},l.fields.serial.error||""),p.createElement(Ir.a,{style:Ao.field,mode:"outlined",label:"Current canopy size",error:!!l.fields.canopySize.error,value:(null==(n=l.fields.canopySize.value)?void 0:n.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return a(Ze.forms.rig.setField(["canopySize",Number(e)]))}}),p.createElement(gl.a,{type:l.fields.canopySize.error?"error":"info"},l.fields.canopySize.error||"Size of canopy in container"),r?p.createElement(bl,{items:["student","sport","tandem"],renderItemLabel:function(e){return e},isDisabled:function(e){return!o&&"sport"!==e},selected:[(null==(t=l.fields.rigType)?void 0:t.value)||"sport"],onChangeSelected:function(e){var n=W()(e,1)[0];return a(Ze.forms.rig.setField(["rigType",n]))}}):null,p.createElement(yo,{timestamp:l.fields.repackExpiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return a(Ze.forms.rig.setField(["repackExpiresAt",e]))},label:"Reserve repack expiry date"}),p.createElement(gl.a,{type:l.fields.repackExpiresAt.error?"error":"info"},l.fields.repackExpiresAt.error||""))}var $o,No,Ao=O.a.create({fields:{flex:1},field:{marginBottom:8}});function Ro(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Uo(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ro(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ro(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Lo,Bo=Object(F.gql)($o||($o=Bn()(["\n  mutation CreateRig(\n    $make: String\n    $model: String\n    $serial: String\n    $rigType: String\n    $canopySize: Int\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),Mo=Object(F.gql)(No||(No=Bn()(["\n  mutation UpdateRig(\n    $id: Int!\n    $make: String\n    $model: String\n    $serial: String\n    $rigType: String\n    $canopySize: Int\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"])));function Wo(e){var n,t,r=e.open,a=e.dropzoneId,o=e.onClose,i=e.onSuccess,s=tn(),u=rn((function(e){return e.forms.rig})),c=Object(F.useMutation)(Bo),d=W()(c,2),m=d[0],f=d[1],g=Object(F.useMutation)(Mo),v=W()(g,2),b=v[0],h=v[1],y=f.loading||h.loading,E=p.useCallback((function(){var e=!1;return u.fields.make.value||(e=!0,s(Ze.forms.rig.setFieldError(["make","Required"]))),u.fields.model.value||(e=!0,s(Ze.forms.rig.setFieldError(["model","Required"]))),u.fields.serial.value||(e=!0,s(Ze.forms.rig.setFieldError(["serial","Required"]))),u.fields.canopySize.value||(e=!0,s(Ze.forms.rig.setFieldError(["canopySize","Required"]))),u.fields.repackExpiresAt.value||(e=!0,s(Ze.forms.rig.setFieldError(["repackExpiresAt","You must select a repack date in the future"]))),!e}),[s,u.fields.canopySize.value,u.fields.make.value,u.fields.model.value,u.fields.repackExpiresAt.value,u.fields.serial.value]),w=p.useCallback((function(){var n,t,r,a,o,c,d,f,p,g,v,h;return l.a.async((function(y){for(;;)switch(y.prev=y.next){case 0:if(E()){y.next=2;break}return y.abrupt("return");case 2:return y.prev=2,g=null!=(n=u.original)&&n.id?b:m,y.next=6,l.a.awrap(g({variables:Uo(Uo({},null!=(t=u.original)&&t.id?{id:Number(null==(r=u.original)?void 0:r.id)}:{}),{},{make:u.fields.make.value,model:u.fields.model.value,serial:u.fields.serial.value,canopySize:u.fields.canopySize.value,rigType:u.fields.rigType.value,repackExpiresAt:u.fields.repackExpiresAt.value,userId:e.userId?Number(e.userId):null,dropzoneId:e.dropzoneId?Number(e.dropzoneId):null})}));case 6:if(v=y.sent,null==(h=null!=(a=u.original)&&a.id?null==(o=v.data)?void 0:o.updateRig:null==(c=v.data)?void 0:c.createRig)||null==(d=h.fieldErrors)||d.map((function(e){var n=e.field,t=e.message;switch(n){case"make":return s(Ze.forms.rig.setFieldError(["make",t]));case"model":return s(Ze.forms.rig.setFieldError(["model",t]));case"serial":return s(Ze.forms.rig.setFieldError(["serial",t]));case"canopy_size":return s(Ze.forms.rig.setFieldError(["canopySize",t]));case"repack_expires_at":return s(Ze.forms.rig.setFieldError(["repackExpiresAt",t]));case"rig_type":return s(Ze.forms.rig.setFieldError(["rigType",t]));default:return null}})),null==h||null==(f=h.errors)||!f.length){y.next=12;break}return s(Ze.notifications.showSnackbar({message:null==h?void 0:h.errors[0],variant:"error"})),y.abrupt("return");case 12:null!=h&&null!=(p=h.fieldErrors)&&p.length||requestAnimationFrame((function(){return i()})),y.next=18;break;case 15:y.prev=15,y.t0=y.catch(2),s(Ze.notifications.showSnackbar({message:y.t0.message,variant:"error"}));case 18:case"end":return y.stop()}}),null,null,[[2,15]],Promise)}),[s,m,b,e,u.fields.canopySize.value,u.fields.make.value,u.fields.model.value,u.fields.repackExpiresAt.value,u.fields.rigType.value,u.fields.serial.value,null==(n=u.original)?void 0:n.id,E]);return p.createElement(za,{title:null!=(t=u.original)&&t.id?"Edit rig":"New rig",open:r,snapPoints:[0,580],onClose:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){requestAnimationFrame((function(){o(),s(Ze.forms.rig.reset())}))})),buttonAction:w,buttonLabel:"Save",loading:y},p.createElement(Do,{showTypeSelect:!!a}))}var Vo,Ho=Object(Wn.a)(Lo||(Lo=Bn()(["\n  query Licenses($federationId: Int) {\n    licenses(federationId: $federationId) {\n      id\n      name\n\n      federation {\n        id\n        name\n      }\n    }\n  }\n"])));function Go(e){var n=e.federationId,t=e.onSelect,r=e.value,l=Object(F.useQuery)(Ho,{variables:{federationId:n}}).data;return p.createElement(p.Fragment,null,p.createElement(It.b.Subheader,null,"License"),p.createElement(bl,{autoSelectFirst:!0,icon:"ticket-account",items:(null==l?void 0:l.licenses)||[],selected:[r].filter(Boolean),isSelected:function(e){return e.id===(null==r?void 0:r.id)},renderItemLabel:function(e){return null==e?void 0:e.name},isDisabled:function(){return!1},onChangeSelected:function(e){var n=W()(e,1)[0];return n?t(n):null}}))}var qo=Object(Wn.a)(Vo||(Vo=Bn()(["\n  query Federations {\n    federations {\n      id\n      name\n    }\n  }\n"])));function Qo(e){var n,t=e.value,r=e.onSelect,l=p.useState(!1),o=W()(l,2),i=o[0],s=o[1],u=Object(F.useQuery)(qo).data;return p.useEffect((function(){var e;1!==(null==u||null==(e=u.federations)?void 0:e.length)||t||r(u.federations[0])}),[null==u?void 0:u.federations,r,t]),p.createElement(p.Fragment,null,p.createElement(It.b.Subheader,null,"Federation"),p.createElement(it.a,{onDismiss:function(){return s(!1)},visible:i,anchor:p.createElement(a.f,{onPress:function(){s(!0)}},p.createElement(Ir.a,{mode:"outlined",disabled:!0,style:{minWidth:200},value:(null==t?void 0:t.name)||"Please select federation"}))},null==u||null==(n=u.federations)?void 0:n.map((function(e){return p.createElement(it.a.Item,{onPress:function(){s(!1),r(e)},title:e.name||"-",key:"federation-select-"+e.id})}))))}function Yo(){var e,n,t,r,l,a,o,i,s,u,c,d,m,f,g,v,b,h,y,E,w,x,k,C,z=rn((function(e){return e.forms.user})),I=tn();return p.useEffect((function(){var e;z.original&&(z.fields.exitWeight.value||I(Ze.forms.user.setField(["exitWeight",z.original.exitWeight||"60"])),!z.fields.rigs.value&&null!=(e=z.original)&&e.id&&I(Ze.forms.user.setField(["rigs",z.original.rigs])))}),[I,z.fields.exitWeight.value,z.fields.rigs.value,z.original,null==(e=z.original)?void 0:e.id]),p.createElement(p.Fragment,null,p.createElement(Ir.a,{style:_o.field,mode:"outlined",label:"Name",error:!!z.fields.name.error,value:(null==(n=z.fields.name)||null==(t=n.value)?void 0:t.toString())||"",onChangeText:function(e){return I(Ze.forms.user.setField(["name",e]))}}),p.createElement(gl.a,{type:z.fields.name.error?"error":"info"},z.fields.name.error||" "),p.createElement(Ir.a,{style:_o.field,mode:"outlined",label:"Email",error:!!z.fields.email.error,value:(null==(r=z.fields.email)||null==(l=r.value)?void 0:l.toString())||"",onChangeText:function(e){return I(Ze.forms.user.setField(["email",e]))}}),p.createElement(gl.a,{type:z.fields.email.error?"error":"info"},z.fields.email.error||" "),p.createElement(Ir.a,{style:_o.field,mode:"outlined",label:"Phone",error:!!z.fields.phone.error,value:(null==(a=z.fields.phone)||null==(o=a.value)?void 0:o.toString())||"",onChangeText:function(e){return I(Ze.forms.user.setField(["phone",e]))}}),p.createElement(gl.a,{type:z.fields.phone.error?"error":"info"},z.fields.phone.error||""),p.createElement(Ir.a,{style:_o.field,mode:"outlined",label:"Exit weight",error:!!z.fields.exitWeight.error,value:(null==(i=z.fields.exitWeight)||null==(s=i.value)?void 0:s.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return p.createElement(Ir.a.Affix,{text:"kg"})},onChangeText:function(e){return I(Ze.forms.user.setField(["exitWeight",e]))}}),p.createElement(gl.a,{type:z.fields.exitWeight.error?"error":"info"},z.fields.exitWeight.error||""),p.createElement(_t.a,null),p.createElement(S.a,{style:{width:"100%"}},p.createElement(Qo,{value:(null==z||null==(u=z.fields)||null==(c=u.license)||null==(d=c.value)?void 0:d.federation)||z.federation.value,onSelect:function(e){return I(Ze.forms.user.setFederation(e))}}),p.createElement(gl.a,{type:z.federation.error?"error":"info"},z.federation.error||""),((null==z||null==(m=z.fields)||null==(f=m.license)||null==(g=f.value)||null==(v=g.federation)?void 0:v.id)||(null==z||null==(b=z.federation)||null==(h=b.value)?void 0:h.id))&&p.createElement(p.Fragment,null,p.createElement(Go,{value:z.fields.license.value,federationId:Number((null==z||null==(y=z.fields)||null==(E=y.license)||null==(w=E.value)||null==(x=w.federation)?void 0:x.id)||(null==(k=z.federation)||null==(C=k.value)?void 0:C.id)),onSelect:function(e){return I(Ze.forms.user.setField(["license",e]))}}),p.createElement(gl.a,{type:z.fields.license.error?"error":"info"},z.fields.license.error||""))))}var _o=O.a.create({fields:{flex:1,width:"100%",paddingTop:32},field:{marginBottom:8,width:"100%"},ticketAddons:{marginBottom:8}});function Jo(e){var n,t=e.open,r=(e.onSuccess,e.onClose),a=rn((function(e){return e.forms.user})),o=tn(),i=Xn({onSuccess:function(e){o(Ze.notifications.showSnackbar({message:"Profile has been updated",variant:"success"})),requestAnimationFrame((function(){return o(Ze.forms.user.setOpen(!1))}))},onFieldError:function(e,n){return o(Ze.forms.user.setFieldError([e,n]))},onError:function(e){return o(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),s=p.useCallback((function(){var e,n,t,r,l,i,s,u,c,d=!1,m=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return((null==(e=a.fields.name)||null==(n=e.value)?void 0:n.length)||0)<3&&(d=!0,o(Ze.forms.user.setFieldError(["name","Name is too short"]))),((null==(t=a.fields.email)||null==(r=t.value)?void 0:r.length)||0)<3&&(d=!0,o(Ze.forms.user.setFieldError(["email","Email is too short"]))),((null==(l=a.fields.phone)||null==(i=l.value)?void 0:i.length)||0)<3&&(d=!0,o(Ze.forms.user.setFieldError(["phone","Phone number is too short"]))),m.test((null==(s=a.fields)||null==(u=s.email)?void 0:u.value)||"")||(d=!0,o(Ze.forms.user.setFieldError(["email","Please enter a valid email"]))),((null==(c=a.fields.exitWeight)?void 0:c.value)||0)<30&&(d=!0,o(Ze.forms.user.setFieldError(["exitWeight","Exit weight seems too low?"]))),!d}),[a.fields,o]),u=p.useCallback((function(){var e,n,t,r,u,c,d,m,f;return l.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(e=a.fields,n=e.name,t=e.license,r=e.phone,u=e.email,c=e.exitWeight,!s()){p.next=10;break}return p.prev=2,p.next=5,l.a.awrap(i.mutate({id:Number(null==(d=a.original)?void 0:d.id),name:n.value,licenseId:null!=(m=t.value)&&m.id?Number(null==(f=t.value)?void 0:f.id):null,phone:r.value,exitWeight:parseFloat((null==c?void 0:c.value)||"50"),email:u.value}));case 5:p.next=10;break;case 7:p.prev=7,p.t0=p.catch(2),o(Ze.notifications.showSnackbar({message:p.t0.message,variant:"error"}));case 10:case"end":return p.stop()}}),null,null,[[2,7]],Promise)}),[o,i,a.fields,null==(n=a.original)?void 0:n.id,s]);return p.createElement(za,{title:"Update information",open:t,snapPoints:[0,740],loading:i.loading,onClose:r,buttonAction:u,buttonLabel:"Save"},p.createElement(Yo,null))}function Zo(e){var n=rn((function(e){return e.global})),t=e.title,r=e.children,l=e.buttonIcon,a=e.onPressButton;return p.createElement(S.a,{style:Xo.card},p.createElement(S.a,{style:Xo.container},p.createElement(It.b.Subheader,{style:Xo.title},t),l&&p.createElement(Ut.a,{icon:l,onPress:function(){return a?a():null},color:n.theme.colors.primary})),r)}var Xo=O.a.create({container:{flexDirection:"row",justifyContent:"space-between"},title:{flexGrow:1},card:{marginVertical:8,width:"100%"}}),Ko=t(64);function ei(e){var n,t,r,l,a=e.dropzoneUser,o=e.onEdit,i=e.canEdit,s=e.children,u=e.onPressAvatar,c=rn((function(e){return e.global})).theme;return p.createElement(S.a,{style:[ni.container,{backgroundColor:c.colors.primary}]},p.createElement(S.a,{style:ni.actions},i?p.createElement(Ut.a,{icon:"pencil",size:20,color:c.colors.surface,onPress:function(){return o?o():null}}):null),p.createElement(S.a,{style:ni.avatarContainer},p.createElement(S.a,{style:{flex:1/3}},p.createElement(Ko.a,{onPress:u},null!=a&&null!=(n=a.user)&&n.image?p.createElement(It.a.Image,{size:80,source:{uri:null==a?void 0:a.user.image},style:{backgroundColor:c.colors.surface}}):p.createElement(It.a.Icon,{size:80,icon:"account",color:c.colors.primary,style:{backgroundColor:c.colors.surface}}))),p.createElement(S.a,{style:ni.titleContainer},p.createElement(Lt.a,{style:ni.title},null==a||null==(t=a.user)?void 0:t.name),p.createElement(Bt.a,{style:ni.paragraph},null==a||null==(r=a.role)||null==(l=r.name)?void 0:l.replace("_"," ").toUpperCase()))),s)}var ni=O.a.create({container:{width:"100%",paddingTop:16},actions:{flexDirection:"row",justifyContent:"flex-end"},avatarContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:16,marginBottom:16},titleContainer:{paddingLeft:48,flex:2/3,alignItems:"flex-start",justifyContent:"center"},title:{color:"white"},paragraph:{color:"white"}});function ti(e){var n=e.items,t=1/n.length;return p.createElement(p.Fragment,null,p.createElement(_t.a,{style:li.divider}),p.createElement(S.a,{style:li.container},n.map((function(e,r){return p.createElement(p.Fragment,null,p.createElement(S.a,{style:{flex:t},key:"info-grid-"+r},p.createElement(It.b.Item,{titleStyle:[li.title,{fontWeight:!1!==e.bold?"bold":void 0}],title:e.value,descriptionStyle:li.description,description:e.title,onPress:e.onPress})),r===n.length-1?null:p.createElement(_t.a,{key:"info-grid-divider-"+r,style:li.verticalDivider}))}))))}var ri,li=O.a.create({container:{width:"100%",flexDirection:"row"},divider:{height:O.a.hairlineWidth,width:"100%",backgroundColor:"white"},verticalDivider:{width:O.a.hairlineWidth,height:"100%",backgroundColor:"white"},title:{textAlign:"center",color:"white"},description:{textAlign:"center",color:"white"}});function ai(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function oi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ai(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ai(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var ii=Object(Wn.a)(ri||(ri=Bn()(["\n  query QueryDropzoneUser($dropzoneId: Int!, $dropzoneUserId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n        credits\n        expiresAt\n        permissions\n\n        role {\n          id\n          name\n        }\n        rigInspections {\n          id\n          isOk\n          rig {\n            id\n          }\n        }\n\n        notifications {\n          edges {\n            node {\n              id\n              message\n              notificationType\n              createdAt\n            }\n          }\n        }\n\n        transactions {\n          edges {\n            node {\n              id\n              status\n              message\n              amount\n              createdAt\n            }\n          }\n        }\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          image\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n            federation {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var si,ui,ci,di=function(e){var n=e.type,t=e.selected,r=e.disabled,l=e.onPress,a={actAsDZSO:"shield-cross",actAsGCA:"radio-handheld",actAsLoadMaster:"shield-account",actAsPilot:"shield-airplane",actAsRigInspector:"shield-search"}[n],o={actAsDZSO:"DZSO",actAsGCA:"GCA",actAsLoadMaster:"Load Master",actAsPilot:"Pilot",actAsRigInspector:"Rig Inspector"}[n];return p.createElement(ot.a,{mode:t?"outlined":"flat",icon:a,textStyle:t?{}:{color:"white"},style:[{marginHorizontal:2,maxHeight:35},t?void 0:{backgroundColor:"transparent",borderColor:"white"}].filter(Boolean),disabled:r,onPress:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){return null==l?void 0:l()}))},o)},mi=Jn(Object(Wn.a)(si||(si=Bn()(["\n  mutation RevokePermission($dropzoneUserId: Int!, $permissionName: Permission!) {\n    revokePermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n      dropzoneUser {\n        id\n        permissions\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n"]))),{getPayload:function(e){return e.revokePermission},validates:{permissionName:[Qn("Permission name is required")]}}),fi=Jn(Object(Wn.a)(ui||(ui=Bn()(["\n  mutation GrantPermission($dropzoneUserId: Int!, $permissionName: Permission!) {\n    grantPermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n      dropzoneUser {\n        id\n        permissions\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n"]))),{getPayload:function(e){return e.grantPermission},validates:{permissionName:[Qn("Permission name is required")]}});function pi(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function gi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?pi(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):pi(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var vi=Object(Wn.a)(ci||(ci=Bn()(["\n  mutation UpdateUserImage($id: Int, $image: String) {\n    updateUser(input: { id: $id, attributes: { image: $image } }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        image\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function bi(){var e,n,t,r,o,i,s,u,c,d,m,f,g=rn((function(e){return e.global})),v=rn((function(e){return e.forms})),b=tn(),y=Object(An.useNavigation)(),E=tt().currentUser,w=Object(An.useRoute)(),S=(null==E?void 0:E.id)===w.params.userId,k=function(e){var n,t,r,l,a,o,i,s,u,c,d=rn((function(e){return e.global.currentDropzoneId})),m=tt(),f=Object(F.useQuery)(ii,{variables:{dropzoneId:d,dropzoneUserId:e||Number(null==m||null==(n=m.data)||null==(t=n.dropzone)||null==(r=t.currentUser)?void 0:r.id)}});return oi(oi({},f),{},{dropzoneUser:e&&e!==Number(null==m||null==(l=m.data)||null==(a=l.dropzone)||null==(o=a.currentUser)?void 0:o.id)?null==f||null==(u=f.data)||null==(c=u.dropzone)?void 0:c.dropzoneUser:null==m||null==(i=m.data)||null==(s=i.dropzone)?void 0:s.currentUser})}(Number(w.params.userId)),C=k.dropzoneUser,z=k.loading,I=k.refetch,O=ct(lt.GrantPermission),j=Object(An.useIsFocused)();p.useEffect((function(){j&&I()}),[j,I]);var T=Object(F.useMutation)(vi),P=W()(T,1)[0],D=mi({onSuccess:function(e){I(),b(Ze.notifications.showSnackbar({message:"Permission revoked"}))},onError:function(e){b(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),$=fi({onSuccess:function(e){I(),b(Ze.notifications.showSnackbar({message:"Permission granted"}))},onError:function(e){b(Ze.notifications.showSnackbar({message:e,variant:"error"}))}});p.useEffect((function(){!function(){var e;l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("web"===x.a.OS){n.next=6;break}return n.next=3,l.a.awrap(go.b());case 3:e=n.sent,"granted"!==e.status&&console.error("Sorry, we need camera roll permissions to make this work!");case 6:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]);var N=p.useCallback((function(){var e,n;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(go.a({mediaTypes:vo.a.Images,allowsEditing:!0,aspect:[4,3],quality:.1,base64:!0}));case 3:return n=t.sent,t.next=6,l.a.awrap(P({variables:{id:Number(null==C||null==(e=C.user)?void 0:e.id),image:"data:image/jpeg;base64,"+n.base64}}));case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log(t.t0);case 11:case"end":return t.stop()}}),null,null,[[0,8]],Promise)}),[null==C||null==(e=C.user)?void 0:e.id,P]),A=(null==C||null==(n=C.permissions)?void 0:n.filter((function(e){return/^actAs/.test(e)})))||[],R=ct(lt.CreateUserTransaction),U=ct(lt.UpdateUser);return console.log(v.dropzoneUser.open),p.createElement(p.Fragment,null,z&&p.createElement(h.a,{color:g.theme.colors.accent,indeterminate:!0,visible:z}),p.createElement(vr,{contentContainerStyle:hi.content,refreshControl:p.createElement(Dn.a,{refreshing:z,onRefresh:function(){return I()}})},p.createElement(a.c,{horizontal:!0,style:{width:"100%"},contentContainerStyle:{flexGrow:1,padding:8,justifyContent:"space-evenly",backgroundColor:g.theme.colors.primary}},[lt.ActAsPilot,lt.ActAsDzso,lt.ActAsGca,lt.ActAsRigInspector,lt.ActAsLoadMaster].map((function(e){return function(e){return O||A.includes(e)}(e)?p.createElement(di,{type:e,selected:A.includes(e),onPress:function(){return O?A.includes(e)?D.mutate({permissionName:e,dropzoneUserId:Number(null==C?void 0:C.id)},{update:function(n,t){var r,a,o,i;return l.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return t.data,o=n.readQuery({query:mt,variables:{permissions:[e],dropzoneId:Number(g.currentDropzoneId)}}),i=((null==o||null==(r=o.dropzone)||null==(a=r.dropzoneUsers)?void 0:a.edges)||[]).filter((function(e){var n;return(null==e||null==(n=e.node)?void 0:n.id)!==(null==C?void 0:C.id)})),n.writeQuery({query:mt,variables:{permissions:[e],dropzoneId:Number(g.currentDropzoneId)},data:gi(gi({},o),{},{dropzone:gi(gi({},null==o?void 0:o.dropzone),{},{dropzoneUsers:i})})}),l.abrupt("return",{data:gi(gi({},o),{},{dropzone:gi(gi({},null==o?void 0:o.dropzone),{},{dropzoneUsers:i})})});case 5:case"end":return l.stop()}}),null,null,null,Promise)}}):$.mutate({permissionName:e,dropzoneUserId:Number(null==C?void 0:C.id)},{update:function(n,t){var r,a,o,i,s,u,c,d,m,f,p,v,b;return l.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return d=t.data,m=n.readQuery({query:mt,variables:{permissions:[e],dropzoneId:Number(g.currentDropzoneId)}}),f=(null==m||null==(r=m.dropzone)||null==(a=r.dropzoneUsers)?void 0:a.edges)||[],p=!!f.find((function(e){var n;return(null==e||null==(n=e.node)?void 0:n.id)===(null==C?void 0:C.id)})),v=p?Ft()(((null==m||null==(o=m.dropzone)||null==(i=o.dropzoneUsers)?void 0:i.edges)||[]).map((function(e){var n,t;return(null==e||null==(n=e.node)?void 0:n.id)!==(null==C?void 0:C.id)?e:gi(gi({},e),{},{node:gi(gi({},null==e?void 0:e.node),null==d||null==(t=d.grantPermission)?void 0:t.dropzoneUser)})}))):[].concat(Ft()((null==m||null==(s=m.dropzone)||null==(u=s.dropzoneUsers)?void 0:u.edges)||[]),[{edge:{node:null==d||null==(c=d.grantPermission)?void 0:c.dropzoneUser}}]),b=gi(gi({},m),{},{dropzone:gi(gi({},null==m?void 0:m.dropzone),{},{dropzoneUsers:v})}),n.writeQuery({query:mt,variables:{dropzoneId:Number(g.currentDropzoneId),permissions:[e]},data:b}),l.abrupt("return",{data:b});case 8:case"end":return l.stop()}}),null,null,null,Promise)}}):null}}):null}))),C?p.createElement(ei,{dropzoneUser:C,canEdit:S,onEdit:function(){null!=C&&C.user&&b(Ze.forms.user.setOpen(null==C?void 0:C.user))},onPressAvatar:N},p.createElement(a.c,{horizontal:!0,style:{marginVertical:8}},p.createElement(ot.a,{icon:function(e){var n=e.size;return p.createElement(Pn.a,{name:"email",size:n,color:"#FFFFFF"})},mode:"outlined",style:hi.chip,textStyle:hi.chipTitle},(null==C||null==(t=C.user)?void 0:t.email)||"-"),p.createElement(ot.a,{icon:function(e){var n=e.size;return p.createElement(Pn.a,{name:"phone",size:n,color:"#FFFFFF"})},mode:"outlined",style:hi.chip,textStyle:hi.chipTitle},(null==C||null==(r=C.user)?void 0:r.phone)||"-"),p.createElement(ot.a,{icon:function(e){var n=e.size;return p.createElement(Pn.a,{name:"card-account-details-star-outline",size:n,color:"#FFFFFF"})},mode:"outlined",style:hi.chip,textStyle:hi.chipTitle,onPress:function(){U&&b(Ze.forms.dropzoneUser.setOpen(C))}},null!=C&&C.expiresAt?Object(Pa.a)(1e3*((null==C?void 0:C.expiresAt)||0),"yyyy/MM/dd"):"Not a member")),p.createElement(_t.a,{style:hi.divider}),p.createElement(ti,{items:[{title:"Funds",value:"$"+((null==C?void 0:C.credits)||0),onPress:function(){C&&R&&b(Ze.forms.credits.setOpen(C))}},{title:"License",value:""+((null==C||null==(o=C.user)||null==(i=o.license)?void 0:i.name)||"-")},{title:"Exit weight",value:Math.round(Number(null==C||null==(s=C.user)?void 0:s.exitWeight)).toString()||"-"}]}),p.createElement(_t.a,{style:[hi.divider,{backgroundColor:"white"}]})):null,p.createElement(Zo,{title:"Rigs",buttonIcon:"plus",onPressButton:function(){return b(Ze.forms.rig.setOpen(!0))}},p.createElement(ca.a,null,p.createElement(ca.a.Header,null,p.createElement(ca.a.Title,null,"Container"),p.createElement(ca.a.Title,{numeric:!0},"Repack due"),p.createElement(ca.a.Title,{numeric:!0},"Canopy size"),p.createElement(ca.a.Title,{numeric:!0},"Inspected")),null==C||null==(u=C.user)||null==(c=u.rigs)?void 0:c.map((function(e){var n,t;return p.createElement(ca.a.Row,{key:"rig-"+(null==e?void 0:e.id),onPress:function(){b(Ze.forms.rig.setOpen(e))},onLongPress:function(){return y.navigate("RigInspectionScreen",{dropzoneUserId:Number(w.params.userId),rig:e})},pointerEvents:"none"},p.createElement(ca.a.Cell,null,[null==e?void 0:e.make,null==e?void 0:e.model,"#"+(null==e?void 0:e.serial)].join(" ")),p.createElement(ca.a.Cell,{numeric:!0},null!=e&&e.repackExpiresAt?Object(Pa.a)(1e3*e.repackExpiresAt,"yyyy/MM/dd"):"-"),p.createElement(ca.a.Cell,{numeric:!0},""+(null==e?void 0:e.canopySize)),p.createElement(ca.a.Cell,{numeric:!0},p.createElement(Ut.a,{icon:null!=C&&null!=(n=C.rigInspections)&&n.some((function(n){var t;return(null==(t=n.rig)?void 0:t.id)===e.id&&n.isOk}))?"eye-check":"eye-minus",color:null!=C&&null!=(t=C.rigInspections)&&t.some((function(n){var t;return(null==(t=n.rig)?void 0:t.id)===e.id&&n.isOk}))?"#00C851":"#FF8800",onPress:function(){return y.navigate("RigInspectionScreen",{dropzoneUserId:Number(w.params.userId),rig:e})}})))})))),p.createElement(Zo,wt()({title:"Transactions"},R?{buttonIcon:"plus",onPressButton:function(){C&&b(Ze.forms.credits.setOpen(C))}}:{}),p.createElement(ca.a,null,p.createElement(ca.a.Header,null,p.createElement(ca.a.Title,null,"Time"),p.createElement(ca.a.Title,null,"Type"),p.createElement(ca.a.Title,null,"Message"),p.createElement(ca.a.Title,{numeric:!0},"Amount")),null==C||null==(d=C.transactions)||null==(m=d.edges)?void 0:m.map((function(e){var n,t,r,l,a,o;return p.createElement(ca.a.Row,{key:"transaction-"+(null==e||null==(n=e.node)?void 0:n.id)},p.createElement(ca.a.Cell,null,p.createElement(kn.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null!=e&&null!=(t=e.node)&&t.createdAt?Object(Pa.a)(1e3*(null==e||null==(r=e.node)?void 0:r.createdAt),"yyyy/MM/dd hh:mm"):null)),p.createElement(ca.a.Cell,null,p.createElement(kn.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null==e||null==(l=e.node)?void 0:l.status)),p.createElement(ca.a.Cell,null,null==e||null==(a=e.node)?void 0:a.message),p.createElement(ca.a.Cell,{numeric:!0},null==e||null==(o=e.node)?void 0:o.amount))}))))),p.createElement(Wo,{onClose:function(){return b(Ze.forms.rig.setOpen(!1))},onSuccess:function(){return requestAnimationFrame((function(){return b(Ze.forms.rig.setOpen(!1))}))},open:v.rig.open,userId:Number(null==C||null==(f=C.user)?void 0:f.id)}),p.createElement(Io,{onClose:function(){return b(Ze.forms.dropzoneUser.setOpen(!1))},onSuccess:function(e){b(Ze.forms.dropzoneUser.setOpen(!1)),(null==E?void 0:E.id)===(null==C?void 0:C.id)&&b(Ze.global.setUser(e.user))},open:v.dropzoneUser.open}),p.createElement(Fo,{onClose:function(){return b(Ze.forms.credits.setOpen(!1))},onSuccess:function(){return b(Ze.forms.credits.setOpen(!1))},open:v.credits.open,dropzoneUser:C||void 0}),p.createElement(Jo,{onClose:function(){return b(Ze.forms.user.setOpen(!1))},onSuccess:function(){return b(Ze.forms.user.setOpen(!1))},open:v.user.open}))}var hi=O.a.create({container:{flex:1},content:{flexGrow:1,paddingBottom:56,paddingHorizontal:0},divider:{height:1,width:"100%"},chip:{margin:1,backgroundColor:"transparent",minHeight:23,borderWidth:0,justifyContent:"center",alignItems:"center",display:"flex"},chipTitle:{color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:12,lineHeight:24,textAlignVertical:"center"}}),yi=Object(xn.a)();function Ei(){var e=tt().currentUser;return p.createElement(yi.Navigator,{screenOptions:{headerShown:!0,header:function(e){return p.createElement(fl,wt()({},e,{hideWarnings:!0}))},cardStyle:{flex:1}}},p.createElement(yi.Screen,{name:"ProfileScreen",component:bi,options:{title:"Profile"},initialParams:{userId:null==e?void 0:e.id}}))}function wi(){var e=Object(An.useNavigation)(),n=rn((function(e){return e.global})),t=ct(lt.UpdateDropzone),r=ct(lt.UpdateFormTemplate);return p.createElement(vr,null,p.createElement(It.b.Section,{title:"Dropzone",style:{width:"100%"}},t?p.createElement(It.b.Item,{title:"Configuration",onPress:function(){return e.navigate("UpdateDropzoneScreen",{dropzone:n.currentDropzone})},left:function(){return p.createElement(It.b.Icon,{color:"#000",icon:"information-outline"})},description:"Set up name, branding and other settings"}):null,p.createElement(It.b.Item,{title:"Permissions",left:function(){return p.createElement(It.b.Icon,{color:"#000",icon:"lock"})},onPress:function(){return e.navigate("DropzonePermissionScreen")}}),p.createElement(It.b.Item,{title:"Aircrafts",onPress:function(){return e.navigate("PlanesScreen")},left:function(){return p.createElement(It.b.Icon,{color:"#000",icon:"airplane"})}}),p.createElement(It.b.Item,{title:"Rigs",left:function(){return p.createElement(It.b.Icon,{color:"#000",icon:"parachute"})},description:"Dropzone rigs, e.g tandems and student rigs",onPress:function(){return e.navigate("DropzoneRigsScreen")}}),p.createElement(It.b.Item,{disabled:!r,title:"Rig Inspection Template",left:function(){return p.createElement(It.b.Icon,{color:"#000",icon:"check"})},onPress:function(){return e.navigate("RigInspectionTemplateScreen")}}),p.createElement(It.b.Item,{title:"Master Log",left:function(){return p.createElement(It.b.Icon,{color:"#000",icon:"parachute"})},description:"View historic data for daily operations",onPress:function(){return e.navigate("DropzoneMasterLogScreen")}})),p.createElement(It.b.Section,{title:"Tickets",style:{width:"100%"}},p.createElement(It.b.Item,{title:"Ticket types",onPress:function(){return e.navigate("TicketTypesScreen")},left:function(){return p.createElement(It.b.Icon,{color:"#000",icon:"ticket"})},description:"Manage ticket prices and accessibility"}),p.createElement(It.b.Item,{title:"Ticket add-ons",onPress:function(){return e.navigate("ExtrasScreen")},left:function(){return p.createElement(It.b.Icon,{color:"#000",icon:"plus"})},description:"Supplementary tickets like coach, camera, night jumpi"})))}var xi,Si=t(418),ki=Object(Wn.a)(xi||(xi=Bn()(["\n  query QueryExtras($dropzoneId: Int!) {\n    extras(dropzoneId: $dropzoneId) {\n      id\n      cost\n      name\n\n      ticketTypes {\n        id\n        name\n      }\n    }\n  }\n"]))),Ci={14e3:"Height",4e3:"Hop n Pop"};function zi(){var e,n,t,r,l,a=rn((function(e){return e.forms.ticketType})),o=tn(),i=tt(),s=p.useState(!1),u=W()(s,2),c=u[0],d=u[1],m=Object(F.useQuery)(ki,{variables:{dropzoneId:Number(null==i||null==(e=i.dropzone)?void 0:e.id)}}).data;return p.createElement(p.Fragment,null,p.createElement(Ir.a,{style:ji.field,mode:"outlined",label:"Name",error:!!a.fields.name.error,value:a.fields.name.value||"",onChangeText:function(e){return o(Ze.forms.ticketType.setField(["name",e]))}}),p.createElement(gl.a,{type:a.fields.name.error?"error":"info"},a.fields.name.error||"Name of the ticket users will see"),p.createElement(Ir.a,{style:ji.field,mode:"outlined",label:"Price",error:!!a.fields.cost.error,value:null==(n=a.fields.cost)||null==(t=n.value)?void 0:t.toString(),onChangeText:function(e){return o(Ze.forms.ticketType.setField(["cost",Number(e)]))}}),p.createElement(gl.a,{type:a.fields.cost.error?"error":"info"},a.fields.cost.error||"Base cost without extra ticket addons"),p.createElement(S.a,{style:{width:"100%"}},p.createElement(it.a,{onDismiss:function(){return d(!1)},visible:c,style:{position:"absolute",right:"10%",left:"10%",flex:1},anchor:p.createElement(It.b.Item,{onPress:function(){d(!0)},title:a.fields.altitude.value&&a.fields.altitude.value.toString()in Ci?Ci[a.fields.altitude.value.toString()]:"Custom",style:{width:"100%",flex:1},right:function(){return p.createElement(It.b.Icon,{icon:a.fields.altitude.value&&a.fields.altitude.value.toString()in Ci?Ci[a.fields.altitude.value.toString()]:"pencil-plus"})}})},p.createElement(It.b.Item,{onPress:function(){o(Ze.forms.ticketType.setField(["altitude",4e3])),d(!1)},title:"Hop n Pop",right:function(){return p.createElement(It.b.Icon,{icon:"parachute"})}}),p.createElement(It.b.Item,{onPress:function(){o(Ze.forms.ticketType.setField(["altitude",14e3])),d(!1)},title:"Height",right:function(){return p.createElement(It.b.Icon,{icon:"airplane-takeoff"})}}),p.createElement(It.b.Item,{onPress:function(){o(Ze.forms.ticketType.setField(["altitude",7e3])),d(!1)},title:"Other",right:function(){return p.createElement(It.b.Icon,{icon:"parachute"})}})),(!a.fields.altitude.value||![4e3,14e3].includes(a.fields.altitude.value))&&p.createElement(Ir.a,{style:ji.field,mode:"outlined",label:"Custom altitude",error:!!a.fields.altitude.error,value:null==(r=a.fields.altitude)||null==(l=r.value)?void 0:l.toString(),onChangeText:function(e){return o(Ze.forms.ticketType.setField(["altitude",Number(e)]))}}),p.createElement(Gl.a.Item,{label:"Tandem",style:{width:"100%"},status:a.fields.isTandem.value?"checked":"unchecked",onPress:function(){return o(Ze.forms.ticketType.setField(["isTandem",!a.fields.isTandem.value]))}}),p.createElement(gl.a,{type:a.fields.isTandem.error?"error":"info"},a.fields.isTandem.error||"Allow also manifesting a passenger when using this ticket type"),p.createElement(Gl.a.Item,{label:"Public manifesting",style:{width:"100%"},status:a.fields.allowManifestingSelf.value?"checked":"unchecked",onPress:function(){return o(Ze.forms.ticketType.setField(["allowManifestingSelf",!a.fields.allowManifestingSelf.value]))}}),p.createElement(gl.a,{type:a.fields.allowManifestingSelf.error?"error":"info"},a.fields.allowManifestingSelf.error||"Allow users to manifest themselves with this ticket"),p.createElement(_t.a,null),p.createElement(It.b.Subheader,null,"Enabled ticket add-ons"),null==m?void 0:m.extras.map((function(e){var n;return p.createElement(Gl.a.Item,{key:"extra-"+e.id,label:e.name||"",status:null!=(n=a.fields.extras.value)&&n.map((function(e){return e.id})).includes(e.id)?"checked":"unchecked",onPress:function(){var n,t,r;return o(Ze.forms.ticketType.setField(["extras",null!=(n=a.fields.extras.value)&&n.map((function(e){return e.id})).includes(e.id)?null==(t=a.fields.extras.value)?void 0:t.filter((function(n){return n.id!==e.id})):[].concat(Ft()(null==(r=a.fields.extras)?void 0:r.value),[e])]))}})}))))}var Ii,Oi,ji=O.a.create({field:{marginBottom:8,width:"100%"}});function Ti(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Pi(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ti(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ti(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Fi,Di,$i,Ni=Object(F.gql)(Ii||(Ii=Bn()(["\n  mutation CreateTicketType(\n    $name: String\n    $cost: Float\n    $dropzoneId: Int!\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n    $isTandem: Boolean\n  ) {\n    createTicketType(\n      input: {\n        attributes: {\n          name: $name\n          cost: $cost\n          dropzoneId: $dropzoneId\n          altitude: $altitude\n          allowManifestingSelf: $allowManifestingSelf\n          isTandem: $isTandem\n        }\n      }\n    ) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n\n        dropzone {\n          id\n\n          ticketTypes {\n            id\n            name\n            altitude\n            cost\n            allowManifestingSelf\n            extras {\n              id\n              name\n              cost\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),Ai=Object(F.gql)(Oi||(Oi=Bn()(["\n  mutation UpdateTicketType(\n    $id: Int!\n    $name: String\n    $cost: Float\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n    $isTandem: Boolean\n  ) {\n    updateTicketType(\n      input: {\n        id: $id\n        attributes: {\n          name: $name\n          cost: $cost\n          altitude: $altitude\n          allowManifestingSelf: $allowManifestingSelf\n          isTandem: $isTandem\n        }\n      }\n    ) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n\n        dropzone {\n          id\n\n          ticketTypes {\n            id\n            name\n            altitude\n            cost\n            allowManifestingSelf\n            extras {\n              id\n              name\n              cost\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Ri(e){var n,t,r,a=e.open,o=e.onClose,i=rn((function(e){return e.forms.ticketType})),s=tn(),u=tt(),c=Object(F.useMutation)(Ni),d=W()(c,2),m=d[0],f=d[1],g=Object(F.useMutation)(Ai),v=W()(g,2),b=v[0],h=v[1],y=Object(An.useIsFocused)();p.useEffect((function(){y&&s(Ze.forms.ticketType.reset())}),[s,y]);var E=p.useCallback((function(){var e=!1;return(!i.fields.name.value||i.fields.name.value.length<3)&&(e=!0,s(Ze.forms.ticketType.setFieldError(["name","Name is too short"]))),(i.fields.cost.value||0)<1&&(e=!0,s(Ze.forms.ticketType.setFieldError(["cost","Cost must be at least $1"]))),i.fields.altitude.value||(e=!0,s(Ze.forms.ticketType.setFieldError(["altitude","Altitude must be specified"]))),!e}),[i.fields,s]),w=p.useCallback((function(){var e,n,t,r,a,c,d,f,p,g,v,h,y,w,x,S,k,C,z,I;return l.a.async((function(O){for(;;)switch(O.prev=O.next){case 0:if(e=i.fields,n=e.name,t=e.cost,r=e.allowManifestingSelf,a=e.altitude,c=e.extras,d=e.isTandem,!E()){O.next=19;break}return O.prev=2,k=null!=(f=i.original)&&f.id?b:m,O.next=6,l.a.awrap(k({variables:Pi(Pi({},null!=(p=i.original)&&p.id?{id:Number(null==(g=i.original)?void 0:g.id)}:{dropzoneId:Number(null==u||null==(v=u.dropzone)?void 0:v.id)}),{},{name:n.value,cost:t.value,altitude:a.value,allowManifestingSelf:r.value,extraIds:null==c||null==(h=c.value)?void 0:h.map((function(e){return e.id})),isTandem:!!d.value})}));case 6:if(C=O.sent,null==(z=null!=i&&null!=(y=i.original)&&y.id?null==C||null==(w=C.data)?void 0:w.updateTicketType:null==C||null==(x=C.data)?void 0:x.createTicketType)||!z.fieldErrors){O.next=10;break}return O.abrupt("return",null==z||null==(I=z.fieldErrors)?void 0:I.map((function(e){var n=e.field,t=e.message;switch(n){case"name":return s(Ze.forms.ticketType.setFieldError(["name",t]));case"altitude":return s(Ze.forms.ticketType.setFieldError(["altitude",t]));case"cost":return s(Ze.forms.ticketType.setFieldError(["cost",t]));case"allow_manifesting_self":return s(Ze.forms.ticketType.setFieldError(["allowManifestingSelf",t]));case"extras":return s(Ze.forms.ticketType.setFieldError(["extras",t]));default:return null}})));case 10:if(null==z||null==(S=z.errors)||!S.length){O.next=13;break}return o(),O.abrupt("return",s(Ze.notifications.showSnackbar({message:null==z?void 0:z.errors[0],variant:"error"})));case 13:null!=z&&z.ticketType&&(s(Ze.notifications.showSnackbar({message:"Saved",variant:"success"})),s(Ze.forms.ticketType.reset()),o()),O.next=19;break;case 16:O.prev=16,O.t0=O.catch(2),s(Ze.notifications.showSnackbar({message:O.t0.message,variant:"error"}));case 19:return O.abrupt("return",null);case 20:case"end":return O.stop()}}),null,null,[[2,16]],Promise)}),[i.fields,null==(n=i.original)?void 0:n.id,E,b,m,null==u||null==(t=u.dropzone)?void 0:t.id,s,o]);return p.createElement(za,{title:null!=(r=i.original)&&r.id?"Edit ticket":"New ticket",open:a,snapPoints:[550,650],onClose:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){o()})),loading:f.loading||h.loading,buttonAction:w,buttonLabel:"Save"},p.createElement(zi,null))}var Ui=Object(Wn.a)(Fi||(Fi=Bn()(["\n  query QueryTicketType($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      ticketTypes {\n        id\n        cost\n        currency\n        name\n        altitude\n        allowManifestingSelf\n\n        extras {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),Li=Object(Wn.a)(Di||(Di=Bn()(["\n  mutation UpdateTicketTypePublic($id: Int!, $allowManifestingSelf: Boolean) {\n    updateTicketType(\n      input: { id: $id, attributes: { allowManifestingSelf: $allowManifestingSelf } }\n    ) {\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        isTandem\n        extras {\n          id\n          name\n          cost\n        }\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n"]))),Bi=Object(Wn.a)($i||($i=Bn()(["\n  mutation DeleteTicketType($id: Int!) {\n    deleteTicketType(input: { id: $id }) {\n      ticketType {\n        id\n        dropzone {\n          id\n          ticketTypes {\n            id\n            cost\n            currency\n            name\n            altitude\n            allowManifestingSelf\n\n            extras {\n              id\n              name\n            }\n          }\n        }\n      }\n      errors\n    }\n  }\n"])));function Mi(){var e,n,t=rn((function(e){return e.global})),r=rn((function(e){return e.forms.ticketType})),a=tn(),o=Object(F.useQuery)(Ui,{variables:{dropzoneId:Number(t.currentDropzoneId)}}),i=o.data,s=o.loading,u=o.refetch,c=Object(An.useRoute)(),d=Object(An.useIsFocused)();p.useEffect((function(){d&&u()}),[d,u]);var m=Object(F.useMutation)(Li),f=W()(m,1)[0],g=Object(F.useMutation)(Bi),v=W()(g,1)[0];p.useEffect((function(){"TicketTypesScreen"===c.name&&u()}),[u,c.name]);var b=ct(lt.CreateTicketType);return p.createElement(vr,{style:Wi.container,contentContainerStyle:[Wi.content,{backgroundColor:"white"}],refreshControl:p.createElement(Dn.a,{refreshing:s,onRefresh:u})},p.createElement(h.a,{visible:s,color:t.theme.colors.accent}),p.createElement(ca.a,null,p.createElement(ca.a.Header,null,p.createElement(ca.a.Title,null,"Name"),p.createElement(ca.a.Title,{numeric:!0},"Cost"),p.createElement(ca.a.Title,{numeric:!0},"Altitude"),p.createElement(ca.a.Title,{numeric:!0},"Public")),null==i||null==(e=i.dropzone)||null==(n=e.ticketTypes)?void 0:n.map((function(e){return p.createElement(fa,{rightAction:{label:"Delete",backgroundColor:"red",onPress:function(){var n,t,r,o,i;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,l.a.awrap(v({variables:{id:Number(e.id)}}));case 2:r=s.sent,null!=(o=r.data)&&null!=(n=o.deleteTicketType)&&null!=(t=n.errors)&&t.length&&a(Ze.notifications.showSnackbar({message:null==o||null==(i=o.deleteTicketType)?void 0:i.errors[0],variant:"error"}));case 5:case"end":return s.stop()}}),null,null,null,Promise)}}},p.createElement(ca.a.Row,{onPress:function(){a(Ze.forms.ticketType.setOpen(e))},pointerEvents:"none"},p.createElement(ca.a.Cell,null,e.name),p.createElement(ca.a.Cell,{numeric:!0},"$",e.cost),p.createElement(ca.a.Cell,{numeric:!0},e.altitude),p.createElement(ca.a.Cell,{numeric:!0},p.createElement(Si.a,{onValueChange:function(){f({variables:{id:Number(e.id),allowManifestingSelf:!e.allowManifestingSelf}})},value:!!e.allowManifestingSelf}))))}))),p.createElement($t.a,{style:Wi.fab,small:!0,visible:b,icon:"plus",onPress:function(){return a(Ze.forms.ticketType.setOpen(!0))},label:"New ticket type"}),p.createElement(Ri,{open:r.open,onClose:function(){return a(Ze.forms.ticketType.setOpen(!1))}}))}var Wi=O.a.create({container:{flex:1,display:"flex"},content:{flexGrow:1},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),Vi=t(504),Hi=t(91),Gi=t(681),qi=t(498),Qi=t(150),Yi=t.n(Qi);function _i(e){var n=e.value,t=e.onChange,r=e.open,l=e.onClose,a=p.useRef();return p.createElement(Dt.a,null,p.createElement(pl.a,{visible:!!r,onDismiss:function(){return l()}},p.createElement(pl.a.Title,null,"Custom color"),p.createElement(pl.a.Content,{style:{padding:20,height:400}},p.createElement(qi.a,{style:{flex:1},sliderComponent:Yi.a,defaultColor:n,hideSliders:!0,ref:a})),p.createElement(pl.a.Actions,null,p.createElement(pr.a,{onPress:function(){return l()}},"Cancel"),p.createElement(pr.a,{onPress:function(){var e;a.current&&t(null==(e=a.current)?void 0:e.getColor())}},"Save"))))}var Ji=["#000000","#AAAAAA","#DDDDDD","#FF1414","#D6116B","#B70E97","#6718AC","#1E47AB","#11839E","#0DA583","#10C626","#92EA12","#FF8B14","#FFB214"];var Zi=O.a.create({container:{paddingHorizontal:48,alignItems:"center"},field:{marginBottom:8},content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},card:{padding:8,marginVertical:16,height:200},title:{color:"white",fontSize:24,fontWeight:"bold",marginBottom:10,textAlign:"center"},colorBox:{height:25,width:25,margin:5,alignItems:"center",justifyContent:"center"}}),Xi=function(e){var n=e.value,t=e.title,r=e.helperText,l=e.onChange,a=e.error,o=!Ji.includes(n),i=p.useState(!1),s=W()(i,2),u=s[0],c=s[1];return p.createElement(p.Fragment,null,p.createElement(_i,{open:u,value:n,onChange:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){l(e),c(!1)})),onClose:function(){return c(!1)}}),p.createElement(Nn.a,{style:Zi.card},p.createElement(It.b.Subheader,null,t),p.createElement(Nn.a.Content,{style:{flexDirection:"row",flexWrap:"wrap"}},Ji.map((function(e){return p.createElement(Ko.a,{onPress:function(){return l(e)}},p.createElement(Hi.a,{style:[Zi.colorBox,{backgroundColor:e},e===n?{borderWidth:2,borderColor:"black"}:{}]},null))})),p.createElement(Ko.a,{onPress:function(){return c(!0)}},p.createElement(Hi.a,{style:[Zi.colorBox,{backgroundColor:o?n:"#FFFFFF"},o?{borderWidth:2,borderColor:"black"}:{}]},p.createElement(Gi.a,{name:"add",size:1})))),p.createElement(gl.a,{type:a?"error":"info"},a||r)))};var Ki=O.a.create({label:{fontWeight:"bold",textAlign:"center",color:"white",fontSize:16,marginTop:8},previewContainer:{height:200,width:100,borderRadius:5,borderWidth:O.a.hairlineWidth,borderColor:"#CCCCCC",alignSelf:"center"},previewAppBar:{width:"100%",height:"8.5%",backgroundColor:"#DDDDDD",position:"absolute",top:0,borderTopRightRadius:5,borderTopLeftRadius:5},previewTabBar:{width:"100%",height:"8.5%",backgroundColor:"#DDDDDD",position:"absolute",bottom:0,borderBottomRightRadius:5,borderBottomLeftRadius:5},previewLoadCard:{width:"96%",borderRadius:2,height:"20%",marginVertical:"2%",marginHorizontal:"2%",backgroundColor:"#DDDDDD",position:"absolute",top:"15%"},previewLoadCard2:{width:"96%",height:"20%",borderRadius:2,backgroundColor:"#DDDDDD",marginVertical:"2%",marginHorizontal:"2%",position:"absolute",top:"37%"},previewLoadCard3:{width:"96%",height:"20%",borderRadius:2,marginVertical:"2%",backgroundColor:"#DDDDDD",marginHorizontal:"2%",position:"absolute",top:"59%"},previewButton:{width:"35%",height:"6%",position:"absolute",bottom:22,right:5,borderRadius:5,backgroundColor:"#DDDDDD"},colorBox:{height:25,width:25,margin:5}}),es=function(e){var n=e.primaryColor,t=e.secondaryColor;return p.createElement(S.a,null,p.createElement(Hi.a,{style:Ki.previewContainer},p.createElement(S.a,{style:[Ki.previewAppBar,{backgroundColor:n}]}),p.createElement(S.a,{style:[Ki.previewLoadCard]}),p.createElement(S.a,{style:[Ki.previewLoadCard2]}),p.createElement(S.a,{style:[Ki.previewLoadCard3]}),p.createElement(S.a,{style:[Ki.previewButton,{backgroundColor:t}]}),p.createElement(S.a,{style:[Ki.previewTabBar,{backgroundColor:n}]})),p.createElement(kn.a,{style:Ki.label},"Phone"))};var ns=O.a.create({label:{fontWeight:"bold",textAlign:"center",color:"white",fontSize:16,marginTop:8},previewContainer:{height:100,width:170,borderRadius:5,borderWidth:O.a.hairlineWidth,borderColor:"#CCCCCC",alignSelf:"center"},previewAppBar:{width:"100%",height:"8.5%",backgroundColor:"#DDDDDD",position:"absolute",top:0,borderTopRightRadius:5,borderTopLeftRadius:5},previewTabBar:{width:"100%",height:"8.5%",backgroundColor:"#DDDDDD",position:"absolute",bottom:0,borderBottomRightRadius:5,borderBottomLeftRadius:5},previewLoadCard:{width:"30%",height:"60%",marginVertical:"2%",backgroundColor:"#DDDDDD",position:"absolute",top:"15%",left:"2%"},previewLoadCard2:{width:"30%",height:"60%",backgroundColor:"#DDDDDD",marginVertical:"2%",position:"absolute",top:"15%",left:"35%"},previewLoadCard3:{width:"30%",height:"60%",marginVertical:"2%",backgroundColor:"#DDDDDD",position:"absolute",top:"15%",left:"68%"},previewButton:{width:"12%",height:"6%",position:"absolute",bottom:15,right:8,borderRadius:5,backgroundColor:"#DDDDDD"},colorBox:{height:25,width:25,margin:5}}),ts=function(e){var n=e.primaryColor,t=e.secondaryColor;return p.createElement(S.a,null,p.createElement(Hi.a,{style:ns.previewContainer},p.createElement(S.a,{style:[ns.previewAppBar,{backgroundColor:n}]}),p.createElement(S.a,{style:[ns.previewLoadCard]}),p.createElement(S.a,{style:[ns.previewLoadCard2]}),p.createElement(S.a,{style:[ns.previewLoadCard3]}),p.createElement(S.a,{style:[ns.previewButton,{backgroundColor:t}]}),p.createElement(S.a,{style:[ns.previewTabBar,{backgroundColor:n}]})),p.createElement(kn.a,{style:ns.label},"Web"))};function rs(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ls(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?rs(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):rs(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var as,os=O.a.create({container:{paddingHorizontal:48,alignItems:"center",backgroundColor:"transparent"},title:{position:"absolute",fontSize:30,top:140,fontWeight:"bold",color:"white",left:0,paddingLeft:10,width:"100%",paddingBottom:40,textAlign:"center",textShadowColor:"rgba(15, 15, 15, 0.5)",textShadowRadius:10,textShadowOffset:{width:2,height:2}},markerFixed:ls(ls({},O.a.absoluteFillObject),{},{justifyContent:"center",alignItems:"center",flexDirection:"column"}),content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},card:{padding:0,paddingVertical:16,marginVertical:16,width:"100%"},myLocation:{position:"absolute",bottom:30,right:30,backgroundColor:"white",borderRadius:50,padding:8}}),is=function(e){var n=e.markerSize,t=e.labelSize,r=e.value,a=p.useState(),o=W()(a,2),i=o[0],s=o[1],u=p.useCallback((function(){var e,n;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(Lr.b());case 3:if(e=t.sent,"granted"===e.status){t.next=7;break}return t.abrupt("return");case 7:return t.next=9,l.a.awrap(Lr.a({}));case 9:n=t.sent,console.log("user location",n.coords),s({lat:n.coords.latitude,lng:n.coords.longitude}),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(0),console.log(t.t0);case 17:case"end":return t.stop()}}),null,null,[[0,14]],Promise)}),[]);p.useEffect((function(){null!==r.lng&&null!=r.lng||u()}),[u,r.lng]);var c=p.useRef(new Wt.a.Value(0)),d=r.lng&&r.lng?{lat:r.lat,lng:r.lng}:void 0,m=p.useState(!1),f=W()(m,2),g=f[0],v=f[1],b=p.useRef(Wt.a.timing(c.current,{duration:100,toValue:0,useNativeDriver:!0})),h=p.useRef(Wt.a.timing(c.current,{duration:100,toValue:1,useNativeDriver:!0})),y=p.useCallback((function(e){v(!0),(e?h:b).current.start((function(){return v(!1)}))}),[]),E=p.useState(!1),w=W()(E,2),x=w[0],k=w[1];return p.createElement(Yr,{defaultZoom:3,position:{x:0,y:0},width:"100%",height:"100%",mapStyle:ls(ls({},O.a.absoluteFillObject),{},{marginTop:-50}),coords:d,center:i||d,onDragStart:function(){g||(y(!1),k(!0))},onDragEnd:function(n){var t,r;null==(t=b.current)||t.stop(),null==(r=h.current)||r.stop(),v(!1),y(!0),y(!0),k(!1),e.onChange({longitude:n.lng,latitude:n.lat})},interactive:!0},d?p.createElement(S.a,{style:os.markerFixed,pointerEvents:"none"},p.createElement(Pn.a,{pointerEvents:"none",size:n||60,style:{color:"#ffffff",textShadowColor:"rgba(14,14,14,0.8)",textShadowOffset:{width:5,height:5},textShadowRadius:10,zIndex:10},name:x?"map-marker":"map-marker-check-outline"}),p.createElement(Wt.a.Text,{style:{fontSize:t||30,position:"absolute",bottom:"30%",width:"100%",opacity:c.current,textAlign:"center",color:"#ffffff",textShadowColor:"rgba(14,14,14,0.8)",textShadowOffset:{width:3,height:3},textShadowRadius:10}},d.lat.toFixed(5),",",d.lng.toFixed(5))):null,p.createElement(Cn.a,{style:os.myLocation,onPress:function(){u()}},p.createElement(Gi.a,{name:"my-location",size:20})))},ss=Object(F.gql)(as||(as=Bn()(["\n  query QueryFederations {\n    federations {\n      id\n      name\n    }\n  }\n"])));function us(e){var n,t=e.loading,r=rn((function(e){return e.forms.dropzone})),a=tn(),o=Object(F.useQuery)(ss),i=o.data,s=o.loading;p.useEffect((function(){var e,n;null==i||null==(e=i.federations)||!e.length||null!=(n=r.fields.federation)&&n.value||a(Ze.forms.dropzone.setField(["federation",i.federations[0]]))}),[null==i?void 0:i.federations,a,null==(n=r.fields.federation)?void 0:n.value]);var u=p.useCallback((function(){var e;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.a.awrap(Object(Vi.a)({multiple:!1,type:"image"}));case 3:e=n.sent,a(Ze.forms.dropzone.setField(["banner",e.uri])),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),console.log(n.t0);case 10:case"end":return n.stop()}}),null,null,[[0,7]],Promise)}),[a]);return console.log(r.fields),p.createElement(p.Fragment,null,p.createElement(Un.a,{isLoading:s||t,containerStyle:ms.skeletonCard,layout:[{key:"box",height:300,width:"100%"}]},p.createElement(Nn.a,{style:ms.card},p.createElement(Nn.a.Title,{title:"Banner"}),p.createElement(Nn.a.Cover,{source:{uri:r.fields.banner.value||"https://picsum.photos/700"},resizeMode:"cover",style:{width:"100%"}}),p.createElement(Nn.a.Actions,{style:{justifyContent:"flex-end"}},p.createElement(pr.a,{onPress:u},"Upload")))),p.createElement(Un.a,{isLoading:s||t,containerStyle:ms.skeletonCard,layout:[{key:"box",height:300,width:"100%"}]},p.createElement(Nn.a,{style:ms.card},p.createElement(It.b.Subheader,null,"Name"),p.createElement(Ir.a,{mode:"outlined",error:!!r.fields.name.error,value:r.fields.name.value||"",onChangeText:function(e){return a(Ze.forms.dropzone.setField(["name",e]))}}),p.createElement(gl.a,{type:"error"},r.fields.name.error||""),p.createElement(Qo,{value:r.fields.federation.value,onSelect:function(e){return a(Ze.forms.dropzone.setField(["federation",e]))}}),p.createElement(gl.a,{type:r.fields.federation.error?"error":"info"},r.fields.federation.error||""))),p.createElement(Un.a,{isLoading:s||t,containerStyle:ms.skeletonCard,layout:[{key:"box",height:300,width:"100%"}]},p.createElement(Nn.a,{style:[ms.card,{height:500,paddingHorizontal:0}]},p.createElement(It.b.Subheader,null,"Location"),p.createElement(Nn.a.Content,{style:{marginTop:50,paddingBottom:50,paddingLeft:0,paddingRight:0,flexGrow:1}},p.createElement(is,{value:r.fields.lat.value&&r.fields.lng.value?{lat:r.fields.lat.value,lng:r.fields.lng.value}:void 0,onChange:function(e){a(Ze.forms.dropzone.setField(["lat",e.latitude])),a(Ze.forms.dropzone.setField(["lng",e.longitude]))}})))),p.createElement(Un.a,{isLoading:s||t,containerStyle:ms.skeletonCard,layout:[{key:"box",height:300,width:"100%"}]},p.createElement(Nn.a,{style:ms.card},p.createElement(Nn.a.Title,{title:"Branding"}),p.createElement(Nn.a.Content,{style:{flexDirection:"row",justifyContent:"space-evenly",alignItems:"flex-end",width:"100%"}},p.createElement(es,{primaryColor:r.fields.primaryColor.value||"#000000",secondaryColor:r.fields.secondaryColor.value||"#FFFFFF"}),p.createElement(ts,{primaryColor:r.fields.primaryColor.value||"#000000",secondaryColor:r.fields.secondaryColor.value||"#FFFFFF"})))),p.createElement(Un.a,{isLoading:s||t,containerStyle:ms.skeletonCardColorPicker,layout:[{key:"box",height:200,width:"100%"}]},p.createElement(Xi,{title:"Primary color",helperText:"Primary color is used for elements like the title bar and the tab bar",error:r.fields.primaryColor.error||null,onChange:function(e){return a(Ze.forms.dropzone.setField(["primaryColor",e]))},value:r.fields.primaryColor.value||"#000000"})),p.createElement(Un.a,{isLoading:s||t,containerStyle:ms.skeletonCardColorPicker,layout:[{key:"box",height:200,width:"100%"}]},p.createElement(Xi,{title:"Accent color",helperText:"Accent color is used for highlights, like buttons and loading bars",error:r.fields.secondaryColor.error,onChange:function(e){return a(Ze.forms.dropzone.setField(["secondaryColor",e]))},value:r.fields.secondaryColor.value||"#FFFFFF"})),p.createElement(Un.a,{isLoading:s||t,containerStyle:ms.skeletonCardCheckbox,layout:[{key:"box",height:150,width:"100%"}]},p.createElement(Nn.a,{style:ms.card},p.createElement(It.b.Item,{title:"Use credit system",description:"Users will be charged credits when a load is marked as landed and can't manifest with insufficient funds.",onPress:function(){return a(Ze.forms.dropzone.setField(["isCreditSystemEnabled",!r.fields.isCreditSystemEnabled.value]))},left:function(){return p.createElement(Gl.a,{onPress:function(){return a(Ze.forms.dropzone.setField(["isCreditSystemEnabled",!r.fields.isCreditSystemEnabled.value]))},status:r.fields.isCreditSystemEnabled.value?"checked":"unchecked"})}}))),p.createElement(Un.a,{isLoading:s||t,containerStyle:ms.skeletonCardCheckbox,layout:[{key:"box",height:150,width:"100%"}]},p.createElement(Nn.a,{style:ms.card},p.createElement(It.b.Item,{title:"Public",description:"Your dropzone will not be available in the app if this is disabled",onPress:function(){return a(Ze.forms.dropzone.setField(["isPublic",!r.fields.isPublic.value]))},left:function(){return p.createElement(Gl.a,{onPress:function(){return a(Ze.forms.dropzone.setField(["isPublic",!r.fields.isPublic.value]))},status:r.fields.isPublic.value?"checked":"unchecked"})}}))))}var cs,ds,ms=O.a.create({skeletonCard:{marginVertical:16,width:"100%"},skeletonCardColorPicker:{marginVertical:16,minHeight:200,width:"100%"},skeletonCardCheckbox:{minHeight:200,marginVertical:16,width:"100%"},card:{padding:16,width:"100%"},fields:{flexGrow:1,display:"flex",width:"100%"},field:{marginBottom:8,width:"100%"},subheader:{paddingLeft:0}});function fs(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ps(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?fs(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):fs(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var gs=Object(F.gql)(cs||(cs=Bn()(["\n  query QueryDropzoneDetails($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n      primaryColor\n      secondaryColor\n      lat\n      lng\n      planes {\n        id\n        name\n        registration\n      }\n      ticketTypes {\n        id\n        name\n      }\n    }\n  }\n"]))),vs=Object(F.gql)(ds||(ds=Bn()(["\n  mutation UpdateDropzone(\n    $id: Int!\n    $name: String!\n    $banner: String\n    $lat: Float\n    $lng: Float\n    $federationId: Int!\n    $primaryColor: String\n    $secondaryColor: String\n    $isCreditSystemEnabled: Boolean\n    $isPublic: Boolean\n  ) {\n    updateDropzone(\n      input: {\n        id: $id\n        attributes: {\n          name: $name\n          banner: $banner\n          lat: $lat\n          lng: $lng\n          federationId: $federationId\n          primaryColor: $primaryColor\n          secondaryColor: $secondaryColor\n          isCreditSystemEnabled: $isCreditSystemEnabled\n          isPublic: $isPublic\n        }\n      }\n    ) {\n      dropzone {\n        id\n        name\n        banner\n        primaryColor\n        secondaryColor\n        isCreditSystemEnabled\n        lat\n        lng\n\n        planes {\n          id\n          name\n        }\n\n        federation {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function bs(){var e,n=rn((function(e){return e.forms.dropzone})),t=rn((function(e){return e.global})),r=tn(),a=Object(An.useRoute)().params.dropzone,o=Object(An.useNavigation)(),i=Object(F.useQuery)(gs,{variables:{dropzoneId:Number(a.id)}}),s=i.data,u=i.loading;p.useEffect((function(){var e;null!=s&&null!=(e=s.dropzone)&&e.id&&(console.log("dz",s.dropzone),r(Ze.forms.dropzone.setOpen(s.dropzone)))}),[null==s?void 0:s.dropzone,null==s||null==(e=s.dropzone)?void 0:e.id,r]);var c=Object(F.useMutation)(vs),d=W()(c,2),m=d[0],f=d[1],g=p.useCallback((function(){var e,i,s,u,c,d,f,p,g,v,b,h,y,E,w,x,S,k,C,z,I,O,j,T,P,F,D,$,N,A;return l.a.async((function(R){for(;;)switch(R.prev=R.next){case 0:if(s=!1,u=n.fields,c=u.name,d=u.banner,f=u.federation,p=u.lat,g=u.lng,v=u.primaryColor,b=u.secondaryColor,h=u.isCreditSystemEnabled,y=u.isPublic,(null==(e=c.value)||!e.length||(null==(i=c.value)?void 0:i.length)<3)&&(s=!0,r(Ze.forms.dropzone.setFieldError(["name","Name is too short"]))),s){R.next=18;break}return R.prev=4,R.next=7,l.a.awrap(m({variables:{id:Number(null==a?void 0:a.id),name:c.value,lat:p.value,lng:g.value,banner:d.value||null,primaryColor:v.value,secondaryColor:b.value,federationId:Number(null==f||null==(E=f.value)?void 0:E.id),isCreditSystemEnabled:!!h,isPublic:!!y}}));case 7:if(null==(T=R.sent)||null==(w=T.data)||null==(x=w.updateDropzone)||null==(S=x.fieldErrors)||S.map((function(e){var n=e.field,t=e.message;switch(n){case"federation":case"federation_id":return r(Ze.forms.dropzone.setFieldError(["federation",t]));case"banner":return r(Ze.forms.dropzone.setFieldError(["banner",t]));case"primary_color":return r(Ze.forms.dropzone.setFieldError(["primaryColor",t]));case"secondary_color":return r(Ze.forms.dropzone.setFieldError(["secondaryColor",t]));case"is_credit_system_enabled":return r(Ze.forms.dropzone.setFieldError(["isCreditSystemEnabled",t]));case"name":return r(Ze.forms.dropzone.setFieldError(["name",t]));case"is_public":return r(Ze.forms.dropzone.setFieldError(["isPublic",t]));default:return null}})),null==T||null==(k=T.data)||null==(C=k.updateDropzone)||null==(z=C.errors)||!z.length){R.next=11;break}return R.abrupt("return",r(Ze.notifications.showSnackbar({message:null==T||null==(P=T.data)||null==(F=P.updateDropzone)?void 0:F.errors[0],variant:"error"})));case 11:return null!=T&&null!=(I=T.data)&&null!=(O=I.updateDropzone)&&null!=(j=O.fieldErrors)&&j.length||null!=(D=T.data)&&null!=($=D.updateDropzone)&&$.dropzone&&(r(Ze.global.setDropzone(ps(ps({},t.currentDropzone||{}),null==T||null==(N=T.data)||null==(A=N.updateDropzone)?void 0:A.dropzone))),r(Ze.notifications.showSnackbar({message:"Saved",variant:"success"})),o.goBack()),R.abrupt("return",null);case 15:R.prev=15,R.t0=R.catch(4),r(Ze.notifications.showSnackbar({message:R.t0.message,variant:"error"}));case 18:return R.abrupt("return",null);case 19:case"end":return R.stop()}}),null,null,[[4,15]],Promise)}),[n.fields,r,m,null==a?void 0:a.id,t.currentDropzone,o]);return p.createElement(p.Fragment,null,p.createElement(h.a,{indeterminate:!0,color:t.theme.colors.accent,visible:u}),p.createElement(vr,{style:{backgroundColor:"#f4f5f5"},contentContainerStyle:hs.content},p.createElement(us,{loading:u}),p.createElement(zt,{style:hs.fields},p.createElement(pr.a,{mode:"contained",disabled:f.loading,onPress:g,loading:f.loading},"Save"))))}var hs=O.a.create({container:{flex:1,backgroundColor:"white",display:"flex"},content:{display:"flex",flexGrow:1,alignSelf:"center",alignItems:"center",width:"100%",maxWidth:500,padding:48},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"100%",marginBottom:16},field:{marginBottom:8}});function ys(){var e,n,t,r,l=rn((function(e){return e.forms.plane})),a=tn();return p.createElement(p.Fragment,null,p.createElement(Ir.a,{style:xs.field,mode:"outlined",label:"Name",error:!!l.fields.name.error,value:l.fields.name.value,onChangeText:function(e){return a(Ze.forms.plane.setField(["name",e]))}}),p.createElement(gl.a,{type:l.fields.name.error?"error":"info"},l.fields.name.error||""),p.createElement(Ir.a,{style:xs.field,mode:"outlined",label:"Registration",error:!!l.fields.registration.error,value:l.fields.registration.value,onChangeText:function(e){return a(Ze.forms.plane.setField(["registration",e]))}}),p.createElement(gl.a,{type:l.fields.registration.error?"error":"info"},l.fields.registration.error||""),p.createElement(Ir.a,{style:xs.field,mode:"outlined",label:"hours",error:!!l.fields.hours.error,value:null==(e=l.fields.hours)||null==(n=e.value)?void 0:n.toString(),placeholder:"Optional",onChangeText:function(e){return a(Ze.forms.plane.setField(["hours",Number(e)]))}}),p.createElement(gl.a,{type:l.fields.hours.error?"error":"info"},l.fields.hours.error||""),p.createElement(Ir.a,{style:xs.field,mode:"outlined",label:"Min slots",error:!!l.fields.minSlots.error,value:null==(t=l.fields.minSlots.value)?void 0:t.toString(),keyboardType:"number-pad",onChangeText:function(e){return a(Ze.forms.plane.setField(["minSlots",Number(e)]))}}),p.createElement(gl.a,{type:l.fields.minSlots.error?"error":"info"},l.fields.minSlots.error||"Minimum tickets required to send it"),p.createElement(Ir.a,{style:xs.field,mode:"outlined",label:"Max slots",error:!!l.fields.maxSlots.error,value:null==(r=l.fields.maxSlots)?void 0:r.value.toString(),keyboardType:"number-pad",onChangeText:function(e){return a(Ze.forms.plane.setField(["maxSlots",Number(e)]))}}),p.createElement(gl.a,{type:l.fields.maxSlots.error?"error":"info"},l.fields.maxSlots.error||"Maximum amount of jumpers who can be manifested on one load"))}var Es,ws,xs=O.a.create({fields:{width:"100%",flex:1},field:{width:"100%",marginBottom:8}});function Ss(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function ks(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ss(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ss(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Cs,zs,Is=Object(F.gql)(Es||(Es=Bn()(["\n  mutation UpdatePlane(\n    $id: Int!\n    $name: String!\n    $registration: String!\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ) {\n    updatePlane(\n      input: {\n        id: $id\n        attributes: {\n          name: $name\n          registration: $registration\n          minSlots: $minSlots\n          maxSlots: $maxSlots\n          hours: $hours\n          nextMaintenanceHours: $nextMaintenanceHours\n        }\n      }\n    ) {\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n"]))),Os=Object(F.gql)(ws||(ws=Bn()(["\n  mutation CreatePlane(\n    $name: String!\n    $registration: String!\n    $dropzoneId: Int!\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ) {\n    createPlane(\n      input: {\n        attributes: {\n          name: $name\n          registration: $registration\n          dropzoneId: $dropzoneId\n          minSlots: $minSlots\n          maxSlots: $maxSlots\n          hours: $hours\n          nextMaintenanceHours: $nextMaintenanceHours\n        }\n      }\n    ) {\n      plane {\n        ...plane\n\n        dropzone {\n          id\n          planes {\n            ...plane\n          }\n        }\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n  fragment plane on Plane {\n    id\n    name\n    registration\n    minSlots\n    maxSlots\n    hours\n    nextMaintenanceHours\n\n    dropzone {\n      id\n      name\n      planes {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n      }\n    }\n  }\n"])));function js(e){var n,t,r,a=e.open,o=e.onClose,i=tt(),s=rn((function(e){return e.forms.plane})),u=tn(),c=Object(F.useMutation)(Os),d=W()(c,2),m=d[0],f=d[1],g=Object(F.useMutation)(Is),v=W()(g,2),b=v[0],h=v[1],y=p.useCallback((function(){var e=!1;return(s.fields.name.value||"").length<3&&(e=!0,u(Ze.forms.plane.setFieldError(["name","Name is too short"]))),(s.fields.registration.value||"").length<3&&(e=!0,u(Ze.forms.plane.setFieldError(["registration","Registration is too short"]))),s.fields.maxSlots.value||(e=!0,u(Ze.forms.plane.setFieldError(["maxSlots","Max slots must be specified"]))),!e}),[u,s.fields.maxSlots.value,s.fields.name.value,s.fields.registration.value]),E=p.useCallback((function(){var e,n,t,r,a,c,d,f,p,g,v,h,E,w,x,S,k,C,z;return l.a.async((function(I){for(;;)switch(I.prev=I.next){case 0:if(n=s.fields,t=n.name,r=n.registration,a=n.maxSlots,c=n.minSlots,d=n.hours,f=n.nextMaintenanceHours,p=null!=(e=s.original)&&e.id?b:m,!y()){I.next=18;break}return I.prev=3,I.next=6,l.a.awrap(p({variables:ks(ks({},null!=(g=s.original)&&g.id?{id:Number(s.original.id)}:{dropzoneId:Number(null==i||null==(v=i.dropzone)?void 0:v.id)}),{},{name:t.value,registration:r.value,minSlots:c.value,maxSlots:a.value,hours:d.value,nextMaintenanceHours:f.value})}));case 6:if(k=I.sent,null==(C=null!=(h=s.original)&&h.id?null==k||null==(E=k.data)?void 0:E.updatePlane:null==k||null==(w=k.data)?void 0:w.createPlane)||null==(x=C.fieldErrors)||!x.length){I.next=11;break}return C.fieldErrors.forEach((function(e){var n=e.field,t=e.message;switch(n){case"max_slots":return u(Ze.forms.plane.setFieldError(["maxSlots",t]));case"name":return u(Ze.forms.plane.setFieldError(["name",t]));case"min_slots":return u(Ze.forms.plane.setFieldError(["minSlots",t]));case"hours":return u(Ze.forms.plane.setFieldError(["hours",t]));case"next_maintenance_hours":return u(Ze.forms.plane.setFieldError(["nextMaintenanceHours",t]));case"registration":return u(Ze.forms.plane.setFieldError(["registration",t]));default:return null}})),I.abrupt("return");case 11:null!=C&&null!=(S=C.errors)&&S.length&&C.errors.forEach((function(e){return u(Ze.notifications.showSnackbar({message:e,variant:"error"}))})),null!=C&&C.plane&&(z=null==C?void 0:C.plane,u(Ze.notifications.showSnackbar({message:"Added plane "+z.name,variant:"success"})),o(),u(Ze.forms.plane.reset())),I.next=18;break;case 15:I.prev=15,I.t0=I.catch(3),u(Ze.notifications.showSnackbar({message:I.t0.message,variant:"error"}));case 18:case"end":return I.stop()}}),null,null,[[3,15]],Promise)}),[null==i||null==(n=i.dropzone)?void 0:n.id,u,m,b,o,s.fields,null==(t=s.original)?void 0:t.id,y]);return p.createElement(za,{title:null!=(r=s.original)&&r.id?"Edit aircraft":"New aircraft",open:a,snapPoints:[0,580],buttonLabel:"Save",buttonAction:E,loading:f.loading||h.loading,onClose:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){o(),u(Ze.forms.plane.reset())}))},p.createElement(ys,null))}var Ts=Object(Wn.a)(Cs||(Cs=Bn()(["\n  query QueryPlanes($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      planes {\n        id\n        name\n        registration\n        hours\n        minSlots\n        maxSlots\n        nextMaintenanceHours\n        createdAt\n      }\n    }\n  }\n"]))),Ps=Object(Wn.a)(zs||(zs=Bn()(["\n  mutation DeletePlane($id: Int!) {\n    deletePlane(input: { id: $id }) {\n      errors\n      plane {\n        id\n        dropzone {\n          id\n          planes {\n            name\n            registration\n            hours\n            minSlots\n            maxSlots\n            nextMaintenanceHours\n            createdAt\n          }\n        }\n      }\n    }\n  }\n"])));function Fs(){var e,n,t,r,a,o,i=rn((function(e){return e.global})),s=rn((function(e){return e.forms.plane})),u=Object(F.useQuery)(Ts,{variables:{dropzoneId:Number(i.currentDropzoneId)}}),c=u.data,d=u.loading,m=u.refetch,f=Object(F.useMutation)(Ps),g=W()(f,1)[0],v=tn(),b=Object(An.useIsFocused)();p.useEffect((function(){b&&m()}),[b,m]);var y=ct(lt.DeletePlane),E=ct(lt.CreatePlane);return p.createElement(p.Fragment,null,p.createElement(vr,{refreshControl:p.createElement(Dn.a,{refreshing:d,onRefresh:m})},p.createElement(h.a,{visible:d,color:i.theme.colors.accent}),null!=c&&null!=(e=c.dropzone)&&null!=(n=e.planes)&&n.length?null:p.createElement(ql,{title:"No planes?",subtitle:"You need to have at least one plane to manifest loads"}),null!=c&&null!=(t=c.dropzone)&&null!=(r=t.planes)&&r.length?p.createElement(ca.a,null,p.createElement(ca.a.Header,null,p.createElement(ca.a.Title,null,"Name"),p.createElement(ca.a.Title,{numeric:!0},"Registration"),p.createElement(ca.a.Title,{numeric:!0},"Slots")),null==c||null==(a=c.dropzone)||null==(o=a.planes)?void 0:o.map((function(e){return p.createElement(fa,{key:"plane-"+e.id,disabled:!y,rightAction:{label:"Delete",backgroundColor:"red",onPress:function(){var n,t,r,a;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,l.a.awrap(g({variables:{id:Number(e.id)}}));case 2:r=o.sent,null!=(a=r.data)&&null!=(n=a.deletePlane)&&null!=(t=n.errors)&&t.length&&v(Ze.notifications.showSnackbar({message:a.deletePlane.errors[0],variant:"error"}));case 5:case"end":return o.stop()}}),null,null,null,Promise)}}},p.createElement(ca.a.Row,{pointerEvents:"none",onPress:function(){v(Ze.forms.plane.setOpen(e))}},p.createElement(ca.a.Cell,null,e.name),p.createElement(ca.a.Cell,{numeric:!0},e.registration),p.createElement(ca.a.Cell,{numeric:!0},e.maxSlots)))}))):null,p.createElement($t.a,{style:Ns.fab,visible:E,small:!0,icon:"plus",onPress:function(){return v(Ze.forms.plane.setOpen(!0))},label:"New plane"})),p.createElement(js,{open:s.open,onClose:function(){return v(Ze.forms.plane.setOpen(!1))}}))}var Ds,$s,Ns=O.a.create({content:{flexGrow:1},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}});function As(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Rs(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?As(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):As(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Us(e){var n=ct(lt.ActAsRigInspector),t=e.value,r=e.onChange,l=e.config;return null!=l&&l.valueType&&"string"===(null==l?void 0:l.valueType)?p.createElement(S.a,{style:{flex:1}},p.createElement(Ir.a,{mode:"outlined",disabled:!n,style:{marginVertical:8},value:t,onChangeText:function(e){return r(Rs(Rs({},l),{},{value:e}))},label:l.label||""}),p.createElement(gl.a,{type:"info"},l.description||"No description")):null!=l&&l.valueType&&"boolean"===(null==l?void 0:l.valueType)?p.createElement(It.b.Item,{title:l.label||"",disabled:!n,description:l.description,style:{marginVertical:8},right:function(){return p.createElement(Gl.a.Android,{status:t?"checked":"unchecked"})},onPress:function(){return r(Rs(Rs({},l),{},{value:!t}))}}):null!=l&&l.valueType&&"integer"===(null==l?void 0:l.valueType)?p.createElement(S.a,{style:{flex:1}},p.createElement(Ir.a,{disabled:!n,value:t,mode:"outlined",onChangeText:function(e){return r(Rs(Rs({},l),{},{value:e}))},label:l.label||"",keyboardType:"number-pad",style:{marginVertical:8}}),p.createElement(gl.a,{type:"info"},l.description||"No description")):null!=l&&l.valueType&&"date"===(null==l?void 0:l.valueType)?p.createElement(S.a,{style:{flex:1}},p.createElement(yo,{disabled:!n,timestamp:Number(t),onChange:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){return r(Rs(Rs({},l),{},{value:e.toString()}))})),label:l.label||""}),p.createElement(gl.a,{type:"info"},l.description||"No description")):null}function Ls(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Bs(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Ls(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Ls(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function Ms(){var e,n=rn((function(e){return e.forms.rigInspectionTemplate})),t=p.useState(null),r=W()(t,2),l=r[0],a=r[1],o=p.useState(!1),i=W()(o,2),s=i[0],u=i[1],c=tn();return p.createElement(p.Fragment,null,null==(e=n.fields)?void 0:e.map((function(e,t){return p.createElement(p.Fragment,{key:""+e.valueType+t},p.createElement(S.a,{style:{display:"flex",flexDirection:"row",alignItems:"center"}},p.createElement(S.a,{style:{flexGrow:1},onTouchEnd:function(){return a(Bs(Bs({},e),{},{index:t}))}},p.createElement(Us,{config:e,value:(null==e?void 0:e.value)||"",onChange:function(){return null}})),p.createElement(Ut.a,{icon:"delete",onPress:function(){return c(Ze.forms.rigInspectionTemplate.setFields(n.fields.filter((function(e,n){return n!==t}))))}})),p.createElement(_t.a,null))})),p.createElement(Dt.a,null,p.createElement(pl.a,{visible:!!l},p.createElement(pl.a.Title,null,"New field"),p.createElement(pl.a.Content,null,p.createElement(Ir.a,{label:"Name",mode:"outlined",value:null==l?void 0:l.label,onChangeText:function(e){return a(Bs(Bs({},l),{},{label:e}))}}),p.createElement(Ir.a,{label:"Description",placeholder:"optional",mode:"outlined",value:null==l?void 0:l.description,onChangeText:function(e){return a(Bs(Bs({},l),{},{description:e}))}}),p.createElement(Gl.a.Item,{label:"This is a required field",mode:"android",onPress:function(){return a(Bs(Bs({},l),{},{isRequired:!(null!=l&&l.isRequired)}))},status:null!=l&&l.isRequired?"checked":"unchecked"})),p.createElement(pl.a.Actions,null,p.createElement(pr.a,{onPress:function(){return a(null)}},"Cancel"),p.createElement(pr.a,{onPress:function(){void 0!==(null==l?void 0:l.index)?c(Ze.forms.rigInspectionTemplate.setFields(n.fields.map((function(e,n){return n===l.index?l:e})))):c(Ze.forms.rigInspectionTemplate.setFields([].concat(Ft()(n.fields),[l]))),a(null)}},"Save"))),p.createElement($t.a.Group,{open:s,visible:!0,icon:s?"close":"plus",fabStyle:{marginLeft:16,marginBottom:48},actions:[{icon:"pencil",label:"Text",onPress:function(){return a({valueType:"string"})}},{icon:"calendar",label:"Date",onPress:function(){return a({valueType:"date"})}},{icon:"counter",label:"Number",onPress:function(){return a({valueType:"integer"})}},{icon:"checkbox-marked-circle-outline",label:"Checkbox",onPress:function(){return a({valueType:"boolean"})}}],onStateChange:function(e){var n=e.open;return u(n)}})))}var Ws,Vs,Hs=Object(Wn.a)(Ds||(Ds=Bn()(["\n  query RigInspection($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      rigInspectionTemplate {\n        id\n        name\n        definition\n      }\n    }\n  }\n"]))),Gs=Object(Wn.a)($s||($s=Bn()(["\n  mutation UpdateRigInspectionTemplate($dropzoneId: Int, $formId: Int, $definition: String) {\n    updateFormTemplate(\n      input: { id: $formId, attributes: { dropzoneId: $dropzoneId, definition: $definition } }\n    ) {\n      formTemplate {\n        id\n        name\n        definition\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n"])));function qs(){var e,n,t,r=rn((function(e){return e.forms.rigInspectionTemplate})),a=tt(),o=tn(),i=Object(F.useQuery)(Hs,{variables:{dropzoneId:Number(null==a||null==(e=a.dropzone)?void 0:e.id)}}).data,s=ct(lt.UpdateFormTemplate),u=Object(F.useMutation)(Gs),c=W()(u,2),d=c[0],m=c[1];p.useEffect((function(){var e;null!=i&&null!=(e=i.dropzone)&&e.rigInspectionTemplate&&o(Ze.forms.rigInspectionTemplate.setOpen(i.dropzone.rigInspectionTemplate))}),[null==i?void 0:i.dropzone.rigInspectionTemplate,o]);var f=p.useCallback((function(){var e,n;return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,l.a.awrap(d({variables:{formId:Number(null==i||null==(e=i.dropzone.rigInspectionTemplate)?void 0:e.id),dropzoneId:Number(null==i||null==(n=i.dropzone)?void 0:n.id),definition:JSON.stringify(r.fields)}}));case 3:o(Ze.notifications.showSnackbar({message:"Template saved",variant:"success"})),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),o(Ze.notifications.showSnackbar({message:t.t0.message,variant:"error"}));case 9:case"end":return t.stop()}}),null,null,[[0,6]],Promise)}),[d,null==i||null==(n=i.dropzone.rigInspectionTemplate)?void 0:n.id,null==i||null==(t=i.dropzone)?void 0:t.id,r.fields,o]);return p.createElement(vr,null,p.createElement(Nn.a,{style:{width:"100%"}},p.createElement(Nn.a.Title,{title:"Rig Inspection Form Template"}),p.createElement(Nn.a.Content,null,p.createElement(Ms,null)),p.createElement(Nn.a.Actions,null,p.createElement(pr.a,{disabled:!s,mode:"contained",loading:m.loading,onPress:function(){return f()},style:{width:"100%"}},"Save template"))))}var Qs=Object(Wn.a)(Ws||(Ws=Bn()(["\n  query QueryDropzoneRigs($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      rigs {\n        id\n        make\n        isPublic\n        model\n        serial\n        rigType\n        repackExpiresAt\n        canopySize\n        packValue\n      }\n    }\n  }\n"]))),Ys=Object(Wn.a)(Vs||(Vs=Bn()(["\n  mutation UpdateDropzoneRig($id: Int!, $isPublic: Boolean) {\n    updateRig(input: { id: $id, attributes: { isPublic: $isPublic } }) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        isPublic\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        dropzone {\n          id\n          rigs {\n            id\n            make\n            model\n            isPublic\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"])));function _s(){var e,n,t=rn((function(e){return e.global})),r=rn((function(e){return e.forms.rig})),o=Object(F.useQuery)(Qs,{variables:{dropzoneId:Number(t.currentDropzoneId)}}),i=o.data,s=o.loading,u=o.refetch,c=tn(),d=Object(An.useIsFocused)(),m=Object(F.useMutation)(Ys),f=W()(m,2),g=f[0],v=f[1],b=ct(lt.CreateDropzoneRig);return p.useEffect((function(){d&&u()}),[d,u]),p.createElement(vr,{style:Zs.container,contentContainerStyle:[Zs.content,{backgroundColor:"white"}],refreshControl:p.createElement(Dn.a,{refreshing:s,onRefresh:function(){return u()}})},p.createElement(h.a,{visible:s||v.loading,color:t.theme.colors.accent}),p.createElement(ca.a,null,p.createElement(ca.a.Header,null,p.createElement(ca.a.Title,null,"Container"),p.createElement(ca.a.Title,{numeric:!0},"Repack due"),p.createElement(ca.a.Title,{numeric:!0},"Canopy size"),p.createElement(ca.a.Title,{numeric:!0},"Type"),p.createElement(ca.a.Title,{numeric:!0},"Public")),null==i||null==(e=i.dropzone)||null==(n=e.rigs)?void 0:n.map((function(e){return p.createElement(ca.a.Row,{key:"rig-"+e.id},p.createElement(ca.a.Cell,{onPress:function(){c(Ze.forms.rig.setOpen(e))}},[null==e?void 0:e.make,null==e?void 0:e.model,"#"+(null==e?void 0:e.serial)].join(" ")),p.createElement(ca.a.Cell,{numeric:!0},null!=e&&e.repackExpiresAt?Object(Pa.a)(1e3*e.repackExpiresAt,"yyyy/MM/dd"):"-"),p.createElement(ca.a.Cell,{numeric:!0},""+(null==e?void 0:e.canopySize)),p.createElement(ca.a.Cell,{numeric:!0},e.rigType),p.createElement(ca.a.Cell,{numeric:!0},p.createElement(a.e,{onValueChange:function(){var n,t,r,a;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,l.a.awrap(g({variables:{id:Number(e.id),isPublic:!e.isPublic}}));case 2:r=o.sent,null!=(a=r.data)&&null!=(n=a.updateRig)&&null!=(t=n.errors)&&t.length&&c(Ze.notifications.showSnackbar({message:null==a?void 0:a.updateRig.errors[0],variant:"error"}));case 5:case"end":return o.stop()}}),null,null,null,Promise)},value:!!e.isPublic})))}))),p.createElement(Wo,{onClose:function(){return c(Ze.forms.rig.setOpen(!1))},onSuccess:function(){c(Ze.forms.rig.setOpen(!1)),u()},dropzoneId:Number(t.currentDropzoneId),open:r.open}),p.createElement($t.a,{visible:b,style:Zs.fab,small:!0,icon:"plus",onPress:function(){return c(Ze.forms.rig.setOpen(!0))},label:"New rig"}))}var Js,Zs=O.a.create({container:{flex:1,display:"flex"},content:{flexGrow:1},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}});function Xs(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Ks(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Xs(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Xs(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var eu,nu=Object(Wn.a)(Js||(Js=Bn()(["\n  mutation UpdateRole($roleId: Int!, $permissionName: String!, $enabled: Boolean!) {\n    updateRole(input: { id: $roleId, permission: $permissionName, enabled: $enabled }) {\n      role {\n        id\n        name\n        permissions\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n"])));function tu(e){var n=e.title,t=e.description,r=e.role,a=e.permissionName,o=ct(lt.GrantPermission),i=Object(F.useMutation)(nu),s=W()(i,1)[0],u=tn();return p.createElement(It.b.Item,{disabled:!o,style:{width:"100%"},right:function(){return p.createElement(Si.a,{value:r.permissions.includes(a),onValueChange:function(){var e,n,t,o,i,c,d;return l.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:return m.next=2,l.a.awrap(s({variables:{roleId:Number(r.id),permissionName:a,enabled:!r.permissions.includes(a)},optimisticResponse:{updateRole:{role:Ks(Ks({},r),{},{permissions:r.permissions.includes(a)?[].concat(Ft()(r.permissions),[a]):r.permissions.filter((function(e){return e!==a}))})}}}));case 2:null!=(o=m.sent)&&null!=(e=o.data)&&null!=(n=e.updateRole)&&null!=(t=n.errors)&&t.length&&(null==o||null==(i=o.data)||null==(c=i.updateRole)||null==(d=c.errors)||d.map((function(e){return u(Ze.notifications.showSnackbar({message:e,variant:"error"}))})));case 4:case"end":return m.stop()}}),null,null,null,Promise)}})},title:n,description:t})}var ru=Object(Wn.a)(eu||(eu=Bn()(["\n  query QueryDropzoneRigs($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles {\n        id\n        name\n        permissions\n      }\n    }\n  }\n"])));function lu(){var e,n,t,r,l=rn((function(e){return e.global})),a=Object(F.useQuery)(ru,{variables:{dropzoneId:Number(l.currentDropzoneId)}}),o=a.data,i=a.loading,s=a.refetch,u=Object(An.useIsFocused)();return p.useEffect((function(){u&&s()}),[u,s]),i||null==o||null==(e=o.dropzone)||null==(n=e.roles)||!n.length?p.createElement(Un.a,{isLoading:!0,containerStyle:{flexGrow:1,paddingHorizontal:16},layout:[{key:"first",height:175,marginTop:70,marginBottom:35,width:"100%"},{key:"second",height:175,marginBottom:35,width:"100%"},{key:"third",height:175,marginBottom:35,width:"100%"},{key:"fourth",height:175,marginBottom:35,width:"100%"},{key:"fifth",height:175,marginBottom:35,width:"100%"}]}):p.createElement(Nl.b,{defaultIndex:0,mode:"scrollable"},null==o||null==(t=o.dropzone)||null==(r=t.roles)?void 0:r.map((function(e){var n;return p.createElement(Nl.a,{label:Object(zr.capitalize)(null==(n=e.name)?void 0:n.replace("_"," ")),key:"permission-tab-role-"+e.id},p.createElement(vr,{contentContainerStyle:{maxWidth:500,width:"100%",alignSelf:"center"}},p.createElement(Nn.a,{style:iu.card},p.createElement(It.b.Subheader,null,"User Management"),p.createElement(tu,{role:e,permissionName:"readUser",description:"View other users' profiles",title:"View Users"}),p.createElement(tu,{role:e,permissionName:"updateUser",description:"Update other users",title:"Update Users"})),p.createElement(Nn.a,{style:iu.card},p.createElement(It.b.Section,{title:"Manifest",style:{width:"100%"}},p.createElement(It.b.Accordion,{title:"Loads"},p.createElement(tu,{role:e,permissionName:"readLoad",description:"See available loads on the manifest screen",title:"View Load"}),p.createElement(tu,{role:e,permissionName:"createLoad",title:"Create Loads"}),p.createElement(tu,{role:e,permissionName:"updateLoad",description:"Dispatch loads, update load master, change pilot / plane, etc",title:"Update Loads"}),p.createElement(tu,{role:e,permissionName:"deleteLoad",description:"Permanently delete existing loads",title:"Delete Load"})),p.createElement(It.b.Accordion,{title:"Manifesting"},p.createElement(tu,{role:e,permissionName:"createSlot",description:"Create a slot for himself/herself only",title:"Manifest self"}),p.createElement(tu,{role:e,permissionName:"updateSlot",description:"Update own slot after manifesting themselves",title:"Update own slot"}),p.createElement(tu,{role:e,permissionName:"deleteSlot",description:"Take themselves off the load",title:"Remove own slot"}),p.createElement(tu,{role:e,permissionName:"createUserSlot",description:"Manifest other users, e.g yourself + others",title:"Manifest other people"}),p.createElement(tu,{role:e,permissionName:"createUserSlotWithSelf",description:"Allow manifesting others only if the user is part of the group",title:"Manifest own groups"}),p.createElement(tu,{role:e,permissionName:"updateUserSlot",description:"Update other people's slots on a load",title:"Update other users slot"}),p.createElement(tu,{role:e,permissionName:"deleteUserSlot",description:"Delete other users' slots off a load",title:"Take others off the load"}),p.createElement(tu,{role:e,permissionName:"createStudentSlot",description:"Manifest a student on a load",title:"Manifest students"}),p.createElement(tu,{role:e,permissionName:"updateStudentSlot",description:"Make changes to an already manifested student",title:"Update student slots"}),p.createElement(tu,{role:e,permissionName:"deleteStudentSlot",description:"Take a student off the load",title:"Remove student slots"})))),p.createElement(Nn.a,{style:iu.card},p.createElement(It.b.Section,{title:"Administration",style:{width:"100%"}},p.createElement(It.b.Accordion,{title:"Dropzone"},p.createElement(tu,{role:e,permissionName:"updateDropzone",description:"Change dropzone name, visibility, and branding",title:"Update Dropzone"}),p.createElement(tu,{role:e,permissionName:"deleteDropzone",description:"Permanently delete dropzone",title:"Delete Dropzone"})),p.createElement(It.b.Accordion,{title:"Ticket types"},p.createElement(tu,{role:e,permissionName:"createTicketType",description:"Create new jump tickets",title:"Create Ticket"}),p.createElement(tu,{role:e,permissionName:"updateTicketType",description:"Make changes to existing ticket types, including prices",title:"Update Tickets"}),p.createElement(tu,{role:e,permissionName:"deleteTicketType",description:"Delete existing ticket types",title:"Remove Tickets"})),p.createElement(It.b.Accordion,{title:"Ticket addons"},p.createElement(tu,{role:e,permissionName:"createExtra",description:"Set up new ticket addons",title:"Create Ticket addon"}),p.createElement(tu,{role:e,permissionName:"updateExtra",description:"Make changes to existing ticket addons, including prices",title:"Update Ticket addons"}),p.createElement(tu,{role:e,permissionName:"deleteExtra",description:"Delete existing ticket addons",title:"Remove Ticket addons"})),p.createElement(It.b.Accordion,{title:"Planes"},p.createElement(tu,{role:e,permissionName:"createPlane",description:"Add new aircrafts",title:"Create Aircraft"}),p.createElement(tu,{role:e,permissionName:"updatePlane",description:"Make changes to existing aircrafts",title:"Update Aircraft"}),p.createElement(tu,{role:e,permissionName:"deletePlane",description:"Remove existing aircrafts",title:"Remove Aircraft"})),p.createElement(It.b.Accordion,{title:"Rigs"},p.createElement(tu,{role:e,permissionName:"createDropzoneRig",description:"Create dropzone managed rigs, e.g tandem and student rigs",title:"Create Rig"}),p.createElement(tu,{role:e,permissionName:"updateDropzoneRig",description:"Make changes to existing student and tandem rigs",title:"Update Rigs"}),p.createElement(tu,{role:e,permissionName:"deleteDropzoneRig",description:"Delete existing student and tandem rigs",title:"Remove Rigs"}),p.createElement(tu,{role:e,permissionName:"updateFormTemplate",description:"Make changes to the rig inspection template",title:"Modify Rig Inspection Form"}))))))})))}var au,ou,iu=O.a.create({container:{flex:1,display:"flex"},card:{width:"100%",marginVertical:16},content:{flexGrow:1},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),su=Object(Wn.a)(au||(au=Bn()(["\n  query MasterLog($dropzoneId: Int!, $timestamp: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      masterLog(date: $timestamp) {\n        id\n        dzso {\n          id\n          user {\n            id\n            name\n          }\n        }\n\n        loads {\n          id\n          name\n          loadNumber\n\n          loadMaster {\n            id\n            user {\n              name\n            }\n          }\n\n          gca {\n            id\n            user {\n              name\n            }\n          }\n\n          slots {\n            id\n            user {\n              id\n              name\n              license {\n                id\n                name\n              }\n            }\n            ticketType {\n              id\n              name\n              altitude\n            }\n            jumpType {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function uu(){var e,n,t,r,l=tt(),a=p.useState(Object(Mn.a)(new Date).getTime()),o=W()(a,2),i=o[0],s=o[1],u=Object(An.useNavigation)();p.useLayoutEffect((function(){u.setOptions({headerRight:function(){return p.createElement(yo,{onChange:function(e){return s(1e3*e)},timestamp:i/1e3,color:"#FFFFFF"})}})}),[u,i]);var c=Object(F.useQuery)(su,{variables:{dropzoneId:Number(null==l||null==(e=l.dropzone)?void 0:e.id),timestamp:Math.floor(i/1e3)}}).data;return p.createElement(vr,null,p.createElement(S.a,{style:{width:"100%"}}),null==c||null==(n=c.dropzone)||null==(t=n.masterLog)||null==(r=t.loads)?void 0:r.map((function(e){var n,t,r,l,a,o,i,s;return p.createElement(Nn.a,{style:{width:"100%",marginVertical:16}},p.createElement(Nn.a.Title,{title:"Load "+e.loadNumber}),p.createElement(Nn.a.Content,null,p.createElement(It.b.Item,{title:"Pilot",description:null==e||null==(n=e.pilot)||null==(t=n.user)?void 0:t.name}),p.createElement(It.b.Item,{title:"GCA",description:null==e||null==(r=e.gca)||null==(l=r.user)?void 0:l.name}),p.createElement(It.b.Item,{title:"Plane",description:null!=e&&null!=(a=e.plane)&&a.id?(null==e||null==(o=e.plane)?void 0:o.name)+" ("+(null==e||null==(i=e.plane)?void 0:i.registration)+")":"No plane selected"}),p.createElement(ca.a,null,p.createElement(ca.a.Header,null,p.createElement(ca.a.Title,null,"Name"),p.createElement(ca.a.Title,null,"Jump type"),p.createElement(ca.a.Title,{numeric:!0},"Altitude")),null==(s=e.slots)?void 0:s.map((function(e){var n,t,r;return p.createElement(ca.a.Row,null,p.createElement(ca.a.Cell,null,null==(n=e.user)?void 0:n.name),p.createElement(ca.a.Cell,null,null==(t=e.jumpType)?void 0:t.name),p.createElement(ca.a.Cell,{numeric:!0},null==(r=e.ticketType)?void 0:r.altitude))})))))})))}var cu=Object(Wn.a)(ou||(ou=Bn()(["\n  query QueryTicketType($dropzoneId: Int!) {\n    ticketTypes(dropzoneId: $dropzoneId) {\n      id\n      cost\n      currency\n      name\n      allowManifestingSelf\n\n      extras {\n        id\n        name\n      }\n    }\n  }\n"])));function du(){var e,n,t,r=rn((function(e){return e.forms.extra})),l=tn(),a=tt(),o=Object(F.useQuery)(cu,{variables:{dropzoneId:Number(null==a||null==(e=a.dropzone)?void 0:e.id)}}).data;return p.createElement(p.Fragment,null,p.createElement(Ir.a,{style:fu.field,mode:"outlined",label:"Name",error:!!r.fields.name.error,value:r.fields.name.value,onChangeText:function(e){return l(Ze.forms.extra.setField(["name",e]))}}),p.createElement(gl.a,{type:r.fields.name.error?"error":"info"},r.fields.name.error||""),p.createElement(Ir.a,{style:fu.field,mode:"outlined",label:"Price",error:!!r.fields.cost.error,value:null==(n=r.fields.cost)||null==(t=n.value)?void 0:t.toString(),onChangeText:function(e){return l(Ze.forms.extra.setField(["cost",Number(e)]))}}),p.createElement(gl.a,{type:r.fields.cost.error?"error":"info"},r.fields.cost.error||""),p.createElement(S.a,{style:{width:"100%"}},p.createElement(It.b.Subheader,null,"Compatible tickets"),null==o?void 0:o.ticketTypes.map((function(e){return p.createElement(Gl.a.Item,{label:e.name||"",status:r.fields.ticketTypeIds.value.includes(Number(e.id))?"checked":"unchecked",onPress:function(){return l(Ze.forms.extra.setField(["ticketTypeIds",Object(zr.xor)(r.fields.ticketTypeIds.value,[Number(e.id)])]))}})}))))}var mu,fu=O.a.create({fields:{width:"100%",flex:1},field:{marginBottom:8,width:"100%"}}),pu=Object(F.gql)(mu||(mu=Bn()(["\n  mutation UpdateExtra(\n    $id: Int!\n    $name: String\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ) {\n    updateExtra(\n      input: {\n        id: $id\n        attributes: {\n          name: $name\n          ticketTypeIds: $ticketTypeIds\n          cost: $cost\n          dropzoneId: $dropzoneId\n        }\n      }\n    ) {\n      extra {\n        id\n        name\n\n        ticketTypes {\n          id\n          name\n          cost\n          altitude\n          allowManifestingSelf\n        }\n      }\n    }\n  }\n"])));function gu(){var e,n,t=tt(),r=rn((function(e){return e.forms.extra})),a=tn(),o=Object(An.useNavigation)(),i=Object(An.useRoute)().params.extra;p.useEffect((function(){a(Ze.forms.extra.setOpen(i))}),[a,i,i.id]);var s=Object(F.useMutation)(pu),u=W()(s,2),c=u[0],d=u[1],m=p.useCallback((function(){var e=!1;return r.fields.name.value.length<3&&(e=!0,a(Ze.forms.extra.setFieldError(["name","Name is too short"]))),Number(r.fields.cost.value)<0&&(e=!0,a(Ze.forms.extra.setFieldError(["cost","Price must be a number"]))),!e}),[r.fields,a]),f=p.useCallback((function(){var e,n,i,s,u,d,f,p,g;return l.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(e=r.fields,n=e.name,i=e.cost,s=e.ticketTypeIds,!m()){v.next=12;break}return v.prev=2,v.next=5,l.a.awrap(c({variables:{id:Number(null==(u=r.original)?void 0:u.id),dropzoneId:Number(null==t||null==(d=t.dropzone)?void 0:d.id),name:n.value,cost:i.value,ticketTypeIds:s.value}}));case 5:g=v.sent,null!=(f=g.data)&&null!=(p=f.updateExtra)&&p.extra&&(a(ha.showSnackbar({message:"Saved",variant:"success"})),o.goBack()),v.next=12;break;case 9:v.prev=9,v.t0=v.catch(2),a(ha.showSnackbar({message:v.t0.message,variant:"error"}));case 12:case"end":return v.stop()}}),null,null,[[2,9]],Promise)}),[r.fields,null==(e=r.original)?void 0:e.id,m,c,null==t||null==(n=t.dropzone)?void 0:n.id,a,o]);return p.createElement(vr,{contentContainerStyle:{paddingHorizontal:48}},p.createElement(Pn.a,{name:"ticket-percent",size:100,color:"#999999",style:{alignSelf:"center"}}),p.createElement(du,null),p.createElement(zt,{style:hu.fields},p.createElement(pr.a,{mode:"contained",disabled:d.loading,onPress:f,loading:d.loading},"Save")))}var vu,bu,hu=O.a.create({container:{flex:1},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"100%",marginBottom:16},field:{marginBottom:8}});function yu(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Eu(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?yu(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):yu(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var wu,xu=Object(F.gql)(vu||(vu=Bn()(["\n  mutation UpdateExtra(\n    $id: Int!\n    $name: String\n    $ticketTypeIds: [Int!]\n    $cost: Float\n    $dropzoneId: Int\n  ) {\n    updateExtra(\n      input: {\n        id: $id\n        attributes: {\n          name: $name\n          ticketTypeIds: $ticketTypeIds\n          cost: $cost\n          dropzoneId: $dropzoneId\n        }\n      }\n    ) {\n      extra {\n        ...extra\n\n        dropzone {\n          id\n          extras {\n            ...extra\n          }\n        }\n      }\n    }\n  }\n\n  fragment extra on Extra {\n    id\n    name\n    cost\n\n    ticketTypes {\n      id\n      name\n      cost\n      altitude\n      allowManifestingSelf\n    }\n  }\n"]))),Su=Object(F.gql)(bu||(bu=Bn()(["\n  mutation CreateExtra($name: String, $ticketTypeIds: [Int!], $cost: Float, $dropzoneId: Int) {\n    createExtra(\n      input: {\n        attributes: {\n          name: $name\n          ticketTypeIds: $ticketTypeIds\n          cost: $cost\n          dropzoneId: $dropzoneId\n        }\n      }\n    ) {\n      extra {\n        ...extra\n\n        dropzone {\n          id\n          extras {\n            ...extra\n          }\n        }\n      }\n    }\n  }\n\n  fragment extra on Extra {\n    id\n    name\n    cost\n\n    ticketTypes {\n      id\n      name\n      cost\n      altitude\n      allowManifestingSelf\n    }\n  }\n"])));function ku(e){var n,t,r,a=e.open,o=e.onClose,i=tt(),s=rn((function(e){return e.forms.extra})),u=tn(),c=Object(F.useMutation)(Su),d=W()(c,2),m=d[0],f=d[1],g=Object(F.useMutation)(xu),v=W()(g,2),b=v[0],h=v[1],y=p.useCallback((function(){var e=!1;return s.fields.name.value.length<3&&(e=!0,u(Ze.forms.extra.setFieldError(["name","Name is too short"]))),Number(s.fields.cost.value)<0&&(e=!0,u(Ze.forms.extra.setFieldError(["cost","Price must be a number"]))),!e}),[u,s.fields.cost.value,s.fields.name.value.length]),E=p.useCallback((function(){var e,n,t,r,a,c,d,f,p,g,v,h,E,w,x,S;return l.a.async((function(k){for(;;)switch(k.prev=k.next){case 0:if(e=s.fields,n=e.name,t=e.cost,r=e.ticketTypeIds,!y()){k.next=16;break}return c=null!=s&&null!=(a=s.original)&&a.id?b:m,k.prev=3,k.next=6,l.a.awrap(c({variables:Eu(Eu({},null!=(d=s.original)&&d.id?{id:Number(s.original.id)}:{}),{},{dropzoneId:Number(null==i||null==(f=i.dropzone)?void 0:f.id),name:n.value,cost:t.value,ticketTypeIds:r.value})}));case 6:if(w=k.sent,null==(x=null!=(p=s.original)&&p.id?null==(g=w.data)?void 0:g.updateExtra:null==(v=w.data)?void 0:v.createExtra)||null==(h=x.errors)||!h.length){k.next=10;break}return k.abrupt("return",u(Ze.notifications.showSnackbar({message:x.errors[0],variant:"error"})));case 10:null!=x&&null!=(E=x.fieldErrors)&&E.length?null==(S=x.fieldErrors)||S.forEach((function(e){var n=e.field,t=e.message;switch(n){case"name":return u(Ze.forms.extra.setFieldError(["name",t]));case"cost":return u(Ze.forms.extra.setFieldError(["cost",t]));case"ticket_type_ids":return u(Ze.forms.extra.setFieldError(["ticketTypeIds",t]));default:return null}})):null!=x&&x.extra&&(u(Ze.notifications.showSnackbar({message:"Saved "+x.extra.name,variant:"success"})),o(),u(Ze.forms.extra.reset())),k.next=16;break;case 13:k.prev=13,k.t0=k.catch(3),u(Ze.notifications.showSnackbar({message:k.t0.message,variant:"error"}));case 16:return k.abrupt("return",null);case 17:case"end":return k.stop()}}),null,null,[[3,13]],Promise)}),[null==i||null==(n=i.dropzone)?void 0:n.id,u,m,b,o,s.fields,null==(t=s.original)?void 0:t.id,y]);return p.createElement(za,{title:null!=(r=s.original)&&r.id?"Edit ticket addon":"New ticket addon",open:a,onClose:o,loading:f.loading||h.loading,buttonAction:E,buttonLabel:"Save",snapPoints:[300,500]},p.createElement(du,null))}var Cu=Object(Wn.a)(wu||(wu=Bn()(["\n  query QueryExtra($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      extras {\n        id\n        cost\n        name\n        ticketTypes {\n          id\n          altitude\n          name\n        }\n      }\n    }\n  }\n"])));function zu(){var e,n,t,r,l,a=tt(),o=rn((function(e){return e.global})),i=rn((function(e){return e.forms.extra})),s=Object(F.useQuery)(Cu,{variables:{dropzoneId:Number(null==a||null==(e=a.dropzone)?void 0:e.id)}}),u=s.data,c=s.loading,d=tn(),m=ct(lt.CreateExtra);return p.createElement(p.Fragment,null,p.createElement(h.a,{visible:c,indeterminate:!0,color:o.theme.colors.accent}),p.createElement(zt,{style:Iu.container},p.createElement(ca.a,null,p.createElement(ca.a.Header,null,p.createElement(ca.a.Title,null,"Name"),p.createElement(ca.a.Title,{numeric:!0},"Cost")),null==u||null==(n=u.dropzone)||null==(t=n.extras)?void 0:t.map((function(e){return p.createElement(ca.a.Row,{onPress:function(){d(Ze.forms.extra.setOpen(e))},pointerEvents:"none"},p.createElement(ca.a.Cell,null,e.name),p.createElement(ca.a.Cell,{numeric:!0},"$",e.cost))}))),!c&&!(null!=u&&null!=(r=u.dropzone)&&null!=(l=r.extras)&&l.length)&&p.createElement(ql,{title:"No ticket addons",subtitle:"You can add multiple addons to assign to tickets, e.g outside camera, or coach"}),p.createElement($t.a,{style:Iu.fab,visible:m,small:!0,icon:"plus",onPress:function(){return d(Ze.forms.extra.setOpen(!0))},label:"New ticket addon"})),p.createElement(ku,{open:i.open,onClose:function(){return d(Ze.forms.extra.setOpen(!1))}}))}var Iu=O.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),Ou=Object(xn.a)();function ju(){return p.createElement(Ou.Navigator,{screenOptions:{headerShown:!0,header:function(e){return p.createElement(fl,e)},cardStyle:{flex:1}}},p.createElement(Ou.Screen,{name:"SettingsScreen",component:wi,options:{title:"Settings"}}),p.createElement(Ou.Screen,{name:"UpdateDropzoneScreen",component:bs,options:{title:"Basic settings"}}),p.createElement(Ou.Screen,{name:"PlanesScreen",component:Fs,options:{title:"Planes"}}),p.createElement(Ou.Screen,{name:"TicketTypesScreen",component:Mi,options:{title:"Ticket types"}}),p.createElement(Ou.Screen,{name:"UpdateExtraScreen",component:gu,options:{title:"Update ticket add-on"}}),p.createElement(Ou.Screen,{name:"ExtrasScreen",component:zu,options:{title:"Ticket add-ons"}}),p.createElement(Ou.Screen,{name:"RigInspectionTemplateScreen",component:qs,options:{title:"Rig Inspection Form"}}),p.createElement(Ou.Screen,{name:"DropzoneRigsScreen",component:_s,options:{title:"Dropzone rigs"}}),p.createElement(Ou.Screen,{name:"DropzonePermissionScreen",component:lu,options:{title:"Permissions"}}),p.createElement(Ou.Screen,{name:"DropzoneMasterLogScreen",component:uu,options:{title:"Master log"}}))}function Tu(){var e,n,t,r,l,a,o,i,s,u,c,d,m,f,g,v,b,h,y,E,w,x,k,C=rn((function(e){return e.forms.ghost})),z=tn();return p.useEffect((function(){if(C.original){var e,n,t;if(!C.fields.exitWeight.value)z(Ze.forms.ghost.setField(["exitWeight",(null==(t=C.original.exitWeight)?void 0:t.toString())||"60"]));!C.fields.license.value&&null!=(e=C.original)&&null!=(n=e.license)&&n.id&&(C.original.license.federation&&z(Ze.forms.ghost.setFederation(C.original.license.federation)),z(Ze.forms.ghost.setField(["license",C.original.license])))}}),[z,C.fields.exitWeight.value,C.fields.license.value,C.original,null==(e=C.original)?void 0:e.id]),p.createElement(p.Fragment,null,p.createElement(Ir.a,{style:$u.field,mode:"outlined",label:"Name",error:!!C.fields.name.error,value:(null==(n=C.fields.name)||null==(t=n.value)?void 0:t.toString())||"",onChangeText:function(e){return z(Ze.forms.ghost.setField(["name",e]))}}),p.createElement(gl.a,{type:C.fields.name.error?"error":"info"},C.fields.name.error||" "),p.createElement(Ir.a,{style:$u.field,mode:"outlined",label:"Email",error:!!C.fields.email.error,value:(null==(r=C.fields.email)||null==(l=r.value)?void 0:l.toString())||"",onChangeText:function(e){return z(Ze.forms.ghost.setField(["email",e]))}}),p.createElement(gl.a,{type:C.fields.email.error?"error":"info"},C.fields.email.error||" "),p.createElement(Ir.a,{style:$u.field,mode:"outlined",label:"Exit weight",error:!!C.fields.exitWeight.error,value:(null==(a=C.fields.exitWeight)||null==(o=a.value)?void 0:o.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return p.createElement(Ir.a.Affix,{text:"kg"})},onChangeText:function(e){return z(Ze.forms.ghost.setField(["exitWeight",e]))}}),p.createElement(gl.a,{type:C.fields.exitWeight.error?"error":"info"},C.fields.exitWeight.error||""),p.createElement(_t.a,null),p.createElement(S.a,{style:{width:"100%"}},p.createElement(Qo,{value:(null==C||null==(i=C.fields)||null==(s=i.license)||null==(u=s.value)?void 0:u.federation)||C.federation.value,onSelect:function(e){return z(Ze.forms.ghost.setFederation(e))}}),p.createElement(gl.a,{type:C.federation.error?"error":"info"},C.federation.error||""),((null==C||null==(c=C.fields)||null==(d=c.license)||null==(m=d.value)||null==(f=m.federation)?void 0:f.id)||(null==C||null==(g=C.federation)||null==(v=g.value)?void 0:v.id))&&p.createElement(p.Fragment,null,p.createElement(Go,{value:C.fields.license.value,federationId:Number((null==C||null==(b=C.fields)||null==(h=b.license)||null==(y=h.value)||null==(E=y.federation)?void 0:E.id)||(null==(w=C.federation)||null==(x=w.value)?void 0:x.id)),onSelect:function(e){return z(Ze.forms.ghost.setField(["license",e]))}}),p.createElement(gl.a,{type:C.fields.license.error?"error":"info"},C.fields.license.error||""))),p.createElement(xo,{value:(null==(k=C.fields.role)?void 0:k.value)||null,onSelect:function(e){return z(Ze.forms.ghost.setField(["role",e]))}}),p.createElement(gl.a,{type:C.fields.phone.error?"error":"info"},C.fields.phone.error||""))}var Pu,Fu,Du,$u=O.a.create({fields:{flex:1,width:"100%",paddingTop:32},field:{marginBottom:8,width:"100%"},ticketAddons:{marginBottom:8}}),Nu=Jn(Object(Wn.a)(Pu||(Pu=Bn()(["\n  mutation CreateGhost(\n    $name: String!\n    $phone: String\n    $email: String!\n    $roleId: Int!\n    $licenseId: Int\n    $dropzoneId: Int!\n    $exitWeight: Float!\n  ) {\n    createGhost(\n      input: {\n        attributes: {\n          roleId: $roleId\n          name: $name\n          phone: $phone\n          email: $email\n          dropzoneId: $dropzoneId\n          licenseId: $licenseId\n          exitWeight: $exitWeight\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      user {\n        id\n        name\n        exitWeight\n        email\n        phone\n\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.createGhost},validates:{exitWeight:[Qn("Exit weight must be provided"),(Fu="Please enter a valid number",{message:Fu,pattern:/^\d+/})],email:[Qn("Please provide a valid email address"),Yn("Please provide a valid email address")],name:[Qn("Name is required")],roleId:[Qn("You must select a role")]},fieldErrorMap:{license:"licenseId",exit_weight:"exitWeight",role:"roleId"}});function Au(e){var n=e.open,t=e.onSuccess,r=e.onClose,a=rn((function(e){return e.forms.ghost})),o=rn((function(e){return e.global})),i=tn(),s=Nu({onSuccess:function(e){return null},onFieldError:function(e,n){i(Ze.forms.ghost.setFieldError([e,n])),console.log(e,n)},onError:function(e){return i(Ze.notifications.showSnackbar({message:e,variant:"error"}))}}),u=p.useCallback((function(){var e,n,r,u,c,d,m,f,p,g;return l.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:return e=a.fields,n=e.name,r=e.license,u=e.phone,c=e.email,d=e.exitWeight,m=e.role,v.prev=1,v.next=4,l.a.awrap(s.mutate({dropzoneId:o.currentDropzoneId,name:n.value||"",licenseId:null!=(f=r.value)&&f.id?Number(null==(p=r.value)?void 0:p.id):null,phone:u.value,exitWeight:Number(d.value),email:c.value||"",roleId:Number(null==m||null==(g=m.value)?void 0:g.id)}));case 4:requestAnimationFrame((function(){t(),i(Ze.notifications.showSnackbar({message:n.value+" has been added to your dropzone",variant:"success"}))})),v.next=10;break;case 7:v.prev=7,v.t0=v.catch(1),i(Ze.notifications.showSnackbar({message:v.t0.message,variant:"error"}));case 10:case"end":return v.stop()}}),null,null,[[1,7]],Promise)}),[a.fields,s,o.currentDropzoneId,t,i]);return p.createElement(za,{title:"Pre-register user",open:n,snapPoints:[400,740],loading:s.loading,onClose:r,buttonAction:u,buttonLabel:"Save"},p.createElement(Tu,null))}var Ru=Object(Wn.a)(Du||(Du=Bn()(["\n  query QueryDropzoneUsersSearch($dropzoneId: Int!, $search: String) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(search: $search) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              image\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function Uu(e){var n=e.width;return p.createElement(Un.a,{isLoading:!0,containerStyle:{height:110,width:n,margin:4},layout:[{key:"user-card-container",height:110,width:n}]})}function Lu(){var e,n,t=rn((function(e){return e.global})),r=rn((function(e){return e.screens.users})),l=rn((function(e){return e.forms.ghost})),o=tn(),i=Object(F.useQuery)(Ru,{variables:{dropzoneId:Number(t.currentDropzoneId),search:r.searchText},fetchPolicy:"network-only"}),s=i.data,u=i.loading,c=i.refetch,d=Object(An.useNavigation)(),m=Object(An.useIsFocused)();p.useEffect((function(){r.isSearchVisible&&o(Ze.screens.users.setSearchVisible(!1))}),[o,m,r.isSearchVisible]);var f=ct(lt.CreateUser),g=Object($n.a)().width,v=Math.floor(g/360)||1,b=360*v+8,y=(null==s||null==(e=s.dropzone)||null==(n=e.dropzoneUsers)?void 0:n.edges)||[],E=!(null!=y&&y.length)&&u;return p.createElement(p.Fragment,null,p.createElement(h.a,{indeterminate:!0,color:t.theme.colors.accent,visible:u}),p.createElement(a.a,{data:E?[1,1,1,1,1]:y,onRefresh:function(){return c({dropzoneId:Number(t.currentDropzoneId),search:r.searchText})},keyExtractor:function(e,n){var t,r=e.item;return"user-"+((null==r||null==(t=r.node)?void 0:t.id)||n)},style:{flex:1,paddingTop:35},refreshing:u,refreshControl:p.createElement(Dn.a,{refreshing:u,onRefresh:c}),ListEmptyComponent:function(){return p.createElement(S.a,{style:{alignSelf:"center",alignItems:"center",justifyContent:"center"}},p.createElement(ql,{title:"No users",subtitle:""}))},numColumns:v,contentContainerStyle:{width:b,alignSelf:"center"},renderItem:function(e){var n,t,r,l,a,o=e.item;return 1===o?p.createElement(Uu,{width:360}):p.createElement(Nn.a,{key:"user-"+(null==o||null==(n=o.node)?void 0:n.id),elevation:3,style:{width:360,margin:4}},p.createElement(Nn.a.Content,null,p.createElement(It.b.Item,{style:{width:"100%"},title:null==o||null==(t=o.node)?void 0:t.user.name,description:null==o||null==(r=o.node)||null==(l=r.role)||null==(a=l.name)?void 0:a.replace("_"," ").toUpperCase(),left:function(){var e,n,t;return null!=o&&null!=(e=o.node)&&null!=(n=e.user)&&n.image?p.createElement(It.a.Image,{source:{uri:null==o||null==(t=o.node)?void 0:t.user.image},style:{alignSelf:"center",marginHorizontal:12},size:32}):p.createElement(It.a.Icon,{icon:"account",style:{alignSelf:"center",marginHorizontal:12},size:32})},right:function(){return p.createElement(It.b.Icon,{icon:"chevron-right"})},onPress:function(){var e;return d.navigate("UserProfileScreen",{userId:null==o||null==(e=o.node)?void 0:e.id})}})))}}),f&&p.createElement($t.a,{style:Bu.fab,small:!0,icon:"plus",onPress:function(){return o(Ze.forms.ghost.setOpen(!0))},label:"Add user"}),p.createElement(Au,{open:l.open,onClose:function(){return requestAnimationFrame((function(){return o(Ze.forms.ghost.setOpen(!1))}))},onSuccess:function(){requestAnimationFrame((function(){o(Ze.forms.ghost.setOpen(!1)),c()}))}}))}var Bu=O.a.create({container:{flex:1},fab:{position:"absolute",margin:16,right:0,bottom:0},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}});var Mu,Wu,Vu=O.a.create({inputContainer:{flexGrow:1},input:{backgroundColor:"transparent",height:"100%",color:"#FFFFFF",fontSize:20},icon:{marginHorizontal:8}}),Hu=function(e){var n=e.navigation,t=e.previous,r=e.scene,l=e.onSearch,a=e.searchText,o=e.searchVisible,i=e.setSearchVisible;return p.createElement(il.a.Header,null,t?p.createElement(il.a.BackAction,{onPress:n.goBack}):null,o?p.createElement(il.a.BackAction,{onPress:function(){return i(!1)}}):null,o?p.createElement(S.a,{style:Vu.inputContainer},p.createElement(Ir.a,{style:Vu.input,value:a,onChangeText:function(e){return l(e)},autoFocus:!0})):p.createElement(il.a.Content,{title:r.descriptor.options.title,titleStyle:{fontWeight:"bold"}}),p.createElement(Gi.a,{name:"search",onPress:function(){return i(!o)},color:"#FFFFFF",size:24,style:Vu.icon}))};function Gu(){var e=rn((function(e){return e.forms.rigInspection})),n=tn();return p.createElement(p.Fragment,null,e.fields.map((function(e,t){return p.createElement(Us,{key:t,config:e,value:(null==e?void 0:e.value)||"",onChange:function(e){return n(Ze.forms.rigInspection.setField([t,e]))}})})))}function qu(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function Qu(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?qu(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):qu(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Yu=Object(Wn.a)(Mu||(Mu=Bn()(["\n  query RigInspections($dropzoneUserId: Int!, $dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n\n      rigInspectionTemplate {\n        id\n        name\n        definition\n      }\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n        rigInspections {\n          id\n          isOk\n          definition\n          rig {\n            id\n          }\n          inspectedBy {\n            id\n            user {\n              id\n              name\n            }\n          }\n          formTemplate {\n            id\n            name\n            definition\n          }\n        }\n      }\n    }\n  }\n"]))),_u=Object(Wn.a)(Wu||(Wu=Bn()(["\n  mutation CreateRigInspection($dropzoneId: Int, $rigId: Int, $isOk: Boolean, $definition: String) {\n    createRigInspection(\n      input: {\n        attributes: { dropzoneId: $dropzoneId, rigId: $rigId, isOk: $isOk, definition: $definition }\n      }\n    ) {\n      rigInspection {\n        id\n        isOk\n        definition\n        dropzoneUser {\n          id\n          rigInspections {\n            id\n            isOk\n            rig {\n              id\n            }\n            inspectedBy {\n              id\n              user {\n                id\n                name\n              }\n            }\n          }\n        }\n        inspectedBy {\n          id\n          user {\n            id\n            name\n          }\n        }\n        rig {\n          id\n          make\n          model\n        }\n\n        formTemplate {\n          id\n          definition\n        }\n      }\n      fieldErrors {\n        field\n        message\n      }\n      errors\n    }\n  }\n"])));function Ju(){var e,n,t,r,a,o,i,s,u,c=rn((function(e){return e.forms.rigInspection})),d=tt(),m=tn(),f=Object(An.useRoute)().params,g=f.rig,v=f.dropzoneUserId,b=Object(F.useQuery)(Yu,{variables:{dropzoneId:Number(null==d||null==(e=d.dropzone)?void 0:e.id),dropzoneUserId:v}}),h=b.data,y=b.refetch,E=Object(An.useIsFocused)();p.useEffect((function(){y()}),[E,y]);var w=ct(lt.ActAsRigInspector),x=Object(F.useMutation)(_u),S=W()(x,2),k=S[0],C=S[1],z=Object(An.useNavigation)();p.useEffect((function(){var e,n,t;if(null==h||null==(e=h.dropzone)||null==(n=e.dropzoneUser)||null==(t=n.rigInspections)?void 0:t.some((function(e){var n;return(null==(n=e.rig)?void 0:n.id.toString())===g.id.toString()&&e.definition}))){var r,l,a,o=null==h||null==(r=h.dropzone)||null==(l=r.dropzoneUser)||null==(a=l.rigInspections)?void 0:a.find((function(e){var n;return(null==(n=e.rig)?void 0:n.id)===g.id}));o&&(m(Ze.forms.rigInspection.setFields(o.definition||"{}")),m(Ze.forms.rigInspection.setOk(o.isOk)))}else{var i;m(Ze.forms.rigInspection.setFields((null==h||null==(i=h.dropzone.rigInspectionTemplate)?void 0:i.definition)||"[]"))}}),[null==h||null==(n=h.dropzone)||null==(t=n.dropzoneUser)?void 0:t.rigInspections,null==h||null==(r=h.dropzone.rigInspectionTemplate)?void 0:r.definition,m,g.id]);var I=p.useCallback((function(){var e;return l.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,l.a.awrap(k({variables:{dropzoneId:Number(null==d||null==(e=d.dropzone)?void 0:e.id),rigId:Number(g.id),definition:JSON.stringify(c.fields),isOk:!!c.ok},update:function(e,n){var t,r,a,o,i,s,u,c,m,f,p,g,v,b,h,y,E,w,x,S,k;return l.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return b=null==(t=n.data)||null==(r=t.createRigInspection)?void 0:r.rigInspection,h=e.readQuery({query:ii,variables:{dropzoneId:Number(null==d||null==(a=d.dropzone)?void 0:a.id),dropzoneUserId:Number(null==b||null==(o=b.dropzoneUser)?void 0:o.id)}}),(null==(y=e.readQuery({query:nt,variables:{dropzoneId:Number(null==d||null==(i=d.dropzone)?void 0:i.id),earliestTimestamp:Object(Mn.a)(new Date).getTime()/1e3}}))||null==(s=y.dropzone)||null==(u=s.currentUser)?void 0:u.id)===(null==b||null==(c=b.dropzoneUser)?void 0:c.id)&&e.writeQuery({query:nt,variables:{dropzoneId:Number(null==d||null==(E=d.dropzone)?void 0:E.id),earliestTimestamp:Object(Mn.a)(new Date).getTime()/1e3},data:Qu(Qu({},y),{},{dropzone:Qu(Qu({},null==y?void 0:y.dropzone),{},{currentUser:Qu(Qu({},null==y||null==(w=y.dropzone)?void 0:w.currentUser),{},{rigInspections:[].concat(Ft()(((null==y||null==(x=y.dropzone)||null==(S=x.currentUser)?void 0:S.rigInspections)||[]).filter((function(e){return e.id!==(null==b?void 0:b.id)}))),[b])})})})}),k=Qu(Qu({},null==h?void 0:h.dropzone),{},{dropzoneUser:Qu(Qu({},null==h||null==(m=h.dropzone)?void 0:m.dropzoneUser),{},{rigInspections:[].concat(Ft()(((null==h||null==(f=h.dropzone)||null==(p=f.dropzoneUser)?void 0:p.rigInspections)||[]).filter((function(e){return e.id!==(null==b?void 0:b.id)}))),[b])})}),e.writeQuery({query:ii,variables:{dropzoneId:Number(null==d||null==(g=d.dropzone)?void 0:g.id),dropzoneUserId:Number(null==b||null==(v=b.dropzoneUser)?void 0:v.id)},data:k}),l.abrupt("return",{data:k});case 7:case"end":return l.stop()}}),null,null,null,Promise)}}));case 3:m(Ze.notifications.showSnackbar({message:"Rig inspection saved",variant:"success"})),m(Ze.forms.rigInspection.reset()),z.goBack(),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),m(Ze.notifications.showSnackbar({message:n.t0.message,variant:"error"}));case 11:case"end":return n.stop()}}),null,null,[[0,8]],Promise)}),[k,null==d||null==(a=d.dropzone)?void 0:a.id,g.id,c.fields,c.ok,m,z]);return p.createElement(vr,null,p.createElement(kr.a,{behavior:"position",style:{width:"100%",flexGrow:1,maxWidth:400,backgroundColor:"transparent"}},p.createElement(Nn.a,{style:{width:"100%",marginVertical:16}},p.createElement(Nn.a.Title,{title:"Rig"}),p.createElement(Nn.a.Content,null,p.createElement(It.b.Item,{title:"Make",description:g.make}),p.createElement(It.b.Item,{title:"Model",description:g.model}),p.createElement(It.b.Item,{title:"Serial",description:g.serial}),p.createElement(It.b.Item,{title:"Repack due",description:null!=g&&g.repackExpiresAt?Object(Pa.a)(1e3*g.repackExpiresAt,"yyyy/MM/dd"):"-"}))),p.createElement(Nn.a,{style:{width:"100%"}},p.createElement(Nn.a.Title,{title:null==h||null==(o=h.dropzone)||null==(i=o.rigInspectionTemplate)?void 0:i.name}),p.createElement(Nn.a.Content,null,p.createElement(Gu,null),p.createElement(_t.a,null),p.createElement(Gl.a.Item,{mode:"android",label:"This rig is OK to jump",onPress:function(){return m(Ze.forms.rigInspection.setOk(!c.ok))},status:c.ok?"checked":"unchecked"})),p.createElement(Nn.a.Actions,null,p.createElement(pr.a,{disabled:!w||JSON.stringify(c.fields)===(null==h||null==(s=h.dropzone)||null==(u=s.rigInspectionTemplate)?void 0:u.definition),mode:"contained",onPress:function(){return I()},loading:C.loading,style:{width:"100%"}},"Mark as inspected")))))}var Zu=Object(xn.a)();function Xu(){var e=rn((function(e){return e.screens.users})),n=e.isSearchVisible,t=e.searchText,r=tn();return p.createElement(Zu.Navigator,{screenOptions:{headerShown:!0,header:function(e){return p.createElement(Hu,wt()({},e,{searchText:t,searchVisible:n,setSearchVisible:function(e){return r(Ze.screens.users.setSearchVisible(e))},onSearch:function(e){return r(Ze.screens.users.setSearchText(e))}}))},cardStyle:{flex:1}}},p.createElement(Zu.Screen,{name:"UsersScreen",component:Lu,options:{title:"Dropzone users"}}),p.createElement(Zu.Screen,{name:"UserProfileScreen",component:bi,options:{title:"User"}}),p.createElement(Zu.Screen,{name:"RigInspectionScreen",component:Ju,options:{title:"Inspection"}}))}var Ku=Object(Tn.a)();function ec(){var e=Object(jn.b)(),n=ct(lt.ReadUser),t=ct(lt.UpdateDropzone),r=ct(lt.UpdatePlane),l=ct(lt.UpdateTicketType),a=ct(lt.UpdateExtra),o=ct(lt.GrantPermission),i=ct(lt.UpdateDropzoneRig),s=ct(lt.UpdateFormTemplate),u=t||r||l||a||o||i||s;return p.createElement(Ku.Navigator,{initialRouteName:"Manifest",tabBarOptions:{activeTintColor:"#FFFFFF",inactiveBackgroundColor:e.colors.primary,activeBackgroundColor:e.colors.primary,inactiveTintColor:"#CCCCCC",showLabel:!1,style:{backgroundColor:e.colors.primary}}},p.createElement(Ku.Screen,{name:"Manifest",component:no,options:{tabBarIcon:function(e){e.focused;var n=e.color,t=e.size;return p.createElement(Pn.a,{name:"airplane",color:n,size:t})},unmountOnBlur:!0}}),p.createElement(Ku.Screen,{name:"Notifications",component:fo,options:{tabBarIcon:function(e){e.focused;var n=e.color,t=e.size;return p.createElement(Pn.a,{name:"bell",color:n,size:t})},unmountOnBlur:!0}}),p.createElement(Ku.Screen,{name:"Profile",component:Ei,options:{tabBarIcon:function(e){var n=e.size,t=e.color;e.focused;return p.createElement(Pn.a,{size:n,color:t,name:"account-circle"})},unmountOnBlur:!0}}),n&&p.createElement(Ku.Screen,{name:"Users",component:Xu,options:{tabBarIcon:function(e){var n=e.size,t=e.color;e.focused;return p.createElement(Pn.a,{size:n,color:t,name:"account-group"})},unmountOnBlur:!0}}),u&&p.createElement(Ku.Screen,{name:"Settings",component:ju,options:{tabBarIcon:function(e){var n=e.size,t=e.color;e.focused;return p.createElement(Pn.a,{size:n,color:t,name:"account-cog"})}}}))}var nc,tc=t(147),rc=t(682),lc=Object(Wn.a)(nc||(nc=Bn()(["\n  query QueryDropzones {\n    dropzones {\n      edges {\n        node {\n          id\n          name\n          primaryColor\n          secondaryColor\n          banner\n          ticketTypes {\n            id\n            name\n            cost\n            allowManifestingSelf\n            currency\n          }\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n          }\n        }\n      }\n    }\n  }\n"])));function ac(){var e,n=tn(),t=rn((function(e){return e.global})),r=Object(F.useQuery)(lc),a=r.data,o=r.loading,i=r.refetch,s=Object(An.useNavigation)();return p.createElement(rc.a,{style:ic.container},p.createElement(tc.a,{data:(null==a||null==(e=a.dropzones)?void 0:e.edges)||[],numColumns:2,refreshing:o,onRefresh:function(){return i()},style:{flex:1,width:"100%"},contentContainerStyle:{flexGrow:1,width:"100%",paddingBottom:100},ListEmptyComponent:function(){return p.createElement(ql,{title:"No dropzones?",subtitle:"You can set one up!",color:"#FFFFFF"})},renderItem:function(e){var r,a,o,i,u,c=e.item;return p.createElement(Nn.a,{style:{width:Fn.a.get("window").width/2-32,margin:8},onPress:function(){var e;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:null!=c&&c.node&&(e=!!t.currentDropzoneId,n(Ze.global.setDropzone(c.node)),e&&s.replace("Authenticated",{screen:"HomeScreen"}));case 1:case"end":return r.stop()}}),null,null,null,Promise)}},null!=c&&null!=(r=c.node)&&r.banner?p.createElement(Nn.a.Cover,{source:{uri:null==c||null==(a=c.node)?void 0:a.banner}}):p.createElement(S.a,{style:[ic.dzIcon,{backgroundColor:(null==c||null==(o=c.node)?void 0:o.primaryColor)||void 0}]},p.createElement(It.a.Icon,{style:{backgroundColor:(null==c||null==(i=c.node)?void 0:i.secondaryColor)||void 0},icon:"airplane-takeoff"})),p.createElement(Nn.a.Content,null,p.createElement(Lt.a,null,null==c||null==(u=c.node)?void 0:u.name)))}}),p.createElement($t.a,{style:ic.fab,small:!0,icon:"plus",onPress:function(){n(Ze.forms.plane.reset()),n(Ze.forms.ticketType.reset()),n(Ze.forms.dropzone.reset()),s.navigate("DropzoneSetupScreen")},label:"Create dropzone"}))}var oc,ic=O.a.create({container:{flex:1,padding:8,display:"flex",flexGrow:1,backgroundColor:"#FF1414"},dzIcon:{height:150,alignItems:"center",justifyContent:"center"},fab:{position:"absolute",margin:32,right:16,bottom:0,backgroundColor:"#FFFFFF"},empty:{flex:1,backgroundColor:"#FF1414",alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}}),sc=Jn(Object(Wn.a)(oc||(oc=Bn()(["\n  mutation CreateDropzone(\n    $name: String!\n    $banner: String\n    $federationId: Int!\n    $lat: Float\n    $lng: Float\n    $primaryColor: String\n    $secondaryColor: String\n  ) {\n    createDropzone(\n      input: {\n        attributes: {\n          name: $name\n          banner: $banner\n          federationId: $federationId\n          primaryColor: $primaryColor\n          secondaryColor: $secondaryColor\n          lat: $lat\n          lng: $lng\n        }\n      }\n    ) {\n      dropzone {\n        id\n        name\n        banner\n\n        federation {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.createDropzone},fieldErrorMap:{federation:"federationId"},validates:{name:[Qn("Name is required")]}});function uc(){var e=rn((function(e){return e.forms.dropzone})),n=tn(),t=sc({onError:function(e){return n(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onFieldError:function(e,t){return n(Ze.forms.dropzone.setFieldError([e,t]))},onSuccess:function(e){return(null==e?void 0:e.dropzone)&&n(Ze.global.setDropzone(e.dropzone))}});return p.createElement(vr,{contentContainerStyle:{paddingHorizontal:32}},p.createElement(us,{loading:t.loading}),p.createElement(zt,{style:cc.fields},p.createElement(pr.a,{mode:"contained",disabled:t.loading,loading:t.loading,onPress:function(){var n;return t.mutate({name:e.fields.name.value||"",banner:e.fields.banner.value||null,federationId:Number(null==(n=e.fields.federation.value)?void 0:n.id)})}},"Save")))}var cc=O.a.create({container:{flex:1,alignItems:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"100%"},field:{marginBottom:8}}),dc=Object(xn.a)();function mc(){return p.createElement(dc.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}},initialRouteName:"Dropzones"},p.createElement(dc.Screen,{name:"DropzonesScreen",component:ac}),p.createElement(dc.Screen,{name:"CreateDropzoneScreen",component:uc}))}var fc,pc=t(58),gc=t(323),vc=t.n(gc),bc=Object(F.gql)(fc||(fc=Bn()(["\n  mutation UserLogin($email: String!, $password: String!) {\n    userLogin(email: $email, password: $password) {\n      authenticatable {\n        id\n        email\n        name\n        phone\n        createdAt\n        updatedAt\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n"])));function hc(){var e=rn((function(e){return e.screens.login})),n=tn(),t=Object(or.useNavigation)(),r=Object(F.useMutation)(bc),a=W()(r,2),o=a[0],i=a[1],s=p.useCallback((function(){var t,r,a,i,s,u,c;return l.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(t=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/),r=!1,e.fields.email.value||(r=!0,n(Ze.screens.login.setEmailError("Email is required"))),e.fields.password.value||(r=!0,n(Ze.screens.login.setPasswordError("Password is required"))),t.test(e.fields.email.value)||(r=!0,n(Ze.screens.login.setEmailError("Please enter a valid email"))),r){d.next=18;break}return d.prev=7,d.next=10,l.a.awrap(o({variables:{email:e.fields.email.value,password:e.fields.password.value}}));case 10:c=d.sent,console.log({result:c}),null!=c&&null!=(a=c.data)&&null!=(i=a.userLogin)&&i.authenticatable&&null!=c&&null!=(s=c.data)&&null!=(u=s.userLogin)&&u.credentials&&(n(Ze.global.setCredentials(c.data.userLogin.credentials)),n(Ze.global.setUser(c.data.userLogin.authenticatable))),d.next=18;break;case 15:d.prev=15,d.t0=d.catch(7),n(Ze.notifications.showSnackbar({message:d.t0.message,variant:"error"}));case 18:case"end":return d.stop()}}),null,null,[[7,15]],Promise)}),[n,o,e.fields.email.value,e.fields.password.value]);return p.createElement(zt,{style:Ec.container},p.createElement(pc.a,{source:vc.a,style:{height:300,width:"100%"},resizeMode:"contain"}),p.createElement(kr.a,{style:Ec.fields,behavior:"padding"},p.createElement(Ir.a,{label:"Email",mode:"outlined",value:e.fields.email.value,onChangeText:function(e){n(Ze.screens.login.setEmail(e))}}),p.createElement(gl.a,{type:"error"},e.fields.email.error||" "),p.createElement(Ir.a,{label:"Password",mode:"outlined",value:e.fields.password.value,secureTextEntry:!0,onChangeText:function(e){n(Ze.screens.login.setPassword(e))},error:!!e.fields.password.error}),p.createElement(gl.a,{type:"error"},e.fields.password.error||" "),p.createElement(pr.a,{mode:"contained",labelStyle:Ec.buttonLabel,style:Ec.button,onPress:s,loading:i.loading},"Log in"),p.createElement(pr.a,{labelStyle:Ec.textButtonLabel,style:Ec.textButton,onPress:function(){return t.navigate("SignUpScreen")}},"Sign up")))}var yc,Ec=O.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",backgroundColor:"#FF1414",paddingTop:10},title:{fontSize:20,fontWeight:"bold"},fields:{marginBottom:10,marginTop:-50,maxWidth:400,width:"100%",paddingHorizontal:56,backgroundColor:"transparent"},button:{marginTop:10,backgroundColor:"white",width:"100%"},buttonLabel:{color:"#FF1414"},textButton:{marginTop:10,backgroundColor:"transparent",color:"white",width:"100%"},textButtonLabel:{color:"#FFFFFF"}}),wc=Jn(Object(Wn.a)(yc||(yc=Bn()(['\n  mutation UserSignUp(\n    $email: String!\n    $password: String!\n    $passwordConfirmation: String!\n    $name: String!\n    $phone: String!\n    $pushToken: String\n    $exitWeight: Float!\n    $licenseId: Int\n  ) {\n    userSignUp(\n      email: $email\n      password: $password\n      passwordConfirmation: $passwordConfirmation\n      exitWeight: $exitWeight\n      name: $name\n      phone: $phone\n      pushToken: $pushToken\n      licenseId: $licenseId\n      confirmSuccessUrl: "https://openmanifest.org/confirm/"\n    ) {\n      authenticatable {\n        createdAt\n        email\n        id\n        name\n        phone\n      }\n      credentials {\n        accessToken\n        tokenType\n        client\n        expiry\n        uid\n      }\n    }\n  }\n']))),{getPayload:function(e){return e.userSignUp},fieldErrorMap:{license:"licenseId"},validates:{name:[Qn("Name is required")],email:[Yn("Please enter a valid email")],passwordConfirmation:[_n("Password must have 1 uppercase, 1 lowercase, 1 digit and be at least 8 characters",(function(e){return/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)[a-zA-Z\d]{8,}.*$/.test(e.passwordConfirmation)})),_n("Passwords don't match",(function(e){return e.password===e.passwordConfirmation}))]}});function xc(){var e=rn((function(e){return e.screens.signup})),n=rn((function(e){return e.global})),t=tn(),r=Object(An.useNavigation)(),l=wc({onSuccess:function(e){return t(Ze.notifications.showSnackbar({message:"A confirmation link has been sent to your email",variant:"success"})),r.navigate("LoginScreen"),null},onFieldError:function(e,n){return t(Ze.screens.signup.setFieldError([e,n]))}}),a=l.loading,o=l.mutate;return p.createElement(vr,{style:Sc.container,contentContainerStyle:Sc.content},p.createElement(kr.a,{style:Sc.fields,behavior:"position"},p.createElement(pc.a,{source:vc.a,style:{width:"100%",height:200},resizeMode:"contain"}),p.createElement(Ir.a,{style:Sc.field,mode:"outlined",label:"Name",error:!!e.fields.name.error,value:e.fields.name.value,onChangeText:function(e){return t(Ze.screens.signup.setField(["name",e]))}}),p.createElement(gl.a,{type:"error"},e.fields.name.error||""),p.createElement(gl.a,{type:e.fields.exitWeight.error?"error":"info"},e.fields.exitWeight.error||""),p.createElement(Ir.a,{style:Sc.field,mode:"outlined",label:"Email",error:!!e.fields.email.error,value:e.fields.email.value,onChangeText:function(e){return t(Ze.screens.signup.setField(["email",e]))}}),p.createElement(gl.a,{type:"error"},e.fields.email.error||""),p.createElement(Ir.a,{style:Sc.field,mode:"outlined",label:"Phone",error:!!e.fields.phone.error,value:e.fields.phone.value,onChangeText:function(e){return t(Ze.screens.signup.setField(["phone",e]))}}),p.createElement(gl.a,{type:"error"},e.fields.phone.error||""),p.createElement(Ir.a,{style:Sc.field,mode:"outlined",label:"Password",error:Boolean(e.fields.password.error||e.fields.passwordConfirmation.error),textContentType:"password",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:e.fields.password.value,onChangeText:function(e){return t(Ze.screens.signup.setField(["password",e]))}}),p.createElement(gl.a,{type:"error"},e.fields.password.error||""),p.createElement(Ir.a,{style:Sc.field,mode:"outlined",label:"Repeat password",error:Boolean(e.fields.password.error||e.fields.passwordConfirmation.error),textContentType:"password",secureTextEntry:!0,passwordRules:"required: upper; required: lower; required: digit; minlength: 8;",value:e.fields.passwordConfirmation.value,onChangeText:function(e){return t(Ze.screens.signup.setField(["passwordConfirmation",e]))}}),p.createElement(gl.a,{type:"error"},e.fields.passwordConfirmation.error||""),p.createElement(pr.a,{mode:"contained",labelStyle:Sc.buttonLabel,style:Sc.button,onPress:function(){var t,r;return o({pushToken:n.expoPushToken,email:e.fields.email.value,name:e.fields.name.value,exitWeight:e.fields.exitWeight.value,password:e.fields.password.value,passwordConfirmation:e.fields.passwordConfirmation.value,licenseId:Number(null==(t=e.fields.license)||null==(r=t.value)?void 0:r.id)||null,phone:e.fields.phone.value})},loading:a},"Sign up")))}var Sc=O.a.create({container:{flex:1,backgroundColor:"#FF1414"},content:{paddingHorizontal:60,alignItems:"center"},button:{marginTop:10,backgroundColor:"white",width:"100%"},buttonLabel:{color:"#FF1414"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fields:{width:"100%",flexGrow:1,maxWidth:400,backgroundColor:"transparent"},field:{marginBottom:8,backgroundColor:"white",borderColor:"white",color:"white"}}),kc=Object(xn.a)();function Cc(){return p.createElement(kc.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}}},p.createElement(kc.Screen,{name:"LoginScreen",component:hc}),p.createElement(kc.Screen,{name:"SignUpScreen",component:xc}))}var zc=O.a.create({container:{alignItems:"center",backgroundColor:"transparent"},content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},title:{color:"white",marginBottom:100,fontSize:24,fontWeight:"bold"},card:{padding:16,marginVertical:16,width:"100%"}}),Ic=function(e){var n=rn((function(e){return e.forms.dropzone})),t=tn();return p.createElement(yr,wt()({style:zc.container},e,{title:"Basic information"}),p.createElement(S.a,{style:zc.content},p.createElement(Nn.a,{style:zc.card},p.createElement(It.b.Subheader,null,"Name"),p.createElement(Ir.a,{mode:"outlined",error:!!n.fields.name.error,value:n.fields.name.value||"",onChangeText:function(e){return t(Ze.forms.dropzone.setField(["name",e]))}}),p.createElement(gl.a,{type:"error"},n.fields.name.error||"")),p.createElement(Nn.a,{style:zc.card},p.createElement(Qo,{value:n.fields.federation.value,onSelect:function(e){return t(Ze.forms.dropzone.setField(["federation",e]))}}),p.createElement(gl.a,{type:n.fields.federation.error?"error":"info"},n.fields.federation.error||""))))};function Oc(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function jc(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?Oc(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):Oc(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var Tc=O.a.create({container:{paddingHorizontal:48,alignItems:"center",backgroundColor:"transparent"},titleContainer:{position:"absolute",top:140,left:0,width:"100%",flexDirection:"column",alignItems:"center",justifyContent:"flex-start"},title:{fontSize:30,fontWeight:"bold",color:"white",textAlign:"center",textShadowColor:"rgba(15, 15, 15, 0.5)",textShadowRadius:10,textShadowOffset:{width:2,height:2}},markerFixed:jc(jc({},O.a.absoluteFillObject),{},{justifyContent:"center",zIndex:100,alignItems:"center",flexDirection:"column"}),content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},card:{padding:0,paddingVertical:16,marginVertical:16,width:"100%"},myLocation:{position:"absolute",bottom:"30%",right:30,backgroundColor:"white",borderRadius:50,padding:12}}),Pc=function(e){var n,t,r=rn((function(e){return e.forms.dropzone})),a=tn(),o=p.useState(),i=W()(o,2),s=i[0],u=i[1],c=p.useCallback((function(){var e,n,t;return l.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,l.a.awrap(Lr.b());case 3:if(e=r.sent,"granted"===(n=e.status)){r.next=8;break}return console.log(n),r.abrupt("return");case 8:return r.next=10,l.a.awrap(Lr.a({}));case 10:t=r.sent,a(Ze.forms.dropzone.setField(["lat",t.coords.latitude])),a(Ze.forms.dropzone.setField(["lng",t.coords.longitude])),u({lat:t.coords.latitude,lng:t.coords.longitude}),r.next=19;break;case 16:r.prev=16,r.t0=r.catch(0),console.log(r.t0);case 19:case"end":return r.stop()}}),null,null,[[0,16]],Promise)}),[a]);p.useEffect((function(){null!==r.fields.lat.value&&null!=r.fields.lng.value||c()}),[c,r.fields.lat.value,r.fields.lng.value]);var d=p.useRef(new Wt.a.Value(0)),m=r.fields.lat.value&&r.fields.lng.value?{latitude:r.fields.lat.value,longitude:r.fields.lng.value,latitudeDelta:Gr(r.fields.lat.value),longitudeDelta:Gr(r.fields.lat.value)}:void 0,f=p.useState(!1),g=W()(f,2),v=(g[0],g[1]),b=p.useRef(Wt.a.timing(d.current,{duration:100,toValue:0,useNativeDriver:!0})),h=p.useRef(Wt.a.timing(d.current,{duration:100,toValue:1,useNativeDriver:!0})),y=p.useCallback((function(e){v(!0),console.log({visible:e}),(e?h:b).current.start((function(){return v(!1)}))}),[]),E=Object($n.a)(),w=E.height,x=E.width,k=p.useState(!1),C=W()(k,2),z=C[0],I=C[1];return p.createElement(yr,wt()({disableScroll:!0,style:Tc.container,containerStyle:{paddingHorizontal:0}},e),p.createElement(Yr,{mapStyle:jc({},O.a.absoluteFillObject),position:{x:0,y:0},height:w,width:x,coords:null!=m&&m.latitude&&null!=m&&m.longitude?{lat:null==m?void 0:m.latitude,lng:null==m?void 0:m.longitude}:void 0,onDragStart:function(){I(!0),y(!1)},center:s||void 0,onDragEnd:function(e){var n,t;null==(n=b.current)||n.stop(),null==(t=h.current)||t.stop(),v(!1),y(!0),I(!1),a(Ze.forms.dropzone.setField(["lat",e.lat])),a(Ze.forms.dropzone.setField(["lng",e.lng]))},interactive:!0},m?p.createElement(S.a,{style:Tc.markerFixed,pointerEvents:"none"},p.createElement(Pn.a,{pointerEvents:"none",size:60,style:{color:"#ffffff",textShadowColor:"rgba(14,14,14,0.8)",textShadowOffset:{width:5,height:5},textShadowRadius:10,zIndex:10},name:z?"map-marker":"map-marker-check-outline"})):null),p.createElement(Cn.a,{style:Tc.myLocation,onPress:function(){c()}},p.createElement(Gi.a,{name:"my-location",size:30})),p.createElement(S.a,{style:Tc.titleContainer},p.createElement(kn.a,{style:Tc.title},"Pick location"),p.createElement(Wt.a.Text,{style:{fontSize:24,marginTop:20,opacity:d.current,textAlign:"center",color:"#ffffff",textShadowColor:"rgba(14,14,14,0.8)",textShadowOffset:{width:3,height:3},textShadowRadius:10}},null!=m&&m.latitude&&null!=m&&m.longitude?p.createElement(p.Fragment,null,null==m||null==(n=m.latitude)?void 0:n.toFixed(5),",",null==m||null==(t=m.longitude)?void 0:t.toFixed(5)):null)))};var Fc=O.a.create({container:{paddingHorizontal:48,alignItems:"center"},content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},card:{padding:8,marginVertical:4},cardTitle:{flexDirection:"row",justifyContent:"space-between"},cardValue:{fontWeight:"bold",marginRight:8,fontSize:16,alignSelf:"center"},title:{color:"white",marginBottom:10,fontWeight:"bold",fontSize:25,textAlign:"center"},field:{marginBottom:8},slider:{flexDirection:"column"},sliderControl:{width:"100%",height:40},wingLoading:{alignSelf:"center"},wingLoadingCardLeft:{width:"30%"},wingLoadingCardRight:{paddingLeft:16,width:"70%"}}),Dc=function(e){var n,t,r,l,a,o,i,s,u=rn((function(e){return e.forms.plane})),c=p.useState((null==u||null==(n=u.fields)||null==(t=n.minSlots)?void 0:t.value)||0),d=W()(c,2),m=d[0],f=d[1],g=p.useState((null==u||null==(r=u.fields)||null==(l=r.maxSlots)?void 0:l.value)||0),v=W()(g,2),b=v[0],h=v[1],y=tn();return p.createElement(yr,wt()({style:Fc.container},e,{title:"Aircraft"}),p.createElement(S.a,{style:Fc.content},p.createElement(Nn.a,{style:Fc.card},p.createElement(It.b.Subheader,null,"Information"),p.createElement(Ir.a,{style:Fc.field,mode:"outlined",label:"Name",error:!!u.fields.name.error,value:u.fields.name.value,onChangeText:function(e){return y(Ze.forms.plane.setField(["name",e]))}}),p.createElement(gl.a,{type:u.fields.name.error?"error":"info"},u.fields.name.error||""),p.createElement(Ir.a,{style:Fc.field,mode:"outlined",label:"Registration",error:!!u.fields.registration.error,value:u.fields.registration.value,onChangeText:function(e){return y(Ze.forms.plane.setField(["registration",e]))}}),p.createElement(gl.a,{type:u.fields.registration.error?"error":"info"},u.fields.registration.error||"")),p.createElement(Nn.a,{style:Fc.card,elevation:3},p.createElement(S.a,{style:Fc.cardTitle},p.createElement(It.b.Subheader,null,"Minimum slots"),p.createElement(kn.a,{style:Fc.cardValue},m||0)),p.createElement(S.a,{style:Fc.slider},p.createElement(Yi.a,{style:Fc.sliderControl,minimumValue:0,maximumValue:b||34,step:1,value:m,minimumTrackTintColor:"#FF1414",maximumTrackTintColor:"#000000",onValueChange:function(e){return f(e)},onSlidingComplete:function(){return y(Ze.forms.plane.setField(["minSlots",m]))}})),p.createElement(gl.a,{type:null!=(a=u.fields.minSlots)&&a.error?"error":"info"},(null==(o=u.fields.minSlots)?void 0:o.error)||"How many slots are required to be filled to dispatch a load with this aircraft")),p.createElement(Nn.a,{style:Fc.card,elevation:3},p.createElement(S.a,{style:Fc.cardTitle},p.createElement(It.b.Subheader,null,"Max slots"),p.createElement(kn.a,{style:Fc.cardValue},b||34)),p.createElement(S.a,{style:Fc.slider},p.createElement(Yi.a,{style:Fc.sliderControl,minimumValue:2,maximumValue:34,step:1,minimumTrackTintColor:"#FF1414",maximumTrackTintColor:"#000000",value:b,onValueChange:function(e){return h(e)},onSlidingComplete:function(){return y(Ze.forms.plane.setField(["maxSlots",Number(b)]))}})),p.createElement(gl.a,{type:null!=(i=u.fields.maxSlots)&&i.error?"error":"info"},(null==(s=u.fields.maxSlots)?void 0:s.error)||"Max available slots on this aircraft"))))};var $c,Nc=O.a.create({container:{paddingHorizontal:48,alignItems:"center"},field:{marginBottom:8},content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},card:{padding:8,marginVertical:16},colorBox:{height:25,width:25,margin:5}}),Ac=function(e){var n=rn((function(e){return e.forms.dropzone})),t=tn();return p.createElement(yr,wt()({style:Nc.container},e,{title:"Branding"}),p.createElement(S.a,{style:Nc.content},p.createElement(S.a,{style:{flexDirection:"row",alignItems:"flex-end",justifyContent:"space-evenly"}},p.createElement(es,{primaryColor:n.fields.primaryColor.value||"#000000",secondaryColor:n.fields.secondaryColor.value||"#ffffff"}),p.createElement(ts,{primaryColor:n.fields.primaryColor.value||"#000000",secondaryColor:n.fields.secondaryColor.value||"#ffffff"})),p.createElement(Xi,{title:"Primary color",helperText:"Primary color is used for elements like the title bar and the tab bar",error:n.fields.primaryColor.error,onChange:function(e){return t(Ze.forms.dropzone.setField(["primaryColor",e]))},value:n.fields.primaryColor.value||"#000000"}),p.createElement(Xi,{title:"Accent color",helperText:"Accent color is used for highlights, like buttons and loading bars",error:n.fields.secondaryColor.error,onChange:function(e){return t(Ze.forms.dropzone.setField(["secondaryColor",e]))},value:n.fields.secondaryColor.value||"#FFFFFF"})))},Rc=Object(Wn.a)($c||($c=Bn()(["\n  query QueryDropzonePermissions($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles {\n        id\n        name\n        permissions\n      }\n    }\n  }\n"])));var Uc=O.a.create({container:{paddingHorizontal:48,alignItems:"center"},content:{width:"100%",justifyContent:"space-around",flexDirection:"column",marginBottom:16},card:{padding:8,marginVertical:16},cardTitle:{flexDirection:"row",justifyContent:"space-between"},cardValue:{fontWeight:"bold",marginRight:8,fontSize:16,alignSelf:"center"},title:{color:"white",marginBottom:50,fontWeight:"bold",fontSize:25,textAlign:"center"},field:{marginBottom:8},slider:{flexDirection:"column"},sliderControl:{width:"100%",height:40},wingLoading:{alignSelf:"center"},wingLoadingCardLeft:{width:"30%"},wingLoadingCardRight:{paddingLeft:16,width:"70%"}}),Lc=function(e){var n,t,r,l,a=e.permission,o=St()(e,["permission"]),i=rn((function(e){return e.forms.dropzone})),s=Object(F.useLazyQuery)(Rc),u=W()(s,2),c=u[0],d=u[1],m=d.data,f=d.loading,g=d.called;return p.useEffect((function(){var e;null!=(e=i.original)&&e.id&&c({variables:{dropzoneId:Number(i.original.id)}})}),[i.original,c]),p.createElement(yr,wt()({style:Uc.container},o),p.createElement(S.a,{style:Uc.content},g&&!f&&null!=m&&null!=(n=m.dropzone)&&null!=(t=n.roles)&&t.length?p.createElement(Nn.a,null,p.createElement(Nn.a.Content,{style:{alignItems:"center",justifyContent:"center"}},null==m||null==(r=m.dropzone)||null==(l=r.roles)?void 0:l.map((function(e){var n;return p.createElement(tu,{permissionName:a,role:e,title:Object(zr.capitalize)(null==e||null==(n=e.name)?void 0:n.replace(/_/," "))})})))):null))};var Bc,Mc,Wc,Vc,Hc,Gc=O.a.create({container:{paddingHorizontal:48,alignItems:"center"},content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},card:{padding:8,marginVertical:16},cardTitle:{flexDirection:"row",justifyContent:"space-between"},cardValue:{fontWeight:"bold",marginRight:8,fontSize:16,alignSelf:"center"},title:{color:"white",marginBottom:8,fontWeight:"bold",fontSize:25,textAlign:"center"},paragraph:{color:"white",marginBottom:8,fontWeight:"bold",textAlign:"center"},field:{marginBottom:8,marginHorizontal:16},slider:{flexDirection:"column"},sliderControl:{width:"100%",height:40},wingLoading:{alignSelf:"center"},wingLoadingCardLeft:{width:"30%"},wingLoadingCardRight:{paddingLeft:16,width:"70%"}}),qc=function(e){var n,t,r,l,o=rn((function(e){return e.forms.ticketType})),i=tn(),s=p.useState(!1),u=W()(s,2),c=u[0],d=u[1],m=p.useState(0),f=W()(m,2),g=f[0],v=f[1];return p.createElement(yr,wt()({style:Gc.container},e,{title:"Tickets"}),p.createElement(Bt.a,{style:Gc.paragraph},"You can add more tickets later under Settings"),p.createElement(S.a,{style:Gc.content},p.createElement(Nn.a,{style:Gc.card},p.createElement(It.b.Subheader,null,"Name"),p.createElement(Ir.a,{style:Gc.field,mode:"outlined",error:!!o.fields.name.error,value:o.fields.name.value,onChangeText:function(e){return i(Ze.forms.ticketType.setField(["name",e]))}}),p.createElement(gl.a,{type:o.fields.name.error?"error":"info"},o.fields.name.error||"")),p.createElement(Nn.a,{style:Gc.card,elevation:3},p.createElement(S.a,{style:Gc.cardTitle},p.createElement(It.b.Subheader,null,"Price"),p.createElement(kn.a,{style:Gc.cardValue},"$",g||0)),p.createElement(S.a,{style:Gc.slider},p.createElement(Yi.a,{style:Gc.sliderControl,minimumValue:0,maximumValue:500,step:1,value:g,minimumTrackTintColor:"#FF1414",maximumTrackTintColor:"#000000",onSlidingComplete:function(){return i(Ze.forms.ticketType.setField(["cost",g]))},onValueChange:v})),p.createElement(gl.a,{type:null!=(n=o.fields.cost)&&n.error?"error":"info"},(null==(t=o.fields.cost)?void 0:t.error)||"How many slots are required to be filled to dispatch a load with this aircraft")),p.createElement(Nn.a,{style:Gc.card,elevation:3},p.createElement(it.a,{onDismiss:function(){return d(!1)},visible:c,contentStyle:{width:300},anchor:p.createElement(a.f,{onPress:function(){return d(!0)}},p.createElement(S.a,{style:Gc.cardTitle},p.createElement(It.b.Subheader,null,"Altitude"),p.createElement(kn.a,{style:Gc.cardValue},o.fields.altitude.value&&[4e3,14e3].includes(o.fields.altitude.value)?{14e3:"Height",4e3:"Hop n Pop"}[o.fields.altitude.value.toString()]:"Custom")))},p.createElement(It.b.Item,{onPress:function(){i(Ze.forms.ticketType.setField(["altitude",4e3])),d(!1)},title:"Hop n Pop",right:function(){return p.createElement(It.b.Icon,{icon:"parachute"})}}),p.createElement(It.b.Item,{onPress:function(){i(Ze.forms.ticketType.setField(["altitude",14e3])),d(!1)},title:"Height",right:function(){return p.createElement(It.b.Icon,{icon:"airplane-takeoff"})}}),p.createElement(It.b.Item,{onPress:function(){i(Ze.forms.ticketType.setField(["altitude",7e3])),d(!1)},title:"Other",right:function(){return p.createElement(It.b.Icon,{icon:"parachute"})}})),(!o.fields.altitude.value||![4e3,14e3].includes(o.fields.altitude.value))&&p.createElement(Ir.a,{style:Gc.field,mode:"outlined",label:"Custom altitude",error:!!o.fields.altitude.error,value:null==(r=o.fields.altitude)||null==(l=r.value)?void 0:l.toString(),onChangeText:function(e){return i(Ze.forms.ticketType.setField(["altitude",Number(e)]))}}))))},Qc=Jn(Object(Wn.a)(Bc||(Bc=Bn()(["\n  mutation UpdateDropzone(\n    $id: Int!\n    $name: String!\n    $banner: String\n    $federationId: Int!\n    $lat: Float\n    $lng: Float\n    $primaryColor: String\n    $secondaryColor: String\n    $isCreditSystemEnabled: Boolean\n    $isPublic: Boolean\n  ) {\n    updateDropzone(\n      input: {\n        id: $id\n        attributes: {\n          name: $name\n          banner: $banner\n          lat: $lat\n          lng: $lng\n          federationId: $federationId\n          primaryColor: $primaryColor\n          secondaryColor: $secondaryColor\n          isCreditSystemEnabled: $isCreditSystemEnabled\n          isPublic: $isPublic\n        }\n      }\n    ) {\n      dropzone {\n        id\n        name\n        banner\n        primaryColor\n        secondaryColor\n        isCreditSystemEnabled\n\n        planes {\n          id\n          name\n        }\n\n        federation {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.updateDropzone},fieldErrorMap:{}}),Yc=Jn(Object(Wn.a)(Mc||(Mc=Bn()(["\n  mutation CreatePlane(\n    $name: String!\n    $registration: String!\n    $dropzoneId: Int!\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ) {\n    createPlane(\n      input: {\n        attributes: {\n          name: $name\n          registration: $registration\n          dropzoneId: $dropzoneId\n          minSlots: $minSlots\n          maxSlots: $maxSlots\n          hours: $hours\n          nextMaintenanceHours: $nextMaintenanceHours\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.createPlane},fieldErrorMap:{dropzone:"dropzoneId"},validates:{name:[Qn("Name is required")],registration:[Qn("Registration is required")]}}),_c=Jn(Object(Wn.a)(Wc||(Wc=Bn()(["\n  mutation UpdatePlane(\n    $id: Int!\n    $name: String!\n    $registration: String!\n    $minSlots: Int!\n    $maxSlots: Int!\n    $hours: Int\n    $nextMaintenanceHours: Int\n  ) {\n    updatePlane(\n      input: {\n        id: $id\n        attributes: {\n          name: $name\n          registration: $registration\n          minSlots: $minSlots\n          maxSlots: $maxSlots\n          hours: $hours\n          nextMaintenanceHours: $nextMaintenanceHours\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      plane {\n        id\n        name\n        registration\n        minSlots\n        maxSlots\n        hours\n        nextMaintenanceHours\n\n        dropzone {\n          id\n          name\n          planes {\n            id\n            name\n            registration\n            minSlots\n            maxSlots\n            hours\n            nextMaintenanceHours\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.updatePlane},fieldErrorMap:{}}),Jc=Jn(Object(Wn.a)(Vc||(Vc=Bn()(["\n  mutation CreateTicketType(\n    $name: String\n    $cost: Float\n    $dropzoneId: Int!\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n    $isTandem: Boolean\n  ) {\n    createTicketType(\n      input: {\n        attributes: {\n          name: $name\n          cost: $cost\n          dropzoneId: $dropzoneId\n          altitude: $altitude\n          allowManifestingSelf: $allowManifestingSelf\n          isTandem: $isTandem\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n\n        dropzone {\n          id\n\n          ticketTypes {\n            id\n            name\n            altitude\n            cost\n            allowManifestingSelf\n            extras {\n              id\n              name\n              cost\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.createTicketType},fieldErrorMap:{}}),Zc=Jn(Object(Wn.a)(Hc||(Hc=Bn()(["\n  mutation UpdateTicketType(\n    $id: Int!\n    $name: String\n    $cost: Float\n    $altitude: Int\n    $allowManifestingSelf: Boolean\n    $isTandem: Boolean\n  ) {\n    updateTicketType(\n      input: {\n        id: $id\n        attributes: {\n          name: $name\n          cost: $cost\n          altitude: $altitude\n          allowManifestingSelf: $allowManifestingSelf\n          isTandem: $isTandem\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      ticketType {\n        id\n        name\n        altitude\n        cost\n        allowManifestingSelf\n        extras {\n          id\n          name\n          cost\n        }\n\n        dropzone {\n          id\n\n          ticketTypes {\n            id\n            name\n            altitude\n            cost\n            allowManifestingSelf\n            extras {\n              id\n              name\n              cost\n            }\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.updateTicketType},fieldErrorMap:{}});var Xc=function(){var e,n,t,r,a,o,i=rn((function(e){return e.forms.plane})),s=rn((function(e){return e.forms.ticketType})),u=rn((function(e){return e.forms.dropzone})),c=tn(),d=Object(or.useNavigation)(),m=sc({onError:function(e){return c(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onSuccess:function(e){return console.log(e)},onFieldError:function(e,n){return c(Ze.forms.dropzone.setFieldError([e,n]))}}),f=Qc({onError:function(e){return c(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onSuccess:function(e){return console.log(e)},onFieldError:function(e,n){return c(Ze.forms.dropzone.setFieldError([e,n]))}}),g=Yc({onError:function(e){return c(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onSuccess:function(e){return console.log(e)},onFieldError:function(e,n){return c(Ze.forms.plane.setFieldError([e,n]))}}),v=_c({onError:function(e){return c(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onSuccess:function(e){return console.log(e)},onFieldError:function(e,n){return c(Ze.forms.plane.setFieldError([e,n]))}}),b=Jc({onError:function(e){return c(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onSuccess:function(e){return console.log(e)},onFieldError:function(e,n){return c(Ze.forms.ticketType.setFieldError([e,n]))}}),h=Zc({onError:function(e){return c(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onSuccess:function(e){return console.log(e)},onFieldError:function(e,n){return c(Ze.forms.ticketType.setFieldError([e,n]))}}),y=p.useCallback((function(e,n){return l.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(u.fields.name.value){t.next=3;break}return c(Ze.forms.dropzone.setFieldError(["name","Your dropzone must have a name"])),t.abrupt("return");case 3:if(u.fields.federation.value){t.next=6;break}return c(Ze.forms.dropzone.setFieldError(["federation","Your dropzone must have an associated organization"])),t.abrupt("return");case 6:n(e+1);case 7:case"end":return t.stop()}}),null,null,null,Promise)}),[c,u.fields.federation.value,u.fields.name.value]),E=p.useCallback((function(e,n){var t,r,a,o,i,s,d,p;return l.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(u.fields.primaryColor.value){g.next=3;break}return c(Ze.forms.dropzone.setFieldError(["primaryColor","Please pick a primary color"])),g.abrupt("return");case 3:if(u.fields.secondaryColor.value){g.next=6;break}return c(Ze.forms.dropzone.setFieldError(["secondaryColor","Please pick an accent color"])),g.abrupt("return");case 6:if(null!=(t=u.original)&&t.id){g.next=12;break}return g.next=9,l.a.awrap(m.mutate({federationId:Number(null==(r=u.fields.federation.value)?void 0:r.id),name:u.fields.name.value||"",banner:"",primaryColor:u.fields.primaryColor.value,secondaryColor:u.fields.secondaryColor.value,lat:u.fields.lat.value,lng:u.fields.lng.value}));case 9:g.t0=g.sent,g.next=15;break;case 12:return g.next=14,l.a.awrap(f.mutate({id:Number(u.original.id),federationId:Number(null==(a=u.fields.federation.value)?void 0:a.id),name:u.fields.name.value||"",primaryColor:u.fields.primaryColor.value,secondaryColor:u.fields.secondaryColor.value,lat:u.fields.lat.value,lng:u.fields.lng.value,banner:""}));case 14:g.t0=g.sent;case 15:null!=(s=g.t0)&&null!=(o=s.errors)&&o.length||null==s||null==(i=s.dropzone)||!i.id||(c(Ze.forms.dropzone.setOpen(null==s?void 0:s.dropzone)),c(Ze.global.setDropzone(null==s?void 0:s.dropzone)),s.dropzone.primaryColor&&c(Ze.global.setPrimaryColor(null==s||null==(d=s.dropzone)?void 0:d.primaryColor)),s.dropzone.secondaryColor&&c(Ze.global.setAccentColor(null==s||null==(p=s.dropzone)?void 0:p.secondaryColor)),n(e+1));case 17:case"end":return g.stop()}}),null,null,null,Promise)}),[c,null==(e=u.fields.federation.value)?void 0:e.id,u.fields.lat.value,u.fields.lng.value,u.fields.name.value,u.fields.primaryColor.value,u.fields.secondaryColor.value,null==(n=u.original)?void 0:n.id,m,f]),w=p.useCallback((function(e,n){var t,r,a,o,s;return l.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(i.fields.name.value){d.next=3;break}return c(Ze.forms.plane.setFieldError(["name","You must name your aircraft"])),d.abrupt("return");case 3:if(i.fields.registration.value){d.next=6;break}return c(Ze.forms.plane.setFieldError(["registration","Please provide aircraft registration"])),d.abrupt("return");case 6:if(null!=(t=i.original)&&t.id){d.next=12;break}return d.next=9,l.a.awrap(g.mutate({dropzoneId:Number(null==u||null==(r=u.original)?void 0:r.id),name:i.fields.name.value,registration:i.fields.registration.value,minSlots:Number(i.fields.minSlots.value),maxSlots:Number(i.fields.maxSlots.value)}));case 9:d.t0=d.sent,d.next=15;break;case 12:return d.next=14,l.a.awrap(v.mutate({id:Number(i.original.id),name:i.fields.name.value,registration:i.fields.registration.value,minSlots:i.fields.minSlots.value,maxSlots:i.fields.maxSlots.value}));case 14:d.t0=d.sent;case 15:null!=(s=d.t0)&&null!=(a=s.errors)&&a.length||null==s||null==(o=s.plane)||!o.id||(c(Ze.forms.plane.setOpen(null==s?void 0:s.plane)),n(e+1));case 17:case"end":return d.stop()}}),null,null,null,Promise)}),[i.fields.maxSlots.value,i.fields.minSlots.value,i.fields.name.value,i.fields.registration.value,null==(t=i.original)?void 0:t.id,c,null==u||null==(r=u.original)?void 0:r.id,g,v]),x=p.useCallback((function(e,n){var t,r,a,o,i;return l.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(s.fields.name.value){d.next=3;break}return c(Ze.forms.ticketType.setFieldError(["name","You must name your ticket"])),d.abrupt("return");case 3:if(s.fields.cost.value){d.next=6;break}return c(Ze.forms.ticketType.setFieldError(["cost","Tickets must have a price"])),d.abrupt("return");case 6:if(null!=(t=s.original)&&t.id){d.next=12;break}return d.next=9,l.a.awrap(b.mutate({dropzoneId:Number(null==(r=u.original)?void 0:r.id),name:s.fields.name.value,cost:s.fields.cost.value,altitude:s.fields.altitude.value,isTandem:!1,allowManifestingSelf:!0}));case 9:d.t0=d.sent,d.next=15;break;case 12:return d.next=14,l.a.awrap(h.mutate({id:Number(s.original.id),name:s.fields.name.value,cost:s.fields.cost.value,altitude:s.fields.altitude.value,isTandem:!1,allowManifestingSelf:!0}));case 14:d.t0=d.sent;case 15:null!=(i=d.t0)&&null!=(a=i.errors)&&a.length||null==i||null==(o=i.ticketType)||!o.id||(c(Ze.forms.ticketType.setOpen(i.ticketType)),n(e+1));case 17:case"end":return d.stop()}}),null,null,null,Promise)}),[s.fields.name.value,s.fields.cost.value,s.fields.altitude.value,null==(a=s.original)?void 0:a.id,b,null==(o=u.original)?void 0:o.id,h,c]);return p.createElement(fr,null,p.createElement(Ic,{onBack:function(){c(Ze.forms.dropzoneWizard.setOpen(!1)),c(Ze.forms.dropzoneWizard.reset()),c(Ze.forms.ticketType.setOpen(!1)),c(Ze.forms.plane.setOpen(!1)),c(Ze.forms.dropzone.setOpen(!1)),c(Ze.forms.ticketType.reset()),c(Ze.forms.plane.reset()),c(Ze.forms.dropzone.reset()),d.goBack()},backButtonLabel:"Cancel",nextButtonLabel:"Next",onNext:y}),p.createElement(Pc,{onBack:function(e,n){return n(e-1)},onNext:function(e,n){return n(e+1)},backButtonLabel:"Back",nextButtonLabel:"Next"}),p.createElement(Ac,{onBack:function(e,n){return n(e-1)},onNext:E,loading:m.loading||f.loading,nextButtonLabel:"Next",backButtonLabel:"Back"}),p.createElement(Dc,{onBack:function(e,n){return n(e-1)},onNext:w,loading:g.loading||v.loading,nextButtonLabel:"Next",backButtonLabel:"Back"}),p.createElement(qc,{onBack:function(e,n){return n(e-1)},onNext:x,loading:b.loading||h.loading,nextButtonLabel:"Next",backButtonLabel:"Back"}),p.createElement(Lc,{title:"Who can manifest?",permission:lt.CreateSlot,onBack:function(e,n){return n(e-1)},onNext:function(e,n){return n(e+1)},nextButtonLabel:"Next",backButtonLabel:"Back"}),p.createElement(Lc,{title:"Manifest other people?",permission:lt.CreateUserSlot,onBack:function(e,n){return n(e-1)},onNext:function(e,n){n(e+1)},nextButtonLabel:"Next",backButtonLabel:"Back"}),p.createElement(xr,{title:"Setup complete",subtitle:"You can configure settings under the Settings screen",backButtonLabel:"Back",nextButtonLabel:"Done",onBack:function(e,n){return n(e-1)},onNext:function(){c(Ze.global.setDropzone(u.original)),u.fields.primaryColor.value&&c(Ze.global.setPrimaryColor(u.fields.primaryColor.value)),u.fields.secondaryColor.value&&c(Ze.global.setAccentColor(u.fields.secondaryColor.value)),c(Ze.global.setDropzone(u.original)),c(Ze.forms.dropzoneWizard.setOpen(!1)),c(Ze.forms.dropzoneWizard.reset()),c(Ze.forms.ticketType.setOpen(!1)),c(Ze.forms.plane.setOpen(!1)),c(Ze.forms.dropzone.setOpen(!1)),c(Ze.forms.ticketType.reset()),c(Ze.forms.plane.reset()),c(Ze.forms.dropzone.reset()),c(Ze.forms.dropzoneWizard.complete()),d.replace("Authenticated",{screen:"HomeScreen"})}}))};var Kc=O.a.create({container:{flexGrow:1,backgroundColor:"#FF0000",alignItems:"center",justifyContent:"center"},icon:{backgroundColor:"#00C851",marginBottom:16},errorIcon:{backgroundColor:"#FF8800",marginBottom:16},title:{fontSize:38,color:"#FFFFFF",marginBottom:16},subtitle:{fontSize:26,color:"#FFFFFF",textAlign:"center"}}),ed=function(){var e,n=Object(An.useRoute)();return"true"===(null==n||null==(e=n.params)?void 0:e.account_confirmation_success)?p.createElement(S.a,{style:Kc.container},p.createElement(It.a.Icon,{icon:"check",style:Kc.icon}),p.createElement(kn.a,{style:Kc.title},"All done!"),p.createElement(kn.a,{style:Kc.subtitle},"You can now log in")):p.createElement(S.a,{style:Kc.container},p.createElement(It.a.Icon,{icon:"close",style:Kc.errorIcon}),p.createElement(kn.a,{style:Kc.title},"Oops!"),p.createElement(kn.a,{style:Kc.subtitle},"Something went wrong. Please contact support"))},nd=Object(xn.a)();Object(Sn.a)();function td(){var e=rn((function(e){return e.global}));return p.createElement(nd.Navigator,{screenOptions:{headerShown:!1,cardStyle:{flex:1}}},e.credentials?e.currentDropzone?p.createElement(nd.Screen,{name:"Authenticated",component:ec}):p.createElement(nd.Screen,{name:"Dropzones",component:mc}):p.createElement(nd.Screen,{name:"Unauthenticated",component:Cc}),p.createElement(nd.Screen,{name:"DropzoneSetupScreen",component:Xc}),p.createElement(nd.Screen,{name:"confirm",component:ed}),p.createElement(nd.Screen,{name:"DropzonesScreen",component:ac}),p.createElement(nd.Screen,{name:"NotFound",component:zn,options:{title:"Oops!"}}))}var rd=t(282);var ld=O.a.create({container:{paddingHorizontal:48,alignItems:"center"},content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},title:{color:"white",marginBottom:100,fontSize:24,fontWeight:"bold"},card:{padding:16,marginVertical:16,width:"100%"}}),ad=function(e){var n,t,r,l,a,o,i,s,u,c,d,m,f,g,v,b=rn((function(e){return e.forms.user})),h=tn();return p.createElement(yr,wt()({style:ld.container},e,{title:"What license do you have?"}),p.createElement(S.a,{style:ld.content},p.createElement(Nn.a,{style:ld.card},p.createElement(Qo,{value:(null==b||null==(n=b.fields)||null==(t=n.license)||null==(r=t.value)?void 0:r.federation)||b.federation.value,onSelect:function(e){return h(Ze.forms.user.setFederation(e))}}),p.createElement(gl.a,{type:b.federation.error?"error":"info"},b.federation.error||"")),p.createElement(Nn.a,{style:{padding:16}},((null==b||null==(l=b.fields)||null==(a=l.license)||null==(o=a.value)||null==(i=o.federation)?void 0:i.id)||(null==b||null==(s=b.federation)||null==(u=s.value)?void 0:u.id))&&p.createElement(p.Fragment,null,p.createElement(Go,{value:b.fields.license.value,federationId:Number((null==b||null==(c=b.fields)||null==(d=c.license)||null==(m=d.value)||null==(f=m.federation)?void 0:f.id)||(null==(g=b.federation)||null==(v=g.value)?void 0:v.id)),onSelect:function(e){return h(Ze.forms.user.setField(["license",e]))}}),p.createElement(gl.a,{type:b.fields.license.error?"error":"info"},b.fields.license.error||"")))))};var od=O.a.create({container:{paddingHorizontal:48,alignItems:"center"},field:{marginBottom:8},content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},card:{padding:16,marginVertical:16},title:{color:"white",marginBottom:16,fontSize:24,fontWeight:"bold"}}),id=function(e){var n=rn((function(e){return e.forms.rig})),t=tn(),r=p.useState(!1),l=W()(r,2),o=l[0],i=l[1],s=p.useState(!1),u=W()(s,2),c=u[0],d=u[1];return p.createElement(yr,wt()({style:od.container},e,{title:"What're you jumping?"}),p.createElement(S.a,{style:od.content},p.createElement(Nn.a,{style:od.card},p.createElement(It.b.Subheader,null,"Container manufacturer"),p.createElement(it.a,{onDismiss:function(){return i(!1)},visible:o,anchor:p.createElement(a.f,{onPress:function(){return i(!0)}},p.createElement(Ir.a,{pointerEvents:"box-only",style:od.field,mode:"outlined",error:!!n.fields.make.error,value:c?"Other":n.fields.make.value||"Select manufacturer",disabled:!0}))},["Icon","Javelin","Mirage","Vector","PA (Talon)","Infinity","Parachutes de France","Parachute Systems","Racer"].map((function(e){return p.createElement(it.a.Item,{onPress:function(){i(!1),t(Ze.forms.rig.setField(["make",e])),d(!1)},title:e})})),p.createElement(it.a.Item,{onPress:function(){i(!1),t(Ze.forms.rig.setField(["make",""])),d(!0)},title:"Other"})),c?p.createElement(Ir.a,{style:od.field,mode:"outlined",label:"Other manufacturer",error:!!n.fields.make.error,value:n.fields.make.value||"",onChangeText:function(e){return t(Ze.forms.rig.setField(["make",e]))}}):null,p.createElement(gl.a,{type:n.fields.make.error?"error":"info"},n.fields.make.error||""),p.createElement(It.b.Subheader,null,"Model"),p.createElement(Ir.a,{style:od.field,mode:"outlined",error:!!n.fields.model.error,value:n.fields.model.value||"",onChangeText:function(e){return t(Ze.forms.rig.setField(["model",e]))}}),p.createElement(gl.a,{type:n.fields.model.error?"error":"info"},n.fields.model.error||"e.g G4.1")),p.createElement(Nn.a,{style:od.card},p.createElement(It.b.Subheader,null,"Serial number"),p.createElement(Ir.a,{style:od.field,mode:"outlined",error:!!n.fields.serial.error,value:n.fields.serial.value||"",onChangeText:function(e){return t(Ze.forms.rig.setField(["serial",e]))}}),p.createElement(gl.a,{type:n.fields.serial.error?"error":"info"},n.fields.serial.error||""))))};var sd=O.a.create({container:{paddingHorizontal:48,alignItems:"center"},field:{marginBottom:8},content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},card:{padding:8,marginVertical:16},title:{color:"white",fontSize:24,fontWeight:"bold",marginBottom:80,textAlign:"center"}}),ud=function(e){var n=rn((function(e){return e.forms.rig})),t=tn();return p.createElement(yr,wt()({style:sd.container},e,{title:"Next reserve repack?"}),p.createElement(S.a,{style:sd.content},p.createElement(Nn.a,{style:sd.card},p.createElement(It.b.Subheader,null,"Due date"),p.createElement(yo,{timestamp:n.fields.repackExpiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return t(Ze.forms.rig.setField(["repackExpiresAt",e]))}}),p.createElement(gl.a,{type:n.fields.repackExpiresAt.error?"error":"info"},n.fields.repackExpiresAt.error||""))))};var cd,dd,md=O.a.create({container:{paddingHorizontal:48,alignItems:"center"},content:{width:"100%",justifyContent:"space-around",flexDirection:"column"},card:{padding:8,marginVertical:16},cardTitle:{flexDirection:"row",justifyContent:"space-between"},cardValue:{fontWeight:"bold",marginRight:8,fontSize:16,alignSelf:"center"},title:{color:"white",marginBottom:50,fontWeight:"bold",fontSize:25,textAlign:"center"},field:{marginBottom:8},slider:{flexDirection:"column"},sliderControl:{width:"100%",height:40},wingLoading:{alignSelf:"center"},wingLoadingCardLeft:{width:"30%"},wingLoadingCardRight:{paddingLeft:16,width:"70%"}}),fd=function(e){var n,t,r,l,a=rn((function(e){return e.forms.rig})),o=rn((function(e){return e.forms.user})),i=tn(),s=p.useState(a.fields.canopySize.value||120),u=W()(s,2),c=u[0],d=u[1],m=p.useState(Number(o.fields.exitWeight.value)||120),f=W()(m,2),g=f[0],v=f[1];return p.useEffect((function(){a.fields.canopySize.value&&d(a.fields.canopySize.value)}),[a.fields.canopySize.value]),p.createElement(yr,wt()({style:md.container},e,{title:"Your wingloading"}),p.createElement(S.a,{style:md.content},p.createElement(Nn.a,null,p.createElement(Nn.a.Content,{style:{flexDirection:"row",alignItems:"center",justifyContent:"center"}},p.createElement(S.a,{style:md.wingLoadingCardLeft},p.createElement(It.a.Text,{label:Object(zr.ceil)(2.205*Number(o.fields.exitWeight.value||50)/(a.fields.canopySize.value||150),2).toString(),size:100,style:md.wingLoading})),p.createElement(S.a,{style:md.wingLoadingCardRight},p.createElement(Nn.a.Title,{title:"Your wingloading",style:{paddingLeft:0}}),p.createElement(Bt.a,null,"Your wingloading is an indicator of your descent rate under canopy")))),p.createElement(Nn.a,{style:md.card,elevation:3},p.createElement(S.a,{style:md.cardTitle},p.createElement(It.b.Subheader,null,"Your exit weight"),p.createElement(kn.a,{style:md.cardValue},g||50,"kg")),p.createElement(Yi.a,{style:md.sliderControl,minimumValue:50,maximumValue:160,step:.5,minimumTrackTintColor:"#FF1414",maximumTrackTintColor:"#000000",onSlidingComplete:function(){return i(Ze.forms.user.setField(["exitWeight",g.toString()]))},value:g,onValueChange:function(e){return v(e)}}),p.createElement(gl.a,{type:null!=(n=o.fields.exitWeight)&&n.error?"error":"info"},(null==(t=o.fields.exitWeight)?void 0:t.error)||"Your weight in kg's with all equipment on")),p.createElement(Nn.a,{style:md.card,elevation:3},p.createElement(S.a,{style:md.cardTitle},p.createElement(It.b.Subheader,null,"Canopy size"),p.createElement(kn.a,{style:md.cardValue},c||120,"ft")),p.createElement(S.a,{style:md.slider},p.createElement(Yi.a,{style:md.sliderControl,minimumValue:34,maximumValue:350,step:1,value:c||120,minimumTrackTintColor:"#FF1414",maximumTrackTintColor:"#000000",onValueChange:function(e){return d(e)},onSlidingComplete:function(){return i(Ze.forms.rig.setField(["canopySize",c]))}})),p.createElement(gl.a,{type:null!=(r=o.fields.exitWeight)&&r.error?"error":"info"},(null==(l=o.fields.exitWeight)?void 0:l.error)||"Size of your main canopy in square feet"))))},pd=Jn(Object(Wn.a)(cd||(cd=Bn()(["\n  mutation UpdateRig(\n    $id: Int!\n    $make: String\n    $model: String\n    $serial: String\n    $rigType: String\n    $canopySize: Int\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.updateRig},fieldErrorMap:{}}),gd=Jn(Object(Wn.a)(dd||(dd=Bn()(["\n  mutation CreateRig(\n    $make: String\n    $model: String\n    $serial: String\n    $rigType: String\n    $canopySize: Int\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),{getPayload:function(e){return e.createRig},fieldErrorMap:{}});function vd(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function bd(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?vd(Object(t),!0).forEach((function(n){P()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):vd(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var hd=O.a.create({modal:bd(bd({},O.a.absoluteFillObject),{},{paddingLeft:0,marginLeft:0,marginBottom:0,marginTop:0,paddingTop:0,paddingRight:0,paddingBottom:0,backgroundColor:"red",display:"flex",width:"100%",height:"100%",flex:1,alignItems:"center"})}),yd=function(){var e,n,t,r,a,o,i,s,u,c=rn((function(e){return e.forms.user})),d=rn((function(e){return e.forms.rig})),m=rn((function(e){return e.forms.userWizard})),f=tn(),g=Xn({onSuccess:function(e){return!0},onError:function(e){return f(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onFieldError:function(e,n){return f(Ze.forms.user.setFieldError([e,n]))}}),v=pd({onSuccess:function(){return!0},onError:function(e){return f(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onFieldError:function(e,n){return f(Ze.forms.rig.setFieldError([e,n]))}}),b=gd({onSuccess:function(e){return!0},onError:function(e){return f(Ze.notifications.showSnackbar({message:e,variant:"error"}))},onFieldError:function(e,n){return f(Ze.forms.rig.setFieldError([e,n]))}}),h=p.useCallback((function(e,n){var t,r,a,o,i;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(null!=(t=c.fields.license)&&null!=(r=t.value)&&r.id){s.next=3;break}return f(Ze.forms.user.setFieldError(["license","You must select a license"])),s.abrupt("return",!1);case 3:return s.prev=3,s.next=6,l.a.awrap(g.mutate({id:Number(null==(a=c.original)?void 0:a.id),licenseId:Number(null==(o=c.fields.license)||null==(i=o.value)?void 0:i.id)}));case 6:return s.abrupt("return",n(e+1));case 9:return s.prev=9,s.t0=s.catch(3),s.abrupt("return",!1);case 12:case"end":return s.stop()}}),null,null,[[3,9]],Promise)}),[f,g,null==(e=c.fields.license)||null==(n=e.value)?void 0:n.id,null==(t=c.original)?void 0:t.id]),y=p.useCallback((function(e,n){var t,r,a,o,i,s,u;return l.a.async((function(m){for(;;)switch(m.prev=m.next){case 0:if(null!=(t=d.fields.make)&&t.value){m.next=3;break}return f(Ze.forms.rig.setFieldError(["make","Please select manufacturer"])),m.abrupt("return");case 3:if(null!=(r=d.fields.model)&&r.value){m.next=6;break}return f(Ze.forms.rig.setFieldError(["model","Please enter a model name"])),m.abrupt("return");case 6:if(m.prev=6,null!=(a=d.original)&&a.id){m.next=13;break}return m.next=10,l.a.awrap(b.mutate({make:d.fields.make.value,model:d.fields.model.value,serial:d.fields.serial.value,userId:Number(null==(o=c.original)?void 0:o.id)}));case 10:m.t0=m.sent,m.next=16;break;case 13:return m.next=15,l.a.awrap(v.mutate({id:Number(null==(i=d.original)?void 0:i.id),make:d.fields.make.value,model:d.fields.model.value,serial:d.fields.serial.value,userId:Number(null==(s=c.original)?void 0:s.id)}));case 15:m.t0=m.sent;case 16:null!=(u=m.t0)&&u.rig&&f(Ze.forms.rig.setOpen(u.rig)),n(e+1),m.next=24;break;case 21:m.prev=21,m.t1=m.catch(6),console.error(m.t1);case 24:case"end":return m.stop()}}),null,null,[[6,21]],Promise)}),[d.fields.make.value,d.fields.model.value,d.fields.serial.value,null==(r=d.original)?void 0:r.id,f,b,null==(a=c.original)?void 0:a.id,v]),E=p.useCallback((function(e,n){var t,r,a;return l.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(null!=(t=d.fields.repackExpiresAt)&&t.value){o.next=3;break}return f(Ze.forms.rig.setFieldError(["repackExpiresAt","Select repack date, even if it's in the past"])),o.abrupt("return",!1);case 3:return o.prev=3,o.next=6,l.a.awrap(v.mutate({id:Number(null==(r=d.original)?void 0:r.id),repackExpiresAt:d.fields.repackExpiresAt.value}));case 6:return null!=(a=o.sent)&&a.rig&&f(Ze.forms.rig.setOpen(a.rig)),o.abrupt("return",n(e+1));case 11:return o.prev=11,o.t0=o.catch(3),o.abrupt("return",!1);case 14:case"end":return o.stop()}}),null,null,[[3,11]],Promise)}),[f,v,d.fields.repackExpiresAt.value,null==(o=d.original)?void 0:o.id]),w=p.useCallback((function(e,n){var t,r,a,o,i;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(null!=(t=d.fields.canopySize)&&t.value){s.next=3;break}return f(Ze.forms.rig.setFieldError(["canopySize","You must provide a canopy size"])),s.abrupt("return",!1);case 3:if(null!=(r=c.fields.exitWeight)&&r.value){s.next=6;break}return f(Ze.forms.user.setFieldError(["exitWeight","You must enter your exit weight"])),s.abrupt("return",!1);case 6:return s.prev=6,s.next=9,l.a.awrap(v.mutate({id:Number(null==(a=d.original)?void 0:a.id),canopySize:d.fields.canopySize.value}));case 9:return s.next=11,l.a.awrap(g.mutate({id:Number(null==(o=c.original)?void 0:o.id),exitWeight:Number(null==(i=c.fields.exitWeight)?void 0:i.value)}));case 11:n(e+1),s.next=17;break;case 14:s.prev=14,s.t0=s.catch(6),console.error(s.t0);case 17:return s.abrupt("return",null);case 18:case"end":return s.stop()}}),null,null,[[6,14]],Promise)}),[d.fields.canopySize.value,null==(i=d.original)?void 0:i.id,null==(s=c.fields.exitWeight)?void 0:s.value,null==(u=c.original)?void 0:u.id,f,v,g]);return p.createElement(Dt.a,null,p.createElement(rd.a,{visible:m.open,dismissable:!1,style:hd.modal,contentContainerStyle:{height:"100%"}},p.createElement(fr,null,p.createElement(ad,{backButtonLabel:"Cancel",nextButtonLabel:"Next",onBack:function(){f(Ze.forms.userWizard.setOpen(!1)),f(Ze.forms.user.setOpen(!1)),f(Ze.forms.rig.setOpen(!1)),f(Ze.forms.userWizard.reset()),f(Ze.forms.user.reset()),f(Ze.forms.rig.reset())},loading:g.loading,onNext:h}),p.createElement(id,{backButtonLabel:"Back",nextButtonLabel:"Next",onBack:function(e,n){n(e-1)},loading:g.loading||v.loading||b.loading,onNext:y}),p.createElement(ud,{backButtonLabel:"Back",nextButtonLabel:"Next",loading:g.loading||v.loading||b.loading,onBack:function(e,n){n(e-1)},onNext:E}),p.createElement(fd,{backButtonLabel:"Back",nextButtonLabel:"Next",loading:g.loading||v.loading||b.loading,onBack:function(e,n){n(e-1)},onNext:w}),p.createElement(xr,{title:"You're all set!",subtitle:"You can configure your settings on the profile page",backButtonLabel:"Back",nextButtonLabel:"Done",onBack:function(e,n){n(e-1)},onNext:function(){f(Ze.forms.userWizard.setOpen(!1)),f(Ze.forms.user.setOpen(!1)),f(Ze.forms.rig.setOpen(!1)),f(Ze.forms.userWizard.reset()),f(Ze.forms.user.reset()),f(Ze.forms.rig.reset())}}))))};function Ed(){var e,n,t=rn((function(e){return e.global})),r=tn(),a=p.useRef(),s=p.useRef(),v=function(e){var n=I()(e.url).path();console.log(n)};return p.useEffect((function(){if("web"!==x.a.OS)return function(){var e,n,t,r,a,o;return l.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:if(e=null,!i.a.isDevice){s.next=22;break}return s.next=4,l.a.awrap(u.a());case 4:if(n=s.sent,t=n.status,r=t,"granted"===t){s.next=13;break}return s.next=10,l.a.awrap(u.b());case 10:a=s.sent,o=a.status,r=o;case 13:if("granted"===r){s.next=16;break}return console.warn("Failed to get push token for push notification!"),s.abrupt("return",null);case 16:return s.next=18,l.a.awrap(c.a());case 18:e=s.sent.data,console.log(e),s.next=23;break;case 22:console.warn("Must use physical device for Push Notifications");case 23:return"android"===x.a.OS&&d.a("default",{name:"default",importance:m.a.MAX,vibrationPattern:[0,250,250,250],lightColor:"#FF231F7C"}),s.abrupt("return",e||null);case 25:case"end":return s.stop()}}),null,null,null,Promise)}().then((function(e){e&&r(Ze.global.setExpoPushToken(e))})),a.current=f.a((function(e){e.request.content.body&&r(Ze.notifications.showSnackbar({message:e.request.content.body,variant:"warning"}))})),s.current=f.b((function(e){console.log(e)})),w.a.addEventListener("url",v),function(){a.current&&f.c(a.current),s.current&&f.c(s.current),w.a.removeEventListener("url",v)}}),[r]),p.createElement(p.Suspense,{fallback:p.createElement(S.a,{style:{flex:1,flexGrow:1}},p.createElement(h.a,{indeterminate:!0,color:null==t||null==(e=t.theme)||null==(n=e.colors)?void 0:n.accent,visible:!0}))},p.createElement(sn,null,p.createElement(y.a,{theme:t.theme},p.createElement(g.b,null,p.createElement(k.a,{linking:wn,theme:t.theme},p.createElement(j,null,p.createElement(td,null))),p.createElement(o.a,null),p.createElement(yd,null),p.createElement(En,null)))))}s.a({handleNotification:function(){return l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",{shouldShowAlert:!0,shouldPlaySound:!0,shouldSetBadge:!0});case 1:case"end":return e.stop()}}),null,null,null,Promise)}});n.default=Object(C.a)((function(){return function(){var e=p.useState(!1),n=W()(e,2),r=n[0],a=n[1],o=cn.a({Inter_400Regular:fn.a,Inter_500Medium:fn.b,Inter_700Bold:fn.c}),i=W()(o,1)[0];return p.useEffect((function(){l.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,mn.b(),e.next=4,l.a.awrap(dn.b(gn(gn({},un.a.font),{},{"space-mono":t(580)})));case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:return e.prev=8,a(!0),mn.a(),e.finish(8);case 12:case"end":return e.stop()}}),null,null,[[0,6,8,12]],Promise)}),[]),r&&i}()?p.createElement(v.a,{store:en},p.createElement(b.a,{persistor:nn,loading:p.createElement(S.a,{style:{flex:1,justifyContent:"center",alignItems:"center"}},p.createElement(E.a,{size:"large"}))},p.createElement(Ed,null))):null}))}},[[528,2,3]]]);
//# sourceMappingURL=app.ec17e26c.chunk.js.map