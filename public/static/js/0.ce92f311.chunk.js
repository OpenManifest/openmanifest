(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{633:function(e,n,r){"use strict";r.d(n,"a",(function(){return d}));var t=r(0),a=r(1),i=r(97),l=r(255),o=r(405),s=r(398),u=r(207),c=r(5);function d(e){var n=e.buttonLabel,r=e.buttonAction,a=e.title,d=e.loading,m=e.children,f=Object(c.c)((function(e){return e.global}));return t.createElement(l.a,null,t.createElement(o.a,{visible:!!e.open,dismissable:!1,style:{maxWidth:500,alignSelf:"center"}},t.createElement(s.a,{indeterminate:!0,visible:d,color:f.theme.colors.accent}),t.createElement(o.a.Title,null,a),t.createElement(o.a.Content,{pointerEvents:"box-none"},t.createElement(o.a.ScrollArea,null,t.createElement(i.b,null,m))),t.createElement(o.a.Actions,{style:{justifyContent:"flex-end"}},t.createElement(u.a,{onPress:function(){e.onClose()}},"Cancel"),t.createElement(u.a,{onPress:r},n))))}a.a.create({button:{width:"100%",borderRadius:16,padding:5},contentContainer:{paddingHorizontal:16,paddingBottom:32},sheet:{elevation:3,backgroundColor:"white",flexGrow:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},sheetHeader:{elevation:2,borderTopLeftRadius:20,borderTopRightRadius:20,height:40,shadowColor:"#000",shadowOffset:{width:0,height:-4},backgroundColor:"white",shadowOpacity:.22,shadowRadius:2.22}})},639:function(e,n,r){"use strict";r.d(n,"a",(function(){return p})),r.d(n,"b",(function(){return g}));var t,a=r(4),i=r.n(a),l=r(29),o=r.n(l),s=r(38),u=r(37),c=r(5),d=r(163);function m(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function f(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?m(Object(r),!0).forEach((function(n){i()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):m(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var p=Object(u.a)(t||(t=o()(["\n  query QueryDropzoneUser($dropzoneId: Int!, $dropzoneUserId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n        credits\n        expiresAt\n        permissions\n\n        role {\n          id\n          name\n        }\n        rigInspections {\n          id\n          isOk\n          rig {\n            id\n          }\n        }\n\n        notifications {\n          edges {\n            node {\n              id\n              message\n              notificationType\n              createdAt\n            }\n          }\n        }\n\n\n        transactions {\n          edges {\n            node {\n              id\n              status\n              message\n              amount\n              createdAt\n            }\n          }\n        }\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          image\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n            federation {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function g(e){var n,r,t,a,i,l,o,u,m,g,b=Object(c.c)((function(e){return e.global.currentDropzoneId})),v=Object(d.b)(),E=Object(s.useQuery)(p,{variables:{dropzoneId:b,dropzoneUserId:e||Number(null==v||null==(n=v.data)||null==(r=n.dropzone)||null==(t=r.currentUser)?void 0:t.id)}});return f(f({},E),{},{dropzoneUser:e&&e!==Number(null==v||null==(a=v.data)||null==(i=a.dropzone)||null==(l=i.currentUser)?void 0:l.id)?null==E||null==(m=E.data)||null==(g=m.dropzone)?void 0:g.dropzoneUser:null==v||null==(o=v.data)||null==(u=o.dropzone)?void 0:u.currentUser})}},654:function(e,n,r){"use strict";r.d(n,"a",(function(){return b}));var t,a=r(9),i=r.n(a),l=r(29),o=r.n(l),s=r(38),u=r(37),c=r(0),d=r(21),m=r(109),f=r(639),p=r(5),g=Object(u.a)(t||(t=o()(["\n  query RolesQuery($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles(selectable: true) {\n        id\n        name\n      }\n    }\n  }\n"])));function b(e){var n,r,t,a,l,o=c.useState(!1),u=i()(o,2),b=u[0],v=u[1],E=Object(p.c)((function(e){return e.global})).currentDropzoneId,y=(Object(f.b)().dropzoneUser,Object(s.useQuery)(g,{variables:{dropzoneId:Number(E)}})),h=y.data;y.loading,y.refetch;return c.createElement(c.Fragment,null,c.createElement(d.b.Subheader,{style:{paddingLeft:0}},"Access level"),c.createElement(m.a,{onDismiss:function(){return v(!1)},visible:!e.disabled&&b,anchor:c.createElement(d.b.Item,{left:function(){return c.createElement(d.b.Icon,{icon:"lock"})},onPress:e.disabled?void 0:function(){v(!0)},title:(null==(n=e.value)||null==(r=n.name)||null==(t=r.replace("_"," "))?void 0:t.toUpperCase())||"Access level",description:e.required?null:"Optional"})},null==h||null==(a=h.dropzone)||null==(l=a.roles)?void 0:l.map((function(n){var r;return c.createElement(m.a.Item,{onPress:function(){v(!1),e.onSelect(n)},title:(null==(r=n.name)?void 0:r.replace("_"," ").toUpperCase())||"-"})}))))}},655:function(e,n,r){"use strict";r.d(n,"a",(function(){return m}));var t=r(0),a=r(1),i=r(2),l=r(287),o=r(285),s=r(374),u=r(5),c=r(336),d=r(168);function m(){var e,n,r,a,m,p,g,b,v,E,y,h,O,z,x,w,S,k,j,I,C,P,A,F,U=Object(u.c)((function(e){return e.forms.user})),$=Object(u.b)();return t.useEffect((function(){var e;U.original&&(U.fields.exitWeight.value||$(u.a.forms.user.setField(["exitWeight",U.original.exitWeight||"60"])),!U.fields.rigs.value&&null!=(e=U.original)&&e.id&&$(u.a.forms.user.setField(["rigs",U.original.rigs])))}),[null==(e=U.original)?void 0:e.id]),t.createElement(t.Fragment,null,t.createElement(l.a,{style:f.field,mode:"outlined",label:"Name",error:!!U.fields.name.error,value:(null==(n=U.fields.name)||null==(r=n.value)?void 0:r.toString())||"",onChangeText:function(e){return $(u.a.forms.user.setField(["name",e]))}}),t.createElement(o.a,{type:U.fields.name.error?"error":"info"},U.fields.name.error||" "),t.createElement(l.a,{style:f.field,mode:"outlined",label:"Email",error:!!U.fields.email.error,value:(null==(a=U.fields.email)||null==(m=a.value)?void 0:m.toString())||"",onChangeText:function(e){return $(u.a.forms.user.setField(["email",e]))}}),t.createElement(o.a,{type:U.fields.email.error?"error":"info"},U.fields.email.error||" "),t.createElement(l.a,{style:f.field,mode:"outlined",label:"Phone",error:!!U.fields.phone.error,value:(null==(p=U.fields.phone)||null==(g=p.value)?void 0:g.toString())||"",onChangeText:function(e){return $(u.a.forms.user.setField(["phone",e]))}}),t.createElement(o.a,{type:U.fields.phone.error?"error":"info"},U.fields.phone.error||""),t.createElement(l.a,{style:f.field,mode:"outlined",label:"Exit weight",error:!!U.fields.exitWeight.error,value:(null==(b=U.fields.exitWeight)||null==(v=b.value)?void 0:v.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return t.createElement(l.a.Affix,{text:"kg"})},onChangeText:function(e){return $(u.a.forms.user.setField(["exitWeight",e]))}}),t.createElement(o.a,{type:U.fields.exitWeight.error?"error":"info"},U.fields.exitWeight.error||""),t.createElement(s.a,null),t.createElement(i.a,{style:{width:"100%"}},t.createElement(d.a,{value:(null==U||null==(E=U.fields)||null==(y=E.license)||null==(h=y.value)?void 0:h.federation)||U.federation.value,onSelect:function(e){return $(u.a.forms.user.setFederation(e))},required:!0}),t.createElement(o.a,{type:U.federation.error?"error":"info"},U.federation.error||""),((null==U||null==(O=U.fields)||null==(z=O.license)||null==(x=z.value)||null==(w=x.federation)?void 0:w.id)||(null==U||null==(S=U.federation)||null==(k=S.value)?void 0:k.id))&&t.createElement(t.Fragment,null,t.createElement(c.a,{value:U.fields.license.value,federationId:Number((null==U||null==(j=U.fields)||null==(I=j.license)||null==(C=I.value)||null==(P=C.federation)?void 0:P.id)||(null==(A=U.federation)||null==(F=A.value)?void 0:F.id)),onSelect:function(e){return $(u.a.forms.user.setField(["license",e]))},required:!0}),t.createElement(o.a,{type:U.fields.license.error?"error":"info"},U.fields.license.error||""))))}var f=a.a.create({fields:{flex:1,width:"100%",paddingTop:32},field:{marginBottom:8,width:"100%"},ticketAddons:{marginBottom:8}})},667:function(e,n,r){"use strict";r.d(n,"a",(function(){return A}));var t=r(4),a=r.n(t),i=r(9),l=r.n(i),o=r(29),s=r.n(o),u=r(6),c=r.n(u),d=r(38),m=r(0),f=r(5),p=r(1),g=r(2),b=r(287),v=r(285),E=r(333),y=r(330),h=r(46),O=r(33);function z(e){var n,r,t=Object(f.c)((function(e){return e.forms.rig})),a=Object(f.b)(),i=Object(h.a)(O.b.CreateRig);return m.createElement(g.a,null,m.createElement(b.a,{style:S.field,mode:"outlined",label:"Make",error:!!t.fields.make.error,value:t.fields.make.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["make",e]))}}),m.createElement(v.a,{type:t.fields.make.error?"error":"info"},t.fields.make.error||"e.g Javelin, Mirage"),m.createElement(b.a,{style:S.field,mode:"outlined",label:"Model",error:!!t.fields.model.error,value:t.fields.model.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["model",e]))}}),m.createElement(v.a,{type:t.fields.model.error?"error":"info"},t.fields.model.error||"e.g G4.1"),m.createElement(b.a,{style:S.field,mode:"outlined",label:"Serial",error:!!t.fields.serial.error,value:t.fields.serial.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["serial",e]))}}),m.createElement(v.a,{type:t.fields.serial.error?"error":"info"},t.fields.serial.error||""),m.createElement(b.a,{style:S.field,mode:"outlined",label:"Current canopy size",error:!!t.fields.canopySize.error,value:(null==(n=t.fields.canopySize.value)?void 0:n.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return a(f.a.forms.rig.setField(["canopySize",Number(e)]))}}),m.createElement(v.a,{type:t.fields.canopySize.error?"error":"info"},t.fields.canopySize.error||"Size of canopy in container"),e.showTypeSelect?m.createElement(y.a,{items:["student","sport","tandem"],renderItemLabel:function(e){return e},isDisabled:function(e){return!i&&"sport"!==e},selected:[(null==(r=t.fields.rigType)?void 0:r.value)||"sport"],onChangeSelected:function(e){var n=l()(e,1)[0];return a(f.a.forms.rig.setField(["rigType",n]))}}):null,m.createElement(E.a,{timestamp:t.fields.repackExpiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return a(f.a.forms.rig.setField(["repackExpiresAt",e]))},label:"Reserve repack expiry date"}),m.createElement(v.a,{type:t.fields.repackExpiresAt.error?"error":"info"},t.fields.repackExpiresAt.error||""))}var x,w,S=p.a.create({fields:{flex:1},field:{marginBottom:8}}),k=r(633);function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){a()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var C=Object(d.gql)(x||(x=s()(["\n  mutation CreateRig(\n    $make: String,\n    $model: String,\n    $serial: String,\n    $rigType: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),P=Object(d.gql)(w||(w=s()(["\n  mutation UpdateRig(\n    $id: Int!\n    $make: String,\n    $model: String,\n    $serial: String,\n    $rigType: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id,\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"])));function A(e){var n,r=e.open,t=(e.onClose,e.userId,e.dropzoneId,Object(f.b)()),a=Object(f.c)((function(e){return e.forms.rig})),i=Object(d.useMutation)(C),o=l()(i,2),s=o[0],u=o[1],p=Object(d.useMutation)(P),g=l()(p,2),b=g[0],v=g[1],E=u.loading||v.loading,y=m.useCallback((function(){var e=!1;return a.fields.make.value||(e=!0,t(f.a.forms.rig.setFieldError(["make","Required"]))),a.fields.model.value||(e=!0,t(f.a.forms.rig.setFieldError(["model","Required"]))),a.fields.serial.value||(e=!0,t(f.a.forms.rig.setFieldError(["serial","Required"]))),a.fields.canopySize.value||(e=!0,t(f.a.forms.rig.setFieldError(["canopySize","Required"]))),a.fields.repackExpiresAt.value||(e=!0,t(f.a.forms.rig.setFieldError(["repackExpiresAt","You must select a repack date in the future"]))),!e}),[JSON.stringify(a.fields)]),h=m.useCallback((function(){var n,r,i,l,o,u,d,m,p,g,v,E;return c.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(y()){h.next=2;break}return h.abrupt("return");case 2:return h.prev=2,g=null!=(n=a.original)&&n.id?b:s,h.next=6,c.a.awrap(g({variables:I(I({},null!=(r=a.original)&&r.id?{id:Number(null==(i=a.original)?void 0:i.id)}:{}),{},{make:a.fields.make.value,model:a.fields.model.value,serial:a.fields.serial.value,canopySize:a.fields.canopySize.value,rigType:a.fields.rigType.value,repackExpiresAt:a.fields.repackExpiresAt.value,userId:e.userId?Number(e.userId):null,dropzoneId:e.dropzoneId?Number(e.dropzoneId):null})}));case 6:if(v=h.sent,null==(E=null!=(l=a.original)&&l.id?null==(o=v.data)?void 0:o.updateRig:null==(u=v.data)?void 0:u.createRig)||null==(d=E.fieldErrors)||d.map((function(e){var n=e.field,r=e.message;switch(n){case"make":return t(f.a.forms.rig.setFieldError(["make",r]));case"model":return t(f.a.forms.rig.setFieldError(["model",r]));case"serial":return t(f.a.forms.rig.setFieldError(["serial",r]));case"canopy_size":return t(f.a.forms.rig.setFieldError(["canopySize",r]));case"repack_expires_at":return t(f.a.forms.rig.setFieldError(["repackExpiresAt",r]));case"rig_type":return t(f.a.forms.rig.setFieldError(["rigType",r]))}})),null==E||null==(m=E.errors)||!m.length){h.next=11;break}return h.abrupt("return",t(f.a.notifications.showSnackbar({message:null==E?void 0:E.errors[0],variant:"error"})));case 11:null!=E&&null!=(p=E.fieldErrors)&&p.length||e.onSuccess(),h.next=17;break;case 14:h.prev=14,h.t0=h.catch(2),t(f.a.notifications.showSnackbar({message:h.t0.message,variant:"error"}));case 17:case"end":return h.stop()}}),null,null,[[2,14]],Promise)}),[JSON.stringify(a.fields),s,b,e.onSuccess]);return m.createElement(k.a,{title:null!=(n=a.original)&&n.id?"Edit rig":"New rig",open:r,snapPoints:[0,580],onClose:function(){e.onClose(),t(f.a.forms.rig.reset())},buttonAction:h,buttonLabel:"Save",loading:E},m.createElement(z,{showTypeSelect:!!e.dropzoneId}))}},802:function(e,n,r){"use strict";r.r(n),r.d(n,"default",(function(){return $e}));var t=r(28),a=r.n(t),i=r(23),l=r.n(i),o=r(4),s=r.n(o),u=r(9),c=r.n(u),d=r(29),m=r.n(d),f=r(6),p=r.n(f),g=r(442),b=r(52),v=r(38),E=r(0),y=r(11),h=r(166),O=r(1),z=r(30),x=r(398),w=r(122),S=r(374),k=r(476),j=r(165),I=r(400),C=r(37),P=r(97),A=r(783),F=r(648),U=r(337),$=r(89),T=r(5),N=r(33),R=r(164),D=r(255),W=r(405),M=r(207),q=r(285),L=r(21),B=r(333),G=r(654),J=r(46);function H(){var e=Object(T.c)((function(e){return e.forms.dropzoneUser})),n=Object(T.b)(),r=Object(J.a)(N.b.GrantPermission);return E.createElement(E.Fragment,null,E.createElement(G.a,{value:e.fields.role.value,onSelect:function(e){return n(T.a.forms.dropzoneUser.setField(["role",e]))},disabled:!r,required:!0}),E.createElement(q.a,{type:e.fields.role.error?"error":"info"},e.fields.role.error),E.createElement(L.b.Subheader,{style:{paddingLeft:0}},"Financial"),E.createElement(B.a,{timestamp:e.fields.expiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return n(T.a.forms.dropzoneUser.setField(["expiresAt",e]))},label:"Membership expires"}),E.createElement(q.a,{type:e.fields.expiresAt.error?"error":"info"},e.fields.expiresAt.error))}var _;O.a.create({fields:{flex:1},field:{marginBottom:8}});function Q(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function V(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Q(Object(r),!0).forEach((function(n){s()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Q(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Z=Object(v.gql)(_||(_=m()(["\n  mutation UpdateDropzoneUser(\n    $userRoleId: Int,\n    $expiresAt: Int,\n    $dropzoneUserId: Int\n  ) {\n    updateDropzoneUser(\n      input: {\n        id: $dropzoneUserId,\n        attributes: {\n          userRoleId: $userRoleId,\n          expiresAt: $expiresAt,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      dropzoneUser {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n\n        user {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function Y(e){var n,r=Object(T.b)(),t=Object(T.c)((function(e){return e.forms.dropzoneUser})),a=Object(T.c)((function(e){return e.global})),i=Object(v.useMutation)(Z),l=c()(i,2),o=l[0],s=l[1],u=E.useCallback((function(){var e=!1;return t.fields.role.value||(e=!0,r(T.a.forms.dropzoneUser.setFieldError(["role","User must have an access level"]))),t.fields.expiresAt.value||(e=!0,r(T.a.forms.dropzoneUser.setFieldError(["expiresAt","Membership expiry must be set"]))),!e}),[JSON.stringify(t.fields)]),d=E.useCallback((function(){var n,a,i,l,s,c,d,m,f,g;return p.a.async((function(b){for(;;)switch(b.prev=b.next){case 0:if(u()){b.next=2;break}return b.abrupt("return");case 2:return b.prev=2,b.next=5,p.a.awrap(o({variables:V(V({},null!=(n=t.original)&&n.id?{id:null==(a=t.original)?void 0:a.id}:{}),{},{userRoleId:Number(null==(i=t.fields.role.value)?void 0:i.id),expiresAt:t.fields.expiresAt.value,dropzoneUserId:Number(null==(l=t.original)?void 0:l.id)})}));case 5:if(f=b.sent,null==(g=null==(s=f.data)?void 0:s.updateDropzoneUser)||null==(c=g.fieldErrors)||c.map((function(e){var n=e.field,t=e.message;switch(n){case"user_role":return r(T.a.forms.dropzoneUser.setFieldError(["role",t]));case"expires_at":return r(T.a.forms.dropzoneUser.setFieldError(["expiresAt",t]))}})),null==g||null==(d=g.errors)||!d.length){b.next=10;break}return b.abrupt("return",r(T.a.notifications.showSnackbar({message:null==g?void 0:g.errors[0],variant:"error"})));case 10:null!=g&&null!=(m=g.fieldErrors)&&m.length?console.error(g.fieldErrors):e.onSuccess(g.dropzoneUser),b.next=16;break;case 13:b.prev=13,b.t0=b.catch(2),r(T.a.notifications.showSnackbar({message:b.t0.message,variant:"error"}));case 16:case"end":return b.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(t.fields),o,e.onSuccess]);return E.createElement(D.a,null,E.createElement(W.a,{visible:!!e.open},E.createElement(x.a,{indeterminate:!0,visible:s.loading,color:a.theme.colors.accent}),E.createElement(W.a.Title,null,(null!=t&&null!=(n=t.original)&&n.id?"Edit":"New")+" dropzone user"),E.createElement(W.a.Content,null,E.createElement(H,null)),E.createElement(W.a.Actions,{style:{justifyContent:"flex-end"}},E.createElement(M.a,{onPress:function(){r(T.a.forms.dropzoneUser.reset()),e.onClose()}},"Cancel"),E.createElement(M.a,{onPress:d},"Save"))))}var K=r(2),X=r(287),ee=r(646);function ne(){var e,n,r,t,a,i,l=Object(T.c)((function(e){return e.forms.credits})),o=Object(T.b)(),s=(null==(e=l.original)?void 0:e.credits)||0,u=l.fields.amount.value||0,c="deposit"===l.fields.status.value?u+s:u-s;return E.createElement(E.Fragment,null,E.createElement(ee.b,{defaultIndex:0,onChangeIndex:function(e){o(T.a.forms.credits.setField(["status",1===e?"withdrawal":"deposit"]))},mode:"fixed"},E.createElement(ee.a,{label:"Deposit",icon:"arrow-up"},E.createElement(K.a,null)),E.createElement(ee.a,{label:"Withdraw",icon:"arrow-down"},E.createElement(K.a,null))),E.createElement(W.a.Content,{style:{paddingTop:16}},E.createElement(X.a,{style:te.field,mode:"outlined",label:"Message",error:!!l.fields.message.error,value:(null==(n=l.fields.message.value)?void 0:n.toString())||"",onChangeText:function(e){return o(T.a.forms.credits.setField(["message",e]))}}),E.createElement(q.a,{type:l.fields.message.error?"error":"info"},l.fields.message.error||""),"deposit"===l.fields.status.value?E.createElement(K.a,null,E.createElement(X.a,{style:te.field,mode:"outlined",label:"Add amount",error:!!l.fields.amount.error,value:(null==(r=l.fields.amount.value)?void 0:r.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(T.a.forms.credits.setField(["amount",Number(e)]))}}),E.createElement(q.a,{type:l.fields.amount.error?"error":"info"},l.fields.amount.error||""),E.createElement(S.a,null),E.createElement(k.a,null,E.createElement(k.a.Row,null,E.createElement(k.a.Title,null,"Current balance"),E.createElement(k.a.Cell,{numeric:!0},"$"+((null==(t=l.original)?void 0:t.credits)||0))),E.createElement(k.a.Row,null,E.createElement(k.a.Title,null,"Deposit"),E.createElement(k.a.Cell,{numeric:!0},"+$"+(l.fields.amount.value||0))),E.createElement(k.a.Row,null,E.createElement(k.a.Title,null,E.createElement(z.a,{style:{fontWeight:"bold"}},"New total")),E.createElement(k.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c))))):E.createElement(K.a,null,E.createElement(X.a,{style:te.field,mode:"outlined",label:"Withdraw amount",error:!!l.fields.amount.error,value:(null==(a=l.fields.amount.value)?void 0:a.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(T.a.forms.credits.setField(["amount",Number(e)]))}}),E.createElement(q.a,{type:l.fields.amount.error?"error":"info"},l.fields.amount.error||""),E.createElement(S.a,null),E.createElement(k.a,null,E.createElement(k.a.Row,null,E.createElement(k.a.Title,null,"Current balance"),E.createElement(k.a.Cell,{numeric:!0},"$"+((null==(i=l.original)?void 0:i.credits)||0))),E.createElement(k.a.Row,null,E.createElement(k.a.Title,null,"Withdraw"),E.createElement(k.a.Cell,{numeric:!0},"-$"+(l.fields.amount.value||0))),E.createElement(k.a.Row,null,E.createElement(k.a.Title,null,E.createElement(z.a,{style:{fontWeight:"bold"}},"New total")),E.createElement(k.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c)))))))}var re,te=O.a.create({fields:{flex:1},field:{marginBottom:8}}),ae=Object(v.gql)(re||(re=m()(["\n  mutation CreatrTransaction(\n    $message: String,\n    $status: String,\n    $amount: Float,\n    $dropzoneUserId: Int,\n  ) {\n    createTransaction(\n      input: {\n        attributes: {\n          amount: $amount,\n          dropzoneUserId: $dropzoneUserId,\n          message: $message,\n          status: $status,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      transaction {\n        id\n        amount\n        message\n\n        dropzoneUser {\n          id\n          credits\n\n          transactions {\n            edges {\n              node {\n                id\n                status\n                amount\n                createdAt\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function ie(e){var n=Object(T.b)(),r=Object(T.c)((function(e){return e.forms.credits})),t=Object(T.c)((function(e){return e.global})),a=Object(v.useMutation)(ae),i=c()(a,2),l=i[0],o=i[1],s=E.useCallback((function(){var e=!1;return r.fields.amount.value||(e=!0,n(T.a.forms.credits.setFieldError(["amount","You must specify an amount"]))),!e}),[JSON.stringify(r.fields)]),u=E.useCallback((function(){var t,a,i,o,u,c,d,m,f;return p.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:if(s()){g.next=2;break}return g.abrupt("return");case 2:return g.prev=2,g.next=5,p.a.awrap(l({variables:{amount:r.fields.amount.value,message:r.fields.message.value,status:r.fields.status.value,dropzoneUserId:Number(null==(t=r.original)?void 0:t.id)}}));case 5:if(m=g.sent,null==(f=null!=(a=r.original)&&a.id?null==(i=m.data)?void 0:i.updateRig:null==(o=m.data)?void 0:o.createRig)||null==(u=f.fieldErrors)||u.map((function(e){var r=e.field,t=e.message;switch(r){case"amount":return n(T.a.forms.credits.setFieldError(["amount",t]));case"message":return n(T.a.forms.credits.setFieldError(["message",t]));case"status":return n(T.a.forms.credits.setFieldError(["status",t]))}})),null==f||null==(c=f.errors)||!c.length){g.next=10;break}return g.abrupt("return",n(T.a.notifications.showSnackbar({message:null==f?void 0:f.errors[0],variant:"error"})));case 10:null!=f&&null!=(d=f.fieldErrors)&&d.length||(n(T.a.forms.credits.reset()),e.onSuccess()),g.next=16;break;case 13:g.prev=13,g.t0=g.catch(2),n(T.a.notifications.showSnackbar({message:g.t0.message,variant:"error"}));case 16:case"end":return g.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(r.fields),l,e.onSuccess]);return E.createElement(D.a,null,E.createElement(W.a,{visible:!!e.open},E.createElement(x.a,{indeterminate:!0,visible:o.loading,color:t.theme.colors.accent}),E.createElement(ne,null),E.createElement(W.a.Actions,{style:{justifyContent:"flex-end"}},E.createElement(M.a,{onPress:function(){n(T.a.forms.credits.reset()),e.onClose()}},"Cancel"),E.createElement(M.a,{onPress:u},"Save"))))}var le=r(667),oe=r(655),se=r(633),ue=r(239);function ce(e){var n=e.open,r=e.onSuccess,t=Object(T.c)((function(e){return e.forms.user})),a=Object(T.b)(),i=Object(ue.a)({onSuccess:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){a(T.a.notifications.showSnackbar({message:"Profile has been updated",variant:"success"})),a(T.a.forms.user.reset()),r()})),onFieldError:function(e,n){return a(T.a.forms.user.setFieldError([e,n]))},onError:function(e){return a(T.a.notifications.showSnackbar({message:e,variant:"error"}))}}),l=E.useCallback((function(){var e,n,r,i,l,o,s,u,c,d=!1,m=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return((null==(e=t.fields.name)||null==(n=e.value)?void 0:n.length)||0)<3&&(d=!0,a(T.a.forms.user.setFieldError(["name","Name is too short"]))),((null==(r=t.fields.email)||null==(i=r.value)?void 0:i.length)||0)<3&&(d=!0,a(T.a.forms.user.setFieldError(["email","Email is too short"]))),((null==(l=t.fields.phone)||null==(o=l.value)?void 0:o.length)||0)<3&&(d=!0,a(T.a.forms.user.setFieldError(["phone","Phone number is too short"]))),m.test((null==(s=t.fields)||null==(u=s.email)?void 0:u.value)||"")||(d=!0,a(T.a.forms.user.setFieldError(["email","Please enter a valid email"]))),((null==(c=t.fields.exitWeight)?void 0:c.value)||0)<30&&(d=!0,a(T.a.forms.user.setFieldError(["exitWeight","Exit weight seems too low?"]))),!d}),[JSON.stringify(t.fields),a]),o=E.useCallback((function(){var e,n,r,o,s,u,c;return p.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e=t.fields,n=e.name,r=e.license,o=e.phone,s=e.email,u=e.exitWeight,!l()){d.next=11;break}return d.prev=2,d.next=5,p.a.awrap(i.mutate({id:Number(t.original.id),name:n.value,licenseId:null!=(c=r.value)&&c.id?Number(r.value.id):null,phone:o.value,exitWeight:parseFloat(u.value),email:s.value}));case 5:d.sent,d.next=11;break;case 8:d.prev=8,d.t0=d.catch(2),a(T.a.notifications.showSnackbar({message:d.t0.message,variant:"error"}));case 11:case"end":return d.stop()}}),null,null,[[2,8]],Promise)}),[JSON.stringify(t.fields),a,i]);return E.createElement(se.a,{title:"Update information",open:n,snapPoints:[0,740],loading:i.loading,onClose:function(){e.onClose(),a(T.a.forms.user.reset())},buttonAction:o,buttonLabel:"Save"},E.createElement(oe.a,null))}function de(e){var n=Object(T.c)((function(e){return e.global})),r=e.title,t=e.children,a=e.buttonIcon,i=e.onPressButton;return E.createElement(K.a,{style:me.card},E.createElement(K.a,{style:me.container},E.createElement(L.b.Subheader,{style:me.title},r),a&&E.createElement(j.a,{icon:a,onPress:function(){return i?i():null},color:n.theme.colors.primary})),t)}var me=O.a.create({container:{flexDirection:"row",justifyContent:"space-between"},title:{flexGrow:1},card:{marginVertical:8,width:"100%"}}),fe=r(63),pe=r(157),ge=r(319);function be(e){var n,r,t,a,i=e.dropzoneUser,l=e.onEdit,o=e.canEdit,s=e.children,u=e.onPressAvatar,c=Object(T.c)((function(e){return e.global})).theme;return E.createElement(K.a,{style:[ve.container,{backgroundColor:c.colors.primary}]},E.createElement(K.a,{style:ve.actions},o?E.createElement(j.a,{icon:"pencil",size:20,color:c.colors.surface,onPress:function(){return l?l():null}}):null),E.createElement(K.a,{style:ve.avatarContainer},E.createElement(K.a,{style:{flex:1/3}},E.createElement(fe.a,{onPress:u},null!=i&&null!=(n=i.user)&&n.image?E.createElement(L.a.Image,{size:80,source:{uri:null==i?void 0:i.user.image},style:{backgroundColor:c.colors.surface}}):E.createElement(L.a.Icon,{size:80,icon:"account",color:c.colors.primary,style:{backgroundColor:c.colors.surface}}))),E.createElement(K.a,{style:ve.titleContainer},E.createElement(pe.a,{style:ve.title},null==i||null==(r=i.user)?void 0:r.name),E.createElement(ge.a,{style:ve.paragraph},null==i||null==(t=i.role)||null==(a=t.name)?void 0:a.replace("_"," ").toUpperCase()))),s)}var ve=O.a.create({container:{width:"100%",paddingTop:16},actions:{flexDirection:"row",justifyContent:"flex-end"},avatarContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:16,marginBottom:16},titleContainer:{paddingLeft:48,flex:2/3,alignItems:"flex-start",justifyContent:"center"},title:{color:"white"},paragraph:{color:"white"}});function Ee(e){var n=e.items,r=1/n.length;return E.createElement(E.Fragment,null,E.createElement(S.a,{style:ye.divider}),E.createElement(K.a,{style:ye.container},n.map((function(e,t){return E.createElement(E.Fragment,null,E.createElement(K.a,{style:{flex:r},key:"info-grid-"+t},E.createElement(L.b.Item,{titleStyle:[ye.title,{fontWeight:!1!==e.bold?"bold":void 0}],title:e.value,descriptionStyle:ye.description,description:e.title,onPress:e.onPress})),t===n.length-1?null:E.createElement(S.a,{key:"info-grid-divider-"+t,style:ye.verticalDivider}))}))))}var ye=O.a.create({container:{width:"100%",flexDirection:"row"},divider:{height:O.a.hairlineWidth,width:"100%",backgroundColor:"white"},verticalDivider:{width:O.a.hairlineWidth,height:"100%",backgroundColor:"white"},title:{textAlign:"center",color:"white"},description:{textAlign:"center",color:"white"}}),he=r(163),Oe=r(639);var ze,xe,we,Se=function(e){e.type;var n=e.selected,r=e.disabled,t=e.onPress,a={actAsDZSO:"shield-cross",actAsGCA:"radio-handheld",actAsLoadMaster:"shield-account",actAsPilot:"shield-airplane",actAsRigInspector:"shield-search"}[e.type],i={actAsDZSO:"DZSO",actAsGCA:"GCA",actAsLoadMaster:"Load Master",actAsPilot:"Pilot",actAsRigInspector:"Rig Inspector"}[e.type];return E.createElement(w.a,{mode:n?"outlined":"flat",icon:a,textStyle:n?{}:{color:"white"},style:[{marginHorizontal:2,maxHeight:35},n?void 0:{backgroundColor:"transparent",borderColor:"white"}].filter(Boolean),disabled:r,onPress:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){return t()}))},i)},ke=r(50),je=Object(C.a)(ze||(ze=m()(["\nmutation RevokePermission(\n  $dropzoneUserId: Int!,\n  $permissionName: Permission!,\n){\n  revokePermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n    dropzoneUser {\n      id\n      permissions\n    }\n    fieldErrors {\n      field\n      message\n    }\n    errors\n  }\n}\n"]))),Ie=Object(ke.a)(je,{getPayload:function(e){return e.revokePermission},validates:{permissionName:[Object(ke.d)("Permission name is required")]}}),Ce=Object(C.a)(xe||(xe=m()(["\nmutation GrantPermission(\n  $dropzoneUserId: Int!,\n  $permissionName: Permission!,\n){\n  grantPermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n    dropzoneUser {\n      id\n      permissions\n    }\n    fieldErrors {\n      field\n      message\n    }\n    errors\n  }\n}\n"]))),Pe=Object(ke.a)(Ce,{getPayload:function(e){return e.grantPermission},validates:{permissionName:[Object(ke.d)("Permission name is required")]}});function Ae(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Fe(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Ae(Object(r),!0).forEach((function(n){s()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ae(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var Ue=Object(C.a)(we||(we=m()(["\n  mutation UpdateUserImage(\n    $id: Int,\n    $image: String\n  ){\n    updateUser(input: {\n      id: $id\n      attributes: {\n        image: $image,\n      }\n    }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        image\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function $e(){var e,n,r,t,i,o,s,u,d,m,f,O=Object(T.c)((function(e){return e.global})),C=Object(T.c)((function(e){return e.forms})),D=Object(T.b)(),W=Object(b.useNavigation)(),M=Object(he.b)().currentUser,q=Object(b.useRoute)(),L=(null==M?void 0:M.id)===q.params.userId,B=Object(Oe.b)(Number(q.params.userId)),G=B.dropzoneUser,H=B.loading,_=B.refetch,Q=Object(J.a)(N.b.GrantPermission),V=Object(b.useIsFocused)();E.useEffect((function(){V&&_()}),[V]);var Z=Object(v.useMutation)(Ue),K=c()(Z,2),X=K[0],ee=(K[1],Ie({onSuccess:function(e){_(),D(T.a.notifications.showSnackbar({message:"Permission revoked"}))},onError:function(e){D(T.a.notifications.showSnackbar({message:e,variant:"error"}))}})),ne=Pe({onSuccess:function(e){_(),D(T.a.notifications.showSnackbar({message:"Permission granted"}))},onError:function(e){D(T.a.notifications.showSnackbar({message:e,variant:"error"}))}});E.useEffect((function(){!function(){var e;p.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("web"===y.a.OS){n.next=6;break}return n.next=3,p.a.awrap(A.b());case 3:e=n.sent,"granted"!==e.status&&alert("Sorry, we need camera roll permissions to make this work!");case 6:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]);var re=E.useCallback((function(){var e,n;return p.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,p.a.awrap(A.a({mediaTypes:F.a.Images,allowsEditing:!0,aspect:[4,3],quality:.1,base64:!0}));case 3:return n=r.sent,r.next=6,p.a.awrap(X({variables:{id:Number(null==G||null==(e=G.user)?void 0:e.id),image:"data:image/jpeg;base64,"+n.base64}}));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0);case 11:case"end":return r.stop()}}),null,null,[[0,8]],Promise)}),[D]),te=(null==G||null==(e=G.permissions)?void 0:e.filter((function(e){return/^actAs/.test(e)})))||[],ae=Object(J.a)(N.b.CreateUserTransaction),oe=Object(J.a)(N.b.UpdateUser);return E.createElement(E.Fragment,null,H&&E.createElement(x.a,{color:O.theme.colors.accent,indeterminate:!0,visible:H}),E.createElement(R.a,{contentContainerStyle:Te.content,refreshControl:E.createElement(h.a,{refreshing:H,onRefresh:function(){return _()}})},E.createElement(P.b,{horizontal:!0,style:{width:"100%"},contentContainerStyle:{flexGrow:1,padding:8,justifyContent:"space-evenly",backgroundColor:O.theme.colors.primary}},[N.b.ActAsPilot,N.b.ActAsDzso,N.b.ActAsGca,N.b.ActAsRigInspector,N.b.ActAsLoadMaster].map((function(e){return function(e){return Q||te.includes(e)}(e)?E.createElement(Se,{type:e,selected:te.includes(e),onPress:function(){return Q?te.includes(e)?ee.mutate({permissionName:e,dropzoneUserId:Number(G.id)},{update:function(n,r){var t,a,i,l;return p.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r.data,i=n.readQuery({query:U.a,variables:{permissions:[e],dropzoneId:Number(O.currentDropzoneId)}}),l=((null==i||null==(t=i.dropzone)||null==(a=t.dropzoneUsers)?void 0:a.edges)||[]).filter((function(e){return e.node.id!==G.id})),n.writeQuery({query:U.a,variables:{permissions:[e],dropzoneId:Number(O.currentDropzoneId)},data:Fe(Fe({},i),{},{dropzone:Fe(Fe({},null==i?void 0:i.dropzone),{},{dropzoneUsers:l})})}),o.abrupt("return",{data:Fe(Fe({},i),{},{dropzone:Fe(Fe({},null==i?void 0:i.dropzone),{},{dropzoneUsers:l})})});case 5:case"end":return o.stop()}}),null,null,null,Promise)}}):ne.mutate({permissionName:e,dropzoneUserId:Number(G.id)},{update:function(n,r){var t,a,i,o,s,u,c,d,m,f,g,b,v;return p.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:return d=r.data,m=n.readQuery({query:U.a,variables:{permissions:[e],dropzoneId:Number(O.currentDropzoneId)}}),f=(null==m||null==(t=m.dropzone)||null==(a=t.dropzoneUsers)?void 0:a.edges)||[],g=!!f.find((function(e){return e.node.id===G.id})),b=g?l()(((null==m||null==(i=m.dropzone)||null==(o=i.dropzoneUsers)?void 0:o.edges)||[]).map((function(e){var n;return e.node.id!==G.id?e:Fe(Fe({},e),{},{node:Fe(Fe({},e.node),null==(n=d.grantPermission)?void 0:n.dropzoneUser)})}))):[].concat(l()((null==m||null==(s=m.dropzone)||null==(u=s.dropzoneUsers)?void 0:u.edges)||[]),[{edge:{node:null==(c=d.grantPermission)?void 0:c.dropzoneUser}}]),v=Fe(Fe({},m),{},{dropzone:Fe(Fe({},null==m?void 0:m.dropzone),{},{dropzoneUsers:b})}),n.writeQuery({query:U.a,variables:{dropzoneId:Number(O.currentDropzoneId),permissions:[e]},data:v}),p.abrupt("return",{data:v});case 8:case"end":return p.stop()}}),null,null,null,Promise)}}):null}}):null}))),E.createElement(be,{dropzoneUser:G,canEdit:L,onEdit:function(){null!=G&&G.user&&D(T.a.forms.user.setOpen(null==G?void 0:G.user))},onPressAvatar:re},E.createElement(P.b,{horizontal:!0,style:{marginVertical:8}},E.createElement(w.a,{icon:function(e){var n=e.size;return E.createElement(g.a,{name:"email",size:n,color:"#FFFFFF"})},mode:"outlined",style:Te.chip,textStyle:Te.chipTitle},(null==G||null==(n=G.user)?void 0:n.email)||"-"),E.createElement(w.a,{icon:function(e){var n=e.size;return E.createElement(g.a,{name:"phone",size:n,color:"#FFFFFF"})},mode:"outlined",style:Te.chip,textStyle:Te.chipTitle},(null==G||null==(r=G.user)?void 0:r.phone)||"-"),E.createElement(w.a,{icon:function(e){var n=e.size;return E.createElement(g.a,{name:"card-account-details-star-outline",size:n,color:"#FFFFFF"})},mode:"outlined",style:Te.chip,textStyle:Te.chipTitle,onPress:function(){oe&&D(T.a.forms.dropzoneUser.setOpen(G))}},null!=G&&G.expiresAt?Object(I.a)(1e3*((null==G?void 0:G.expiresAt)||0),"yyyy/MM/dd"):"Not a member")),E.createElement(S.a,{style:Te.divider}),E.createElement(Ee,{items:[{title:"Funds",value:"$"+((null==G?void 0:G.credits)||0),onPress:function(){G&&ae&&D(T.a.forms.credits.setOpen(G))}},{title:"License",value:""+((null==G||null==(t=G.user)||null==(i=t.license)?void 0:i.name)||"-")},{title:"Exit weight",value:Math.round(Number(null==G||null==(o=G.user)?void 0:o.exitWeight)).toString()||"-"}]}),E.createElement(S.a,{style:[Te.divider,{backgroundColor:"white"}]})),E.createElement(de,{title:"Rigs",buttonIcon:"plus",onPressButton:function(){return D(T.a.forms.rig.setOpen(!0))}},E.createElement(k.a,null,E.createElement(k.a.Header,null,E.createElement(k.a.Title,null,"Container"),E.createElement(k.a.Title,{numeric:!0},"Repack due"),E.createElement(k.a.Title,{numeric:!0},"Canopy size"),E.createElement(k.a.Title,{numeric:!0},"Inspected")),null==G||null==(s=G.user)||null==(u=s.rigs)?void 0:u.map((function(e){var n,r;return E.createElement(k.a.Row,{key:"rig-"+e.id,onPress:function(){D(T.a.forms.rig.setOpen(e))},onLongPress:function(){return W.navigate("RigInspectionScreen",{dropzoneUserId:Number(q.params.userId),rig:e})},pointerEvents:"none"},E.createElement(k.a.Cell,null,[null==e?void 0:e.make,null==e?void 0:e.model,"#"+(null==e?void 0:e.serial)].join(" ")),E.createElement(k.a.Cell,{numeric:!0},null!=e&&e.repackExpiresAt?Object(I.a)(1e3*e.repackExpiresAt,"yyyy/MM/dd"):"-"),E.createElement(k.a.Cell,{numeric:!0},""+(null==e?void 0:e.canopySize)),E.createElement(k.a.Cell,{numeric:!0},E.createElement(j.a,{icon:null!=G&&null!=(n=G.rigInspections)&&n.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?"eye-check":"eye-minus",color:null!=G&&null!=(r=G.rigInspections)&&r.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?$.d:$.e,onPress:function(){return W.navigate("RigInspectionScreen",{dropzoneUserId:Number(q.params.userId),rig:e})}})))})))),E.createElement(de,a()({title:"Transactions"},ae?{buttonIcon:"plus",onPressButton:function(){G&&D(T.a.forms.credits.setOpen(G))}}:{}),E.createElement(k.a,null,E.createElement(k.a.Header,null,E.createElement(k.a.Title,null,"Time"),E.createElement(k.a.Title,null,"Type"),E.createElement(k.a.Title,null,"Message"),E.createElement(k.a.Title,{numeric:!0},"Amount")),null==G||null==(d=G.transactions)||null==(m=d.edges)?void 0:m.map((function(e){var n,r,t,a,i,l;return E.createElement(k.a.Row,{key:"transaction-"+(null==e||null==(n=e.node)?void 0:n.id)},E.createElement(k.a.Cell,null,E.createElement(z.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null!=e&&null!=(r=e.node)&&r.createdAt?Object(I.a)(1e3*(null==e||null==(t=e.node)?void 0:t.createdAt),"yyyy/MM/dd hh:mm"):null)),E.createElement(k.a.Cell,null,E.createElement(z.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null==e||null==(a=e.node)?void 0:a.status)),E.createElement(k.a.Cell,null,null==e||null==(i=e.node)?void 0:i.message),E.createElement(k.a.Cell,{numeric:!0},null==e||null==(l=e.node)?void 0:l.amount))}))))),E.createElement(le.a,{onClose:function(){return D(T.a.forms.rig.setOpen(!1))},onSuccess:function(){return D(T.a.forms.rig.setOpen(!1))},open:C.rig.open,userId:Number(null==G||null==(f=G.user)?void 0:f.id)}),E.createElement(Y,{onClose:function(){return D(T.a.forms.dropzoneUser.setOpen(!1))},onSuccess:function(e){D(T.a.forms.dropzoneUser.setOpen(!1)),(null==M?void 0:M.id)===(null==G?void 0:G.id)&&D(T.a.global.setUser(e.user))},open:C.dropzoneUser.open}),E.createElement(ie,{onClose:function(){return D(T.a.forms.credits.setOpen(!1))},onSuccess:function(){return D(T.a.forms.credits.setOpen(!1))},open:C.credits.open,dropzoneUser:G||void 0}),E.createElement(ce,{onClose:function(){return D(T.a.forms.user.setOpen(!1))},onSuccess:function(){return D(T.a.forms.user.setOpen(!1))},open:C.user.open}))}var Te=O.a.create({container:{flex:1},content:{flexGrow:1,paddingBottom:56,paddingHorizontal:0},divider:{height:1,width:"100%"},chip:{margin:1,backgroundColor:"transparent",minHeight:23,borderWidth:0,justifyContent:"center",alignItems:"center",display:"flex"},chipTitle:{color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:12,lineHeight:24,textAlignVertical:"center"}})}}]);
//# sourceMappingURL=0.ce92f311.chunk.js.map