(this.webpackJsonp=this.webpackJsonp||[]).push([[27],{541:function(n,e,t){"use strict";t.d(e,"a",(function(){return s}));var i=t(0),r=t(1),o=t(137),a=t(321),c=t(99);function s(n){var e=n.title,t=n.subtitle;return i.createElement(c.b,{style:l.empty},i.createElement(o.a,null,e),i.createElement(a.a,{style:{textAlign:"center"}},t))}var l=r.a.create({container:{flex:1,padding:8,display:"flex"},fab:{position:"absolute",margin:16,right:0,bottom:0},empty:{flex:1,alignItems:"center",justifyContent:"center",width:"100%",height:"100%"}})},720:function(n,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return F}));var i,r=t(11),o=t.n(r),a=t(57),c=t.n(a),s=t(40),l=t(51),u=t(0),d=t(184),f=t(1),p=t(331),m=t(58),b=t(19),g=t(183),y=t(3),h=t.n(y);function O(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,i)}return t}function v(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?O(Object(t),!0).forEach((function(e){h()(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):O(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var j=Object(m.a)(i||(i=c()(["\n  query QueryNotifications($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n\n      currentUser {\n        id\n        \n        notifications {\n          edges {\n            node {\n              id\n              message\n              notificationType\n              createdAt\n\n              resource {\n                ...on Load {\n                  id\n                  loadNumber\n                  dispatchAt\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var E,w,I=t(541),S=t(41),A=t.n(S),N=t(50),P=t(201),T=t(323),$=t(719),k=Object(m.a)(E||(E=c()(["\n  mutation MarkAsSeen(\n    $id: Int,\n  ){\n    updateNotification(input: {\n      id: $id\n      attributes: {\n        isSeen: true,\n      }\n    }) {\n      notification {\n        id\n        isSeen\n        message\n        notificationType\n        receivedBy {\n          notifications {\n            edges {\n              node {\n                id\n                message\n                isSeen\n                notificationType\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function z(n){var e=n.notification,t=Object(l.useMutation)(k),i=o()(t,2);i[0],i[1];return u.createElement(u.Fragment,null,u.createElement(N.b.Item,{title:"Manifest",description:e.message,style:{width:"100%"},left:function(n){return u.createElement(N.b.Icon,A()({},n,{icon:"airplane"}))},right:function(){return u.createElement(P.a,null,Object($.a)(1e3*e.createdAt))}}),u.createElement(T.a,{style:{width:"100%"}}))}var M,x=Object(m.a)(w||(w=c()(["\n  mutation MarkAsSeen(\n    $id: Int,\n  ){\n    updateNotification(input: {\n      id: $id\n      attributes: {\n        isSeen: true,\n      }\n    }) {\n      notification {\n        id\n        isSeen\n        message\n        notificationType\n        receivedBy {\n          notifications {\n            edges {\n              node {\n                id\n                message\n                isSeen\n                notificationType\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function D(n){var e=n.notification,t=Object(l.useMutation)(x),i=o()(t,2);i[0],i[1];return u.createElement(u.Fragment,null,u.createElement(N.b.Item,{title:"Load #"+e.resource.loadNumber+" boarding call",description:e.message,style:{width:"100%"},left:function(n){return u.createElement(N.b.Icon,A()({},n,{icon:"airplane-takeoff"}))},right:function(){return u.createElement(P.a,null,Object($.a)(1e3*e.createdAt))}}),u.createElement(T.a,{style:{width:"100%"}}))}var B=Object(m.a)(M||(M=c()(["\n  mutation MarkAsSeen(\n    $id: Int,\n  ){\n    updateNotification(input: {\n      id: $id\n      attributes: {\n        isSeen: true,\n      }\n    }) {\n      notification {\n        id\n        isSeen\n        message\n        notificationType\n        receivedBy {\n          notifications {\n            edges {\n              node {\n                id\n                message\n                isSeen\n                notificationType\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function F(){var n,e,t=Object(b.c)((function(n){return n.global})),i=function(){var n,e,t=Object(b.c)((function(n){return n.global.currentDropzoneId})),i=Object(l.useQuery)(j,{variables:{dropzoneId:t},pollInterval:3e4});return v(v({},i),{},{notifications:null==i||null==(n=i.data)||null==(e=n.dropzone)?void 0:e.currentUser.notifications})}(),r=i.notifications,a=i.loading,c=i.refetch,f=Object(s.useIsFocused)();u.useEffect((function(){f&&c()}),[f]);var m=Object(l.useMutation)(B),y=o()(m,2);y[0],y[1];return u.createElement(u.Fragment,null,a&&u.createElement(p.a,{color:t.theme.colors.accent,indeterminate:!0,visible:a}),u.createElement(g.a,{contentContainerStyle:C.content,refreshControl:u.createElement(d.a,{refreshing:a,onRefresh:function(){return c()}})},null!=r&&null!=(n=r.edges)&&n.length?null==r||null==(e=r.edges)?void 0:e.map((function(n){switch(n.node.notificationType){case"boarding_call":return u.createElement(D,{notification:n.node});case"user_manifested":return u.createElement(z,{notification:n.node});default:return null}})):u.createElement(I.a,{title:"No notifications",subtitle:"Notifications will show up here"})))}var C=f.a.create({container:{flex:1},content:{flexGrow:1,paddingBottom:56,paddingHorizontal:0},divider:{height:1,width:"100%"}})}}]);
//# sourceMappingURL=27.89741b9f.chunk.js.map