(this.webpackJsonp=this.webpackJsonp||[]).push([[0],{617:function(e,n,r){"use strict";r.d(n,"a",(function(){return d}));var t=r(0),a=r(1),l=r(148),i=r(253),o=r(395),s=r(388),u=r(202),c=r(7);function d(e){var n=e.buttonLabel,r=e.buttonAction,a=e.title,d=e.loading,m=e.children,f=Object(c.c)((function(e){return e.global}));return t.createElement(i.a,null,t.createElement(o.a,{visible:!!e.open,dismissable:!1,style:{maxWidth:500,alignSelf:"center"}},t.createElement(s.a,{indeterminate:!0,visible:d,color:f.theme.colors.accent}),t.createElement(o.a.Title,null,a),t.createElement(o.a.Content,{pointerEvents:"box-none"},t.createElement(o.a.ScrollArea,null,t.createElement(l.b,null,m))),t.createElement(o.a.Actions,{style:{justifyContent:"flex-end"}},t.createElement(u.a,{onPress:function(){e.onClose()}},"Cancel"),t.createElement(u.a,{onPress:r},n))))}a.a.create({button:{width:"100%",borderRadius:16,padding:5},contentContainer:{paddingHorizontal:16,paddingBottom:32},sheet:{elevation:3,backgroundColor:"white",flexGrow:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},sheetHeader:{elevation:2,borderTopLeftRadius:20,borderTopRightRadius:20,height:40,shadowColor:"#000",shadowOffset:{width:0,height:-4},backgroundColor:"white",shadowOpacity:.22,shadowRadius:2.22}})},637:function(e,n,r){"use strict";r.d(n,"a",(function(){return v})),r.d(n,"b",(function(){return b}));var t,a=r(12),l=r.n(a),i=r(36),o=r.n(i),s=r(47),u=r(37),c=r(0),d=r(316),m=r(218),f=r(97),p=r(116),g=r(7),v=Object(u.a)(t||(t=o()(["\n  query QueryGCAUsers(\n    $dropzoneId: Int!\n    $permissions: [Permission!]\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(permissions: $permissions) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function b(e){var n,r,t,a,i,o,u,b,E=c.useState(!1),y=l()(E,2),h=y[0],O=y[1],z=Object(g.c)((function(e){return e.global})).currentDropzoneId,x=Object(s.useQuery)(v,{variables:{dropzoneId:Number(z),permissions:["actAsGCA"]}}).data;return Object(p.a)(f.a.UpdateLoad)?c.createElement(m.a,{onDismiss:function(){return O(!1)},visible:h,anchor:c.createElement(d.a,{mode:"outlined",icon:"radio-handheld",style:{marginHorizontal:4},onPress:function(){return O(!0)}},null!=(t=e.value)&&t.id?null==(a=e.value)||null==(i=a.user)?void 0:i.name:"No gca")},null==x||null==(o=x.dropzone)||null==(u=o.dropzoneUsers)||null==(b=u.edges)?void 0:b.map((function(n){var r,t,a;return c.createElement(m.a.Item,{key:"gca-chip-"+(null==n||null==(r=n.node)?void 0:r.id),onPress:function(){O(!1),e.onSelect(null==n?void 0:n.node)},title:null==n||null==(t=n.node)||null==(a=t.user)?void 0:a.name})}))):c.createElement(d.a,{mode:"outlined",icon:"radio-handheld"},(null==(n=e.value)||null==(r=n.user)?void 0:r.name)||"No gca")}},639:function(e,n,r){"use strict";r.d(n,"a",(function(){return m}));var t=r(0),a=r(1),l=r(2),i=r(284),o=r(282),s=r(375),u=r(7),c=r(335),d=r(162);function m(){var e,n,r,a,m,p,g,v,b,E,y,h,O,z,x,S,k,w,j,I,C,P,A,$,F=Object(u.c)((function(e){return e.forms.user})),U=Object(u.b)();return t.useEffect((function(){var e;F.original&&(F.fields.exitWeight.value||U(u.a.forms.user.setField(["exitWeight",F.original.exitWeight||"60"])),!F.fields.rigs.value&&null!=(e=F.original)&&e.id&&U(u.a.forms.user.setField(["rigs",F.original.rigs])))}),[null==(e=F.original)?void 0:e.id]),t.createElement(t.Fragment,null,t.createElement(i.a,{style:f.field,mode:"outlined",label:"Name",error:!!F.fields.name.error,value:(null==(n=F.fields.name)||null==(r=n.value)?void 0:r.toString())||"",onChangeText:function(e){return U(u.a.forms.user.setField(["name",e]))}}),t.createElement(o.a,{type:F.fields.name.error?"error":"info"},F.fields.name.error||" "),t.createElement(i.a,{style:f.field,mode:"outlined",label:"Email",error:!!F.fields.email.error,value:(null==(a=F.fields.email)||null==(m=a.value)?void 0:m.toString())||"",onChangeText:function(e){return U(u.a.forms.user.setField(["email",e]))}}),t.createElement(o.a,{type:F.fields.email.error?"error":"info"},F.fields.email.error||" "),t.createElement(i.a,{style:f.field,mode:"outlined",label:"Phone",error:!!F.fields.phone.error,value:(null==(p=F.fields.phone)||null==(g=p.value)?void 0:g.toString())||"",onChangeText:function(e){return U(u.a.forms.user.setField(["phone",e]))}}),t.createElement(o.a,{type:F.fields.phone.error?"error":"info"},F.fields.phone.error||""),t.createElement(i.a,{style:f.field,mode:"outlined",label:"Exit weight",error:!!F.fields.exitWeight.error,value:(null==(v=F.fields.exitWeight)||null==(b=v.value)?void 0:b.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return t.createElement(i.a.Affix,{text:"kg"})},onChangeText:function(e){return U(u.a.forms.user.setField(["exitWeight",e]))}}),t.createElement(o.a,{type:F.fields.exitWeight.error?"error":"info"},F.fields.exitWeight.error||""),t.createElement(s.a,null),t.createElement(l.a,{style:{width:"100%"}},t.createElement(d.a,{value:(null==F||null==(E=F.fields)||null==(y=E.license)||null==(h=y.value)?void 0:h.federation)||F.federation.value,onSelect:function(e){return U(u.a.forms.user.setFederation(e))},required:!0}),t.createElement(o.a,{type:F.federation.error?"error":"info"},F.federation.error||""),((null==F||null==(O=F.fields)||null==(z=O.license)||null==(x=z.value)||null==(S=x.federation)?void 0:S.id)||(null==F||null==(k=F.federation)||null==(w=k.value)?void 0:w.id))&&t.createElement(t.Fragment,null,t.createElement(c.a,{value:F.fields.license.value,federationId:Number((null==F||null==(j=F.fields)||null==(I=j.license)||null==(C=I.value)||null==(P=C.federation)?void 0:P.id)||(null==(A=F.federation)||null==($=A.value)?void 0:$.id)),onSelect:function(e){return U(u.a.forms.user.setField(["license",e]))},required:!0}),t.createElement(o.a,{type:F.fields.license.error?"error":"info"},F.fields.license.error||""))))}var f=a.a.create({fields:{flex:1,width:"100%",paddingTop:32},field:{marginBottom:8,width:"100%"},ticketAddons:{marginBottom:8}})},651:function(e,n,r){"use strict";r.d(n,"a",(function(){return A}));var t=r(4),a=r.n(t),l=r(12),i=r.n(l),o=r(36),s=r.n(o),u=r(8),c=r.n(u),d=r(47),m=r(0),f=r(7),p=r(1),g=r(2),v=r(284),b=r(282),E=r(332),y=r(328),h=r(116),O=r(97);function z(e){var n,r,t=Object(f.c)((function(e){return e.forms.rig})),a=Object(f.b)(),l=Object(h.a)(O.a.CreateRig);return m.createElement(g.a,null,m.createElement(v.a,{style:k.field,mode:"outlined",label:"Make",error:!!t.fields.make.error,value:t.fields.make.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["make",e]))}}),m.createElement(b.a,{type:t.fields.make.error?"error":"info"},t.fields.make.error||"e.g Javelin, Mirage"),m.createElement(v.a,{style:k.field,mode:"outlined",label:"Model",error:!!t.fields.model.error,value:t.fields.model.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["model",e]))}}),m.createElement(b.a,{type:t.fields.model.error?"error":"info"},t.fields.model.error||"e.g G4.1"),m.createElement(v.a,{style:k.field,mode:"outlined",label:"Serial",error:!!t.fields.serial.error,value:t.fields.serial.value||"",onChangeText:function(e){return a(f.a.forms.rig.setField(["serial",e]))}}),m.createElement(b.a,{type:t.fields.serial.error?"error":"info"},t.fields.serial.error||""),m.createElement(v.a,{style:k.field,mode:"outlined",label:"Current canopy size",error:!!t.fields.canopySize.error,value:(null==(n=t.fields.canopySize.value)?void 0:n.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return a(f.a.forms.rig.setField(["canopySize",Number(e)]))}}),m.createElement(b.a,{type:t.fields.canopySize.error?"error":"info"},t.fields.canopySize.error||"Size of canopy in container"),e.showTypeSelect?m.createElement(y.a,{items:["student","sport","tandem"],renderItemLabel:function(e){return e},isDisabled:function(e){return!l&&"sport"!==e},selected:[(null==(r=t.fields.rigType)?void 0:r.value)||"sport"],onChangeSelected:function(e){var n=i()(e,1)[0];return a(f.a.forms.rig.setField(["rigType",n]))}}):null,m.createElement(E.a,{timestamp:t.fields.repackExpiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return a(f.a.forms.rig.setField(["repackExpiresAt",e]))},label:"Reserve repack expiry date"}),m.createElement(b.a,{type:t.fields.repackExpiresAt.error?"error":"info"},t.fields.repackExpiresAt.error||""))}var x,S,k=p.a.create({fields:{flex:1},field:{marginBottom:8}}),w=r(617);function j(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function I(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?j(Object(r),!0).forEach((function(n){a()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var C=Object(d.gql)(x||(x=s()(["\n  mutation CreateRig(\n    $make: String,\n    $model: String,\n    $serial: String,\n    $rigType: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    createRig(\n      input: {\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"]))),P=Object(d.gql)(S||(S=s()(["\n  mutation UpdateRig(\n    $id: Int!\n    $make: String,\n    $model: String,\n    $serial: String,\n    $rigType: String,\n    $canopySize: Int,\n    $repackExpiresAt: Int\n    $userId: Int\n    $dropzoneId: Int\n  ) {\n    updateRig(\n      input: {\n        id: $id,\n        attributes: {\n          make: $make\n          model: $model\n          serial: $serial\n          repackExpiresAt: $repackExpiresAt\n          dropzoneId: $dropzoneId\n          userId: $userId\n          canopySize: $canopySize\n          rigType: $rigType\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      rig {\n        id\n        make\n        model\n        serial\n        canopySize\n        repackExpiresAt\n        packValue\n        maintainedAt\n        rigType\n\n        user {\n          id\n          rigs {\n            id\n            make\n            model\n            serial\n            canopySize\n            repackExpiresAt\n            packValue\n            maintainedAt\n          }\n        }\n      }\n    }\n  }\n"])));function A(e){var n,r=e.open,t=(e.onClose,e.userId,e.dropzoneId,Object(f.b)()),a=Object(f.c)((function(e){return e.forms.rig})),l=Object(d.useMutation)(C),o=i()(l,2),s=o[0],u=o[1],p=Object(d.useMutation)(P),g=i()(p,2),v=g[0],b=g[1],E=u.loading||b.loading,y=m.useCallback((function(){var e=!1;return a.fields.make.value||(e=!0,t(f.a.forms.rig.setFieldError(["make","Required"]))),a.fields.model.value||(e=!0,t(f.a.forms.rig.setFieldError(["model","Required"]))),a.fields.serial.value||(e=!0,t(f.a.forms.rig.setFieldError(["serial","Required"]))),a.fields.canopySize.value||(e=!0,t(f.a.forms.rig.setFieldError(["canopySize","Required"]))),a.fields.repackExpiresAt.value||(e=!0,t(f.a.forms.rig.setFieldError(["repackExpiresAt","You must select a repack date in the future"]))),!e}),[JSON.stringify(a.fields)]),h=m.useCallback((function(){var n,r,l,i,o,u,d,m,p,g,b,E;return c.a.async((function(h){for(;;)switch(h.prev=h.next){case 0:if(y()){h.next=2;break}return h.abrupt("return");case 2:return h.prev=2,g=null!=(n=a.original)&&n.id?v:s,h.next=6,c.a.awrap(g({variables:I(I({},null!=(r=a.original)&&r.id?{id:Number(null==(l=a.original)?void 0:l.id)}:{}),{},{make:a.fields.make.value,model:a.fields.model.value,serial:a.fields.serial.value,canopySize:a.fields.canopySize.value,rigType:a.fields.rigType.value,repackExpiresAt:a.fields.repackExpiresAt.value,userId:e.userId?Number(e.userId):null,dropzoneId:e.dropzoneId?Number(e.dropzoneId):null})}));case 6:if(b=h.sent,null==(E=null!=(i=a.original)&&i.id?null==(o=b.data)?void 0:o.updateRig:null==(u=b.data)?void 0:u.createRig)||null==(d=E.fieldErrors)||d.map((function(e){var n=e.field,r=e.message;switch(n){case"make":return t(f.a.forms.rig.setFieldError(["make",r]));case"model":return t(f.a.forms.rig.setFieldError(["model",r]));case"serial":return t(f.a.forms.rig.setFieldError(["serial",r]));case"canopy_size":return t(f.a.forms.rig.setFieldError(["canopySize",r]));case"repack_expires_at":return t(f.a.forms.rig.setFieldError(["repackExpiresAt",r]));case"rig_type":return t(f.a.forms.rig.setFieldError(["rigType",r]))}})),null==E||null==(m=E.errors)||!m.length){h.next=11;break}return h.abrupt("return",t(f.a.notifications.showSnackbar({message:null==E?void 0:E.errors[0],variant:"error"})));case 11:null!=E&&null!=(p=E.fieldErrors)&&p.length||e.onSuccess(),h.next=17;break;case 14:h.prev=14,h.t0=h.catch(2),t(f.a.notifications.showSnackbar({message:h.t0.message,variant:"error"}));case 17:case"end":return h.stop()}}),null,null,[[2,14]],Promise)}),[JSON.stringify(a.fields),s,v,e.onSuccess]);return m.createElement(w.a,{title:null!=(n=a.original)&&n.id?"Edit rig":"New rig",open:r,snapPoints:[0,580],onClose:function(){e.onClose(),t(f.a.forms.rig.reset())},buttonAction:h,buttonLabel:"Save",loading:E},m.createElement(z,{showTypeSelect:!!e.dropzoneId}))}},781:function(e,n,r){"use strict";r.r(n),r.d(n,"default",(function(){return Me}));var t,a=r(29),l=r.n(a),i=r(23),o=r.n(i),s=r(4),u=r.n(s),c=r(12),d=r.n(c),m=r(36),f=r.n(m),p=r(8),g=r.n(p),v=r(432),b=r(56),E=r(47),y=r(0),h=r(9),O=r(224),z=r(1),x=r(32),S=r(388),k=r(316),w=r(375),j=r(462),I=r(160),C=r(390),P=r(37),A=r(148),$=r(763),F=r(631),U=r(637),T=r(90),N=r(7),D=r(97),R=r(158),W=r(253),M=r(395),q=r(202),L=r(282),G=r(24),B=r(332),H=r(218),J=Object(P.a)(t||(t=f()(["\n  query RolesQuery($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      roles {\n        id\n        name\n      }\n    }\n  }\n"])));function Q(e){var n,r,t,a=y.useState(!1),l=d()(a,2),i=l[0],o=l[1],s=Object(N.c)((function(e){return e.global})).currentDropzoneId,u=Object(E.useQuery)(J,{variables:{dropzoneId:Number(s)}}),c=u.data;u.loading,u.refetch;return y.createElement(y.Fragment,null,y.createElement(G.b.Subheader,{style:{paddingLeft:0}},"Access level"),y.createElement(H.a,{onDismiss:function(){return o(!1)},visible:!e.disabled&&i,anchor:y.createElement(G.b.Item,{left:function(){return y.createElement(G.b.Icon,{icon:"lock"})},onPress:e.disabled?void 0:function(){o(!0)},title:(null==(n=e.value)?void 0:n.name)||"Access level",description:e.required?null:"Optional"})},null==c||null==(r=c.dropzone)||null==(t=r.roles)?void 0:t.map((function(n){return y.createElement(H.a.Item,{onPress:function(){o(!1),e.onSelect(n)},title:n.name||"-"})}))))}var V=r(116);function _(){var e=Object(N.c)((function(e){return e.forms.dropzoneUser})),n=Object(N.b)(),r=Object(V.a)(D.a.GrantPermission);return y.createElement(y.Fragment,null,y.createElement(Q,{value:e.fields.role.value,onSelect:function(e){return n(N.a.forms.dropzoneUser.setField(["role",e]))},disabled:!r,required:!0}),y.createElement(L.a,{type:e.fields.role.error?"error":"info"},e.fields.role.error),y.createElement(G.b.Subheader,{style:{paddingLeft:0}},"Financial"),y.createElement(B.a,{timestamp:e.fields.expiresAt.value||(new Date).getTime()/1e3,onChange:function(e){return n(N.a.forms.dropzoneUser.setField(["expiresAt",e]))},label:"Membership expires"}),y.createElement(L.a,{type:e.fields.expiresAt.error?"error":"info"},e.fields.expiresAt.error))}var Z;z.a.create({fields:{flex:1},field:{marginBottom:8}});function Y(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function K(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?Y(Object(r),!0).forEach((function(n){u()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Y(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var X=Object(E.gql)(Z||(Z=f()(["\n  mutation UpdateDropzoneUser(\n    $userRoleId: Int,\n    $expiresAt: Int,\n    $dropzoneUserId: Int\n  ) {\n    updateDropzoneUser(\n      input: {\n        id: $dropzoneUserId,\n        attributes: {\n          userRoleId: $userRoleId,\n          expiresAt: $expiresAt,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      dropzoneUser {\n        id\n        credits\n        expiresAt\n        role {\n          id\n          name\n        }\n\n        user {\n          id\n          name\n        }\n      }\n    }\n  }\n"])));function ee(e){var n,r=Object(N.b)(),t=Object(N.c)((function(e){return e.forms.dropzoneUser})),a=Object(N.c)((function(e){return e.global})),l=Object(E.useMutation)(X),i=d()(l,2),o=i[0],s=i[1],u=y.useCallback((function(){var e=!1;return t.fields.role.value||(e=!0,r(N.a.forms.dropzoneUser.setFieldError(["role","User must have an access level"]))),t.fields.expiresAt.value||(e=!0,r(N.a.forms.dropzoneUser.setFieldError(["expiresAt","Membership expiry must be set"]))),!e}),[JSON.stringify(t.fields)]),c=y.useCallback((function(){var n,a,l,i,s,c,d,m,f,p;return g.a.async((function(v){for(;;)switch(v.prev=v.next){case 0:if(u()){v.next=2;break}return v.abrupt("return");case 2:return v.prev=2,v.next=5,g.a.awrap(o({variables:K(K({},null!=(n=t.original)&&n.id?{id:null==(a=t.original)?void 0:a.id}:{}),{},{userRoleId:Number(null==(l=t.fields.role.value)?void 0:l.id),expiresAt:t.fields.expiresAt.value,dropzoneUserId:Number(null==(i=t.original)?void 0:i.id)})}));case 5:if(f=v.sent,null==(p=null==(s=f.data)?void 0:s.updateDropzoneUser)||null==(c=p.fieldErrors)||c.map((function(e){var n=e.field,t=e.message;switch(n){case"user_role":return r(N.a.forms.dropzoneUser.setFieldError(["role",t]));case"expires_at":return r(N.a.forms.dropzoneUser.setFieldError(["expiresAt",t]))}})),null==p||null==(d=p.errors)||!d.length){v.next=10;break}return v.abrupt("return",r(N.a.notifications.showSnackbar({message:null==p?void 0:p.errors[0],variant:"error"})));case 10:null!=p&&null!=(m=p.fieldErrors)&&m.length?console.error(p.fieldErrors):e.onSuccess(p.dropzoneUser),v.next=16;break;case 13:v.prev=13,v.t0=v.catch(2),r(N.a.notifications.showSnackbar({message:v.t0.message,variant:"error"}));case 16:case"end":return v.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(t.fields),o,e.onSuccess]);return y.createElement(W.a,null,y.createElement(M.a,{visible:!!e.open},y.createElement(S.a,{indeterminate:!0,visible:s.loading,color:a.theme.colors.accent}),y.createElement(M.a.Title,null,(null!=t&&null!=(n=t.original)&&n.id?"Edit":"New")+" dropzone user"),y.createElement(M.a.Content,null,y.createElement(_,null)),y.createElement(M.a.Actions,{style:{justifyContent:"flex-end"}},y.createElement(q.a,{onPress:function(){r(N.a.forms.dropzoneUser.reset()),e.onClose()}},"Cancel"),y.createElement(q.a,{onPress:c},"Save"))))}var ne=r(2),re=r(284),te=r(629);function ae(){var e,n,r,t,a,l,i=Object(N.c)((function(e){return e.forms.credits})),o=Object(N.b)(),s=(null==(e=i.original)?void 0:e.credits)||0,u=i.fields.amount.value||0,c="deposit"===i.fields.status.value?u+s:u-s;return y.createElement(y.Fragment,null,y.createElement(te.b,{defaultIndex:0,onChangeIndex:function(e){o(N.a.forms.credits.setField(["status",1===e?"withdrawal":"deposit"]))},mode:"fixed"},y.createElement(te.a,{label:"Deposit",icon:"arrow-up"},y.createElement(ne.a,null)),y.createElement(te.a,{label:"Withdraw",icon:"arrow-down"},y.createElement(ne.a,null))),y.createElement(M.a.Content,{style:{paddingTop:16}},y.createElement(re.a,{style:ie.field,mode:"outlined",label:"Message",error:!!i.fields.message.error,value:(null==(n=i.fields.message.value)?void 0:n.toString())||"",onChangeText:function(e){return o(N.a.forms.credits.setField(["message",e]))}}),y.createElement(L.a,{type:i.fields.message.error?"error":"info"},i.fields.message.error||""),"deposit"===i.fields.status.value?y.createElement(ne.a,null,y.createElement(re.a,{style:ie.field,mode:"outlined",label:"Add amount",error:!!i.fields.amount.error,value:(null==(r=i.fields.amount.value)?void 0:r.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(N.a.forms.credits.setField(["amount",Number(e)]))}}),y.createElement(L.a,{type:i.fields.amount.error?"error":"info"},i.fields.amount.error||""),y.createElement(w.a,null),y.createElement(j.a,null,y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,"Current balance"),y.createElement(j.a.Cell,{numeric:!0},"$"+((null==(t=i.original)?void 0:t.credits)||0))),y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,"Deposit"),y.createElement(j.a.Cell,{numeric:!0},"+$"+(i.fields.amount.value||0))),y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,y.createElement(x.a,{style:{fontWeight:"bold"}},"New total")),y.createElement(j.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c))))):y.createElement(ne.a,null,y.createElement(re.a,{style:ie.field,mode:"outlined",label:"Withdraw amount",error:!!i.fields.amount.error,value:(null==(a=i.fields.amount.value)?void 0:a.toString())||"",keyboardType:"number-pad",onChangeText:function(e){return o(N.a.forms.credits.setField(["amount",Number(e)]))}}),y.createElement(L.a,{type:i.fields.amount.error?"error":"info"},i.fields.amount.error||""),y.createElement(w.a,null),y.createElement(j.a,null,y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,"Current balance"),y.createElement(j.a.Cell,{numeric:!0},"$"+((null==(l=i.original)?void 0:l.credits)||0))),y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,"Withdraw"),y.createElement(j.a.Cell,{numeric:!0},"-$"+(i.fields.amount.value||0))),y.createElement(j.a.Row,null,y.createElement(j.a.Title,null,y.createElement(x.a,{style:{fontWeight:"bold"}},"New total")),y.createElement(j.a.Cell,{numeric:!0},(c<0?"-":"")+"$"+(c<0?-1*c:c)))))))}var le,ie=z.a.create({fields:{flex:1},field:{marginBottom:8}}),oe=Object(E.gql)(le||(le=f()(["\n  mutation CreatrTransaction(\n    $message: String,\n    $status: String,\n    $amount: Float,\n    $dropzoneUserId: Int,\n  ) {\n    createTransaction(\n      input: {\n        attributes: {\n          amount: $amount,\n          dropzoneUserId: $dropzoneUserId,\n          message: $message,\n          status: $status,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      transaction {\n        id\n        amount\n        message\n\n        dropzoneUser {\n          id\n          credits\n\n          transactions {\n            edges {\n              node {\n                id\n                status\n                amount\n                createdAt\n                message\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function se(e){var n=Object(N.b)(),r=Object(N.c)((function(e){return e.forms.credits})),t=Object(N.c)((function(e){return e.global})),a=Object(E.useMutation)(oe),l=d()(a,2),i=l[0],o=l[1],s=y.useCallback((function(){var e=!1;return r.fields.amount.value||(e=!0,n(N.a.forms.credits.setFieldError(["amount","You must specify an amount"]))),!e}),[JSON.stringify(r.fields)]),u=y.useCallback((function(){var t,a,l,o,u,c,d,m,f;return g.a.async((function(p){for(;;)switch(p.prev=p.next){case 0:if(s()){p.next=2;break}return p.abrupt("return");case 2:return p.prev=2,p.next=5,g.a.awrap(i({variables:{amount:r.fields.amount.value,message:r.fields.message.value,status:r.fields.status.value,dropzoneUserId:Number(null==(t=r.original)?void 0:t.id)}}));case 5:if(m=p.sent,null==(f=null!=(a=r.original)&&a.id?null==(l=m.data)?void 0:l.updateRig:null==(o=m.data)?void 0:o.createRig)||null==(u=f.fieldErrors)||u.map((function(e){var r=e.field,t=e.message;switch(r){case"amount":return n(N.a.forms.credits.setFieldError(["amount",t]));case"message":return n(N.a.forms.credits.setFieldError(["message",t]));case"status":return n(N.a.forms.credits.setFieldError(["status",t]))}})),null==f||null==(c=f.errors)||!c.length){p.next=10;break}return p.abrupt("return",n(N.a.notifications.showSnackbar({message:null==f?void 0:f.errors[0],variant:"error"})));case 10:null!=f&&null!=(d=f.fieldErrors)&&d.length||(n(N.a.forms.credits.reset()),e.onSuccess()),p.next=16;break;case 13:p.prev=13,p.t0=p.catch(2),n(N.a.notifications.showSnackbar({message:p.t0.message,variant:"error"}));case 16:case"end":return p.stop()}}),null,null,[[2,13]],Promise)}),[JSON.stringify(r.fields),i,e.onSuccess]);return y.createElement(W.a,null,y.createElement(M.a,{visible:!!e.open},y.createElement(S.a,{indeterminate:!0,visible:o.loading,color:t.theme.colors.accent}),y.createElement(ae,null),y.createElement(M.a.Actions,{style:{justifyContent:"flex-end"}},y.createElement(q.a,{onPress:function(){n(N.a.forms.credits.reset()),e.onClose()}},"Cancel"),y.createElement(q.a,{onPress:u},"Save"))))}var ue=r(651),ce=r(639),de=r(617),me=r(238);function fe(e){var n=e.open,r=e.onSuccess,t=Object(N.c)((function(e){return e.forms.user})),a=Object(N.b)(),l=Object(me.a)({onSuccess:function(e){function n(n){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(e){a(N.a.notifications.showSnackbar({message:"Profile has been updated",variant:"success"})),a(N.a.forms.user.reset()),r()})),onFieldError:function(e,n){return a(N.a.forms.user.setFieldError([e,n]))},onError:function(e){return a(N.a.notifications.showSnackbar({message:e,variant:"error"}))}}),i=y.useCallback((function(){var e,n,r,l,i,o,s,u,c,d=!1,m=new RegExp(/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/);return((null==(e=t.fields.name)||null==(n=e.value)?void 0:n.length)||0)<3&&(d=!0,a(N.a.forms.user.setFieldError(["name","Name is too short"]))),((null==(r=t.fields.email)||null==(l=r.value)?void 0:l.length)||0)<3&&(d=!0,a(N.a.forms.user.setFieldError(["email","Email is too short"]))),((null==(i=t.fields.phone)||null==(o=i.value)?void 0:o.length)||0)<3&&(d=!0,a(N.a.forms.user.setFieldError(["phone","Phone number is too short"]))),m.test((null==(s=t.fields)||null==(u=s.email)?void 0:u.value)||"")||(d=!0,a(N.a.forms.user.setFieldError(["email","Please enter a valid email"]))),((null==(c=t.fields.exitWeight)?void 0:c.value)||0)<30&&(d=!0,a(N.a.forms.user.setFieldError(["exitWeight","Exit weight seems too low?"]))),!d}),[JSON.stringify(t.fields),a]),o=y.useCallback((function(){var e,n,r,o,s,u,c;return g.a.async((function(d){for(;;)switch(d.prev=d.next){case 0:if(e=t.fields,n=e.name,r=e.license,o=e.phone,s=e.email,u=e.exitWeight,!i()){d.next=11;break}return d.prev=2,d.next=5,g.a.awrap(l.mutate({id:Number(t.original.id),name:n.value,licenseId:null!=(c=r.value)&&c.id?Number(r.value.id):null,phone:o.value,exitWeight:parseFloat(u.value),email:s.value}));case 5:d.sent,d.next=11;break;case 8:d.prev=8,d.t0=d.catch(2),a(N.a.notifications.showSnackbar({message:d.t0.message,variant:"error"}));case 11:case"end":return d.stop()}}),null,null,[[2,8]],Promise)}),[JSON.stringify(t.fields),a,l]);return y.createElement(de.a,{title:"Update information",open:n,snapPoints:[0,740],loading:l.loading,onClose:function(){e.onClose(),a(N.a.forms.user.reset())},buttonAction:o,buttonLabel:"Save"},y.createElement(ce.a,null))}function pe(e){var n=Object(N.c)((function(e){return e.global})),r=e.title,t=e.children,a=e.buttonIcon,l=e.onPressButton;return y.createElement(ne.a,{style:ge.card},y.createElement(ne.a,{style:ge.container},y.createElement(G.b.Subheader,{style:ge.title},r),a&&y.createElement(I.a,{icon:a,onPress:function(){return l?l():null},color:n.theme.colors.primary})),t)}var ge=z.a.create({container:{flexDirection:"row",justifyContent:"space-between"},title:{flexGrow:1},card:{marginVertical:8,width:"100%"}}),ve=r(60),be=r(151),Ee=r(315);function ye(e){var n,r,t,a=e.dropzoneUser,l=e.onEdit,i=e.canEdit,o=e.children,s=e.onPressAvatar,u=Object(N.c)((function(e){return e.global})).theme;return y.createElement(ne.a,{style:[he.container,{backgroundColor:u.colors.primary}]},y.createElement(ne.a,{style:he.actions},i?y.createElement(I.a,{icon:"pencil",size:20,color:u.colors.surface,onPress:function(){return l?l():null}}):null),y.createElement(ne.a,{style:he.avatarContainer},y.createElement(ne.a,{style:{flex:1/3}},y.createElement(ve.a,{onPress:s},null!=a&&null!=(n=a.user)&&n.image?y.createElement(G.a.Image,{size:80,source:{uri:null==a?void 0:a.user.image},style:{backgroundColor:u.colors.surface}}):y.createElement(G.a.Icon,{size:80,icon:"account",color:u.colors.primary,style:{backgroundColor:u.colors.surface}}))),y.createElement(ne.a,{style:he.titleContainer},y.createElement(be.a,{style:he.title},null==a||null==(r=a.user)?void 0:r.name),y.createElement(Ee.a,{style:he.paragraph},null==a||null==(t=a.role)?void 0:t.name))),o)}var he=z.a.create({container:{width:"100%",paddingTop:16},actions:{flexDirection:"row",justifyContent:"flex-end"},avatarContainer:{flexDirection:"row",alignItems:"center",justifyContent:"center",paddingHorizontal:16,marginBottom:16},titleContainer:{paddingLeft:48,flex:2/3,alignItems:"flex-start",justifyContent:"center"},title:{color:"white"},paragraph:{color:"white"}});function Oe(e){var n=e.items,r=1/n.length;return y.createElement(y.Fragment,null,y.createElement(w.a,{style:xe.divider}),y.createElement(ne.a,{style:xe.container},n.map((function(e,t){return y.createElement(y.Fragment,null,y.createElement(ne.a,{style:{flex:r},key:"info-grid-"+t},y.createElement(G.b.Item,{titleStyle:[xe.title,{fontWeight:!1!==e.bold?"bold":void 0}],title:e.value,descriptionStyle:xe.description,description:e.title,onPress:e.onPress})),t===n.length-1?null:y.createElement(w.a,{key:"info-grid-divider-"+t,style:xe.verticalDivider}))}))))}var ze,xe=z.a.create({container:{width:"100%",flexDirection:"row"},divider:{height:z.a.hairlineWidth,width:"100%",backgroundColor:"white"},verticalDivider:{width:z.a.hairlineWidth,height:"100%",backgroundColor:"white"},title:{textAlign:"center",color:"white"},description:{textAlign:"center",color:"white"}}),Se=r(327);function ke(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function we(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?ke(Object(r),!0).forEach((function(n){u()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ke(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var je=Object(P.a)(ze||(ze=f()(["\n  query QueryDropzoneUser($dropzoneId: Int!, $dropzoneUserId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUser(id: $dropzoneUserId) {\n        id\n        credits\n        expiresAt\n        permissions\n\n        role {\n          id\n          name\n        }\n        rigInspections {\n          id\n          isOk\n          rig {\n            id\n          }\n        }\n\n        notifications {\n          edges {\n            node {\n              id\n              message\n              notificationType\n              createdAt\n            }\n          }\n        }\n\n\n        transactions {\n          edges {\n            node {\n              id\n              status\n              message\n              amount\n              createdAt\n            }\n          }\n        }\n        user {\n          id\n          name\n          exitWeight\n          email\n          phone\n          image\n          rigs {\n            id\n            model\n            make\n            serial\n            canopySize\n            repackExpiresAt\n          }\n          jumpTypes {\n            id\n            name\n          }\n          license {\n            id\n            name\n            federation {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var Ie,Ce,Pe,Ae=function(e){e.type;var n=e.selected,r=e.disabled,t=e.onPress,a={actAsDZSO:"shield-cross",actAsGCA:"radio-handheld",actAsLoadMaster:"shield-account",actAsPilot:"shield-airplane",actAsRigInspector:"shield-search"}[e.type],l={actAsDZSO:"DZSO",actAsGCA:"GCA",actAsLoadMaster:"Load Master",actAsPilot:"Pilot",actAsRigInspector:"Rig Inspector"}[e.type];return y.createElement(k.a,{mode:n?"outlined":"flat",icon:a,textStyle:n?{}:{color:"white"},style:[{marginHorizontal:2,maxHeight:35},n?void 0:{backgroundColor:"transparent",borderColor:"white"}].filter(Boolean),disabled:r,onPress:function(e){function n(){return e.apply(this,arguments)}return n.toString=function(){return e.toString()},n}((function(){return t()}))},l)},$e=r(51),Fe=Object(P.a)(Ie||(Ie=f()(["\nmutation RevokePermission(\n  $dropzoneUserId: Int!,\n  $permissionName: Permission!,\n){\n  revokePermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n    dropzoneUser {\n      id\n      permissions\n    }\n    fieldErrors {\n      field\n      message\n    }\n    errors\n  }\n}\n"]))),Ue=Object($e.a)(Fe,{getPayload:function(e){return e.revokePermission},validates:{permissionName:[Object($e.c)("Permission name is required")]}}),Te=Object(P.a)(Ce||(Ce=f()(["\nmutation GrantPermission(\n  $dropzoneUserId: Int!,\n  $permissionName: Permission!,\n){\n  grantPermission(input: { id: $dropzoneUserId, permission: $permissionName }) {\n    dropzoneUser {\n      id\n      permissions\n    }\n    fieldErrors {\n      field\n      message\n    }\n    errors\n  }\n}\n"]))),Ne=Object($e.a)(Te,{getPayload:function(e){return e.grantPermission},validates:{permissionName:[Object($e.c)("Permission name is required")]}});function De(e,n){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var t=Object.getOwnPropertySymbols(e);n&&(t=t.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),r.push.apply(r,t)}return r}function Re(e){for(var n=1;n<arguments.length;n++){var r=null!=arguments[n]?arguments[n]:{};n%2?De(Object(r),!0).forEach((function(n){u()(e,n,r[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):De(Object(r)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(r,n))}))}return e}var We=Object(P.a)(Pe||(Pe=f()(["\n  mutation UpdateUserImage(\n    $id: Int,\n    $image: String\n  ){\n    updateUser(input: {\n      id: $id\n      attributes: {\n        image: $image,\n      }\n    }) {\n      user {\n        id\n        name\n        exitWeight\n        email\n        image\n        phone\n        rigs {\n          id\n          model\n          make\n          serial\n          canopySize\n        }\n        jumpTypes {\n          id\n          name\n        }\n        license {\n          id\n          name\n\n          federation {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function Me(){var e,n,r,t,a,i,s,u,c,m,f,p=Object(N.c)((function(e){return e.global})),z=Object(N.c)((function(e){return e.forms})),P=Object(N.b)(),W=Object(b.useNavigation)(),M=Object(Se.a)().currentUser,q=Object(b.useRoute)(),L=(null==M?void 0:M.id)===q.params.userId,G=function(e){var n,r,t,a,l,i,o,s,u,c,d=Object(N.c)((function(e){return e.global.currentDropzoneId})),m=Object(Se.a)(),f=Object(E.useQuery)(je,{variables:{dropzoneId:d,dropzoneUserId:e||(null==m||null==(n=m.data)||null==(r=n.dropzone)||null==(t=r.currentUser)?void 0:t.id)}});return we(we({},f),{},{dropzoneUser:e&&e!==Number(null==m||null==(a=m.data)||null==(l=a.dropzone)||null==(i=l.currentUser)?void 0:i.id)?null==f||null==(u=f.data)||null==(c=u.dropzone)?void 0:c.dropzoneUser:null==m||null==(o=m.data)||null==(s=o.dropzone)?void 0:s.currentUser})}(Number(q.params.userId)),B=G.dropzoneUser,H=G.loading,J=G.refetch,Q=Object(V.a)(D.a.GrantPermission),_=Object(b.useIsFocused)();y.useEffect((function(){_&&J()}),[_]);var Z=Object(E.useMutation)(We),Y=d()(Z,2),K=Y[0],X=(Y[1],Ue({onSuccess:function(e){J(),P(N.a.notifications.showSnackbar({message:"Permission revoked"}))},onError:function(e){P(N.a.notifications.showSnackbar({message:e,variant:"error"}))}})),ne=Ne({onSuccess:function(e){J(),P(N.a.notifications.showSnackbar({message:"Permission granted"}))},onError:function(e){P(N.a.notifications.showSnackbar({message:e,variant:"error"}))}});y.useEffect((function(){!function(){var e;g.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if("web"===h.a.OS){n.next=6;break}return n.next=3,g.a.awrap($.b());case 3:e=n.sent,"granted"!==e.status&&alert("Sorry, we need camera roll permissions to make this work!");case 6:case"end":return n.stop()}}),null,null,null,Promise)}()}),[]);var re=y.useCallback((function(){var e,n;return g.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,g.a.awrap($.a({mediaTypes:F.a.Images,allowsEditing:!0,aspect:[4,3],quality:.1,base64:!0}));case 3:return n=r.sent,r.next=6,g.a.awrap(K({variables:{id:Number(null==B||null==(e=B.user)?void 0:e.id),image:"data:image/jpeg;base64,"+n.base64}}));case 6:r.next=11;break;case 8:r.prev=8,r.t0=r.catch(0),console.log(r.t0);case 11:case"end":return r.stop()}}),null,null,[[0,8]],Promise)}),[P]),te=(null==B||null==(e=B.permissions)?void 0:e.filter((function(e){return/^actAs/.test(e)})))||[],ae=Object(V.a)(D.a.CreateUserTransaction),le=Object(V.a)(D.a.UpdateUser);return y.createElement(y.Fragment,null,H&&y.createElement(S.a,{color:p.theme.colors.accent,indeterminate:!0,visible:H}),y.createElement(R.a,{contentContainerStyle:qe.content,refreshControl:y.createElement(O.a,{refreshing:H,onRefresh:function(){return J()}})},y.createElement(A.b,{horizontal:!0,style:{width:"100%"},contentContainerStyle:{flexGrow:1,padding:8,justifyContent:"space-evenly",backgroundColor:p.theme.colors.primary}},[D.a.ActAsPilot,D.a.ActAsDzso,D.a.ActAsGca,D.a.ActAsRigInspector,D.a.ActAsLoadMaster].map((function(e){return function(e){return Q||te.includes(e)}(e)?y.createElement(Ae,{type:e,selected:te.includes(e),onPress:function(){return Q?te.includes(e)?X.mutate({permissionName:e,dropzoneUserId:Number(B.id)},{update:function(n,r){var t,a,l,i;return g.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:return r.data,l=n.readQuery({query:U.a,variables:{permissions:[e],dropzoneId:Number(p.currentDropzoneId)}}),i=((null==l||null==(t=l.dropzone)||null==(a=t.dropzoneUsers)?void 0:a.edges)||[]).filter((function(e){return e.node.id!==B.id})),n.writeQuery({query:U.a,variables:{permissions:[e],dropzoneId:Number(p.currentDropzoneId)},data:Re(Re({},l),{},{dropzone:Re(Re({},null==l?void 0:l.dropzone),{},{dropzoneUsers:i})})}),o.abrupt("return",{data:Re(Re({},l),{},{dropzone:Re(Re({},null==l?void 0:l.dropzone),{},{dropzoneUsers:i})})});case 5:case"end":return o.stop()}}),null,null,null,Promise)}}):ne.mutate({permissionName:e,dropzoneUserId:Number(B.id)},{update:function(n,r){var t,a,l,i,s,u,c,d,m,f,v,b,E;return g.a.async((function(g){for(;;)switch(g.prev=g.next){case 0:return d=r.data,m=n.readQuery({query:U.a,variables:{permissions:[e],dropzoneId:Number(p.currentDropzoneId)}}),f=(null==m||null==(t=m.dropzone)||null==(a=t.dropzoneUsers)?void 0:a.edges)||[],v=!!f.find((function(e){return e.node.id===B.id})),console.log(f),console.log("c:"),console.log(m),b=v?o()(((null==m||null==(l=m.dropzone)||null==(i=l.dropzoneUsers)?void 0:i.edges)||[]).map((function(e){var n;return e.node.id!==B.id?e:Re(Re({},e),{},{node:Re(Re({},e.node),null==(n=d.grantPermission)?void 0:n.dropzoneUser)})}))):[].concat(o()((null==m||null==(s=m.dropzone)||null==(u=s.dropzoneUsers)?void 0:u.edges)||[]),[{edge:{node:null==(c=d.grantPermission)?void 0:c.dropzoneUser}}]),E=Re(Re({},m),{},{dropzone:Re(Re({},null==m?void 0:m.dropzone),{},{dropzoneUsers:b})}),n.writeQuery({query:U.a,variables:{dropzoneId:Number(p.currentDropzoneId),permissions:[e]},data:E}),g.abrupt("return",{data:E});case 11:case"end":return g.stop()}}),null,null,null,Promise)}}):null}}):null}))),y.createElement(ye,{dropzoneUser:B,canEdit:L,onEdit:function(){null!=B&&B.user&&P(N.a.forms.user.setOpen(null==B?void 0:B.user))},onPressAvatar:re},y.createElement(A.b,{horizontal:!0,style:{marginVertical:8}},y.createElement(k.a,{icon:function(e){var n=e.size;return y.createElement(v.a,{name:"email",size:n,color:"#FFFFFF"})},mode:"outlined",style:qe.chip,textStyle:qe.chipTitle},(null==B||null==(n=B.user)?void 0:n.email)||"-"),y.createElement(k.a,{icon:function(e){var n=e.size;return y.createElement(v.a,{name:"phone",size:n,color:"#FFFFFF"})},mode:"outlined",style:qe.chip,textStyle:qe.chipTitle},(null==B||null==(r=B.user)?void 0:r.phone)||"-"),y.createElement(k.a,{icon:function(e){var n=e.size;return y.createElement(v.a,{name:"card-account-details-star-outline",size:n,color:"#FFFFFF"})},mode:"outlined",style:qe.chip,textStyle:qe.chipTitle,onPress:function(){le&&P(N.a.forms.dropzoneUser.setOpen(B))}},null!=B&&B.expiresAt?Object(C.a)(1e3*((null==B?void 0:B.expiresAt)||0),"yyyy/MM/dd"):"Not a member")),y.createElement(w.a,{style:qe.divider}),y.createElement(Oe,{items:[{title:"Funds",value:"$"+((null==B?void 0:B.credits)||0),onPress:function(){B&&ae&&P(N.a.forms.credits.setOpen(B))}},{title:"License",value:""+((null==B||null==(t=B.user)||null==(a=t.license)?void 0:a.name)||"-")},{title:"Exit weight",value:Math.round(Number(null==B||null==(i=B.user)?void 0:i.exitWeight)).toString()||"-"}]}),y.createElement(w.a,{style:[qe.divider,{backgroundColor:"white"}]})),y.createElement(pe,{title:"Rigs",buttonIcon:"plus",onPressButton:function(){return P(N.a.forms.rig.setOpen(!0))}},y.createElement(j.a,null,y.createElement(j.a.Header,null,y.createElement(j.a.Title,null,"Container"),y.createElement(j.a.Title,{numeric:!0},"Repack due"),y.createElement(j.a.Title,{numeric:!0},"Canopy size"),y.createElement(j.a.Title,{numeric:!0},"Inspected")),null==B||null==(s=B.user)||null==(u=s.rigs)?void 0:u.map((function(e){var n,r;return y.createElement(j.a.Row,{key:"rig-"+e.id,onPress:function(){P(N.a.forms.rig.setOpen(e))},onLongPress:function(){return W.navigate("RigInspectionScreen",{dropzoneUserId:Number(q.params.userId),rig:e})},pointerEvents:"none"},y.createElement(j.a.Cell,null,[null==e?void 0:e.make,null==e?void 0:e.model,"#"+(null==e?void 0:e.serial)].join(" ")),y.createElement(j.a.Cell,{numeric:!0},null!=e&&e.repackExpiresAt?Object(C.a)(1e3*e.repackExpiresAt,"yyyy/MM/dd"):"-"),y.createElement(j.a.Cell,{numeric:!0},""+(null==e?void 0:e.canopySize)),y.createElement(j.a.Cell,{numeric:!0},y.createElement(I.a,{icon:null!=B&&null!=(n=B.rigInspections)&&n.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?"eye-check":"eye-minus",color:null!=B&&null!=(r=B.rigInspections)&&r.some((function(n){var r;return(null==(r=n.rig)?void 0:r.id)===e.id&&n.isOk}))?T.c:T.d,onPress:function(){return W.navigate("RigInspectionScreen",{dropzoneUserId:Number(q.params.userId),rig:e})}})))})))),y.createElement(pe,l()({title:"Transactions"},ae?{buttonIcon:"plus",onPressButton:function(){B&&P(N.a.forms.credits.setOpen(B))}}:{}),y.createElement(j.a,null,y.createElement(j.a.Header,null,y.createElement(j.a.Title,null,"Time"),y.createElement(j.a.Title,null,"Type"),y.createElement(j.a.Title,null,"Message"),y.createElement(j.a.Title,{numeric:!0},"Amount")),null==B||null==(c=B.transactions)||null==(m=c.edges)?void 0:m.map((function(e){var n,r,t,a,l,i;return y.createElement(j.a.Row,{key:"transaction-"+(null==e||null==(n=e.node)?void 0:n.id)},y.createElement(j.a.Cell,null,y.createElement(x.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null!=e&&null!=(r=e.node)&&r.createdAt?Object(C.a)(1e3*(null==e||null==(t=e.node)?void 0:t.createdAt),"yyyy/MM/dd hh:mm"):null)),y.createElement(j.a.Cell,null,y.createElement(x.a,{style:{fontSize:12,fontStyle:"italic",color:"#999999"}},null==e||null==(a=e.node)?void 0:a.status)),y.createElement(j.a.Cell,null,null==e||null==(l=e.node)?void 0:l.message),y.createElement(j.a.Cell,{numeric:!0},null==e||null==(i=e.node)?void 0:i.amount))}))))),y.createElement(ue.a,{onClose:function(){return P(N.a.forms.rig.setOpen(!1))},onSuccess:function(){return P(N.a.forms.rig.setOpen(!1))},open:z.rig.open,userId:Number(null==B||null==(f=B.user)?void 0:f.id)}),y.createElement(ee,{onClose:function(){return P(N.a.forms.dropzoneUser.setOpen(!1))},onSuccess:function(e){P(N.a.forms.dropzoneUser.setOpen(!1)),(null==M?void 0:M.id)===(null==B?void 0:B.id)&&P(N.a.global.setUser(e.user))},open:z.dropzoneUser.open}),y.createElement(se,{onClose:function(){return P(N.a.forms.credits.setOpen(!1))},onSuccess:function(){return P(N.a.forms.credits.setOpen(!1))},open:z.credits.open,dropzoneUser:B||void 0}),y.createElement(fe,{onClose:function(){return P(N.a.forms.user.setOpen(!1))},onSuccess:function(){return P(N.a.forms.user.setOpen(!1))},open:z.user.open}))}var qe=z.a.create({container:{flex:1},content:{flexGrow:1,paddingBottom:56,paddingHorizontal:0},divider:{height:1,width:"100%"},chip:{margin:1,backgroundColor:"transparent",minHeight:23,borderWidth:0,justifyContent:"center",alignItems:"center",display:"flex"},chipTitle:{color:"white",display:"flex",justifyContent:"center",alignItems:"center",fontSize:12,lineHeight:24,textAlignVertical:"center"}})}}]);
//# sourceMappingURL=0.fa73a9ea.chunk.js.map