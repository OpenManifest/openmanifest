(this.webpackJsonp=this.webpackJsonp||[]).push([[26],{800:function(n,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return K}));var r,a=t(9),i=t.n(a),o=t(29),c=t.n(o),s=t(52),u=t(38),l=t(0),f=t(166),d=t(1),m=t(398),b=t(37),p=t(5),g=t(164),O=t(4),h=t.n(O);function v(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),t.push.apply(t,r)}return t}function j(n){for(var e=1;e<arguments.length;e++){var t=null!=arguments[e]?arguments[e]:{};e%2?v(Object(t),!0).forEach((function(e){h()(n,e,t[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v(Object(t)).forEach((function(e){Object.defineProperty(n,e,Object.getOwnPropertyDescriptor(t,e))}))}return n}var y=Object(b.a)(r||(r=c()(["\n  query QueryNotifications($dropzoneId: Int!) {\n    dropzone(id: $dropzoneId) {\n      id\n\n      currentUser {\n        id\n        \n        notifications {\n          edges {\n            node {\n              id\n              message\n              notificationType\n              createdAt\n\n              resource {\n                ...on Load {\n                  id\n                  loadNumber\n                  dispatchAt\n                }\n                ...on Transaction {\n                  id\n                  amount\n                  message\n                  status\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));var D=t(331),M=t(28),w=t.n(M),E=t(21),S=t(240),T=t(374),I=t(53),N=t(40);function X(n,e){Object(N.a)(2,arguments);var t=Object(I.a)(n),r=Object(I.a)(e),a=t.getTime()-r.getTime();return a<0?-1:a>0?1:a}function x(n,e){Object(N.a)(2,arguments);var t=Object(I.a)(n),r=Object(I.a)(e),a=t.getFullYear()-r.getFullYear(),i=t.getMonth()-r.getMonth();return 12*a+i}function P(n){Object(N.a)(1,arguments);var e=Object(I.a)(n);return e.setHours(23,59,59,999),e}function A(n){Object(N.a)(1,arguments);var e=Object(I.a)(n),t=e.getMonth();return e.setFullYear(e.getFullYear(),t+1,0),e.setHours(23,59,59,999),e}function F(n){Object(N.a)(1,arguments);var e=Object(I.a)(n);return P(e).getTime()===A(e).getTime()}function $(n,e){Object(N.a)(2,arguments);var t,r=Object(I.a)(n),a=Object(I.a)(e),i=X(r,a),o=Math.abs(x(r,a));if(o<1)t=0;else{1===r.getMonth()&&r.getDate()>27&&r.setDate(30),r.setMonth(r.getMonth()-i*o);var c=X(r,a)===-i;F(Object(I.a)(n))&&1===o&&1===X(n,a)&&(c=!1),t=i*(o-Number(c))}return 0===t?0:t}var k=t(372),z=t(402);function Y(n){return function(n,e){if(null==n)throw new TypeError("assign requires that input parameter not be null or undefined");for(var t in e=e||{})e.hasOwnProperty(t)&&(n[t]=e[t]);return n}({},n)}var B,H=t(396);function R(n,e){var t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(N.a)(2,arguments);var r=t.locale||z.a;if(!r.formatDistance)throw new RangeError("locale must contain formatDistance property");var a=X(n,e);if(isNaN(a))throw new RangeError("Invalid time value");var i,o,c=Y(t);c.addSuffix=Boolean(t.addSuffix),c.comparison=a,a>0?(i=Object(I.a)(e),o=Object(I.a)(n)):(i=Object(I.a)(n),o=Object(I.a)(e));var s,u=Object(k.a)(o,i),l=(Object(H.a)(o)-Object(H.a)(i))/1e3,f=Math.round((u-l)/60);if(f<2)return t.includeSeconds?u<5?r.formatDistance("lessThanXSeconds",5,c):u<10?r.formatDistance("lessThanXSeconds",10,c):u<20?r.formatDistance("lessThanXSeconds",20,c):u<40?r.formatDistance("halfAMinute",null,c):u<60?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",1,c):0===f?r.formatDistance("lessThanXMinutes",1,c):r.formatDistance("xMinutes",f,c);if(f<45)return r.formatDistance("xMinutes",f,c);if(f<90)return r.formatDistance("aboutXHours",1,c);if(f<1440){var d=Math.round(f/60);return r.formatDistance("aboutXHours",d,c)}if(f<2520)return r.formatDistance("xDays",1,c);if(f<43200){var m=Math.round(f/1440);return r.formatDistance("xDays",m,c)}if(f<86400)return s=Math.round(f/43200),r.formatDistance("aboutXMonths",s,c);if((s=$(o,i))<12){var b=Math.round(f/43200);return r.formatDistance("xMonths",b,c)}var p=s%12,g=Math.floor(s/12);return p<3?r.formatDistance("aboutXYears",g,c):p<9?r.formatDistance("overXYears",g,c):r.formatDistance("almostXYears",g+1,c)}function q(n,e){return Object(N.a)(1,arguments),R(n,Date.now(),e)}var C,J=Object(b.a)(B||(B=c()(["\n  mutation MarkAsSeen(\n    $id: Int,\n  ){\n    updateNotification(input: {\n      id: $id\n      attributes: {\n        isSeen: true,\n      }\n    }) {\n      notification {\n        id\n        isSeen\n        message\n        notificationType\n        receivedBy {\n          notifications {\n            edges {\n              node {\n                id\n                message\n                isSeen\n                notificationType\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function L(n){var e=n.notification,t=Object(u.useMutation)(J),r=i()(t,2);r[0],r[1];return l.createElement(l.Fragment,null,l.createElement(E.b.Item,{title:"Manifest",description:e.message,style:{width:"100%"},left:function(n){return l.createElement(E.b.Icon,w()({},n,{icon:"airplane"}))},right:function(){return l.createElement(S.a,null,q(1e3*e.createdAt))}}),l.createElement(T.a,{style:{width:"100%"}}))}var Q,U=Object(b.a)(C||(C=c()(["\n  mutation MarkAsSeen(\n    $id: Int,\n  ){\n    updateNotification(input: {\n      id: $id\n      attributes: {\n        isSeen: true,\n      }\n    }) {\n      notification {\n        id\n        isSeen\n        message\n        notificationType\n        receivedBy {\n          notifications {\n            edges {\n              node {\n                id\n                message\n                isSeen\n                notificationType\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function _(n){var e=n.notification,t=Object(u.useMutation)(U),r=i()(t,2);r[0],r[1];return l.createElement(l.Fragment,null,l.createElement(E.b.Item,{title:"Load #"+e.resource.loadNumber+" boarding call",description:e.message,style:{width:"100%"},left:function(n){return l.createElement(E.b.Icon,w()({},n,{icon:"airplane-takeoff"}))},right:function(){return l.createElement(S.a,null,q(1e3*e.createdAt))}}),l.createElement(T.a,{style:{width:"100%"}}))}var G=Object(b.a)(Q||(Q=c()(["\n  mutation MarkAsSeen(\n    $id: Int,\n  ){\n    updateNotification(input: {\n      id: $id\n      attributes: {\n        isSeen: true,\n      }\n    }) {\n      notification {\n        id\n        isSeen\n        message\n        notificationType\n        receivedBy {\n          notifications {\n            edges {\n              node {\n                id\n                message\n                isSeen\n                notificationType\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function K(){var n,e,t=Object(p.c)((function(n){return n.global})),r=function(){var n,e,t=Object(p.c)((function(n){return n.global.currentDropzoneId})),r=Object(u.useQuery)(y,{variables:{dropzoneId:t},pollInterval:3e4});return j(j({},r),{},{notifications:null==r||null==(n=r.data)||null==(e=n.dropzone)?void 0:e.currentUser.notifications})}(),a=r.notifications,o=r.loading,c=r.refetch,d=Object(s.useIsFocused)();l.useEffect((function(){d&&c()}),[d]);var b=Object(u.useMutation)(G),O=i()(b,2);O[0],O[1];return l.createElement(l.Fragment,null,o&&l.createElement(m.a,{color:t.theme.colors.accent,indeterminate:!0,visible:o}),l.createElement(g.a,{contentContainerStyle:V.content,refreshControl:l.createElement(f.a,{refreshing:o,onRefresh:function(){return c()}})},null!=a&&null!=(n=a.edges)&&n.length?null==a||null==(e=a.edges)?void 0:e.map((function(n){switch(n.node.notificationType){case"boarding_call":return l.createElement(_,{notification:n.node});case"user_manifested":return l.createElement(L,{notification:n.node});default:return null}})):l.createElement(D.a,{title:"No notifications",subtitle:"Notifications will show up here"})))}var V=d.a.create({container:{flex:1},content:{flexGrow:1,paddingBottom:56,paddingHorizontal:0},divider:{height:1,width:"100%"}})}}]);
//# sourceMappingURL=26.ef4b5748.chunk.js.map