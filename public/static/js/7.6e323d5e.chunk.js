(this.webpackJsonp=this.webpackJsonp||[]).push([[7],{633:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var l=t(0),r=t(1),a=t(97),o=t(255),i=t(405),s=t(398),u=t(207),d=t(5);function c(e){var n=e.buttonLabel,t=e.buttonAction,r=e.title,c=e.loading,m=e.children,f=Object(d.c)((function(e){return e.global}));return l.createElement(o.a,null,l.createElement(i.a,{visible:!!e.open,dismissable:!1,style:{maxWidth:500,alignSelf:"center"}},l.createElement(s.a,{indeterminate:!0,visible:c,color:f.theme.colors.accent}),l.createElement(i.a.Title,null,r),l.createElement(i.a.Content,{pointerEvents:"box-none"},l.createElement(i.a.ScrollArea,null,l.createElement(a.b,null,m))),l.createElement(i.a.Actions,{style:{justifyContent:"flex-end"}},l.createElement(u.a,{onPress:function(){e.onClose()}},"Cancel"),l.createElement(u.a,{onPress:t},n))))}r.a.create({button:{width:"100%",borderRadius:16,padding:5},contentContainer:{paddingHorizontal:16,paddingBottom:32},sheet:{elevation:3,backgroundColor:"white",flexGrow:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center"},sheetHeader:{elevation:2,borderTopLeftRadius:20,borderTopRightRadius:20,height:40,shadowColor:"#000",shadowOffset:{width:0,height:-4},backgroundColor:"white",shadowOpacity:.22,shadowRadius:2.22}})},634:function(e,n,t){"use strict";t.d(n,"a",(function(){return a}));var l=t(167),r=t(332),a=l.a.actions;r.a},635:function(e,n,t){"use strict";t.d(n,"a",(function(){return o}));var l=t(38),r=t(0),a=t(5);function o(e,n){var t=n.getPayload;return function(n){var o=n.variables,i=n.onError,s=Object(a.b)(),u=Object(l.useQuery)(e,{variables:o}),d=u.data,c=u.loading,m=u.previousData,f=u.refetch,p=u.error,b=r.useMemo((function(){return t(d)}),[JSON.stringify(d)]);return r.useEffect((function(){JSON.stringify(m),JSON.stringify(d);null!=p&&p.message&&(!1!==n.showSnackbarErrors&&s(a.a.notifications.showSnackbar({message:p.message,variant:"error"})),i&&p.message)}),[n.onError,null==p?void 0:p.message]),{loading:c,data:b,refetch:f}}}},640:function(e,n,t){"use strict";t.d(n,"a",(function(){return i}));var l=t(0),r=t(10),a=t(97),o=t(334);function i(e){var n=e.children,t=e.rightAction,i=e.disabled,s=l.useRef();return l.createElement(o.a,{ref:s,enabled:!i,renderRightActions:function(e,n){var o=n.interpolate({inputRange:[-100,0],outputRange:[1,0]}),i=n.interpolate({inputRange:[-150,0],outputRange:[0,10]});return l.createElement(a.d,{onPress:function(){var e;null==t||t.onPress(),null==s||null==(e=s.current)||e.close()}},l.createElement(r.a.View,{style:{flexGrow:1,backgroundColor:null==t?void 0:t.backgroundColor,justifyContent:"center",height:"100%",width:75,transform:[{translateX:i}]}},l.createElement(r.a.Text,{style:{color:"white",paddingHorizontal:10,fontWeight:"600",transform:[{scale:o}]}},null==t?void 0:t.label)))},useNativeAnimations:!0},n)}},647:function(e,n,t){"use strict";t.d(n,"a",(function(){return b}));var l,r=t(9),a=t.n(r),o=t(29),i=t.n(o),s=t(38),u=t(37),d=t(0),c=t(109),m=t(21),f=t(5),p=Object(u.a)(l||(l=i()(["\n  query QueryAvailableRigs(\n    $dropzoneId: Int!\n    $userId: Int!\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      dropzoneUser(userId: $userId) {\n        id\n        availableRigs {\n          id\n          make\n          model\n          canopySize\n          serial\n\n          user {\n            id\n          }\n        }\n      }\n    }\n  }\n"])));function b(e){var n,t,l,r,o,i,u,b,v=d.useState(!1),g=a()(v,2),h=g[0],y=g[1],E=Object(f.c)((function(e){return e.global})).currentDropzoneId,x=Object(s.useLazyQuery)(p),I=a()(x,2),S=I[0],O=I[1].data;return d.useEffect((function(){e.userId&&e.dropzoneId&&S({variables:{dropzoneId:E,userId:Number(e.userId)}})}),[e.userId,e.dropzoneId]),d.useEffect((function(){var n,t,l;!e.value&&e.autoSelectFirst&&null!=O&&null!=(n=O.dropzone)&&null!=(t=n.dropzoneUser)&&null!=(l=t.availableRigs)&&l.length&&e.onSelect(O.dropzone.dropzoneUser.availableRigs[0])}),[e.autoSelectFirst,JSON.stringify(null==O||null==(n=O.dropzone)||null==(t=n.dropzoneUser)?void 0:t.availableRigs)]),d.createElement(c.a,{onDismiss:function(){return y(!1)},visible:h,anchor:d.createElement(m.b.Item,{onPress:function(){y(!0)},title:e.value?(null==(l=e.value)?void 0:l.make)+" "+(null==(r=e.value)?void 0:r.model)+" ("+((null==(o=e.value)?void 0:o.canopySize)||"?")+"sqft)":"Select rig",description:e.required?null:"Optional",left:function(){return d.createElement(m.b.Icon,{icon:"parachute"})}})},null==O||null==(i=O.dropzone)||null==(u=i.dropzoneUser)||null==(b=u.availableRigs)?void 0:b.map((function(n){return d.createElement(c.a.Item,{key:"rig-select-"+n.id,onPress:function(){y(!1),e.onSelect(n)},style:{width:"100%"},title:(null==n?void 0:n.make)+" "+(null==n?void 0:n.model)+" ("+(null==n?void 0:n.canopySize)+" sqft) "+(n.user?"":"[DROPZONE RIG]")})})))}},665:function(e,n,t){"use strict";t.d(n,"a",(function(){return C}));var l,r=t(0),a=t(1),o=t(2),i=t(287),s=t(285),u=t(374),d=t(288),c=t(5),m=t(9),f=t.n(m),p=t(21),b=t(29),v=t.n(b),g=t(37),h=t(635),y=Object(g.a)(l||(l=v()(["\nquery QueryDropzoneUsers(\n  $dropzoneId: Int!\n  $permissions: [Permission!]\n) {\n  dropzone(id: $dropzoneId) {\n    id\n    name\n\n    dropzoneUsers(permissions: $permissions) {\n      edges {\n        node {\n          id\n          role {\n            id\n            name\n          }\n          user {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n}\n"]))),E=Object(h.a)(y,{getPayload:function(e){var n;return null==e||null==(n=e.dropzone)?void 0:n.dropzoneUsers}}),x=t(330);function I(e){var n,t=e.label,l=e.requiredPermissions,a=e.icon,o=(e.required,e.value),i=Object(c.c)((function(e){return e.global})).currentDropzoneId,s=Object(c.b)(),u=E({variables:{dropzoneId:Number(i),permissions:l},onError:function(e){return s(c.a.notifications.showSnackbar({message:e,variant:"error"}))}}),d=u.data;u.loading,u.refetch;return r.createElement(r.Fragment,null,r.createElement(p.b.Subheader,null,t),r.createElement(x.a,{autoSelectFirst:!0,icon:a||"account",items:(null==d||null==(n=d.edges)?void 0:n.map((function(e){return e.node})))||[],selected:[e.value].filter(Boolean),isSelected:function(e){return e.id===(null==o?void 0:o.id)},renderItemLabel:function(e){return null==e?void 0:e.user.name},isDisabled:function(){return!1},onChangeSelected:function(n){var t=f()(n,1)[0];return t?e.onSelect(t):null}}))}var S,O=t(23),w=t.n(O),j=t(38),k=t(123),T=Object(g.a)(S||(S=v()(["\n  query QuerySelectPlanes(\n    $dropzoneId: Int!\n  ) {\n    planes(dropzoneId: $dropzoneId) {\n      id\n      name\n      registration\n      hours\n      minSlots\n      maxSlots\n      nextMaintenanceHours\n      createdAt\n    }\n  }\n"])));function z(e){var n=Object(c.c)((function(e){return e.global})).currentDropzoneId,t=Object(j.useQuery)(T,{variables:{dropzoneId:n}}),l=t.data;t.loading,t.refetch;return r.createElement(r.Fragment,null,r.createElement(p.b.Subheader,null,"Aircraft"),r.createElement(x.a,{autoSelectFirst:!0,items:Object(k.uniqBy)(w()((null==l?void 0:l.planes)||[]),(function(e){return e.id}))||[],selected:[e.value].filter(Boolean),renderItemLabel:function(e){return null==e?void 0:e.name},isDisabled:function(e){return!1},onChangeSelected:function(n){var t=f()(n,1)[0];return t?e.onSelect(t):null}}))}function C(){var e,n,t=Object(c.c)((function(e){return e.forms.load})),l=Object(c.b)();Object(c.c)((function(e){return e.global}));return r.createElement(r.Fragment,null,r.createElement(i.a,{style:P.field,mode:"outlined",label:"Name",error:!!t.fields.name.error,placeholder:"Optional",value:t.fields.name.value||"",onChangeText:function(e){return l(c.a.forms.load.setField(["name",e]))}}),r.createElement(s.a,{type:t.fields.name.error?"error":"info"},t.fields.name.error||"e.g Starcrest load, Tandem load"),r.createElement(i.a,{style:P.field,mode:"outlined",label:"Slots",error:!!t.fields.maxSlots.error,value:null==(e=t.fields.maxSlots)||null==(n=e.value)?void 0:n.toString(),onChangeText:function(e){return l(c.a.forms.load.setField(["maxSlots",Number(e)]))}}),r.createElement(s.a,{type:t.fields.maxSlots.error?"error":"info"},t.fields.maxSlots.error||""),r.createElement(o.a,{style:{width:"100%"}},r.createElement(z,{value:t.fields.plane.value,required:!0,onSelect:function(e){l(c.a.forms.load.setField(["plane",e])),l(c.a.forms.load.setField(["maxSlots",e.maxSlots]))}}),r.createElement(s.a,{type:t.fields.plane.error?"error":"info"},t.fields.plane.error||""),r.createElement(I,{label:"GCA",onSelect:function(e){return l(c.a.forms.load.setField(["gca",e]))},value:t.fields.gca.value||null,requiredPermissions:["actAsGCA"],required:!0}),r.createElement(s.a,{type:t.fields.gca.error?"error":"info"},t.fields.gca.error||""),r.createElement(I,{label:"Pilot",onSelect:function(e){return l(c.a.forms.load.setField(["pilot",e]))},value:t.fields.pilot.value||null,requiredPermissions:["actAsPilot"]}),r.createElement(s.a,{type:t.fields.pilot.error?"error":"info"},t.fields.pilot.error||""),r.createElement(u.a,{style:{marginVertical:8}}),r.createElement(d.a.Item,{label:"Allow public manifesting",status:t.fields.isOpen.value?"checked":"unchecked",onPress:function(){return l(c.a.forms.load.setField(["isOpen",!t.fields.isOpen.value]))}})))}var P=a.a.create({fields:{flex:1,width:"100%"},field:{marginBottom:8,width:"100%"}})},666:function(e,n,t){"use strict";t.d(n,"a",(function(){return A}));var l=t(4),r=t.n(l),a=t(9),o=t.n(a),i=t(23),s=t.n(i),u=t(29),d=t.n(u),c=t(0),m=t(80),f=t(1),p=t(21),b=t(106),v=t(285),g=t(122),h=t(374),y=t(37),E=t(123),x=t(5),I=t(330),S=t(635),O=t(398),w=t(287);var j,k,T=t(647),z=Object(y.a)(j||(j=d()(["\nquery QueryDropzoneUsersManifestDetails(\n  $dropzoneId: Int!\n  $dropzoneUserId: Int!\n) {\n  dropzone(id: $dropzoneId) {\n    id\n    name\n\n    dropzoneUser(id: $dropzoneUserId) {\n      id\n\n      user {\n        id\n        name\n        exitWeight\n        license {\n          id\n          name\n        }\n        rigs {\n          id\n          make\n          model\n          canopySize\n        }\n      }\n      role {\n        id\n        name\n      }\n      user {\n        id\n        name\n        image\n      }\n    }\n  }\n}\n"]))),C=Object(S.a)(z,{getPayload:function(e){var n;return null==e||null==(n=e.dropzone)?void 0:n.dropzoneUser}});function P(e){var n,t,l,r,a,o,i,s,u=e.dropzoneId,d=e.dropzoneUserId,f=e.onChangeRig,v=e.exitWeight,y=e.rigId,I=e.onChangeExitWeight,S=Object(x.c)((function(e){return e})).global,j=C({variables:{dropzoneUserId:d,dropzoneId:u},onError:console.error}),k=j.data,z=j.loading,P=null==k||null==(n=k.user)||null==(t=n.rigs)?void 0:t.find((function(e){var n=e.id;return Number(n)===y}));return c.useEffect((function(){var e;!v&&null!=k&&null!=(e=k.user)&&e.exitWeight&&I(Number(k.user.exitWeight))}),[null==k||null==(l=k.user)?void 0:l.exitWeight]),c.createElement(b.a,{style:{width:"100%"},elevation:3},c.createElement(O.a,{indeterminate:!0,color:S.theme.colors.accent,visible:z}),c.createElement(b.a.Title,{title:null==k?void 0:k.user.name,left:function(){var e;return null!=k&&null!=(e=k.user)&&e.image?c.createElement(p.a.Image,{source:{uri:k.user.image},size:24}):c.createElement(p.a.Icon,{icon:"account",size:24})}}),c.createElement(b.a.Content,null,c.createElement(h.a,{style:{marginBottom:8}}),c.createElement(m.a,{horizontal:!0},c.createElement(g.a,{style:{marginHorizontal:1},icon:"lock",mode:"outlined",disabled:!0},null==k||null==(r=k.role)?void 0:r.name),c.createElement(g.a,{style:{marginHorizontal:1},icon:"ticket-account",mode:"outlined",disabled:!0},null==k||null==(a=k.user)||null==(o=a.license)?void 0:o.name),P&&v&&P.canopySize?c.createElement(g.a,{style:{marginHorizontal:1},icon:"escalator-down",mode:"outlined",disabled:!0},(i=v,s=P.canopySize,Object(E.round)(2.20462*i/s,2).toFixed(2))):null),c.createElement(T.a,{userId:d,dropzoneId:u,onSelect:f,value:P,autoSelectFirst:!0}),c.createElement(w.a,{value:v?""+v:"",onChangeText:function(e){return I(Number(e))},keyboardType:"number-pad",label:"Exit weight",mode:"outlined"})))}function N(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function $(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?N(Object(t),!0).forEach((function(n){r()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):N(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var F=Object(y.a)(k||(k=d()(["\nquery DropzoneUsersAllowedJumpTypes(\n  $dropzoneId: Int!,\n  $userIds: [Int!]!\n) {\n  dropzone(id: $dropzoneId) {\n    id\n\n    allowedJumpTypes(userId: $userIds) {\n      id\n      name\n    }\n\n    ticketTypes(isPublic: true) {\n      id\n      name\n      cost\n\n      extras {\n        id\n        cost\n        name\n      }\n    }\n  }\n  jumpTypes {\n    id\n    name\n  }\n}\n\n"]))),D=Object(S.a)(F,{getPayload:function(e){var n,t;return{allowedJumpTypes:(null==e||null==(n=e.dropzone)?void 0:n.allowedJumpTypes)||[],ticketTypes:(null==e||null==(t=e.dropzone)?void 0:t.ticketTypes)||[],jumpTypes:(null==e?void 0:e.jumpTypes)||[]}}});function A(){var e,n,t,l,r,a,i,u,d,f,y,S,O,w=Object(x.c)((function(e){return e.forms.manifestGroup})),j=Object(x.c)((function(e){return e.global})),k=Object(x.b)(),T=D({variables:{userIds:null==(e=w.fields.users)||null==(n=e.value)?void 0:n.map((function(e){return e.id})),dropzoneId:j.currentDropzoneId},onError:console.error}),z=T.data;T.loading;return c.createElement(c.Fragment,null,c.createElement(p.b.Subheader,null,"Jump type"),c.createElement(b.a,{elevation:2,style:{marginBottom:16,flexShrink:1}},c.createElement(b.a.Content,null,c.createElement(I.a,{autoSelectFirst:!0,items:Object(E.uniqBy)([].concat(s()((null==z?void 0:z.allowedJumpTypes)||[]),s()((null==z?void 0:z.jumpTypes)||[])),(function(e){return e.id}))||[],selected:w.fields.jumpType.value?[w.fields.jumpType.value]:[],renderItemLabel:function(e){return e.name},isDisabled:function(e){var n;return!(null!=z&&null!=(n=z.allowedJumpTypes)&&n.map((function(e){return e.id})).includes(e.id))},onChangeSelected:function(e){var n=o()(e,1)[0];return k(x.a.forms.manifestGroup.setField(["jumpType",n]))}}),c.createElement(v.a,{type:w.fields.jumpType.error?"error":"info"},w.fields.jumpType.error||""))),c.createElement(p.b.Subheader,null,"Ticket"),c.createElement(b.a,{elevation:2,style:{width:"100%"}},c.createElement(b.a.Content,null,c.createElement(I.a,{autoSelectFirst:!0,items:(null==z?void 0:z.ticketTypes)||[],selected:w.fields.ticketType.value?[w.fields.ticketType.value]:[],renderItemLabel:function(e){return e.name},isDisabled:function(){return!1},onChangeSelected:function(e){var n=o()(e,1)[0];return k(x.a.forms.manifestGroup.setField(["ticketType",n]))}}),c.createElement(v.a,{type:w.fields.ticketType.error?"error":"info"},w.fields.ticketType.error||""),null!=w&&null!=(t=w.fields)&&null!=(l=t.ticketType)&&null!=(r=l.value)&&null!=(a=r.extras)&&a.length?c.createElement(p.b.Subheader,null,"Ticket addons"):null,c.createElement(m.a,{horizontal:!0,style:U.ticketAddons},null==w||null==(i=w.fields)||null==(u=i.ticketType)||null==(d=u.value)||null==(f=d.extras)?void 0:f.map((function(e){var n,t,l,r;return c.createElement(g.a,{selected:null==w||null==(n=w.fields)||null==(t=n.extras.value)?void 0:t.some((function(n){return n.id===e.id})),onPress:null!=w&&null!=(l=w.fields)&&null!=(r=l.extras.value)&&r.some((function(n){return n.id===e.id}))?function(){var n,t;return k(x.a.forms.manifestGroup.setField(["extras",null==w||null==(n=w.fields)||null==(t=n.extras.value)?void 0:t.filter((function(n){return n.id!==e.id}))]))}:function(){var n,t;return k(x.a.forms.manifestGroup.setField(["extras",[].concat(s()((null==w||null==(n=w.fields)||null==(t=n.extras)?void 0:t.value)||[]),[e])]))}},e.name+" ($"+e.cost+")")}))),c.createElement(v.a,{type:w.fields.extras.error?"error":"info"},w.fields.extras.error||""))),c.createElement(h.a,null),c.createElement(p.b.Subheader,null,"Group"),null==(y=w.fields)||null==(S=y.users)||null==(O=S.value)?void 0:O.map((function(e){return c.createElement(P,{dropzoneId:j.currentDropzoneId,dropzoneUserId:Number(e.id),rigId:Number(e.rigId)||void 0,exitWeight:e.exitWeight,onChangeExitWeight:function(n){var t;return k(x.a.forms.manifestGroup.setField(["users",null==(t=w.fields.users.value)?void 0:t.map((function(t){return t.id===e.id?$($({},e),{},{exitWeight:n}):t}))]))},onChangeRig:function(n){var t;return k(x.a.forms.manifestGroup.setField(["users",null==(t=w.fields.users.value)?void 0:t.map((function(t){return t.id===e.id?$($({},e),{},{rigId:Number(n.id)}):t}))]))}})})))}var U=f.a.create({fields:{flex:1},field:{marginBottom:8},ticketAddons:{marginBottom:8}})},685:function(e,n,t){e.exports=t.p+"static/media/weather.0908eb6b.png"},801:function(e,n,t){"use strict";t.r(n),t.d(n,"default",(function(){return pn}));var l,r,a=t(9),o=t.n(a),i=t(52),s=t(0),u=t(31),d=t(166),c=t(1),m=t(228),f=t(97),p=t(398),b=t(406),v=t(109),g=t(165),h=t(4),y=t.n(h),E=t(29),x=t.n(E),I=t(6),S=t.n(I),O=t(38),w=t(80),j=t(255),k=t(405),T=t(207),z=t(5),C=t(23),P=t.n(C),N=t(285),$=t(21),F=t(122),D=t(374),A=t(287),U=t(33),W=t(37),L=t(123),G=t(635),M=t(330),R=Object(W.a)(l||(l=x()(["\nquery DropzoneUsersAllowedJumpTypes(\n  $dropzoneId: Int!,\n  $userIds: [Int!]!\n) {\n  dropzone(id: $dropzoneId) {\n    id\n\n    allowedJumpTypes(userId: $userIds) {\n      id\n      name\n    }\n  }\n  jumpTypes {\n    id\n    name\n  }\n}\n\n"]))),J=Object(G.a)(R,{getPayload:function(e){var n,t;return{allowedJumpTypes:(null==e||null==(n=e.dropzone)?void 0:n.allowedJumpTypes)||[],ticketTypes:(null==e||null==(t=e.dropzone)?void 0:t.ticketTypes)||[],jumpTypes:(null==e?void 0:e.jumpTypes)||[]}}});function q(e){var n=Object(z.c)((function(e){return e.global})).currentDropzoneId,t=J({variables:{userIds:[Number(e.userId)||null].filter(Boolean),dropzoneId:Number(n)},onError:console.error}),l=t.data;t.loading;return s.createElement(s.Fragment,null,s.createElement($.b.Subheader,null,"Jump type"),s.createElement(M.a,{autoSelectFirst:!0,items:Object(L.uniqBy)([].concat(P()((null==l?void 0:l.allowedJumpTypes)||[]),P()((null==l?void 0:l.jumpTypes)||[])),(function(e){return e.id}))||[],selected:[e.value].filter(Boolean),renderItemLabel:function(e){return null==e?void 0:e.name},isDisabled:function(e){var n;return!(null!=l&&null!=(n=l.allowedJumpTypes)&&n.map((function(e){return e.id})).includes(e.id))},onChangeSelected:function(n){var t=o()(n,1)[0];return t?e.onSelect(t):null}}))}var B=Object(W.a)(r||(r=x()(["\nquery DropzoneUsersAllowedTicketTypes(\n  $dropzoneId: Int!,\n  $onlyPublicTickets: Boolean\n) {\n  dropzone(id: $dropzoneId) {\n    id\n\n    ticketTypes(isPublic: $onlyPublicTickets) {\n      id\n      name\n      cost\n      isTandem\n\n      extras {\n        id\n        cost\n        name\n      }\n    }\n  }\n}\n\n"]))),H=Object(G.a)(B,{getPayload:function(e){var n;return{ticketTypes:(null==e||null==(n=e.dropzone)?void 0:n.ticketTypes)||[]}}});function Y(e){var n=Object(z.c)((function(e){return e.global})).currentDropzoneId,t=H({variables:{dropzoneId:Number(n),onlyPublicTickets:e.onlyPublicTickets||null},onError:console.error}),l=t.data;t.loading;return s.createElement(s.Fragment,null,s.createElement($.b.Subheader,null,"Ticket"),s.createElement(M.a,{autoSelectFirst:!0,items:(null==l?void 0:l.ticketTypes)||[],selected:[e.value].filter(Boolean),renderItemLabel:function(e){return null==e?void 0:e.name},isDisabled:function(){return!1},onChangeSelected:function(n){var t=o()(n,1)[0];return t?e.onSelect(t):null}}))}var Q=t(46),_=t(647),V=t(163);function X(){var e,n,t,l,r,a,o,i,u,d,c,m,f,p,b,v,g,h,y,E,x,I,S,O,j,k,T=Object(z.b)(),C=Object(V.b)(),W=Object(z.c)((function(e){return e.forms.manifest}));s.useEffect((function(){var e;if(null!=(e=W.fields.dropzoneUser)&&e.value){var n,t,l,r,a,o,i;if(!W.fields.exitWeight.value)T(z.a.forms.manifest.setField(["exitWeight",Number((null==(l=W.fields.dropzoneUser)||null==(r=l.value)||null==(a=r.user)?void 0:a.exitWeight)||60)]));if(!W.fields.rig.value&&null!=(n=W.fields.dropzoneUser.value.user)&&null!=(t=n.rigs)&&t.length)T(z.a.forms.manifest.setField(["rig",null==(o=W.fields.dropzoneUser)||null==(i=o.value)?void 0:i.user.rigs[0]]))}}),[null==(e=W.fields)||null==(n=e.dropzoneUser)||null==(t=n.value)?void 0:t.id]);var L=null==W||null==(l=W.original)?void 0:l.id,G=Object(Q.a)(L?U.b.UpdateUserSlot:U.b.CreateUserSlot);return s.createElement(s.Fragment,null,s.createElement(q,{value:W.fields.jumpType.value,required:!0,userId:Number(null==W||null==(r=W.fields)||null==(a=r.dropzoneUser)||null==(o=a.value)||null==(i=o.user)?void 0:i.id)||null,onSelect:function(e){return T(z.a.forms.manifest.setField(["jumpType",e]))}}),s.createElement(N.a,{type:W.fields.jumpType.error?"error":"info"},W.fields.jumpType.error||""),s.createElement(Y,{value:W.fields.ticketType.value,required:!0,onlyPublicTickets:!G,onSelect:function(e){return T(z.a.forms.manifest.setField(["ticketType",e]))}}),s.createElement(N.a,{type:W.fields.ticketType.error?"error":"info"},W.fields.ticketType.error||""),null!=W&&null!=(u=W.fields)&&null!=(d=u.ticketType)&&null!=(c=d.value)&&null!=(m=c.extras)&&m.length?s.createElement($.b.Subheader,null,"Ticket addons"):null,s.createElement(w.a,{horizontal:!0,style:K.ticketAddons},null==W||null==(f=W.fields)||null==(p=f.ticketType)||null==(b=p.value)||null==(v=b.extras)?void 0:v.map((function(e){var n,t,l,r;return s.createElement(F.a,{selected:null==W||null==(n=W.fields)||null==(t=n.extras.value)?void 0:t.some((function(n){return n.id===e.id})),onPress:null!=W&&null!=(l=W.fields)&&null!=(r=l.extras.value)&&r.some((function(n){return n.id===e.id}))?function(){var n,t;return T(z.a.forms.manifest.setField(["extras",null==W||null==(n=W.fields)||null==(t=n.extras.value)?void 0:t.filter((function(n){return n.id!==e.id}))]))}:function(){var n,t;return T(z.a.forms.manifest.setField(["extras",[].concat(P()((null==W||null==(n=W.fields)||null==(t=n.extras)?void 0:t.value)||[]),[e])]))}},e.name+" ($"+e.cost+")")}))),s.createElement(N.a,{type:W.fields.extras.error?"error":"info"},W.fields.extras.error||""),s.createElement(D.a,null),W.fields.dropzoneUser?s.createElement(_.a,{value:W.fields.rig.value,userId:Number(null==(g=W.fields.dropzoneUser)||null==(h=g.value)||null==(y=h.user)?void 0:y.id),dropzoneId:Number(null==C||null==(E=C.dropzone)?void 0:E.id),onSelect:function(e){return T(z.a.forms.manifest.setField(["rig",e]))}}):null,s.createElement(N.a,{type:W.fields.rig.error?"error":"info"},W.fields.rig.error||""),s.createElement(A.a,{style:K.field,mode:"outlined",label:"Exit weight",error:!!W.fields.exitWeight.error,value:(null==(x=W.fields.exitWeight)||null==(I=x.value)?void 0:I.toString())||"",keyboardType:"numbers-and-punctuation",right:function(){return s.createElement(A.a.Affix,{text:"kg"})},onChangeText:function(e){return T(z.a.forms.manifest.setField(["exitWeight",Number(e)]))}}),s.createElement(N.a,{type:W.fields.exitWeight.error?"error":"info"},W.fields.exitWeight.error||""),null!=(S=W.fields.ticketType.value)&&S.isTandem?s.createElement(s.Fragment,null,s.createElement($.b.Subheader,null,"Passenger"),s.createElement(A.a,{style:K.field,mode:"outlined",label:"Passenger name",error:!!W.fields.passengerName.error,value:(null==(O=W.fields.passengerName)||null==(j=O.value)?void 0:j.toString())||"",onChangeText:function(e){return T(z.a.forms.manifest.setField(["passengerName",e]))}}),s.createElement(A.a,{style:K.field,mode:"outlined",label:"Passenger exit weight",error:!!W.fields.passengerExitWeight.error,value:(null==(k=W.fields.passengerExitWeight.value)?void 0:k.toString())||"",onChangeText:function(e){return T(z.a.forms.manifest.setField(["passengerExitWeight",Number(e)]))}})):null)}var Z,K=c.a.create({fields:{flex:1},field:{marginBottom:8},ticketAddons:{marginBottom:8}});function ee(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function ne(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?ee(Object(t),!0).forEach((function(n){y()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ee(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var te=Object(O.gql)(Z||(Z=x()(["\n  mutation CreateSlot(\n    $jumpTypeId: Int\n    $extraIds: [Int!]\n    $loadId: Int\n    $rigId: Int\n    $ticketTypeId: Int\n    $dropzoneUserId: Int\n    $exitWeight: Float\n    $passengerName: String\n    $passengerExitWeight: Float\n  ) {\n    createSlot(\n      input: {\n        attributes: {\n          jumpTypeId: $jumpTypeId\n          extraIds: $extraIds\n          loadId: $loadId\n          rigId: $rigId\n          ticketTypeId: $ticketTypeId\n          dropzoneUserId: $dropzoneUserId\n          exitWeight: $exitWeight\n          passengerExitWeight: $passengerExitWeight\n          passengerName: $passengerName\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      slot {\n        id\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n        exitWeight\n        load {\n          id\n          name\n          createdAt\n          dispatchAt\n          hasLanded\n          maxSlots\n          isFull\n          isOpen\n          plane {\n            id\n            name\n          }\n          gca {\n            id\n            user {\n              id\n              name\n            }\n          }\n          pilot {\n            id\n            user {\n              id\n              name\n            }\n          }\n          loadMaster {\n            id\n            user {\n              id\n              name\n            }\n          }\n          slots {\n            id\n            createdAt\n            user {\n              id\n              name\n            }\n            passengerName\n            passengerExitWeight\n            ticketType {\n              id\n              name\n              isTandem\n              altitude\n            }\n            jumpType {\n              id\n              name\n            }\n            extras {\n              id\n              name\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function le(e){var n,t,l,r,a,i,u=Object(z.b)(),d=Object(z.c)((function(e){return e.forms.manifest})),c=Object(z.c)((function(e){return e.global})),m=Object(O.useMutation)(te),f=o()(m,2),b=f[0],v=f[1],g=s.useCallback((function(){var e,n,t=!1;return null!=(e=d.fields.jumpType.value)&&e.id||(t=!0,u(z.a.forms.manifest.setFieldError(["jumpType","You must specify the type of jump"]))),null!=(n=d.fields.ticketType.value)&&n.id||(t=!0,u(z.a.forms.manifest.setFieldError(["ticketType","You must select a ticket type to manifest"]))),!t}),[JSON.stringify(d.fields)]),h=s.useCallback((function(){var n,t,l,r,a,o,i,s,c,m,f,p,v,h,y,E,x,I,O,w,j,k,T,C,P;return S.a.async((function(N){for(;;)switch(N.prev=N.next){case 0:if(g()){N.next=2;break}return N.abrupt("return");case 2:return N.prev=2,N.next=5,S.a.awrap(b({variables:ne({jumpTypeId:Number(null==(n=d.fields.jumpType.value)?void 0:n.id),extraIds:null==(t=d.fields.extras)||null==(l=t.value)?void 0:l.map((function(e){var n=e.id;return Number(n)})),loadId:Number(null==(r=d.fields.load.value)?void 0:r.id),rigId:null!=(a=d.fields.rig.value)&&a.id?Number(null==(o=d.fields.rig.value)?void 0:o.id):null,ticketTypeId:Number(null==(i=d.fields.ticketType)||null==(s=i.value)?void 0:s.id),dropzoneUserId:Number(null==(c=d.fields.dropzoneUser)||null==(m=c.value)?void 0:m.id),exitWeight:d.fields.exitWeight.value},null!=(f=d.fields.ticketType.value)&&f.isTandem?{passengerName:null==(p=d.fields.passengerName)?void 0:p.value,passengerExitWeight:null==(v=d.fields.passengerExitWeight)?void 0:v.value}:{})}));case 5:if(T=N.sent,null==(h=T.data)||null==(y=h.createSlot)||null==(E=y.fieldErrors)||E.map((function(e){var n=e.field,t=e.message;switch(n){case"jump_type":return u(z.a.forms.manifest.setFieldError(["jumpType",t]));case"load":return u(z.a.forms.manifest.setFieldError(["load",t]));case"credits":case"extras":case"extra_ids":return u(z.a.forms.manifest.setFieldError(["extras",t]));case"ticket_type":return u(z.a.forms.manifest.setFieldError(["ticketType",t]));case"rig":return u(z.a.forms.manifest.setFieldError(["rig",t]));case"dropzone_user":return u(z.a.forms.manifest.setFieldError(["dropzoneUser",t]));case"exit_weight":return u(z.a.forms.manifest.setFieldError(["exitWeight",t]))}})),null==T||null==(x=T.data)||null==(I=x.createSlot)||null==(O=I.errors)||!O.length){N.next=9;break}return N.abrupt("return",u(z.a.notifications.showSnackbar({message:null==T||null==(C=T.data)||null==(P=C.createSlot)?void 0:P.errors[0],variant:"error"})));case 9:null!=(w=T.data)&&null!=(j=w.createSlot)&&null!=(k=j.fieldErrors)&&k.length||e.onSuccess(),N.next=15;break;case 12:N.prev=12,N.t0=N.catch(2),u(z.a.notifications.showSnackbar({message:N.t0.message,variant:"error"}));case 15:case"end":return N.stop()}}),null,null,[[2,12]],Promise)}),[JSON.stringify(d.fields),b,e.onSuccess]);return s.createElement(j.a,null,s.createElement(k.a,{visible:!!e.open,style:{maxHeight:500}},s.createElement(p.a,{indeterminate:!0,visible:v.loading,color:c.theme.colors.accent}),s.createElement(k.a.Title,null,"Manifest "+(null==d||null==(n=d.fields)||null==(t=n.dropzoneUser)||null==(l=t.value)||null==(r=l.user)?void 0:r.name)+" on "+(null==(a=d.fields.load)||null==(i=a.value)?void 0:i.name)),s.createElement(k.a.ScrollArea,null,s.createElement(w.a,null,s.createElement(X,null))),s.createElement(k.a.Actions,{style:{justifyContent:"flex-end"}},s.createElement(T.a,{onPress:function(){u(z.a.forms.manifest.reset()),e.onClose()}},"Cancel"),s.createElement(T.a,{onPress:h},"Manifest"))))}var re,ae=t(2),oe=t(646),ie=t(666),se=t(480),ue=t(288),de=t(331),ce=Object(W.a)(re||(re=x()(["\n  query QueryDropzoneUsersSearch(\n    $dropzoneId: Int!\n    $search: String\n  ) {\n    dropzone(id: $dropzoneId) {\n      id\n      name\n\n      dropzoneUsers(search: $search, licensed: true) {\n        edges {\n          node {\n            id\n            role {\n              id\n              name\n            }\n            user {\n              id\n              image\n              name\n              exitWeight\n            }\n\n            availableRigs {\n              id\n              make\n              model\n              canopySize\n              serial\n\n              user {\n                id\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n"])));function me(e){var n,t,l,r,a,i,u=Object(z.c)((function(e){return e})).screens,d=Object(z.b)(),c=s.useState(""),m=o()(c,2),p=m[0],b=m[1],v=Object(z.c)((function(e){return e.global})).currentDropzoneId,g=Object(O.useQuery)(ce,{variables:{dropzoneId:Number(v),search:p}}),h=g.data,y=(g.loading,Object(V.b)().currentUser),E=Object(Q.a)(U.b.CreateUserSlot),x=Object(Q.a)(U.b.CreateUserSlotWithSelf);return s.createElement(s.Fragment,null,s.createElement(se.a,{value:p,onChangeText:b,placeholder:"Search skydivers"}),s.createElement(ae.a,{style:{height:380}},s.createElement(f.b,{contentContainerStyle:{paddingTop:16}},!(null!=h&&null!=(n=h.dropzone)&&null!=(t=n.dropzoneUsers)&&null!=(l=t.edges)&&l.length)&&s.createElement(de.a,{title:"No users",subtitle:""}),null==h||null==(r=h.dropzone)||null==(a=r.dropzoneUsers)||null==(i=a.edges)?void 0:i.map((function(e){var n,t,l,r,a;return s.createElement(s.Fragment,null,s.createElement($.b.Item,{style:{width:"100%"},key:"user-"+(null==e||null==(n=e.node)?void 0:n.id),title:null==e||null==(t=e.node)?void 0:t.user.name,description:null==e||null==(l=e.node)||null==(r=l.role)?void 0:r.name,left:function(){var n,t,l;return null!=e&&null!=(n=e.node)&&null!=(t=n.user)&&t.image?s.createElement($.a.Image,{source:{uri:null==e||null==(l=e.node)?void 0:l.user.image},style:{alignSelf:"center",marginHorizontal:12},size:32}):s.createElement($.b.Icon,{icon:"account"})},right:function(){var n;return s.createElement(ue.a,{status:null!=(n=u.manifest.selectedUsers)&&n.map((function(e){return e.id})).includes(e.node.id)?"checked":"unchecked"})},disabled:(null==e||null==(a=e.node)?void 0:a.user.id)===(null==y?void 0:y.id)&&x&&!E,onPress:function(){var n,t;d(z.a.screens.manifest.setSelected(null!=(n=u.manifest.selectedUsers)&&n.find((function(n){var t;return n.id===""+(null==e||null==(t=e.node)?void 0:t.id)}))?null==(t=u.manifest.selectedUsers)?void 0:t.filter((function(n){var t;return n.id!==""+(null==e||null==(t=e.node)?void 0:t.id)})):[].concat(P()(u.manifest.selectedUsers),[e.node])))}}),s.createElement(D.a,{style:{width:"100%"},key:"divider-"+(null==e?void 0:e.node.id)}))})))),s.createElement(T.a,{onPress:function(){d(z.a.forms.manifestGroup.setDropzoneUsers(u.manifest.selectedUsers)),e.onNext()},style:pe.button,mode:"contained"},"Next"))}var fe,pe=c.a.create({button:{width:"100%",borderRadius:16,padding:5},scrollView:{height:100}}),be=Object(O.gql)(fe||(fe=x()(["\n  mutation CreateSlot(\n    $jumpTypeId: Int\n    $extraIds: [Int!]\n    $loadId: Int\n    $ticketTypeId: Int\n    $userGroup: [SlotUser!]!,\n  ) {\n    createSlots(\n      input: {\n        attributes: {\n          jumpTypeId: $jumpTypeId\n          extraIds: $extraIds\n          loadId: $loadId\n          ticketTypeId: $ticketTypeId\n          userGroup: $userGroup,\n        }\n      }\n    ) {\n      errors\n      fieldErrors {\n        field\n        message\n      }\n      \n      load {\n        id\n        name\n        loadNumber\n        createdAt\n        dispatchAt\n        hasLanded\n        maxSlots\n        isFull\n        isOpen\n        plane {\n          id\n          name\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        loadMaster {\n          id\n          user {\n            id\n            name\n          }\n        }\n        slots {\n          id\n          createdAt\n          user {\n            id\n            name\n          }\n          passengerName\n          passengerExitWeight\n          ticketType {\n            id\n            name\n            isTandem\n            altitude\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"])));function ve(e){var n,t,l,r,a=e.open,i=Object(z.b)(),u=Object(z.c)((function(e){return e.forms.manifestGroup})),d=(Object(z.c)((function(e){return e.global})),Object(O.useMutation)(be)),c=o()(d,2),m=c[0],p=c[1],b=s.useState(0),v=o()(b,2),g=v[0],h=v[1],y=s.useCallback((function(){var e,n,t=!1;return null!=(e=u.fields.jumpType.value)&&e.id||(t=!0,i(z.a.forms.manifestGroup.setFieldError(["jumpType","You must specify the type of jump"]))),null!=(n=u.fields.ticketType.value)&&n.id||(t=!0,i(z.a.forms.manifestGroup.setFieldError(["ticketType","You must select a ticket type to manifest"]))),!t}),[JSON.stringify(u.fields)]),E=s.useCallback((function(){var n,t,l,r,a,o,s,d,c,f,p,b,v,g,h,E,x;return S.a.async((function(I){for(;;)switch(I.prev=I.next){case 0:if(y()){I.next=2;break}return I.abrupt("return");case 2:return I.prev=2,I.next=5,S.a.awrap(m({variables:{jumpTypeId:Number(null==(n=u.fields.jumpType.value)?void 0:n.id),ticketTypeId:Number(null==(t=u.fields.ticketType.value)?void 0:t.id),extraIds:null==(l=u.fields.extras)||null==(r=l.value)?void 0:r.map((function(e){var n=e.id;return Number(n)})),loadId:Number(null==(a=u.fields.load.value)?void 0:a.id),userGroup:u.fields.users.value}}));case 5:if(h=I.sent,null==(o=h.data)||null==(s=o.createSlots)||null==(d=s.fieldErrors)||d.map((function(e){var n=e.field,t=e.message;switch(n){case"jump_type":return i(z.a.forms.manifestGroup.setFieldError(["jumpType",t]));case"load":return i(z.a.forms.manifestGroup.setFieldError(["load",t]));case"credits":case"extras":case"extra_ids":return i(z.a.forms.manifestGroup.setFieldError(["extras",t]));case"ticket_type":return i(z.a.forms.manifestGroup.setFieldError(["ticketType",t]))}})),null==h||null==(c=h.data)||null==(f=c.createSlots)||null==(p=f.errors)||!p.length){I.next=9;break}return I.abrupt("return",i(z.a.notifications.showSnackbar({message:null==h||null==(E=h.data)||null==(x=E.createSlots)?void 0:x.errors[0],variant:"error"})));case 9:null!=(b=h.data)&&null!=(v=b.createSlots)&&null!=(g=v.fieldErrors)&&g.length||e.onClose(),I.next=15;break;case 12:I.prev=12,I.t0=I.catch(2),i(z.a.notifications.showSnackbar({message:I.t0.message,variant:"error"}));case 15:case"end":return I.stop()}}),null,null,[[2,12]],Promise)}),[JSON.stringify(u.fields),m,e.onSuccess]),x=s.useRef(null);s.useEffect((function(){var e,n,t;null!=(e=u.fields.ticketType)&&null!=(n=e.value)&&n.isTandem&&(null==x||null==(t=x.current)||t.snapTo(0))}),[null==(n=u.fields.ticketType)||null==(t=n.value)?void 0:t.isTandem]),s.useEffect((function(){var n,t;a?null==x||null==(n=x.current)||n.snapTo(1):(null==x||null==(t=x.current)||t.close(),e.onClose())}),[a]);s.useMemo((function(){return[0,550]}),[]);return s.createElement(j.a,null,s.createElement(k.a,{visible:!!e.open,onDismiss:e.onClose},s.createElement(ae.a,{style:{backgroundColor:"white"},testID:"manifest-group-sheet"},s.createElement(ae.a,{pointerEvents:((null==(l=u.fields.users)||null==(r=l.value)?void 0:r.length)||0)>0?void 0:"none"},s.createElement(oe.b,{defaultIndex:g,mode:"fixed",onChangeIndex:h},s.createElement(oe.a,{label:"Create group"},s.createElement(ae.a,null)),s.createElement(oe.a,{label:"Configure jump"},s.createElement(ae.a,null)))),0===g?s.createElement(ae.a,{style:ge.userListContainer},s.createElement(me,{onNext:function(){return h(1)}})):s.createElement(f.b,{contentContainerStyle:{paddingBottom:200,flexGrow:1}},s.createElement(ie.a,null),s.createElement(ae.a,{style:ge.buttonContainer},s.createElement(T.a,{onPress:E,loading:p.loading,mode:"contained",style:ge.button},"Save"))))))}var ge=c.a.create({button:{width:"100%",borderRadius:16,padding:5},buttonContainer:{paddingHorizontal:16,backgroundColor:"white"},contentContainer:{paddingHorizontal:16,paddingBottom:32},userListContainer:{height:"100%",backgroundColor:"white",width:"100%",padding:16},sheet:{elevation:3,backgroundColor:"white",flexGrow:1,height:"100%",display:"flex",flexDirection:"column",justifyContent:"center",paddingBottom:32},sheetHeader:{elevation:2,borderTopLeftRadius:15,borderTopRightRadius:15,height:30,shadowColor:"#000",shadowOffset:{width:0,height:-4},backgroundColor:"white",shadowOpacity:.22,shadowRadius:2.22}}),he=t(138),ye=t(365);function Ee(e){var n=e.hasPlanes,t=e.hasTicketTypes,l=(e.isPublic,Object(ye.a)());return s.createElement(he.b,{style:{width:"70%"}},s.createElement(he.a,{style:Se.title},"Set up dropzone"),s.createElement(he.b,{style:Se.separator,lightColor:"#eee",darkColor:"rgba(255,255,255,0.1)"}),s.createElement($.b.Item,{title:"Create dropzone",left:function(){return s.createElement($.b.Icon,{color:l.success,icon:"check"})}}),s.createElement($.b.Item,{title:"Add a plane",left:function(){return n?s.createElement($.b.Icon,{color:l.success,icon:"check"}):s.createElement($.b.Icon,{color:l.error,icon:"close"})}}),s.createElement($.b.Item,{title:"Configure jump tickets",left:function(){return t?s.createElement($.b.Icon,{color:l.success,icon:"check"}):s.createElement($.b.Icon,{color:l.error,icon:"close"})}}))}var xe,Ie,Se=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"}}),Oe=t(106),we=t(369),je=t(338),ke=t(339),Te=t(89),ze=t(371),Ce=t(785),Pe=Object(O.gql)(xe||(xe=x()(["\n  query QueryLoad($id: Int!) {\n    load(id: $id) {\n      id\n      name\n      createdAt\n      dispatchAt\n      hasLanded\n      maxSlots\n      loadNumber\n      state\n      plane {\n        id\n        name\n        maxSlots\n      }\n      gca {\n        id\n        user {\n          id\n          name\n        }\n      }\n      pilot {\n        id\n        user {\n          id\n          name\n        }\n      }\n      loadMaster {\n        id\n        user {\n          id\n          name\n        }\n      }\n      slots {\n        id\n        createdAt\n        exitWeight\n        passengerName\n        passengerExitWeight\n        \n        dropzoneUser {\n          id\n          user {\n            id\n            name\n            exitWeight\n          }\n        }\n        ticketType {\n          id\n          name\n          altitude\n          isTandem\n\n          extras {\n            id\n            name\n            cost\n          }\n        }\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),Ne=Object(O.gql)(Ie||(Ie=x()(["\n  mutation UpdateLoad(\n    $id: Int!,\n    $pilotId: Int,\n    $gcaId: Int,\n    $planeId: Int,\n    $isOpen: Boolean,\n    $loadMasterId: Int,\n    $dispatchAt: Int,\n    $hasLanded: Boolean,\n  ){\n    updateLoad(input: {\n      id: $id\n      attributes: {\n        pilotId: $pilotId,\n        gcaId: $gcaId,\n        planeId: $planeId,\n        isOpen: $isOpen,\n        loadMasterId: $loadMasterId\n        dispatchAt: $dispatchAt\n        hasLanded: $hasLanded\n      }\n    }) {\n      load {\n        id\n        name\n        createdAt\n        loadNumber\n        dispatchAt\n        hasLanded\n        maxSlots\n        state\n        plane {\n          id\n          name\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        loadMaster {\n          id\n          user {\n            id\n            name\n          }\n        }\n        slots {\n          id\n          createdAt\n          exitWeight\n\n          passengerName\n          passengerExitWeight\n\n          user {\n            id\n            name\n          }\n          ticketType {\n            id\n            name\n            altitude\n            isTandem\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),$e={open:Te.d,cancelled:Te.b,boarding_call:Te.e};function Fe(e){var n,t,l,r,a,i,u,d,c,m,f,p=Object(z.b)(),b=e.load,v=e.onPress,g=Object(O.useQuery)(Pe,{variables:{id:Number(b.id)},pollInterval:3e4}),h=g.data,E=(g.loading,g.refetch),x=Object(V.b)(),I=Object(O.useMutation)(Ne),w=o()(I,2),j=w[0],k=(w[1],s.useCallback((function(e){return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.awrap(j({variables:{id:Number(b.id),pilotId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[j,JSON.stringify(b)])),T=s.useCallback((function(e){return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.awrap(j({variables:{id:Number(b.id),planeId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[j,JSON.stringify(b)]),C=(n={},y()(n,U.a.Open,"Open"),y()(n,U.a.BoardingCall,"On call"),y()(n,U.a.Cancelled,"Cancelled"),y()(n,U.a.InFlight,"In air"),y()(n,U.a.Landed,"Landed"),n);return s.createElement(Oe.a,{testID:"load-card",style:{margin:16,borderRadius:8,opacity:["cancelled","landed"].includes(null==h||null==(t=h.load)?void 0:t.state)?.5:1},elevation:3,onPress:v},s.createElement(we.a,{style:{backgroundColor:$e[null==h||null==(l=h.load)?void 0:l.state],marginTop:-5,marginRight:-5}},C[null==h||null==(r=h.load)?void 0:r.state]||""),s.createElement(Oe.a.Title,{style:{justifyContent:"space-between"},title:"Load #"+b.loadNumber,subtitle:b.name,right:function(){var e,n;return null==h||null==(e=h.load)||!e.dispatchAt||Object(Ce.a)(new Date,null==h||null==(n=h.load)?void 0:n.dispatchAt)?null:s.createElement(he.b,{style:{marginRight:16}},s.createElement(ze.a,{end:new Date(1e3*h.load.dispatchAt)}))}}),s.createElement(Oe.a.Content,{style:We.cardContent},s.createElement(he.b,{style:{flexDirection:"row",flexWrap:"wrap"}},s.createElement(ke.a,{value:null==h||null==(a=h.load)?void 0:a.plane,small:!0,onSelect:function(e){var n,t,l,r,a;return S.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(((null==h||null==(n=h.load)||null==(t=n.slots)?void 0:t.length)||0)>(e.maxSlots||0))){o.next=5;break}a=((null==h||null==(l=h.load)||null==(r=l.slots)?void 0:r.length)||0)-(e.maxSlots||0),p(z.a.notifications.showSnackbar({message:"You need to take "+a+" people off the load to fit on this plane",variant:"warning"})),o.next=8;break;case 5:return o.next=7,S.a.awrap(T(e));case 7:E();case 8:case"end":return o.stop()}}),null,null,null,Promise)}}),s.createElement(je.a,{dropzoneId:Number(null==x||null==(i=x.dropzone)?void 0:i.id),value:null==h||null==(u=h.load)?void 0:u.pilot,onSelect:k,small:!0}),s.createElement(F.a,{mode:"outlined",icon:"parachute",style:We.smallChip,textStyle:We.smallChipText},null==h||null==(d=h.load)||null==(c=d.slots)?void 0:c.length," / ",null==h||null==(m=h.load)||null==(f=m.plane)?void 0:f.maxSlots))))}var De,Ae,Ue,We=c.a.create({cardContent:{marginVertical:8,overflow:"hidden",flexDirection:"row"},smallChip:{height:25,margin:4,alignItems:"center"},smallChipText:{fontSize:12}}),Le=t(48),Ge=t(476),Me=t(319),Re=t(370),Je=t(684),qe=t(337),Be=t(368),He=t(640),Ye=Object(O.gql)(De||(De=x()(["\n  query QueryLoad($id: Int!) {\n    load(id: $id) {\n      id\n      name\n      createdAt\n      dispatchAt\n      hasLanded\n      maxSlots\n      loadNumber\n      isFull\n      isOpen\n      plane {\n        id\n        name\n      }\n      gca {\n        id\n        user {\n          id\n          name\n        }\n      }\n      pilot {\n        id\n        user {\n          id\n          name\n        }\n      }\n      loadMaster {\n        id\n        user {\n          id\n          name\n        }\n      }\n      slots {\n        id\n        createdAt\n        exitWeight\n        passengerName\n        passengerExitWeight\n        \n        dropzoneUser {\n          id\n          user {\n            id\n            name\n            exitWeight\n          }\n        }\n        ticketType {\n          id\n          name\n          altitude\n          isTandem\n\n          extras {\n            id\n            name\n            cost\n          }\n        }\n        jumpType {\n          id\n          name\n        }\n        extras {\n          id\n          name\n        }\n      }\n    }\n  }\n"]))),Qe=Object(O.gql)(Ae||(Ae=x()(["\n  mutation UpdateLoad(\n    $id: Int!,\n    $pilotId: Int,\n    $gcaId: Int,\n    $planeId: Int,\n    $isOpen: Boolean,\n    $loadMasterId: Int,\n    $dispatchAt: Int,\n    $hasLanded: Boolean,\n  ){\n    updateLoad(input: {\n      id: $id\n      attributes: {\n        pilotId: $pilotId,\n        gcaId: $gcaId,\n        planeId: $planeId,\n        isOpen: $isOpen,\n        loadMasterId: $loadMasterId\n        dispatchAt: $dispatchAt\n        hasLanded: $hasLanded\n      }\n    }) {\n      load {\n        id\n        name\n        createdAt\n        loadNumber\n        dispatchAt\n        hasLanded\n        maxSlots\n        isFull\n        isOpen\n        plane {\n          id\n          name\n        }\n        gca {\n          id\n          user {\n            id\n            name\n          }\n        }\n        pilot {\n          id\n          user {\n            id\n            name\n          }\n        }\n        loadMaster {\n          id\n          user {\n            id\n            name\n          }\n        }\n        slots {\n          id\n          createdAt\n          exitWeight\n\n          passengerName\n          passengerExitWeight\n\n          user {\n            id\n            name\n          }\n          ticketType {\n            id\n            name\n            altitude\n            isTandem\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }\n      }\n    }\n  }\n"]))),_e=Object(O.gql)(Ue||(Ue=x()(["\nmutation DeleteSlot($id: Int!) {\n  deleteSlot(input: { id: $id }) {\n    slot {\n      id\n      load {\n        id\n        slots {\n          id\n          createdAt\n          exitWeight\n\n          passengerName\n          passengerExitWeight\n\n          user {\n            id\n            name\n          }\n          ticketType {\n            id\n            name\n            altitude\n            isTandem\n          }\n          jumpType {\n            id\n            name\n          }\n          extras {\n            id\n            name\n          }\n        }  \n      }\n    }\n  }\n}\n"])));function Ve(e){var n,t,l,r,a,i,u,d,c,m,f,b,h,y,E,x,I,j,k,C,P,N,$,F,D,A,W,L,G=Object(z.c)((function(e){return e.global})),M=Object(z.b)(),R=s.useState(!1),J=o()(R,2),q=J[0],B=J[1],H=s.useState(!1),Y=o()(H,2),_=Y[0],X=Y[1],Z=e.load,K=e.onManifest,ee=e.onManifestGroup,ne=Object(O.useQuery)(Ye,{variables:{id:Number(Z.id)}}),te=ne.data,le=ne.loading,re=ne.refetch,ae=Object(V.b)(),oe=ae.currentUser,ie=Object(O.useMutation)(Qe),se=o()(ie,2),ue=se[0],de=se[1],ce=Object(O.useMutation)(_e),me=o()(ce,2),fe=me[0],pe=(me[1],s.useCallback((function(e){var n,t,l;return S.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,S.a.awrap(fe({variables:{id:Number(e.id)}}));case 3:null!=(l=r.sent)&&null!=(n=l.data)&&null!=(t=n.deleteSlot)&&t.errors&&M(z.a.notifications.showSnackbar({message:l.data.deleteSlot.errors[0],variant:"error"})),r.next=9;break;case 7:r.prev=7,r.t0=r.catch(0);case 9:case"end":return r.stop()}}),null,null,[[0,7]],Promise)}),[ue,JSON.stringify(Z)])),be=s.useCallback((function(e){return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.awrap(ue({variables:{id:Number(Z.id),pilotId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[ue,JSON.stringify(Z)]),ve=s.useCallback((function(e){return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.awrap(ue({variables:{id:Number(Z.id),gcaId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[ue,JSON.stringify(Z)]),ge=s.useCallback((function(e){return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.awrap(ue({variables:{id:Number(Z.id),planeId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[ue,JSON.stringify(Z)]),ye=s.useCallback((function(e){return S.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,S.a.awrap(ue({variables:{id:Number(Z.id),loadMasterId:Number(e.id)}}));case 3:n.next=7;break;case 5:n.prev=5,n.t0=n.catch(0);case 7:case"end":return n.stop()}}),null,null,[[0,5]],Promise)}),[ue,JSON.stringify(Z)]),Ee=s.useCallback((function(e){var n;return S.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e?Object(Re.a)(new Date,e).getTime()/1e3:null,t.prev=1,t.next=4,S.a.awrap(ue({variables:{id:Number(Z.id),dispatchAt:n?Math.ceil(n):null}}));case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:case"end":return t.stop()}}),null,null,[[1,6]],Promise)}),[ue,JSON.stringify(Z)]),xe=s.useCallback((function(){return S.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.a.awrap(ue({variables:{id:Number(Z.id),hasLanded:!0}}));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),null,null,[[0,5]],Promise)}),[ue,JSON.stringify(Z)]),Ie=Object(Q.a)(U.b.UpdateLoad),Se=Object(Q.a)(U.b.UpdateSlot),we=Object(Q.a)(U.b.UpdateUserSlot),Te=Object(Q.a)(U.b.DeleteSlot),ze=Object(Q.a)(U.b.DeleteUserSlot),Ce=Object(Q.a)(U.b.CreateSlot),Pe=Object(Q.a)(U.b.CreateUserSlot),Ne=Object(Q.a)(U.b.CreateUserSlotWithSelf),$e=Ce&&(null==te||null==(n=te.load)?void 0:n.isOpen)&&!(null!=te&&null!=(t=te.load)&&t.isFull);s.useEffect((function(){var e,n;null!=te&&null!=(e=te.load)&&e.maxSlots&&(null==te||null==(n=te.load)?void 0:n.maxSlots)<5&&!q&&B(!0)}),[null==te||null==(l=te.load)?void 0:l.maxSlots]);var Fe=(Pe||Ne)&&!(null!=te&&null!=(r=te.load)&&r.hasLanded)&&(!(null!=te&&null!=(a=te.load)&&a.dispatchAt)||(null==te?void 0:te.load.dispatchAt)>(new Date).getTime()/1e3);return s.createElement(Oe.a,{testID:"load-card",style:{margin:16,opacity:null!=te&&null!=(i=te.load)&&i.hasLanded?.5:1},elevation:3},s.createElement(Oe.a.Title,{style:{justifyContent:"space-between"},title:s.createElement(he.b,{style:{width:"100%",flex:1,flexDirection:"row",alignItems:"center",justifyContent:"space-between"}},s.createElement(Le.a,null,"Load "+((null==te||null==(u=te.load)?void 0:u.loadNumber)||0)),s.createElement(he.b,{style:{flexGrow:1}}),Fe&&s.createElement(g.a,{icon:"account-group",testID:"manifest-group-button",onPress:function(){M(z.a.forms.manifestGroup.reset()),M(z.a.forms.manifestGroup.setField(["load",Z])),Ne&&!Pe&&(M(z.a.screens.manifest.setSelected([oe])),M(z.a.forms.manifestGroup.setDropzoneUsers([oe]))),ee&&ee()}})),subtitle:Z.name}),s.createElement(p.a,{visible:le||de.loading,color:G.theme.colors.accent}),s.createElement(Oe.a.Content,{style:{marginVertical:8,height:q?void 0:300,overflow:"hidden"}},s.createElement(he.b,{style:{flexDirection:"row"}},s.createElement(w.a,{horizontal:!0,showsHorizontalScrollIndicator:!1},s.createElement(ke.a,{value:null==te||null==(d=te.load)?void 0:d.plane,onSelect:function(e){var n,t,l,r,a;return S.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:if(!(((null==te||null==(n=te.load)||null==(t=n.slots)?void 0:t.length)||0)>(e.maxSlots||0))){o.next=5;break}a=((null==te||null==(l=te.load)||null==(r=l.slots)?void 0:r.length)||0)-(e.maxSlots||0),M(z.a.notifications.showSnackbar({message:"You need to take "+a+" people off the load to fit on this plane",variant:"warning"})),o.next=8;break;case 5:return o.next=7,S.a.awrap(ge(e));case 7:re();case 8:case"end":return o.stop()}}),null,null,null,Promise)}}),s.createElement(qe.b,{dropzoneId:Number(null==ae||null==(c=ae.dropzone)?void 0:c.id),value:null==te||null==(m=te.load)?void 0:m.gca,onSelect:ve}),s.createElement(je.a,{dropzoneId:Number(null==ae||null==(f=ae.dropzone)?void 0:f.id),value:null==te||null==(b=te.load)?void 0:b.pilot,onSelect:be}),s.createElement(Be.a,{value:null==te||null==(h=te.load)?void 0:h.loadMaster,slots:(null==te?void 0:te.load.slots)||[],onSelect:ye}))),s.createElement(Ge.a,null,s.createElement(Ge.a.Header,{style:{width:"100%"}},s.createElement(Ge.a.Title,null,"Name"),s.createElement(Ge.a.Title,{numeric:!0},"Jump type"),s.createElement(Ge.a.Title,{numeric:!0},"Altitude")),null==te||null==(y=te.load)||null==(E=y.slots)?void 0:E.map((function(n){var t,l,r,a,o,i,u,d,c=null==te||null==(t=te.load)||null==(l=t.slots)?void 0:l.filter((function(e){var t=e.groupNumber;return t&&t===n.groupNumber})),m=(null==n||null==(r=n.user)?void 0:r.id)===(null==oe?void 0:oe.id);return s.createElement(He.a,{disabled:m&&!Te||!m&&!ze,key:"slot-"+n.id,rightAction:{label:"Delete",backgroundColor:"red",onPress:function(){return pe(n)}}},s.createElement(Ge.a.Row,{testID:"slot-row",disabled:!(null==te||null==(a=te.load)||!a.hasLanded),onPress:function(){var t;(null==(t=n.user)?void 0:t.id)===(null==oe?void 0:oe.id)?Se&&(null!=c&&c.length?e.onSlotGroupPress(c):e.onSlotPress(n)):we&&(null!=c&&c.length?e.onSlotGroupPress(c):e.onSlotPress(n))},pointerEvents:"none"},s.createElement(Ge.a.Cell,null,s.createElement(Me.a,{style:Ze.slotText},null==n||null==(o=n.dropzoneUser)||null==(i=o.user)?void 0:i.name)),s.createElement(Ge.a.Cell,{numeric:!0},s.createElement(Me.a,{style:Ze.slotText},null==n||null==(u=n.jumpType)?void 0:u.name)),s.createElement(Ge.a.Cell,{numeric:!0},s.createElement(Me.a,{style:Ze.slotText},((null==n||null==(d=n.ticketType)?void 0:d.altitude)||14e3)/1e3,"k"))))})),Array.from({length:((null==te||null==(x=te.load)?void 0:x.maxSlots)||0)-((null==te||null==(I=te.load)||null==(j=I.slots)?void 0:j.length)||0)},(function(e,n){return n})).map((function(e){return s.createElement(Ge.a.Row,{key:Z.id+"-empty-slot-"+e,testID:"slot-row"},s.createElement(Ge.a.Cell,null,s.createElement(Me.a,{style:Ze.slotText},"- Available -")),s.createElement(Ge.a.Cell,{numeric:!0},"-"),s.createElement(Ge.a.Cell,{numeric:!0},"-"))})))),!(null==te||null==(k=te.load)||!k.dispatchAt)&&(null==te||null==(C=te.load)?void 0:C.dispatchAt)>(new Date).getTime()/1e3&&s.createElement(he.b,{style:{flex:1,backgroundColor:"black",padding:8}},s.createElement(Me.a,{style:{color:"#FFFFFF"}},"Take-off in "+Object(Je.a)(new Date,1e3*(null==te||null==(P=te.load)?void 0:P.dispatchAt))+" min")),s.createElement(Oe.a.Actions,null,null!=te&&null!=(N=te.load)&&N.maxSlots&&(null==te||null==($=te.load)?void 0:$.maxSlots)<5?null:s.createElement(T.a,{onPress:function(){return B(!q)},testID:q?"show-less":"show-more"},q?"Show less":"Show more"),s.createElement(he.b,{style:{flexGrow:1}}),!Ie||null!=te&&null!=(F=te.load)&&F.hasLanded?null:null!=te&&null!=(D=te.load)&&D.dispatchAt?s.createElement(T.a,{mode:"outlined",onPress:function(){return Ee(null)},testID:"dispatch-cancel"},"Cancel"):s.createElement(v.a,{onDismiss:function(){return X(!1)},visible:_,anchor:s.createElement(T.a,{mode:"outlined",onPress:function(){return X(!0)},testID:"dispatch-button"},"Dispatch")},s.createElement(v.a.Item,{testID:"dispatch-call",onPress:function(){X(!1),Ee(20)},title:"20 minute call"}),s.createElement(v.a.Item,{testID:"dispatch-call",onPress:function(){X(!1),Ee(15)},title:"15 minute call"}),s.createElement(v.a.Item,{testID:"dispatch-call",onPress:function(){X(!1),Ee(10)},title:"10 minute call"}),s.createElement(v.a.Item,{onPress:function(){X(!1),Ee(5)},title:"5 minute call"})),null!=te&&null!=(A=te.load)&&A.hasLanded?null:null!=te&&null!=(W=te.load)&&W.dispatchAt&&(null==te?void 0:te.load.dispatchAt)<(new Date).getTime()/1e3&&Ie?s.createElement(T.a,{style:{marginLeft:8},mode:"contained",onPress:function(){var e,n,t,l;return null!=te&&null!=(e=te.load)&&null!=(n=e.loadMaster)&&n.id?null!=te&&null!=(t=te.load)&&null!=(l=t.pilot)&&l.id?void xe():M(z.a.notifications.showSnackbar({message:"You must select a pilot before this load can be finalized",variant:"warning"})):M(z.a.notifications.showSnackbar({message:"You must select a load master before this load can be finalized",variant:"warning"}))}},"Mark as landed"):s.createElement(T.a,{style:{marginLeft:8},mode:"contained",testID:"manifest-button",onPress:function(){return K()},disabled:!$e||Boolean((null==te||null==(L=te.load)?void 0:L.dispatchAt)&&te.load.dispatchAt<(new Date).getTime()/1e3)},"Manifest")))}var Xe,Ze=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center",marginVertical:8},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},slotText:{fontSize:12},fab:{position:"absolute",margin:16,right:0,bottom:0}}),Ke=t(634),en=t(665),nn=t(633),tn=Object(O.gql)(Xe||(Xe=x()(["\n  mutation CreateLoad(\n    $name: String,\n    $pilotId: Int,\n    $gcaId: Int,\n    $maxSlots: Int!,\n    $planeId: Int,\n    $isOpen: Boolean,\n  ){\n    createLoad(input: {\n      attributes: {\n        name: $name,\n        pilotId: $pilotId,\n        gcaId: $gcaId,\n        maxSlots: $maxSlots,\n        planeId: $planeId,\n        isOpen: $isOpen,\n      }\n    }) {\n      load {\n        id\n        name\n        pilot {\n          id\n          user {\n            id \n            name\n          }\n        }\n        gca {\n          id\n          user {\n            id \n            name\n          }\n        }\n        maxSlots\n        isOpen\n      }\n      fieldErrors {\n        field,\n        message\n      }\n      errors\n    }\n  }\n"])));function ln(e){var n=e.open,t=e.onClose,l=e.onSuccess,r=Object(z.c)((function(e){return e.forms.load})),a=Object(z.c)((function(e){return e.global})).currentDropzoneId,i=Object(z.b)(),u=Object(O.useMutation)(tn),d=o()(u,2),c=d[0],m=d[1],f=s.useCallback((function(){var e=!1;return r.fields.maxSlots.value<1&&(e=!0,i(z.a.forms.load.setFieldError(["maxSlots","Please specify amount of allowed jumpers"]))),r.fields.plane.value||(e=!0,i(z.a.forms.load.setFieldError(["plane","What plane is flying this load?"]))),r.fields.gca.value||(e=!0,i(z.a.forms.load.setFieldError(["gca","You must have a GCA for this load"]))),!e}),[JSON.stringify(r.fields),i]),p=s.useCallback((function(){var e,n,t,o,s,u,d,m,p,b,v,g,h,y,E,x,I,O,w,j,k,T,C,P,N;return S.a.async((function($){for(;;)switch($.prev=$.next){case 0:if(e=r.fields,n=e.name,t=e.gca,e.loadMaster,o=e.plane,s=e.maxSlots,u=e.pilot,d=e.isOpen,!f()){$.next=15;break}return $.prev=2,$.next=5,S.a.awrap(c({variables:{dropzoneId:a,name:n.value,maxSlots:s.value,planeId:null!=(m=o.value)&&m.id?Number(null==(p=o.value)?void 0:p.id):null,pilotId:null!=(b=u.value)&&b.id?Number(null==(v=u.value)?void 0:v.id):null,gcaId:null!=(g=t.value)&&g.id?Number(null==(h=t.value)?void 0:h.id):null,isOpen:!!d.value}}));case 5:if(T=$.sent,null==(y=T.data)||null==(E=y.createLoad)||null==(x=E.fieldErrors)||x.map((function(e){var n=e.field,t=e.message;switch(n){case"name":return i(z.a.forms.load.setFieldError(["name",t]));case"maxSlots":return i(z.a.forms.load.setFieldError(["maxSlots",t]));case"plane":return i(z.a.forms.load.setFieldError(["plane",t]));case"gca":return i(z.a.forms.load.setFieldError(["gca",t]));case"is_open":return i(z.a.forms.load.setFieldError(["isOpen",t]));case"pilot":return i(z.a.forms.load.setFieldError(["pilot",t]))}})),null==T||null==(I=T.data)||null==(O=I.createLoad)||null==(w=O.errors)||!w.length){$.next=9;break}return $.abrupt("return",i(Ke.a.showSnackbar({message:T.data.createLoad.errors[0],variant:"error"})));case 9:null!=(j=T.data)&&null!=(k=j.createLoad)&&k.load&&(N=T.data.createLoad.load,i(Ke.a.showSnackbar({message:"Load "+N.name+" created",variant:"success"})),null!=(C=T.data)&&null!=(P=C.createLoad)&&P.fieldErrors||(l(T.data.createLoad.load),i(z.a.forms.load.reset()))),$.next=15;break;case 12:$.prev=12,$.t0=$.catch(2),i(Ke.a.showSnackbar({message:$.t0.message,variant:"error"}));case 15:case"end":return $.stop()}}),null,null,[[2,12]],Promise)}),[JSON.stringify(r.fields),i,c]);return s.createElement(nn.a,{open:n,onClose:t,buttonAction:p,buttonLabel:"Create",snapPoints:["30%",650],loading:m.loading,title:"New Load"},s.createElement(en.a,null))}var rn=t(621),an=t(340),on=t(30),sn=t(685),un=t.n(sn);function dn(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);n&&(l=l.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,l)}return t}function cn(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?dn(Object(t),!0).forEach((function(n){y()(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):dn(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function mn(){var e,n,t=Object(V.b)().dropzone,l=Object(z.b)(),r=(null==t||null==(e=t.currentConditions)?void 0:e.jumpRun)||0,a=Object(Q.a)(U.b.UpdateWeatherConditions);return s.createElement(Oe.a,{style:fn.card,onPress:function(){return a?l(z.a.forms.weather.setOpen(t.currentConditions)):null}},s.createElement(an.a,{source:un.a,style:cn({},c.a.absoluteFillObject),resizeMode:"cover"},s.createElement(Oe.a.Content,null,s.createElement(ae.a,{style:fn.windboard},s.createElement(ae.a,{style:fn.row},s.createElement(ae.a,{style:fn.cell},s.createElement(on.a,{style:[fn.header,{flex:1/3}]},"Jump run"),s.createElement(ae.a,{style:{flex:2/3,flexDirection:"row"}},s.createElement(on.a,{style:fn.header},r),s.createElement(rn.a,{name:"long-arrow-up",size:14,style:{transform:[{rotate:r+"deg"}],marginLeft:8}})))),null,s.createElement(ae.a,{style:fn.row},s.createElement(ae.a,{style:fn.cell},s.createElement(on.a,{style:fn.header},"Altitude")),s.createElement(ae.a,{style:fn.cell},s.createElement(on.a,{style:fn.header},"Wind")),s.createElement(ae.a,{style:fn.cell},s.createElement(on.a,{style:fn.header},"Direction"))),Object(L.orderBy)((null==t||null==(n=t.currentConditions)?void 0:n.winds)||[],(function(e){return Number(e.altitude)}),"desc").map((function(e){var n=e.speed,t=e.direction,l=e.altitude;return s.createElement(ae.a,{style:fn.row},s.createElement(ae.a,{style:fn.cell},s.createElement(on.a,{style:fn.value},l)),s.createElement(ae.a,{style:fn.cell},s.createElement(on.a,{style:fn.value},n)),s.createElement(ae.a,{style:[fn.cell,{justifyContent:"center"}]},s.createElement(on.a,{style:fn.value},t),s.createElement(rn.a,{name:"long-arrow-down",size:14,style:t&&/\d+/.test(t)&&Number(t)<361?{transform:[{rotate:t+"deg"}],marginLeft:4}:{marginLeft:4}})))}))))))}var fn=c.a.create({card:{flexGrow:1,borderRadius:10,marginBottom:30,marginHorizontal:16,height:200,overflow:"hidden"},label:{color:"white",fontWeight:"bold"},value:{color:"#555555"},row:{alignItems:"center",justifyContent:"space-evenly",height:20,flexGrow:1,flexDirection:"row"},cell:{flex:1,color:"white",flexDirection:"row"},header:{fontWeight:"bold",color:"#222222"},windboard:{marginTop:40,maxWidth:400,flex:1,height:"100%",flexDirection:"column"}});function pn(){var e,n,t,l=Object(z.c)((function(e){return e.global})),r=Object(z.c)((function(e){return e.forms})),a=Object(z.c)((function(e){return e.screens.manifest})),c=Object(z.b)(),h=s.useState(!1),y=o()(h,2),E=y[0],x=y[1],I=Object(V.b)(),S=I.dropzone,O=I.currentUser,w=I.loading,j=I.refetch,k=I.fetchMore,T=Object(i.useNavigation)(),C=Object(i.useIsFocused)();s.useEffect((function(){C&&j()}),[C]);var P=!(null==S||null==(e=S.planes)||!e.length),N=!(null==S||null==(n=S.ticketTypes)||!n.length),$=!(null==S||!S.isPublic),F=P&&N;s.useEffect((function(){var e,n,t,r;null!=S&&S.primaryColor&&(null==S?void 0:S.primaryColor)!==(null==(e=l.theme)||null==(n=e.colors)?void 0:n.primary)&&c(z.a.global.setPrimaryColor(S.primaryColor)),null!=S&&S.secondaryColor&&(null==S?void 0:S.secondaryColor)!==(null==(t=l.theme)||null==(r=t.colors)?void 0:r.accent)&&c(z.a.global.setPrimaryColor(S.secondaryColor))}),[null==S?void 0:S.primaryColor,null==S?void 0:S.secondaryColor]);var D=Object(Q.a)(U.b.CreateLoad),A=s.useCallback((function(e){return O.hasLicense?O.hasMembership?O.hasRigInspection?O.hasReserveInDate?O.hasExitWeight?O.hasCredits?(c(z.a.forms.manifest.setOpen(!0)),c(z.a.forms.manifest.setField(["dropzoneUser",O])),void c(z.a.forms.manifest.setField(["load",e]))):c(z.a.notifications.showSnackbar({message:"You have no credits on your account",variant:"warning"})):c(z.a.notifications.showSnackbar({message:"Update your exit weight on your profile before manifesting",variant:"warning"})):c(z.a.notifications.showSnackbar({message:"Your rig needs a reserve repack",variant:"warning"})):c(z.a.notifications.showSnackbar({message:"Your rig needs to be inspected before manifesting",variant:"warning"})):c(z.a.notifications.showSnackbar({message:"Your membership is out of date",variant:"warning"})):c(z.a.notifications.showSnackbar({message:"You need to select a license on your user profile",variant:"warning"}))}),[JSON.stringify(null==S?void 0:S.currentUser)]),W=Object(m.a)().width,L=Math.floor(W/400)||1;return s.createElement(s.Fragment,null,s.createElement(p.a,{visible:w,indeterminate:!0,color:l.theme.colors.accent}),s.createElement(he.b,{style:bn.container},!w&&(F?s.createElement(he.b,{style:{width:"100%",flex:1,height:u.a.get("window").height}},s.createElement(f.a,{ListHeaderComponent:function(){return s.createElement(mn,null)},ListEmptyComponent:function(){return s.createElement(de.a,{title:"No loads so far today",subtitle:"How's the weather?"})},testID:"loads",keyExtractor:function(e){var n;return"load-"+(null==e||null==(n=e.node)?void 0:n.id)},key:"loads-columns-"+L,style:{flex:1,paddingTop:35,height:u.a.get("window").height},contentContainerStyle:{flexGrow:1,paddingBottom:100},numColumns:L,data:(null==S||null==(t=S.loads)?void 0:t.edges)||[],refreshControl:s.createElement(d.a,{refreshing:w,onRefresh:function(){return k({})}}),renderItem:function(e){var n=e.item;e.index;return"list"===a.display?s.createElement(Ve,{key:"load-"+n.node.id,load:n.node,onSlotPress:function(e){c(z.a.forms.manifest.setOpen(e)),c(z.a.forms.manifest.setField(["load",n.node]))},onSlotGroupPress:function(e){c(z.a.forms.manifestGroup.reset()),c(z.a.forms.manifestGroup.setFromSlots(e)),c(z.a.forms.manifestGroup.setField(["load",n.node])),T.navigate("ManifestGroupScreen")},onManifest:function(){A(n.node)},onManifestGroup:function(){c(z.a.forms.manifestGroup.reset()),c(z.a.forms.manifestGroup.setOpen(!0)),c(z.a.forms.manifestGroup.setField(["load",n.node]))}}):s.createElement(Fe,{key:"load-"+n.node.id,load:n.node,onPress:function(){return T.navigate("LoadScreen",{load:n.node})}})}})):s.createElement(Ee,{hasPlanes:P,hasTicketTypes:N,isPublic:$})),D&&F&&s.createElement(b.a,{style:bn.fab,small:!0,icon:"plus",onPress:function(){return c(z.a.forms.load.setOpen(!0))},label:"New load"})),s.createElement(he.b,{style:bn.header},s.createElement(v.a,{anchor:s.createElement(g.a,{icon:"cog-outline",onPress:function(){return x(!0)}}),visible:E,onDismiss:function(){return x(!1)}},s.createElement(v.a.Item,{title:"Show expanded cards",titleStyle:{fontWeight:"cards"===a.display?"normal":"bold"},onPress:function(){c(z.a.screens.manifest.setDisplayStyle("list")),x(!1)}}),s.createElement(v.a.Item,{title:"Show compact cards",titleStyle:{fontWeight:"list"===a.display?"normal":"bold"},onPress:function(){c(z.a.screens.manifest.setDisplayStyle("cards")),x(!1)}}))),s.createElement(le,{open:r.manifest.open,onClose:function(){return c(z.a.forms.manifest.setOpen(!1))},onSuccess:function(){return c(z.a.forms.manifest.setOpen(!1))}}),s.createElement(ve,{open:r.manifestGroup.open,onClose:function(){return c(z.a.forms.manifestGroup.setOpen(!1))},onSuccess:function(){return c(z.a.forms.manifestGroup.setOpen(!1))}}),s.createElement(ln,{onSuccess:function(){c(z.a.forms.load.setOpen(!1)),j()},open:r.load.open,onClose:function(){return c(z.a.forms.load.setOpen(!1))}}))}var bn=c.a.create({container:{flex:1,alignItems:"center",justifyContent:"center"},title:{fontSize:20,fontWeight:"bold"},separator:{marginVertical:30,height:1,width:"80%"},fab:{position:"absolute",margin:16,right:0,bottom:0},header:{alignItems:"flex-start",justifyContent:"flex-end",flexDirection:"row",padding:0,width:"100%",position:"absolute",top:0,backgroundColor:"transparent"}})}}]);
//# sourceMappingURL=7.6e323d5e.chunk.js.map